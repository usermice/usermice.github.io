<!doctype html><html lang=zh-CN data-theme=light><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.125.4"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Install Redis Cluster"><meta itemprop=description content="Install-Redis-Cluster"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="http://localhost:1313/imgs/s2-1.jpg"><meta itemprop=keywords content="Redis,Databases"><meta property="og:type" content="article"><meta property="og:title" content="Install Redis Cluster"><meta property="og:description" content="Install-Redis-Cluster"><meta property="og:image" content="/imgs/s2-1.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="http://localhost:1313/system/linux/nosql/install-redis-cluster/"><meta property="og:site_name" content="二哥"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="二哥"><meta property="article:published_time" content="2022-04-30 20:57:45 +0800 CST"><meta property="article:modified_time" content="2022-11-15 20:57:45 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"install-redis-cluster","permalink":"http://localhost:1313/system/linux/nosql/install-redis-cluster/","title":"Install Redis Cluster","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Install Redis Cluster - 二哥</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>二哥</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>Linux、Kubernetes、Docker、Python、CI/CD、Jenkins、Mysql、Nginx、Gitlab、Ansible、Zabbix</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-Home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-th hvr-icon"></i>分类</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>0</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-tools"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-tools hvr-icon"></i>工具</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>站点示例</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-Commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#部署redis主从模式但台服务器需要修改端口以及配置文件>部署<code>Redis</code>主从模式，但台服务器需要修改端口以及配置文件</a></li><li><a href=#部署redis-cluster模式即集群模式mark集群模式最少6个节点mark>部署<code>Redis Cluster</code>模式(即：集群模式)<mark>集群模式最少6个节点</mark></a><ul><li><a href=#docker部署redis集群><code>docker</code>部署<code>Redis</code>集群</a></li><li><a href=#redis-50以下版本ruby方式安装redis集群><code>Redis 5.0</code>以下版本<code>Ruby</code>方式安装<code>Redis</code>集群</a><ul><li><a href=#安装ruby>安装<code>Ruby</code></a></li><li><a href=#拷贝redis-tribrb到集群根目录>拷贝<code>redis-trib.rb</code>到集群根目录</a></li></ul></li></ul></li><li><a href=#redis-sentinel模式即哨兵模式><code>Redis Sentinel</code>模式(即:哨兵模式)</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=二哥 src=/imgs/img-lazy-loading.gif data-src=/imgs/s2-1.jpg><p class=site-author-name itemprop=name>二哥</p><div class=site-description itemprop=description>The man who has made up his mind to win will never say impossible – Napoleon Bonaparte</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>0</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>52</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>149</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=qq%e5%8f%b7 title="QQ → qq号" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-qq fa-fw hvr-icon"></i>
QQ
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/lisenhui title="知乎 → https://www.zhihu.com/people/lisenhui" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=qq@qq.com title="E-Mail → qq@qq.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://weibo.com/yourname title="Weibo → https://weibo.com/yourname" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-weibo fa-fw hvr-icon"></i>
Weibo
</a></span><span class=links-of-social-item><a href="https://www.youtube.com/watch?v=RgKAFK5djSk" title="Youtube → https://www.youtube.com/watch?v=RgKAFK5djSk" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
Youtube
</a></span><span class=links-of-social-item><a href=https://github.com/elkan1788 title="Github → https://github.com/elkan1788" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/hugo-next rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=http://localhost:1313/system/linux/nosql/install-redis-cluster/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/s2-1.jpg"><meta itemprop=name content="二哥"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="二哥"><meta itemprop=description content="The man who has made up his mind to win will never say impossible – Napoleon Bonaparte"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Install Redis Cluster"><meta itemprop=description content="Install-Redis-Cluster"></span><header class=post-header><h1 class=post-title itemprop="name headline">Install Redis Cluster
<a href=https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name/System/Linux/Nosql/Install-Redis-Cluster.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2022-04-30 20:57:45 +0800 CST" itemprop="dateCreated datePublished" datetime="2022-04-30 20:57:45 +0800 CST">2022-04-30
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2022-11-15T20:57:45+08:00 itemprop=dateModified datetime=2022-11-15T20:57:45+08:00>2022-11-15</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/redis itemprop=url rel=index><span itemprop=name>Redis</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2749</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>6分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/system/linux/nosql/install-redis-cluster/><i class="fa fa-sync fa-spin"></i>
</span></span><span class=post-meta-item title><span class=post-meta-item-icon><i class="far fa-comments"></i>
</span><span class=post-meta-item-text title=评论>评论：
</span><span id=comments-count class=waline-comment-count data-path=/system/linux/nosql/install-redis-cluster/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=部署redis主从模式但台服务器需要修改端口以及配置文件>部署<code>Redis</code>主从模式，但台服务器需要修改端口以及配置文件
<a class=header-anchor href=#%e9%83%a8%e7%bd%b2redis%e4%b8%bb%e4%bb%8e%e6%a8%a1%e5%bc%8f%e4%bd%86%e5%8f%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e9%9c%80%e8%a6%81%e4%bf%ae%e6%94%b9%e7%ab%af%e5%8f%a3%e4%bb%a5%e5%8f%8a%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h2><div class="note info"><ul><li><ol><li><font color=red>主节点</font><code>.conf</code><font color=red>配置文件</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>daemonize yes  	<span style=color:#75715e># redis后台运行</span>
</span></span><span style=display:flex><span>pidfile /usr/local/redis/logs/redis_6379.pid  	<span style=color:#75715e># Redis的pid文件存放位置</span>
</span></span><span style=display:flex><span>logfile /usr/local/redis/logs/redis_6379.log  	<span style=color:#75715e># Redis的日志文件存放位置</span>
</span></span><span style=display:flex><span>port <span style=color:#ae81ff>6379</span>  	<span style=color:#75715e># 端口号</span>
</span></span><span style=display:flex><span>bind 192.168.176.131  	<span style=color:#75715e># 最好是本机IP</span>
</span></span><span style=display:flex><span>timeout <span style=color:#ae81ff>300</span>  	<span style=color:#75715e># 超时时间300秒                                        </span>
</span></span><span style=display:flex><span>databases <span style=color:#ae81ff>8</span>  	<span style=color:#75715e># 缓存库的个数 </span>
</span></span><span style=display:flex><span>dbfilename dump-16379.db  	<span style=color:#75715e># 将数据库转储到的文件名</span>
</span></span><span style=display:flex><span>dir ./  	<span style=color:#75715e># 数据存放目录</span>
</span></span><span style=display:flex><span>masterauth password  	<span style=color:#75715e># 主库密码</span>
</span></span><span style=display:flex><span>requirepass password  	<span style=color:#75715e># 连接密码</span>
</span></span></code></pre></div></blockquote><ul><li><ol start=2><li><font color=red>从节点</font><code>.conf</code><font color=red>配置文件，第二台从节点修改：</font><code>bind</code><font color=red>为自己服务器本身</font><code>ip</code></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>daemonize yes  	<span style=color:#75715e># redis后台运行</span>
</span></span><span style=display:flex><span>pidfile /usr/local/redis/logs/redis_6370.pid  	<span style=color:#75715e># 不同实例修改为对应pid文件</span>
</span></span><span style=display:flex><span>logfile /usr/local/redis/logs/redis_6379.log
</span></span><span style=display:flex><span>port <span style=color:#ae81ff>6379</span>
</span></span><span style=display:flex><span>bind 192.168.176.132
</span></span><span style=display:flex><span>timeout <span style=color:#ae81ff>300</span>
</span></span><span style=display:flex><span>databases <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>dbfilename dump-26379.db
</span></span><span style=display:flex><span>dir ./  	<span style=color:#75715e># 数据存放目录</span>
</span></span><span style=display:flex><span>masterauth <span style=color:#ae81ff>123456</span>  	<span style=color:#75715e># 填写主库密码</span>
</span></span><span style=display:flex><span>requirepass <span style=color:#ae81ff>123456</span>  	<span style=color:#75715e># 连接密码</span>
</span></span><span style=display:flex><span>slaveof 192.168.176.131 <span style=color:#ae81ff>6379</span>  	<span style=color:#75715e># 连接的主库IP和端口号</span>
</span></span></code></pre></div></blockquote></div><h2 id=部署redis-cluster模式即集群模式mark集群模式最少6个节点mark>部署<code>Redis Cluster</code>模式(即：集群模式)<mark>集群模式最少6个节点</mark>
<a class=header-anchor href=#%e9%83%a8%e7%bd%b2redis-cluster%e6%a8%a1%e5%bc%8f%e5%8d%b3%e9%9b%86%e7%be%a4%e6%a8%a1%e5%bc%8fmark%e9%9b%86%e7%be%a4%e6%a8%a1%e5%bc%8f%e6%9c%80%e5%b0%916%e4%b8%aa%e8%8a%82%e7%82%b9mark></a></h2><div class="note info"><ul><li><ol><li><font color=red>修改配置文件</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>dir /usr/local/redis-cluster/data/redis-6379  	<span style=color:#75715e># 修改为对应实例数据存放目录</span>
</span></span><span style=display:flex><span>pidfile /usr/local/redis-cluster/logs/redis_6379.pid  	<span style=color:#75715e># 修改为对应实例：Pid</span>
</span></span><span style=display:flex><span>logfile /usr/local/redis-cluster/logs/redis_6379.log  	<span style=color:#75715e># 修改为对应实例 </span>
</span></span><span style=display:flex><span>port <span style=color:#ae81ff>6379</span>  	<span style=color:#75715e># 端口号</span>
</span></span><span style=display:flex><span>cluster-enabled yes  	<span style=color:#75715e># 开启集群模式，把注释#去掉</span>
</span></span><span style=display:flex><span>cluster-config-file /usr/local/redis-cluster/conf/redis_16379.conf  	<span style=color:#75715e># 不同实例修改为对应</span>
</span></span><span style=display:flex><span>cluster-node-timeout <span style=color:#ae81ff>10000</span>  	<span style=color:#75715e># 请求超时，设置10秒</span>
</span></span><span style=display:flex><span>appendonly yes  	<span style=color:#75715e># aof日志开启，有需要就开启，它会每次写操作都记录一条日志</span>
</span></span></code></pre></div></blockquote><ul><li><ol start=2><li><code>Redis5.0</code><font color=red>以上版本使用</font><code>Redis-cli</code><font color=red>客户端部署</font></li></ol></li></ul><blockquote><ul><li>2.1 <font color=Red>部署集群需要</font><mark>防火墙开放集群端口</mark><font color=Red>互通如端口是：</font><code>6379</code> <mark>集群端口就是：<code>16379</code> </mark></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ /opt/apps/redis/bin/redis-cli -a password --cluster create --cluster-replicas <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> 192.168.213.128:6379 192.168.213.128:6380 192.168.213.128:6381 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> 192.168.213.129:6379 192.168.213.129:6380 192.168.213.129:6381
</span></span></code></pre></div></blockquote><ul><li><ol start=3><li><font color=red>脚本部署</font><code>Redis-Cluster</code></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo <span style=color:#e6db74>&#39;#!bin/bash
</span></span></span><span style=display:flex><span><span style=color:#e6db74>pkill redis-server
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cd /opt/conf/redis-conf/
</span></span></span><span style=display:flex><span><span style=color:#e6db74>sed -i &#39;</span>s/^#cluster-enabled/cluster-enabled/<span style=color:#e6db74>&#39; re_17693.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cat re_17693.conf |tee re_1769{4..5}.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>chown -R swadmin. *
</span></span></span><span style=display:flex><span><span style=color:#e6db74>sed -i &#34;s/17693/17694/g&#34; re_17694.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>sed -i &#34;s/17693/17695/g&#34; re_17695.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/opt/apps/redis/bin/redis-server /opt/conf/redis-conf/re_17693.conf &amp;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/opt/apps/redis/bin/redis-server /opt/conf/redis-conf/re_17694.conf &amp;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/opt/apps/redis/bin/redis-server /opt/conf/redis-conf/re_17695.conf &amp;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>firewall-cmd --permanent --new-ipset=redis_whitelist --type=hash:ip
</span></span></span><span style=display:flex><span><span style=color:#e6db74>firewall-cmd --permanent --add-rich-rule &#39;</span>rule family<span style=color:#f92672>=</span>ipv4 source ipset<span style=color:#f92672>=</span>redis_whitelist port protocol<span style=color:#f92672>=</span>tcp port<span style=color:#f92672>=</span>27693-27695 accept<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>firewall-cmd --permanent --add-rich-rule &#39;</span>rule family<span style=color:#f92672>=</span>ipv4 source ipset<span style=color:#f92672>=</span>redis_whitelist port protocol<span style=color:#f92672>=</span>tcp port<span style=color:#f92672>=</span>17693-17695 accept<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>read -p &#34;请输入对方服务器IP:&#34; IP
</span></span></span><span style=display:flex><span><span style=color:#e6db74>firewall-cmd --permanent --ipset=redis_whitelist --add-entry=$IP
</span></span></span><span style=display:flex><span><span style=color:#e6db74>firewall-cmd --reload
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#echo &#39;</span>yes<span style=color:#e6db74>&#39; |/opt/apps/redis/bin/redis-cli -a \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>9tN6GFGK60Jk8BNkBJM611GwA66uDFeG \
</span></span></span><span style=display:flex><span><span style=color:#e6db74> --cluster create --cluster-replicas 1 \
</span></span></span><span style=display:flex><span><span style=color:#e6db74> 192.168.213.128:17693  192.168.213.128:17694 \
</span></span></span><span style=display:flex><span><span style=color:#e6db74> 192.168.213.128:17695  192.168.213.129:17693 \
</span></span></span><span style=display:flex><span><span style=color:#e6db74> 192.168.213.129:17694  192.168.213.129:17695  #创建集群命令根据IP和端口修改
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;</span>&gt;redis-cluster.sh
</span></span></code></pre></div></blockquote></div><h3 id=docker部署redis集群><code>docker</code>部署<code>Redis</code>集群
<a class=header-anchor href=#docker%e9%83%a8%e7%bd%b2redis%e9%9b%86%e7%be%a4></a></h3><div class="note info"><ul><li><ol><li><a href=https://www.jianshu.com/p/b7dea62bcd8b title="<code>Docker</code>方式部署<code>redis-cluster</code>" rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>Docker</code>方式部署<code>redis-cluster</code>
<i class="fa fa-external-link-alt"></i></a></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ cat &gt;docker-install-redis-cluster.sh<span style=color:#e6db74>&lt;&lt;-EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#------------ bootstrap the cluster nodes --------------------
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>start_cmd=&#39;redis-server --port 6379 --cluster-enabled yes --cluster-config-file nodes.conf --cluster-node-timeout 5000 --appendonly yes --masterauth Redis --requirepass Redis&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>redis_image=&#39;redis:5.0-rc&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>network_name=&#39;redis_cluster_net&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>docker network create $network_name
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo $network_name &#34; created&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#---------- create the cluster ------------------------
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>for port in `seq 6379 6384`; do \
</span></span></span><span style=display:flex><span><span style=color:#e6db74> docker run -d --name &#34;redis-&#34;$port -p $port:6379 --net $network_name $redis_image $start_cmd;
</span></span></span><span style=display:flex><span><span style=color:#e6db74> echo &#34;created redis cluster node redis-&#34;$port
</span></span></span><span style=display:flex><span><span style=color:#e6db74>done
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cluster_hosts=&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>for port in `seq 6379 6384`; do \
</span></span></span><span style=display:flex><span><span style=color:#e6db74> hostip=`docker inspect -f &#39;{{(index .NetworkSettings.Networks &#34;redis_cluster_net&#34;).IPAddress}}&#39; &#34;redis-&#34;$port`;
</span></span></span><span style=display:flex><span><span style=color:#e6db74> echo &#34;IP for cluster node redis-&#34;$port &#34;is&#34; $hostip
</span></span></span><span style=display:flex><span><span style=color:#e6db74> cluster_hosts=&#34;$cluster_hosts$hostip:6379 &#34;;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>done
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo &#34;cluster hosts &#34;$cluster_hosts
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo &#34;creating cluster....&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo &#39;yes&#39; | docker run -i --rm --restart=always -v /etc/localtime:/etc/localtime --net $network_name $redis_image redis-cli  -a Redis --cluster create $cluster_hosts --cluster-replicas 1;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div></blockquote></div><h3 id=redis-50以下版本ruby方式安装redis集群><code>Redis 5.0</code>以下版本<code>Ruby</code>方式安装<code>Redis</code>集群
<a class=header-anchor href=#redis-50%e4%bb%a5%e4%b8%8b%e7%89%88%e6%9c%acruby%e6%96%b9%e5%bc%8f%e5%ae%89%e8%a3%85redis%e9%9b%86%e7%be%a4></a></h3><div class="note info"><blockquote><table><thead><tr><th>名称地址</th><th>描述</th></tr></thead><tbody><tr><td><a href=https://www.myfreax.com/how-to-install-ruby-on-centos-7/ title="如何在<code>CentOS 7</code>上安装<code>Ruby</code>" rel="noopener external nofollow noreferrer" target=_blank class=exturl>如何在<code>CentOS 7</code>上安装<code>Ruby</code>
<i class="fa fa-external-link-alt"></i></a></td><td></td></tr><tr><td><a href=https://www.jianshu.com/p/e4847f3926d1 title="<code>CentOS 7</code>安装<code>Ruby on Rails</code>" rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>CentOS 7</code>安装<code>Ruby on Rails</code>
<i class="fa fa-external-link-alt"></i></a></td><td></td></tr><tr><td><a href=https://www.cnblogs.com/xuliangxing/p/7132656.html title="<code>Linux</code>安装<code>Ruby</code>详解(在线和离线安装)" rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>Linux</code>安装<code>Ruby</code>详解(在线和离线安装)
<i class="fa fa-external-link-alt"></i></a></td><td></td></tr><tr><td><a href=https://www.cnblogs.com/tommy-huang/p/7279796.html title="<code>CentOS 7</code>通过<code>RVM</code>来安装指定版本的<code>Ruby</code>" rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>CentOS 7</code>通过<code>RVM</code>来安装指定版本的<code>Ruby</code>
<i class="fa fa-external-link-alt"></i></a></td><td></td></tr></tbody></table></blockquote></div><h4 id=安装ruby>安装<code>Ruby</code>
<a class=header-anchor href=#%e5%ae%89%e8%a3%85ruby></a></h4><div class="note info"><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo <span style=color:#e6db74>&#39;#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#e6db74>yum install gcc-c++ patch readline readline-devel zlib zlib-devel libyaml-devel libffi-devel openssl-devel make bzip2 autoconf automake libtool bison iconv-devel -y   #安装依赖库
</span></span></span><span style=display:flex><span><span style=color:#e6db74>gpg2 --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3    #安装RVM
</span></span></span><span style=display:flex><span><span style=color:#e6db74>curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>curl -sSL https://rvm.io/pkuczynski.asc | gpg2 --import -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>curl -L get.rvm.io | bash -s stable
</span></span></span><span style=display:flex><span><span style=color:#e6db74>sleep 2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>source /etc/profile.d/rvm.sh    #设定rvm环境
</span></span></span><span style=display:flex><span><span style=color:#e6db74>sleep 3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>rvm -v          #查看是否安装正常
</span></span></span><span style=display:flex><span><span style=color:#e6db74>rvm list known  #查询当前Ruby的版本列表
</span></span></span><span style=display:flex><span><span style=color:#e6db74>rvm install 2.4.6   #安装指定版本的Ruby
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ruby -v             #测试是否成功
</span></span></span><span style=display:flex><span><span style=color:#e6db74>rvm use 2.4.6  --default     #在安装多个版本ruby环境下指定默认版本：这里讲2.4.6 作为默认ruby版本
</span></span></span><span style=display:flex><span><span style=color:#e6db74>rvm system --default    #使用会系统默认版本Ruby
</span></span></span><span style=display:flex><span><span style=color:#e6db74>gem install redis       准备rubygem redis依赖
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;</span> &gt;install-ruby.sh
</span></span></code></pre></div></blockquote></div><h4 id=拷贝redis-tribrb到集群根目录>拷贝<code>redis-trib.rb</code>到集群根目录
<a class=header-anchor href=#%e6%8b%b7%e8%b4%9dredis-tribrb%e5%88%b0%e9%9b%86%e7%be%a4%e6%a0%b9%e7%9b%ae%e5%bd%95></a></h4><div class="note info"><blockquote><p><code>redis-trib.rb</code> 是<code>redis</code>官方推出的管理<code>redis</code>集群 的工具，集成在<code>redis</code>的源码<code>src</code>目录下，将基于 <code>redis</code>提供的 集群命令 封装成 简单、便捷、实用 的 操作工具</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ cp /opt/apps/redis/src/redis-trib.rb /opt/apps/redis/
</span></span></code></pre></div></blockquote><ul><li><ol><li><font color=red>查看</font><code>redis-trib.rb</code><font color=red>命令环境是否正确，输出如下</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ ./redis-trib.rb 
</span></span><span style=display:flex><span>Usage: redis-trib &lt;command&gt; &lt;options&gt; &lt;arguments ...&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  create          host1:port1 ... hostN:portN
</span></span><span style=display:flex><span>                  --replicas &lt;arg&gt;
</span></span><span style=display:flex><span>  check           host:port
</span></span><span style=display:flex><span>  info            host:port
</span></span><span style=display:flex><span>  fix             host:port
</span></span><span style=display:flex><span>                  --timeout &lt;arg&gt;
</span></span><span style=display:flex><span>  reshard         host:port
</span></span><span style=display:flex><span>                  --from &lt;arg&gt;
</span></span><span style=display:flex><span>                  --to &lt;arg&gt;
</span></span><span style=display:flex><span>                  --slots &lt;arg&gt;
</span></span><span style=display:flex><span>                  --yes
</span></span><span style=display:flex><span>                  --timeout &lt;arg&gt;
</span></span><span style=display:flex><span>                  --pipeline &lt;arg&gt;
</span></span><span style=display:flex><span>  rebalance       host:port
</span></span><span style=display:flex><span>                  --weight &lt;arg&gt;
</span></span><span style=display:flex><span>                  --auto-weights
</span></span><span style=display:flex><span>                  --use-empty-masters
</span></span><span style=display:flex><span>                  --timeout &lt;arg&gt;
</span></span><span style=display:flex><span>                  --simulate
</span></span><span style=display:flex><span>                  --pipeline &lt;arg&gt;
</span></span></code></pre></div><ul><li><code>redis-trib.rb</code><font color=red>是</font><code>redis</code><font color=red>作者用</font><code>ruby</code><font color=red>完成的。</font><code>redis-trib.rb</code><font color=red>命令行工具 的具体功能如下:</font></li></ul><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td><code>create</code></td><td>创建集群</td></tr><tr><td><code>check</code></td><td>检查集群</td></tr><tr><td><code>info</code></td><td>查看集群信息</td></tr><tr><td><code>fix</code></td><td>修复集群</td></tr><tr><td><code>reshard</code></td><td>在线迁移<code>slot</code></td></tr><tr><td><code>rebalance</code></td><td>平衡集群节点<code>slot</code>数量</td></tr><tr><td><code>add-node</code></td><td>将新节点加入集群</td></tr><tr><td><code>del-node</code></td><td>从集群中删除节点</td></tr><tr><td><code>set-timeout</code></td><td>设置集群节点间心跳连接的超时时间</td></tr><tr><td><code>call</code></td><td>在集群全部节点上执行命令</td></tr><tr><td><code>import</code></td><td>将外部<code>redis</code>数据导入集群</td></tr></tbody></table></blockquote><ul><li><ol start=2><li><font color=red>运行命令启动所有节点</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ /opt/apps/redis/bin/redis-server /opt/conf/redis-conf/re_17693.conf &amp;
</span></span><span style=display:flex><span>$ /opt/apps/redis/bin/redis-server /opt/conf/redis-conf/re_17694.conf &amp;
</span></span><span style=display:flex><span>$ /opt/apps/redis/bin/redis-server /opt/conf/redis-conf/re_17695.conf &amp;
</span></span></code></pre></div><ul><li><font color=red>在每个</font><code>redis</code><font color=red>节点的</font><code>redis.conf</code><font color=red>文件中，我们都配置了</font><code>cluster-config-file</code><font color=red>的文件路径，集群启动时</font><code>conf</code><font color=red>目录会新生成 集群 节点配置文件。查看文件列表如下：</font></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ yum -y install tree
</span></span><span style=display:flex><span>$ tree -L <span style=color:#ae81ff>3</span> .
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── bin
</span></span><span style=display:flex><span>│   ├── redis-benchmark
</span></span><span style=display:flex><span>│   ├── redis-check-aof
</span></span><span style=display:flex><span>│   ├── redis-check-rdb
</span></span><span style=display:flex><span>│   ├── redis-cli
</span></span><span style=display:flex><span>│   ├── redis-sentinel -&gt; redis-server
</span></span><span style=display:flex><span>│   └── redis-server
</span></span><span style=display:flex><span>├── nodes-6379.conf
</span></span><span style=display:flex><span>├── redis.conf
</span></span><span style=display:flex><span>└── redis-trib.rb
</span></span></code></pre></div></blockquote><ul><li><ol start=3><li><font color=red>配置密码</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ vim /usr/local/rvm/gems/ruby-2.4.6/gems/redis-4.1.3/lib/redis/client.rb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># frozen_string_literal: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>require_relative <span style=color:#e6db74>&#34;errors&#34;</span>
</span></span><span style=display:flex><span>require <span style=color:#e6db74>&#34;socket&#34;</span>
</span></span><span style=display:flex><span>require <span style=color:#e6db74>&#34;cgi&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Redis
</span></span><span style=display:flex><span>  class Client
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    DEFAULTS <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      :url <span style=color:#f92672>=</span>&gt; lambda <span style=color:#f92672>{</span> ENV<span style=color:#f92672>[</span><span style=color:#e6db74>&#34;REDIS_URL&#34;</span><span style=color:#f92672>]</span> <span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span>      :scheme <span style=color:#f92672>=</span>&gt; <span style=color:#e6db74>&#34;redis&#34;</span>,
</span></span><span style=display:flex><span>      :host <span style=color:#f92672>=</span>&gt; <span style=color:#e6db74>&#34;127.0.0.1&#34;</span>,
</span></span><span style=display:flex><span>      :port <span style=color:#f92672>=</span>&gt; 6379,
</span></span><span style=display:flex><span>      :path <span style=color:#f92672>=</span>&gt; nil,
</span></span><span style=display:flex><span>      :timeout <span style=color:#f92672>=</span>&gt; 5.0,
</span></span><span style=display:flex><span>      :password <span style=color:#f92672>=</span>&gt; Redis,  	<span style=color:#75715e># 配置密码</span>
</span></span><span style=display:flex><span>      :db <span style=color:#f92672>=</span>&gt; 0,
</span></span><span style=display:flex><span>      :driver <span style=color:#f92672>=</span>&gt; nil,
</span></span><span style=display:flex><span>      :id <span style=color:#f92672>=</span>&gt; nil,
</span></span><span style=display:flex><span>      :tcp_keepalive <span style=color:#f92672>=</span>&gt; 0,
</span></span><span style=display:flex><span>      :reconnect_attempts <span style=color:#f92672>=</span>&gt; 1,
</span></span><span style=display:flex><span>      :reconnect_delay <span style=color:#f92672>=</span>&gt; 0,
</span></span><span style=display:flex><span>      :reconnect_delay_max <span style=color:#f92672>=</span>&gt; 0.5,
</span></span><span style=display:flex><span>      :inherit_socket <span style=color:#f92672>=</span>&gt; false
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div></blockquote><ul><li><ol start=4><li><code>redis-trib</code><font color=red>关联集群节点</font></li></ol></li></ul><blockquote><ul><li><font color=red>按照从主到从的方式从左到右依次排列 6 个</font><code>redis</code><font color=red>节点，如果不通两个问题：密码、防火墙</font></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo <span style=color:#e6db74>&#39;yes&#39;</span>|./redis-trib.rb create --replicas <span style=color:#ae81ff>1</span> 192.168.176.142:6379 192.168.176.143:6379 192.168.176.144:6379 192.168.176.145:6379 192.168.176.142:6380 192.168.176.143:6380 192.168.176.144:6380 192.168.176.145:6380  
</span></span><span style=display:flex><span>&gt;&gt;&gt; Creating cluster
</span></span><span style=display:flex><span>&gt;&gt;&gt; Performing hash slots allocation on <span style=color:#ae81ff>8</span> nodes...
</span></span><span style=display:flex><span>Using <span style=color:#ae81ff>4</span> masters:
</span></span><span style=display:flex><span>192.168.176.142:6379
</span></span><span style=display:flex><span>192.168.176.143:6379
</span></span><span style=display:flex><span>192.168.176.144:6379
</span></span><span style=display:flex><span>192.168.176.145:6379
</span></span><span style=display:flex><span>Adding replica 192.168.176.143:6380 to 192.168.176.142:6379
</span></span><span style=display:flex><span>Adding replica 192.168.176.142:6380 to 192.168.176.143:6379
</span></span><span style=display:flex><span>Adding replica 192.168.176.145:6380 to 192.168.176.144:6379
</span></span><span style=display:flex><span>Adding replica 192.168.176.144:6380 to 192.168.176.145:6379
</span></span><span style=display:flex><span>M: 157bd250dd382b95a9289d8b44fd2cfd466fea98 192.168.176.142:6379
</span></span><span style=display:flex><span>   slots:0-4095 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>M: c6df79e7c60c03921b69e4d4342507e8d4d2afbd 192.168.176.143:6379
</span></span><span style=display:flex><span>   slots:4096-8191 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>M: a463232f96c66cd7f27395253b65d0be8909656e 192.168.176.144:6379
</span></span><span style=display:flex><span>   slots:8192-12287 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>M: 44b244a188185835b42d4489eac614e7f81b4cf8 192.168.176.145:6379
</span></span><span style=display:flex><span>   slots:12288-16383 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>S: 1cafdeeb6cb52bb96dd16ac84d2242f59973f83a 192.168.176.142:6380
</span></span><span style=display:flex><span>   replicates c6df79e7c60c03921b69e4d4342507e8d4d2afbd
</span></span><span style=display:flex><span>S: a6d87fb995f3f5e98e2a09f4b5a3078f7221a257 192.168.176.143:6380
</span></span><span style=display:flex><span>   replicates 157bd250dd382b95a9289d8b44fd2cfd466fea98
</span></span><span style=display:flex><span>S: 31a3f0b03244d30bbc7e47acc0ec06d327b62860 192.168.176.144:6380
</span></span><span style=display:flex><span>   replicates 44b244a188185835b42d4489eac614e7f81b4cf8
</span></span><span style=display:flex><span>S: fc22025eb5db7cc0d55fe7dc11a3c368daa468bb 192.168.176.145:6380
</span></span><span style=display:flex><span>   replicates a463232f96c66cd7f27395253b65d0be8909656e
</span></span><span style=display:flex><span>Can I set the above configuration? <span style=color:#f92672>(</span>type <span style=color:#e6db74>&#39;yes&#39;</span> to accept<span style=color:#f92672>)</span>: yes     <span style=color:#75715e>#此处输入：yes、然后redis-trib.rb 开始执行 节点握手 和 槽分配 操作，输出如下：</span>
</span></span><span style=display:flex><span>&gt;&gt;&gt; Nodes configuration updated
</span></span><span style=display:flex><span>&gt;&gt;&gt; Assign a different config epoch to each node
</span></span><span style=display:flex><span>&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster
</span></span><span style=display:flex><span>Waiting <span style=color:#66d9ef>for</span> the cluster to join....
</span></span><span style=display:flex><span>&gt;&gt;&gt; Performing Cluster Check <span style=color:#f92672>(</span>using node 192.168.176.142:6379<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>M: 157bd250dd382b95a9289d8b44fd2cfd466fea98 192.168.176.142:6379
</span></span><span style=display:flex><span>   slots:0-4095 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>S: 31a3f0b03244d30bbc7e47acc0ec06d327b62860 192.168.176.144:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates 44b244a188185835b42d4489eac614e7f81b4cf8
</span></span><span style=display:flex><span>M: a463232f96c66cd7f27395253b65d0be8909656e 192.168.176.144:6379
</span></span><span style=display:flex><span>   slots:8192-12287 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>M: 44b244a188185835b42d4489eac614e7f81b4cf8 192.168.176.145:6379
</span></span><span style=display:flex><span>   slots:12288-16383 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>S: fc22025eb5db7cc0d55fe7dc11a3c368daa468bb 192.168.176.145:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates a463232f96c66cd7f27395253b65d0be8909656e
</span></span><span style=display:flex><span>M: c6df79e7c60c03921b69e4d4342507e8d4d2afbd 192.168.176.143:6379
</span></span><span style=display:flex><span>   slots:4096-8191 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>S: a6d87fb995f3f5e98e2a09f4b5a3078f7221a257 192.168.176.143:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates 157bd250dd382b95a9289d8b44fd2cfd466fea98
</span></span><span style=display:flex><span>S: 1cafdeeb6cb52bb96dd16ac84d2242f59973f83a 192.168.176.142:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates c6df79e7c60c03921b69e4d4342507e8d4d2afbd
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>OK<span style=color:#f92672>]</span> All nodes agree about slots configuration.
</span></span><span style=display:flex><span>&gt;&gt;&gt; Check <span style=color:#66d9ef>for</span> open slots...
</span></span><span style=display:flex><span>&gt;&gt;&gt; Check slots coverage...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>OK<span style=color:#f92672>]</span> All <span style=color:#ae81ff>16384</span> slots covered.
</span></span></code></pre></div></blockquote><ul><li><ol start=5><li><code>redis</code><font color=red>集群完整性检</font></li></ol></li></ul><blockquote><ul><li><mark>使用<code>redis-trib.rb check</code>命令检测之前创建的 两个集群 是否成功，<code>check</code>命令只需要给出集群中 任意一个节点地址 就可以完成 整个集群 的 检查工作，命令如下：</mark></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ ./redis-trib.rb check 192.168.176.145:6379 
</span></span><span style=display:flex><span>&gt;&gt;&gt; Performing Cluster Check <span style=color:#f92672>(</span>using node 192.168.176.142:6379<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>M: 157bd250dd382b95a9289d8b44fd2cfd466fea98 192.168.176.142:6379
</span></span><span style=display:flex><span>   slots:0-4095 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>S: 31a3f0b03244d30bbc7e47acc0ec06d327b62860 192.168.176.144:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates 44b244a188185835b42d4489eac614e7f81b4cf8
</span></span><span style=display:flex><span>M: a463232f96c66cd7f27395253b65d0be8909656e 192.168.176.144:6379
</span></span><span style=display:flex><span>   slots:8192-12287 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>M: 44b244a188185835b42d4489eac614e7f81b4cf8 192.168.176.145:6379
</span></span><span style=display:flex><span>   slots:12288-16383 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>S: fc22025eb5db7cc0d55fe7dc11a3c368daa468bb 192.168.176.145:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates a463232f96c66cd7f27395253b65d0be8909656e
</span></span><span style=display:flex><span>M: c6df79e7c60c03921b69e4d4342507e8d4d2afbd 192.168.176.143:6379
</span></span><span style=display:flex><span>   slots:4096-8191 <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> slots<span style=color:#f92672>)</span> master
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>1</span> additional replica<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>S: a6d87fb995f3f5e98e2a09f4b5a3078f7221a257 192.168.176.143:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates 157bd250dd382b95a9289d8b44fd2cfd466fea98
</span></span><span style=display:flex><span>S: 1cafdeeb6cb52bb96dd16ac84d2242f59973f83a 192.168.176.142:6380
</span></span><span style=display:flex><span>   slots: <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> slots<span style=color:#f92672>)</span> slave
</span></span><span style=display:flex><span>   replicates c6df79e7c60c03921b69e4d4342507e8d4d2afbd
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>OK<span style=color:#f92672>]</span> All nodes agree about slots configuration.
</span></span><span style=display:flex><span>&gt;&gt;&gt; Check <span style=color:#66d9ef>for</span> open slots...
</span></span><span style=display:flex><span>&gt;&gt;&gt; Check slots coverage...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>OK<span style=color:#f92672>]</span> All <span style=color:#ae81ff>16384</span> slots covered.
</span></span></code></pre></div></blockquote></div><h2 id=redis-sentinel模式即哨兵模式><code>Redis Sentinel</code>模式(即:哨兵模式)
<a class=header-anchor href=#redis-sentinel%e6%a8%a1%e5%bc%8f%e5%8d%b3%e5%93%a8%e5%85%b5%e6%a8%a1%e5%bc%8f></a></h2><div class="note info"><ul><li><ol><li><font color=red>节点-1</font><code>sentinel_16380.conf</code></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>protected-mode no
</span></span><span style=display:flex><span>bind 192.168.176.131  	<span style=color:#75715e># 本机IP</span>
</span></span><span style=display:flex><span>port <span style=color:#ae81ff>16380</span>
</span></span><span style=display:flex><span>daemonize yes
</span></span><span style=display:flex><span>sentinel monitor master 192.168.176.131 <span style=color:#ae81ff>6379</span> <span style=color:#ae81ff>2</span>  	<span style=color:#75715e># 主IP与端口号</span>
</span></span><span style=display:flex><span>sentinel down-after-milliseconds master <span style=color:#ae81ff>5000</span>  	<span style=color:#75715e># 指定主节点应答哨兵sentinel的最大时间间隔，超过这个时间，哨兵主观上认为主节点下线，默认30秒</span>
</span></span><span style=display:flex><span>sentinel failover-timeout master <span style=color:#ae81ff>180000</span>  	<span style=color:#75715e># 故障转移的超时时间failover-timeout，默认三分钟，可以用在以下这些方面</span>
</span></span><span style=display:flex><span>sentinel parallel-syncs master <span style=color:#ae81ff>1</span>  	<span style=color:#75715e># 指定了在发生failover主备切换时，最多可以有多少个slave同时对新的master进行同步。这个数字越小，完成failover所需的时间就越长；反之，但是如果这个数字越大，就意味着越多的slave因为replication而不可用。可以通过将这个值设为1，来保证每次只有一个slave，处于不能处理命令请求的状态。</span>
</span></span><span style=display:flex><span>sentinel auth-pass master <span style=color:#ae81ff>123456</span>  	<span style=color:#75715e># 当在Redis实例中开启了requirepass &lt;foobared&gt;，所有连接Redis实例的客户端都要提供密码</span>
</span></span><span style=display:flex><span>logfile /var/log/redis/sentinel_16380.log
</span></span></code></pre></div></blockquote><ul><li><ol start=2><li><font color=red>节点2~3</font><code>centinel_16380.conf</code></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>protected-mode no
</span></span><span style=display:flex><span>bind 192.168.176.132  	<span style=color:#75715e># 此处修改为本机IP</span>
</span></span><span style=display:flex><span>port <span style=color:#ae81ff>16380</span>
</span></span><span style=display:flex><span>daemonize yes
</span></span><span style=display:flex><span>sentinel monitor master 192.168.176.131 <span style=color:#ae81ff>6379</span> <span style=color:#ae81ff>2</span>  	<span style=color:#75715e># 主IP与端口号</span>
</span></span><span style=display:flex><span>sentinel down-after-milliseconds master <span style=color:#ae81ff>5000</span>
</span></span><span style=display:flex><span>sentinel failover-timeout master <span style=color:#ae81ff>180000</span>
</span></span><span style=display:flex><span>sentinel parallel-syncs master <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>sentinel auth-pass master <span style=color:#ae81ff>123456</span>
</span></span><span style=display:flex><span>logfile /var/log/redis/sentinel_16380.log
</span></span></code></pre></div></blockquote></div></div><footer class=post-footer><div class=post-tags><a href=/tags/redis>Redis
</a><a href=/tags/databases>Databases</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="二哥 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="二哥 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
Install Redis Cluster</li><li class=post-copyright-author><strong>本文作者： </strong>二哥</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=http://localhost:1313/system/linux/nosql/install-redis-cluster/ title="Install Redis Cluster">http://localhost:1313/system/linux/nosql/install-redis-cluster/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/atom.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/system/linux/kubernetes/install-k8s-harbor/ rel=next title="Install K8s Harbor"><i class="fa fa-chevron-left"></i> Install K8s Harbor</a></div><div class="post-nav-prev post-nav-item"><a href=/system/linux/nosql/install-redis/ rel=prev title="Install Redis">Install Redis
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div><div class=comment-switch><span class=first-comment>Giscus</span>
<span class=switch-btn></span>
<span class=second-comment>Waline</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=waline-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>二哥</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.125.4 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>粤ICP备 18047355-1 号</a>
<img src=/imgs/gongan.png alt=沪公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402009770" target=_blank>沪公网安备 31011402009770 号</a></div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel>
</a><a target=_blank href=https://upyun.com title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云>
</a><a target=_blank href=https://webify.cloudbase.net title=Webify>Webify
</a><span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"http://localhost:1313/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.js defer></script></body></html>
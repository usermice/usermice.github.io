<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/hero.png">
    <meta name="twitter:title" content="Video :: Hugo Relearn Theme">
    <meta property="og:url" content="https://erge.blog/basics/video/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Video :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://erge.blog/images/hero.png">
    <meta itemprop="name" content="Video :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T01:37:19+08:00">
    <meta itemprop="dateModified" content="2024-06-13T01:37:19+08:00">
    <meta itemprop="image" content="https://erge.blog/images/hero.png">
    <title>Video :: Hugo Relearn Theme</title>
    <link href="../../images/favicon.ico?1723803344" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../css/fontawesome-all.min.css?1723803345" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fontawesome-all.min.css?1723803345" rel="stylesheet"></noscript>
    <link href="../../css/nucleus.css?1723803345" rel="stylesheet">
    <link href="../../css/auto-complete.css?1723803345" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/auto-complete.css?1723803345" rel="stylesheet"></noscript>
    <link href="../../css/perfect-scrollbar.min.css?1723803345" rel="stylesheet">
    <link href="../../css/fonts.css?1723803345" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fonts.css?1723803345" rel="stylesheet"></noscript>
    <link href="../../css/theme.css?1723803345" rel="stylesheet">
    <link href="../../css/theme-relearn-auto.css?1723803345" rel="stylesheet" id="R-variant-style">
    <link href="../../css/chroma-relearn-auto.css?1723803345" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../css/variant.css?1723803345" rel="stylesheet">
    <link href="../../css/print.css?1723803345" rel="stylesheet" media="print">
    <link href="../../css/format-print.css?1723803345" rel="stylesheet">
    <script src="../../js/variant.js?1723803345"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../basics/video/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../basics/"><span itemprop="name">Basics</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Video</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../basics/hugo_theme_next/custom_files/" title="Custom_Files (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../basics/video/video_download/" title="Video_Download (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="video">Video</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Video</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="video_download">Video_Download</h1>

<h2 id="è§†é¢‘ä¸‹è½½">è§†é¢‘ä¸‹è½½</h2>
<blockquote>
<ul>
<li><a href="https://www.videolan.org/" rel="external" target="_self"><code>VLC media player</code>è§†é¢‘æ’­æ”¾å™¨</a></li>
<li><a href="https://streamja.com/" rel="external" target="_self"><code>Streamja</code>è§†é¢‘ä¿å­˜</a></li>
</ul>
</blockquote>
<hr>
<ul>
<li><strong><code>Youtube</code>è§†é¢‘ä¸‹è½½</strong></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted --><a href="https://github.com/yt-dlp/yt-dlp" rel="external" target="_self"><code>yt-dlp</code></a>å·¥å…·ä½¿ç”¨ã€ä½¿ç”¨æŸ¥çœ‹&quot;å®Œæ•´æ’­æ”¾åˆ—è¡¨&quot;ã€è·å–å®Œæ•´åˆ—è¡¨é“¾æ¥<!-- raw HTML omitted --></li>
<li><a href="https://you-get.org/" rel="external" target="_self"><code>you-get</code></a></li>
<li><a href="https://bilishare.com/tech/youtube-dl/2021/03/14/youtube-dl.html" rel="external" target="_self"><code>Youtube-dl</code>çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•</a></li>
</ul>
<blockquote>
<ul>
<li><code>-f</code><!-- raw HTML omitted -->ï¼šé€‰æ‹©æ ¼å¼ä¸ºæœ€ä¼˜çš„<!-- raw HTML omitted --><code>mp4</code><!-- raw HTML omitted -->æ ¼å¼<!-- raw HTML omitted --></li>
<li><code>-k</code><!-- raw HTML omitted -->ï¼šä¿å­˜æ–‡ä»¶<!-- raw HTML omitted --></li>
<li><code>-c</code><!-- raw HTML omitted -->ï¼šæ–­ç‚¹ç»­ä¼ <!-- raw HTML omitted --></li>
<li><code>-i</code><!-- raw HTML omitted -->ï¼šå¿½ç•¥é”™è¯¯<!-- raw HTML omitted --></li>
<li><code>-r, --limit-rate=600K</code><!-- raw HTML omitted -->ï¼šæœ€å¤§ä¸‹è½½é€Ÿç‡/ç§’ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰<!-- raw HTML omitted --></li>
<li><code>--yes-playlistã€--playlist-items 8,15,20,23</code><!-- raw HTML omitted -->ï¼šæŒ‡å®šä»…ä¸‹è½½æ’­æ”¾åˆ—è¡¨ä¸­çš„<code>8,15,20,23</code>è¿™å‡ é›†è§†é¢‘<!-- raw HTML omitted --></li>
<li><code>-output 'TJ_%(id)s.%(ext)s'</code><!-- raw HTML omitted -->ï¼šæ³°è¿¦æ‹¼éŸ³é¦–å­—æ¯ç¼©å†™ + è§†é¢‘çš„IDå· + æ ¼å¼(.mp4)<!-- raw HTML omitted --></li>
<li><code>-x --audio-format mp3</code><!-- raw HTML omitted -->ï¼šä¸‹è½½æ­Œæ›²ï¼Œåˆ°<code>mp3</code>æ ¼å¼<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./yt-dlp --yes-playlist -f best<span style="color:#f92672">[</span>ext<span style="color:#f92672">=</span>mp4<span style="color:#f92672">]</span> --limit-rate<span style="color:#f92672">=</span>1024K -k -c -i https://www.youtube.com/playlist?list<span style="color:#f92672">=</span>PL6YsTaFq7KcMH0cljmGf7F0jK0fdUov10  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ youtube-dl -f best<span style="color:#f92672">[</span>ext<span style="color:#f92672">=</span>mp4<span style="color:#f92672">]</span> -k -c -i --playlist-items 8,15,20,23 https://www.youtube.com/playlist?list<span style="color:#f92672">=</span>PL6YzOVgBYcEZSB30tzuXeSAhNX3nwu4Wd  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ youtube-dl -f best<span style="color:#f92672">[</span>ext<span style="color:#f92672">=</span>mp4<span style="color:#f92672">]</span> -k -c -i --output <span style="color:#e6db74">&#39;TJ_%(id)s.%(ext)s&#39;</span> https://www.youtube.com/playlist?list<span style="color:#f92672">=</span>PL6YzOVgBYcEZSB30tzuXeSAhNX3nwu4Wd  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ youtube-dl -x --audio-format mp3 https://www.youtube.com/watch?v<span style="color:#f92672">=</span>Sm_EGqzs2aA  </span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<ul>
<li>
<ol start="2">
<li><strong><code>bilibili</code>è§†é¢‘ä¸‹è½½</strong></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å“”å“©å“”å“©<code>UWP</code>ï¼šä¸‹è½½å™¨<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted --><a href="https://github.com/leiurayer/downkyi" rel="external" target="_self">å“”å“©ä¸‹è½½å§¬</a><!-- raw HTML omitted --></li>
<li><a href="https://mp.weixin.qq.com/s/i0Cw3sxTFiRnQztDmzN0JQ" rel="external" target="_self"><code>B</code>ç«™è§†é¢‘ä¸‹è½½ç¥å™¨</a></li>
<li><a href="http://client.jijidown.com/" rel="external" target="_self">å”§å”§<code>Down</code></a></li>
<li><a href="https://www.flvcd.com/index.htm" rel="external" target="_self">ç¡•é¼ </a></li>
<li><a href="https://csser.top/" rel="external" target="_self"><code>bilibili</code>å“”å“©å“”å“©ä¸‹è½½åŠ©æ‰‹</a></li>
</ul>
</blockquote>
<hr>
<ul>
<li>
<ol start="3">
<li><strong><code>Python</code>çˆ¬å–è§†é¢‘</strong></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><strong><code>Ffmpeg</code>å®‰è£…åˆå¹¶è½¯ä»¶</strong></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install epel-release
</span></span><span style="display:flex;"><span>$ yum -y install yasm gcc
</span></span><span style="display:flex;"><span>$ make <span style="color:#f92672">&amp;&amp;</span> make install
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;export PATH=</span>$PATH<span style="color:#e6db74">:/usr/local/ffmpeg/bin&#34;</span> &gt;&gt;/etc/profile
</span></span><span style="display:flex;"><span>$ source /etc/profile</span></span></code></pre></div><ul>
<li><strong><code>Python</code>çˆ¬è™«è„šæœ¬</strong></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/python/Python_Reptile_Youtube.py<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#!/usr/bin/python3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39; pip3 install requests --upgrade &#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import requests   # æ•°æ®è¯·æ±‚æ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import re     # æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—ï¼ŒæŠŠæ•°æ®è§£æä¸ºç»“æ„åŒ–æ•°æ®ï¼Œåˆ†åˆ«æœ‰ï¼šparselã€lxmlã€re
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import json  # æ•°æ®ç±»å‹å¤„ç†æ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from tqdm import tqdm   #è¿›åº¦æ¡é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import os    # å¤„ç†æ–‡ä»¶å’Œç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import pprint # æ ¼å¼åŒ–è¾“å‡ºæ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import subprocess # 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># å‘é€è¯·æ±‚è·å–æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">headers = {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	# èº«ä»½ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;cookie&#39;: &#39;VISITOR_INFO1_LIVE=9qZVrzB27uI; PREF=f4=4000000&amp;tz=Asia.Shanghai; _ga=GA1.2.621834420.1648121145; _gcl_au=1.1.1853038046.1648121145; NID=511=Zc1APdmEbCD-iqVNVgI_vD_0S3LVI3XSfl-wUZEvvMU2MLePFKsQCaKUlUtchHSg-kWEVMGOhWUbxpQMwHeIuLjhxaslwniMh1OsjVfmOeTfhpwcRYpMgqpZtNQ7qQApY21xEObCvIez6DCMbjRhRQ5P7siOD3X87QX0CFyUxmY; OTZ=6430350_24_24__24_; GPS=1; YSC=0E115KqM_-I; GOOGLE_ABUSE_EXEMPTION=ID=d02004902c3d0f4d:TM=1648620854:C=r:IP=47.57.243.77-:S=YmZXPW7dxbu83bDuauEpXpE; CONSISTENCY=AGDxDeNysJ2boEmzRP4v6cwgg4NsdN4-FYQKHCGhA0AeW1QjFIU1Ejq1j8l6lwAc6c-pYTJiSaQItZ1M6QeI1pQ3wictnWXTOZ6_y8EKlt0Y_JdakwW6srR39-NLuPgSgXrXwtS0XTUGXpdnt4k3JjQ&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # é˜²ç›—é“¾
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;referer&#39;: &#39;https://www.youtube.com/&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # æµè§ˆå™¨åŸºæœ¬ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.84 Safari/537.36&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">url = &#39;https://www.youtube.com/watch?v=HuCsEvYPURs&amp;list=PL2Kp-qxDDM0GKCurzpJ448Hr_dxVdPjLp&amp;index=2&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># å‘é€è¯·æ±‚ï¼Œç½‘ç«™è‡ªå·±è¡¥å…¨ä¸€ä¸‹
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">response = requests.get(url=url, headers=headers)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">print(response.text)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># åŒ¹é…jsonæ•°æ®ï¼Œ.*ï¼šåŒ¹é…ä»»æ„å­—ç¬¦0~Næ¬¡ï¼Œ?ï¼šéè´ªå©ªåŒ¹é…ã€æ•°æ®è¿‡é•¿æœ‰å¯èƒ½æˆªæ–­ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">json_str = re.findall(&#39;var ytInitialPlayerResponse = (.*?);var&#39;, response.text)[0]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># jsonå­—ç¬¦ä¸²è½¬å˜ä¸ºå­—å…¸
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">json_data = json.loads(json_str)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æå–è§†é¢‘é“¾æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">video_url = json_data[&#39;streamingData&#39;][&#39;adaptiveFormats&#39;][0][&#39;url&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æå–éŸ³é¢‘é“¾æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">audio_url = json_data[&#39;streamingData&#39;][&#39;adaptiveFormats&#39;][-2][&#39;url&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æå–æ ‡é¢˜
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">title = json_data[&#39;videoDetails&#39;][&#39;title&#39;]  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æ›¿æ¢æ‰æ ‡é¢˜å½“ä¸­çš„ç©ºæ ¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">title = title.replace(&#39; &#39;, &#39;&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æ›¿æ¢æ‰æ ‡é¢˜å½“ä¸­çš„ä¸åˆæ³•å­—ç¬¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">title = re.sub(r&#39;[\/:|?*&#34;&lt;&gt;]&#39;, &#39;&#39;, title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># print(video_url)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># print(audio_url)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># print(title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># å‘è§†é¢‘é“¾æ¥å‘é€è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">video = requests.get(video_url, stream=True)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># è·å–è§†é¢‘å¤§å°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">file_size = int(video.headers.get(&#39;Content-Length&#39;))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># åˆå§‹åŒ–è¿›åº¦æ¡å¤§å°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">video_pbar = tqdm(total=file_size)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># å¼€å§‹ä¿å­˜è§†é¢‘
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">with open(f&#39;{title}.mp4&#39;, mode=&#39;wb&#39;) as f:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # æŠŠè§†é¢‘åˆ†æˆ 1024 * 1024 * 2 ä¸ºç­‰åˆ†çš„å¤§å° è¿›è¡Œéå†
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for video_chunk in video.iter_content(1024*1024*2):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # å†™å…¥æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        f.write(video_chunk)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # æ›´æ–°è¿›åº¦æ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        video_pbar.set_description(f&#39;æ­£åœ¨ä¸‹è½½ï¼š{title}è§†é¢‘ä¸­......&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # æ›´æ–°è¿›åº¦æ¡é•¿åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        video_pbar.update(1024*1024*2)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # ä¸‹è½½å®Œæ¯•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    video_pbar.set_description(&#39;ä¸‹è½½å®Œæˆï¼&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # å…³é—­è¿›åº¦æ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    video_pbar.close()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># éŸ³é¢‘åŒç†
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">audio = requests.get(audio_url, stream=True)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">file_size = int(audio.headers.get(&#39;Content-Length&#39;))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">audio_pbar = tqdm(total=file_size)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">with open(f&#39;{title}.mp3&#39;, mode=&#39;wb&#39;) as f:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for audio_chunk in audio.iter_content(1024*1024*2):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        f.write(audio_chunk)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        audio_pbar.set_description(f&#39;æ­£åœ¨ä¸‹è½½ï¼š{title}éŸ³é¢‘ä¸­......&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        audio_pbar.update(1024*1024*2)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    audio_pbar.set_description(&#39;ä¸‹è½½å®Œæˆï¼&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    audio_pbar.close()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">def merge(title):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    print(&#39;è§†é¢‘åˆæˆå¼€å§‹ï¼š&#39;, title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # ffmpeg = r&#39;D:\Download\ffmpeg\bin\ffmpeg.exe -i &#39; + title + &#39;.mp4 -i &#39; + title + &#39;.mp3 -acodec copy -vcodec copy &#39; + title + &#39;-out.mp4&#39; # windowsç³»ç»Ÿ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ffmpeg = r&#39;ffmpeg -i &#39; + title + &#39;.mp4 -i &#39; + title + &#39;.mp3 -acodec copy -vcodec copy &#39; + title + &#39;-out.mp4&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    os.popen(ffmpeg)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    print(&#39;è§†é¢‘åˆæˆç»“æŸï¼š&#39;, title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">merge(title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;Python_Reptile_Youtube-01.py<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#!/usr/bin/python3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">pip3 install requests --upgrade 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">pip3 install tqdm --upgrade
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import requests   # æ•°æ®è¯·æ±‚æ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import re     # æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import json  # æ•°æ®ç±»å‹å¤„ç†æ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from tqdm import tqdm   #è¿›åº¦æ¡é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import os    # å¤„ç†æ–‡ä»¶å’Œç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import pprint # æ ¼å¼åŒ–è¾“å‡ºæ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">for page in range(1, 151):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    print(f&#39;\n=====================   æ­£åœ¨çˆ¬å–ç¬¬{page}ç« è§†é¢‘æ•°æ®   ======================&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # ä¸‹è½½å…¶ä»–è§†é¢‘åˆ—è¡¨ï¼Œè¯·æ›´æ¢è§†é¢‘é“¾æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    url = &#39;https://www.youtube.com/watch?v=3ytZtZXQNHE&amp;list=PL2Kp-qxDDM0HrLhEmmbdbuC5PfItF38nN&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # å®šä¹‰è·å–æœåŠ¡å™¨è¿”å›æ•°æ®å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def get_response(html_url):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # å®šä¹‰è¯·æ±‚å®¢æˆ·ç«¯
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        headers = {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#39;referer&#39;: &#39;https://www.youtube.com/&#39;, # é˜²ç›—é“¾é…ç½®ï¼Œé˜²ç›—é“¾ä½œç”¨ï¼šå‘Šè¯‰æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å‘é€è¯·æ±‚çš„URLåœ°å€ï¼Œæ˜¯ä»å“ªé‡Œè¿‡æ¥çš„
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.84 Safari/537.36&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        response = requests.get(url=html_url, headers=headers) # å‘é€æ•°æ®è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # return è¿”å›å‡ºå»æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return response
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # å®šä¹‰è·å–è§†é¢‘ä¿¡æ¯å‡½æ•° 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def get_video_info(html_url):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        response = get_response(html_url)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡ºæ¥çš„æ•°æ®æ˜¯åˆ—è¡¨ [0] ç´¢å¼•å–0 å–å‡ºåˆ—è¡¨å†…çš„å†…å®¹ï¼šå­—ç¬¦ä¸²
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        html_data = re.findall(&#39;var ytInitialPlayerResponse = (.*?);var&#39;, response.text)[0]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # åƒjsonå­—å…¸æ•°æ®ï¼ŒæŠŠå­—ç¬¦ä¸²è½¬æˆjsonå­—å…¸æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        json_data = json.loads(html_data)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # pprint.pprint(json_data) # æ ¼å¼åŒ–æ‰“å°è¾“å‡ºï¼Œç”¨äºæŸ¥æ‰¾ç½‘å€å…³é”®å­—
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # æå–æ ‡é¢˜
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        title = json_data[&#39;videoDetails&#39;][&#39;title&#39;]  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        title = title.replace(&#39; &#39;, &#39;&#39;) # æ›¿æ¢æ‰æ ‡é¢˜å½“ä¸­çš„ç©ºæ ¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        title = re.sub(r&#39;[\/:|?*&#34;&lt;&gt;]&#39;, &#39;&#39;, title) # æ›¿æ¢æ‰æ ‡é¢˜å½“ä¸­çš„ä¸åˆæ³•å­—ç¬¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # æ•°æ®è§£æã€é”®å€¼å¯¹å–å€¼ã€æå–è§†é¢‘é“¾æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        video_url = json_data[&#39;streamingData&#39;][&#39;adaptiveFormats&#39;][0][&#39;url&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # æ•°æ®è§£æã€é”®å€¼å¯¹å–å€¼ã€æå–éŸ³é¢‘é“¾æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        audio_url = json_data[&#39;streamingData&#39;][&#39;adaptiveFormats&#39;][-2][&#39;url&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # å–å‡ºçš„æ•°æ®ä¿å­˜åˆ°åˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        video_info = [title, audio_url, video_url]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # return è¿”å›å‡ºå»æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return video_info
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # å®šä¹‰ä¿å­˜è§†é¢‘éŸ³é¢‘æ•°æ®å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def save(title, audio_url, video_url):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # éŸ³é¢‘/è§†é¢‘/å›¾ç‰‡/ç‰¹å®šæ ¼å¼æ–‡ä»¶ã€éƒ½ä»¥äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œä¿å­˜
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # å‘éŸ³é¢‘é“¾æ¥å‘é€è¯·æ±‚ã€è·å–éŸ³é¢‘å¤§å°ã€åˆå§‹åŒ–è¿›åº¦æ¡å¤§å°ã€å¼€å§‹ä¿å­˜éŸ³é¢‘
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        audio = requests.get(audio_url, stream=True)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        file_size = int(audio.headers.get(&#39;Content-Length&#39;))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        audio_pbar = tqdm(total=file_size)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        with open(f&#39;{title}.mp3&#39;, mode=&#39;wb&#39;) as f:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            for audio_chunk in audio.iter_content(1024*1024*2):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                f.write(audio_chunk)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                audio_pbar.set_description(f&#39;æ­£åœ¨ä¸‹è½½ï¼š{title}éŸ³é¢‘ä¸­......&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                audio_pbar.update(1024*1024*2)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            audio_pbar.set_description(&#39;ä¸‹è½½å®Œæˆï¼&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            audio_pbar.close()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # å‘éŸ³è§†é¢‘æ¥å‘é€è¯·æ±‚ã€è·å–è§†é¢‘å¤§å°ã€åˆå§‹åŒ–è¿›åº¦æ¡å¤§å°ã€å¼€å§‹ä¿å­˜è§†é¢‘
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        video = requests.get(video_url, stream=True)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        file_size = int(video.headers.get(&#39;Content-Length&#39;))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        video_pbar = tqdm(total=file_size)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        with open(f&#39;{title}.mp4&#39;, mode=&#39;wb&#39;) as f:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            # æŠŠè§†é¢‘åˆ†æˆ 1024 * 1024 * 2 ä¸ºç­‰åˆ†çš„å¤§å° è¿›è¡Œéå†
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            for video_chunk in video.iter_content(1024*1024*2):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                # å†™å…¥æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                f.write(video_chunk)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                # æ›´æ–°è¿›åº¦æ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                video_pbar.set_description(f&#39;æ­£åœ¨ä¸‹è½½ï¼š{title}è§†é¢‘ä¸­......&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                # æ›´æ–°è¿›åº¦æ¡é•¿åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                video_pbar.update(1024*1024*2)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            # ä¸‹è½½å®Œæ¯•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            video_pbar.set_description(&#39;ä¸‹è½½å®Œæˆï¼&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            # å…³é—­è¿›åº¦æ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            video_pbar.close()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    video_info = get_video_info(url)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    save(video_info[0], video_info[1], video_info[2])
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def merge(title):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        print(&#39;è§†é¢‘åˆæˆå¼€å§‹ï¼š&#39;, title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        FFMPEG = f&#39;ffmpeg -i &#39; + title + &#39;.mp4 -i &#39; + title + &#39;.mp3 -acodec copy -vcodec copy &#39; + title + &#39;-out.mp4&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        subprocess.Popen(FFMPEG, shell=True)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        print(&#39;è§†é¢‘åˆæˆç»“æŸï¼š&#39;, title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    merge(title)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../js/clipboard.min.js?1723803345" defer></script>
    <script src="../../js/perfect-scrollbar.min.js?1723803345" defer></script>
    <script src="../../js/theme.js?1723803345" defer></script>
  </body>
</html>

<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.125.4"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Configure PHP Expand"><meta itemprop=description content="Configure-PHP-Expand"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://erge.blog/imgs/s2-1.jpg"><meta itemprop=keywords content="PHP,PHP-Redis,PHP-Swoole,PHP-Freetype,PHP-Amqp,PHP-FastCGI"><meta property="og:type" content="article"><meta property="og:title" content="Configure PHP Expand"><meta property="og:description" content="Configure-PHP-Expand"><meta property="og:image" content="/imgs/s2-1.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://erge.blog/systems/linux/backend/php/configure-php-expand/"><meta property="og:site_name" content="二哥"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="二哥"><meta property="article:published_time" content="2022-08-12 23:58:36 +0800 CST"><meta property="article:modified_time" content="2022-11-14 23:58:36 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.0d420b6f564e6674edd4354ea71c0458a83f95ad464a75114b23d72515b1456c.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"configure-php-expand","permalink":"https://erge.blog/systems/linux/backend/php/configure-php-expand/","title":"Configure PHP Expand","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Configure PHP Expand - 二哥</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>二哥</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>Linux、Kubernetes、Docker、Python、CI/CD、Jenkins、Mysql、Nginx、Gitlab、Ansible、Zabbix</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-Home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-th hvr-icon"></i>分类</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>0</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-tools"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-tools hvr-icon"></i>工具</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>站点示例</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-Commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#安装配置php扩展>安装配置<code>PHP</code>扩展</a><ul><li><a href=#font-colorred安装fontphp-redisfont-colorred扩展font><font color=red>安装</font><code>PHP-redis</code><font color=red>扩展</font></a></li><li><a href=#font-colorred安装fontphp-swoolefont-colorred扩展font><font color=red>安装</font><code>php-swoole</code><font color=red>扩展</font></a></li><li><a href=#font-colorred安装fontphp-freetypefont-colorred扩展font><font color=red>安装</font><code>PHP-Freetype</code><font color=red>扩展</font></a></li><li><a href=#font-colorred安装fontphp-amqpfont-colorred扩展font><font color=red>安装</font><code>PHP-Amqp</code><font color=red>扩展</font></a></li></ul></li><li><a href=#php-fastcgi><code>PHP-FastCGI</code></a><ul><li><a href=#阿里云epel>阿里云<code>epel</code></a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=二哥 src=/imgs/img-lazy-loading.gif data-src=/imgs/s2-1.jpg><p class=site-author-name itemprop=name>二哥</p><div class=site-description itemprop=description>The man who has made up his mind to win will never say impossible – Napoleon Bonaparte</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>0</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>51</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>149</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=qq%e5%8f%b7 title="QQ → qq号" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-qq fa-fw hvr-icon"></i>
QQ
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/lisenhui title="知乎 → https://www.zhihu.com/people/lisenhui" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎
</a></span><span class=links-of-social-item><a href=qq@qq.com title="E-Mail → qq@qq.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://weibo.com/yourname title="Weibo → https://weibo.com/yourname" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-weibo fa-fw hvr-icon"></i>
Weibo
</a></span><span class=links-of-social-item><a href="https://www.youtube.com/watch?v=RgKAFK5djSk" title="Youtube → https://www.youtube.com/watch?v=RgKAFK5djSk" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-youtube fa-fw hvr-icon"></i>
Youtube
</a></span><span class=links-of-social-item><a href=https://github.com/elkan1788 title="Github → https://github.com/elkan1788" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/hugo-next rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://erge.blog/systems/linux/backend/php/configure-php-expand/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/s2-1.jpg"><meta itemprop=name content="二哥"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="二哥"><meta itemprop=description content="The man who has made up his mind to win will never say impossible – Napoleon Bonaparte"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Configure PHP Expand"><meta itemprop=description content="Configure-PHP-Expand"></span><header class=post-header><h1 class=post-title itemprop="name headline">Configure PHP Expand
<a href=https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name/Systems/Linux/Backend/PHP/Configure-PHP-Expand.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2022-08-12 23:58:36 +0800 CST" itemprop="dateCreated datePublished" datetime="2022-08-12 23:58:36 +0800 CST">2022-08-12
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2022-11-14T23:58:36+08:00 itemprop=dateModified datetime=2022-11-14T23:58:36+08:00>2022-11-14</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/php itemprop=url rel=index><span itemprop=name>PHP</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2757</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>6分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/systems/linux/backend/php/configure-php-expand/><i class="fa fa-sync fa-spin"></i>
</span></span><span class=post-meta-item title><span class=post-meta-item-icon><i class="far fa-comments"></i>
</span><span class=post-meta-item-text title=评论>评论：
</span><span id=comments-count class=waline-comment-count data-path=/systems/linux/backend/php/configure-php-expand/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=安装配置php扩展>安装配置<code>PHP</code>扩展
<a class=header-anchor href=#%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%aephp%e6%89%a9%e5%b1%95></a></h2><h3 id=font-colorred安装fontphp-redisfont-colorred扩展font><font color=red>安装</font><code>PHP-redis</code><font color=red>扩展</font>
<a class=header-anchor href=#font-colorred%e5%ae%89%e8%a3%85fontphp-redisfont-colorred%e6%89%a9%e5%b1%95font></a></h3><div class="note info"><ul><li><ol><li><font color=red>下载、安装</font><code>PHP-redis</code><font color=red>扩展</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ cd /usr/local/src
</span></span><span style=display:flex><span>$ curl -O https://pecl.php.net/get/redis-4.0.0.tgz
</span></span><span style=display:flex><span>$ tar zxvf /usr/local/src/redis-4.0.0.tgz -C /usr/local/src
</span></span><span style=display:flex><span>$ cd /usr/local/src/redis-4.0.0
</span></span><span style=display:flex><span>$ /usr/local/php/bin/phpize
</span></span><span style=display:flex><span>$ ./configure --with-php-config<span style=color:#f92672>=</span>/usr/local/php/bin/php-config
</span></span><span style=display:flex><span>$ make <span style=color:#f92672>&amp;&amp;</span> make install
</span></span></code></pre></div></blockquote><ul><li><ol start=2><li><font color=red>配置</font><code>PHP</code><font color=red>启用</font><code>PHP-Redis</code><font color=red>扩展</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ sed -i <span style=color:#e6db74>&#39;N;736iextension =/usr/local/php/lib/php/extensions/no-debug-non-zts20170718/redis.so&#39;</span> /usr/local/php/etc/php.ini  	<span style=color:#75715e># 修改配置文件启用redis模块</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重启php使之生效</span>
</span></span><span style=display:flex><span>$ systemctl restart php-fpm
</span></span><span style=display:flex><span><span style=color:#75715e># /etc/init.d/php-fpm restart</span>
</span></span><span style=display:flex><span>$ php -m|grep redis
</span></span><span style=display:flex><span>$ php --ri redis  	<span style=color:#75715e># 查看redis扩展版本</span>
</span></span></code></pre></div></blockquote></div><h3 id=font-colorred安装fontphp-swoolefont-colorred扩展font><font color=red>安装</font><code>php-swoole</code><font color=red>扩展</font>
<a class=header-anchor href=#font-colorred%e5%ae%89%e8%a3%85fontphp-swoolefont-colorred%e6%89%a9%e5%b1%95font></a></h3><div class="note info"><blockquote><p><a href=https://github.com/swoft-cloud/swoft/blob/master/Dockerfile title="<code>docker install swoft</code>" rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>docker install swoft</code>
<i class="fa fa-external-link-alt"></i></a></p></blockquote><ul><li><ol><li><font color=red>下载、安装</font><code>php-swoole</code><font color=red>扩展</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ cd /usr/local/src
</span></span><span style=display:flex><span>$ git clone https://github.com/swoole/swoole-src.git
</span></span><span style=display:flex><span>$ cd /usr/local/src/swoole-src/
</span></span><span style=display:flex><span>$ git checkout v4.4.7  	<span style=color:#75715e># 切换指定版本</span>
</span></span><span style=display:flex><span>$ git branch  	<span style=color:#75715e># 查看当前版本</span>
</span></span><span style=display:flex><span>$ phpize
</span></span><span style=display:flex><span>$ ./configure
</span></span><span style=display:flex><span>$ make -j4 <span style=color:#f92672>&amp;&amp;</span> make install
</span></span></code></pre></div></blockquote><ul><li><ol start=2><li><font color=red>配置</font><code>PHP</code><font color=red>启用</font><code>PHP-Swoole</code><font color=red>扩展</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ sed -i <span style=color:#e6db74>&#39;N;736iextension =/usr/local/php/lib/php/extensions/no-debug-non-zts20170718/swoole.so&#39;</span> /usr/local/php/etc/php.ini  	<span style=color:#75715e># 修改配置文件启用swoole模块</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sed -i &#39;N;736iswoole.enable_coroutine = Off&#39; /usr/local/php/etc/php.ini</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ systemctl restart php-fpm
</span></span><span style=display:flex><span><span style=color:#75715e># /etc/init.d/php-fpm restart</span>
</span></span><span style=display:flex><span>$ php -m|grep swoole
</span></span><span style=display:flex><span>$ php --ri swoole
</span></span></code></pre></div></blockquote></div><h3 id=font-colorred安装fontphp-freetypefont-colorred扩展font><font color=red>安装</font><code>PHP-Freetype</code><font color=red>扩展</font>
<a class=header-anchor href=#font-colorred%e5%ae%89%e8%a3%85fontphp-freetypefont-colorred%e6%89%a9%e5%b1%95font></a></h3><div class="note info"><ul><li><ol><li><font color=red>下载、安装</font><code>PHP-Freetype</code><font color=red>扩展</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ wget -P /usr/local/src https://download.savannah.gnu.org/releases/freetype/freetype-2.9.tar.gz
</span></span><span style=display:flex><span><span style=color:#75715e># https://mirror.hostiran.ir/gnu/releases/freetype/freetype-2.12.1.tar.gz</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ tar zxvf /usr/local/src/freetype-2.9.tar.gz -C /usr/local/src/
</span></span><span style=display:flex><span>$ cd /usr/local/src/freetype-2.9/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ./configure --prefix<span style=color:#f92672>=</span>/usr/local/freetype
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ make -j4 <span style=color:#f92672>&amp;&amp;</span> make install
</span></span></code></pre></div><ul><li>1.1 <code>Debian</code><font color=red>系统安装</font><code>FreeType</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 进入php中的gd 目录</span>
</span></span><span style=display:flex><span>$ cd /opt/src/php-7.2.22/ext/gd/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 利用phpize</span>
</span></span><span style=display:flex><span>$ /opt/php/bin/phpize
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 清理之前的安装配置</span>
</span></span><span style=display:flex><span>$ make clean
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 检查参数</span>
</span></span><span style=display:flex><span>$ ./configure --with-php-config<span style=color:#f92672>=</span>/opt/php/bin/php-config --with-jpeg-dir --with-png-dir --with-freetype-dir<span style=color:#f92672>=</span>/opt/php/freetype --with-zlib-dir --with-gd
</span></span><span style=display:flex><span><span style=color:#75715e># 编译安装</span>
</span></span><span style=display:flex><span>$ make -j4 &amp; make install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 修改 php.ini文件</span>
</span></span><span style=display:flex><span>$ cat &gt;/opt/php/etc/php.ini<span style=color:#e6db74>&lt;&lt;-EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>extension=/opt/php/lib/php/extensions/no-debug-non-zts-20170718/gd.so
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div></blockquote><ul><li><ol start=2><li><font color=red>配置</font><code>PHP</code><font color=red>加入扩展路径</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ php -i  	<span style=color:#75715e># 查看configure中使用参数</span>
</span></span><span style=display:flex><span>$ ./configure --prefix<span style=color:#f92672>=</span>/usr/local/php --with-freetype-dir<span style=color:#f92672>=</span>/usr/local/freetype  	<span style=color:#75715e># --with-freetype-dir=/usr/local/freetype 启用此扩展</span>
</span></span></code></pre></div></blockquote></div><h3 id=font-colorred安装fontphp-amqpfont-colorred扩展font><font color=red>安装</font><code>PHP-Amqp</code><font color=red>扩展</font>
<a class=header-anchor href=#font-colorred%e5%ae%89%e8%a3%85fontphp-amqpfont-colorred%e6%89%a9%e5%b1%95font></a></h3><div class="note info"><ul><li><ol><li><font color=red>第一种方式安装</font><code>PHP-amqp</code></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ /usr/local/php/bin/pecl install amqp
</span></span></code></pre></div></blockquote><ul><li><ol start=2><li><font color=red>第二种方式安装</font><code>PHP-amqp</code></li></ol></li></ul><blockquote><ul><li>2.1 <font color=red>下载、安装</font><code>PHP-amqp</code><font color=red>扩展</font></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ wget -P /usr/local/src/ https://pecl.php.net/get/amqp-1.9.4.tgz
</span></span><span style=display:flex><span>$ tar -xvf /usr/local/src/amqp-1.9.4.tgz -C /usr/local/src
</span></span><span style=display:flex><span>$ cd /usr/local/src/amqp-1.9.4
</span></span><span style=display:flex><span>$ /usr/local/php/bin/phpize
</span></span><span style=display:flex><span>$ ./configure --with-php-config<span style=color:#f92672>=</span>/usr/local/php/bin/php-config
</span></span></code></pre></div><ul><li>2.2 <font color=red>如果安装中报错处理方式</font></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ wget -P /usr/local/src https://github.com/alanxz/rabbitmq-c/releases/download/v0.7.1/rabbitmq-c0.7.1.tar.gz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ tar zxvf /usr/local/src/rabbitmq-c-0.7.1.tar.gz -C /usr/local/src/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ cd /usr/local/src/rabbitmq-c-0.7.1
</span></span><span style=display:flex><span>$ ./configure --prefix<span style=color:#f92672>=</span>/usr/local/rabbitmq-c-0.7.1
</span></span><span style=display:flex><span>$ make <span style=color:#f92672>&amp;&amp;</span> make install
</span></span></code></pre></div><ul><li>2.3 <font color=red>重新配置编译安装</font></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ cd /usr/local/src/amqp-1.9.4
</span></span><span style=display:flex><span>$ ./configure --with-php-config<span style=color:#f92672>=</span>/usr/local/php/bin/php-config --with-amqp --withlibrabbitmq-dir<span style=color:#f92672>=</span>/usr/local/rabbitmq-c-0.7.1
</span></span><span style=display:flex><span>$ make <span style=color:#f92672>&amp;&amp;</span> make install
</span></span></code></pre></div></blockquote><ul><li><ol start=3><li><font color=red>配置</font><code>PHP</code><font color=red>启用</font><code>PHP-amqp</code><font color=red>扩展</font></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ sed -i <span style=color:#e6db74>&#39;N;736iextension =/usr/local/php/lib/php/extensions/no-debug-non-zts20170718/amqp.so&#39;</span> /usr/local/php/etc/php.ini  	<span style=color:#75715e># 修改配置文件启用php-amqp模块</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重启php使之生效</span>
</span></span><span style=display:flex><span>$ systemctl restart php-fpm
</span></span><span style=display:flex><span><span style=color:#75715e># /etc/init.d/php-fpm restart</span>
</span></span><span style=display:flex><span>$ php -m|grep amqp
</span></span><span style=display:flex><span>$ php --ri amqp
</span></span></code></pre></div></blockquote></div><h2 id=php-fastcgi><code>PHP-FastCGI</code>
<a class=header-anchor href=#php-fastcgi></a></h2><div class="note info"><ul><li><ol><li><font color=red>什么是</font><code>CGI</code></font></li></ol></li></ul><blockquote><p><code>CGI</code>的全称为<mark>通用网关接口(Common Gateway Interface)</mark>，为<code>HTTP</code>服务器与其他机器上的程序 服务通信交流的一种工具，<code>CGI</code>程序须运行在网络服务器上。 传统<code>CGI</code>接口方式的主要缺点是性能较差，因为每次<code>HTTP</code>服务器遇到动态程序时都需要重新启动解析器 来执行解析，之后结果才会被返回给<code>HTTP</code>服务器。这在处理高并发访问时几乎是不可用的，因此就诞生 了<code>FastCGI</code>。另外，传统的<code>CGI</code>接口方式安全性也很差，故而现在已经很少被使用了。</p></blockquote><ul><li><ol start=2><li><font color=red>什么是</font><code>FastCGI</code></li></ol></li></ul><blockquote><p><code>FastCGI</code>是一个可伸缩地、高速地在<code>HTTP</code>服务器和动态脚本语言间通信的接口（在<code>Linux</code>下，<code>FastCG</code>接 口即为<code>socket</code>，这个<code>socket</code>可以是文件<code>socket</code>，也可以是<code>IP socket</code>），主要优点是把动态语言和<code>HTTP</code>服务器分离开来。多数流行的<code>HTTP</code>服务器都支持<code>FastCGI</code>，包括<code>Apache</code>、<code>Nginx</code>和<code>Lighttpd</code>等。 同时，<code>FastCGI</code>也被许多脚本语言所支持，例如当前比较流行的脚本语言<code>PHP</code>。<code>FastCGI</code>接口采用的是<code>C/S </code>架构，它可以将<code>HTTP</code>服务器和脚本解析服务器分开，同时还能在脚本解析服务器上启动一个或多个脚本 来解析守护进程。当<code>HTTP</code>服务器遇到动态程序时，可以将其直接交付给<code>FastCGI</code>进程来执行，然后将得 到的结果返回给浏览器。这种方式可以让<code>HTTP</code>服务器专一地处理静态请求，或者将动态脚本服务器的结 果返回给客户端，这在很大程度上提高了整个应用系统的性能。</p></blockquote><ul><li><ol start=3><li><code>FastCGI</code><font color=red>的重要特点如下：</font></li></ol></li></ul><blockquote><ul><li><p><code>HTTP</code><font color=red>服务器和动态脚本语言间通信的接口或工具</font></p></li><li><p><font color=red>可把动态语言解析和</font><code>HTTP</code><font color=red>服务器分离开</font></p></li><li><p><code>Nginx、Apache、Lighttpd</code><font color=red>以及多数动态语言都支持</font><code>FastCGI</code></p></li><li><p><code>FastCGI</code><font color=red>接口方式采用<code>C/S</code>结构，分为客户端：<code>HTTP</code>服务器，和服务器端：</font><mark>动态语言解析服务器</mark></p></li><li><p><font color=red>动态语言服务器端可以启动多个<code>FastCGI</code>的守护进程，例如：</font><code>php-fpm(fcgi process mangement)</code></p></li><li><p><code>HTTP</code><font color=red>服务器通过，例如：</font><code>Nginx fastcgi_pass。FastCGI</code><font color=red>客户端和动态语言</font><code>FastCGI</code><font color=red>服务器端通信，例如：</font><code>php-fpm</code></p></li></ul></blockquote><p><img src=/imgs/img-lazy-loading.gif data-src=D:%5cgit-library%5cimgs%5cPhp_server%5cSnipaste_2022-08-14_14-44-29.png alt></p></div><h3 id=阿里云epel>阿里云<code>epel</code>
<a class=header-anchor href=#%e9%98%bf%e9%87%8c%e4%ba%91epel></a></h3><div class="note info"><ul><li><ol><li><a href=https://developer.aliyun.com/mirror/epel title="阿里云<code>epel</code>简介" rel="noopener external nofollow noreferrer" target=_blank class=exturl>阿里云<code>epel</code>简介
<i class="fa fa-external-link-alt"></i></a></li></ol></li><li><ol start=2><li><font color=red>设定阿里云<code>epel</code>源</font>
<a href=https://mirrors.aliyun.com/epel/ title="阿里云<code>epel</code>下载" rel="noopener external nofollow noreferrer" target=_blank class=exturl>阿里云<code>epel</code>下载
<i class="fa fa-external-link-alt"></i></a></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 备份其他epel源</span>
</span></span><span style=display:flex><span>$ mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backup
</span></span><span style=display:flex><span>$ mv /etc/yum.repos.d/epel-testing.repo /etc/yum.repos.d/epel-testing.repo.backup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ wget -O /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ yum -y install mhash
</span></span><span style=display:flex><span>$ yum -y install mcrypt
</span></span><span style=display:flex><span>$ yum -y install libmcrypt-devel
</span></span><span style=display:flex><span>$ yum install zlib-devel libxml2-devel libjpeg-devel libjpeg-turbo-devel libiconv-devel -y
</span></span><span style=display:flex><span>$ yum install freetype-devel libpng-devel gd-devel libcurl-devel libxslt-devel libxslt-devel -y
</span></span></code></pre></div></blockquote><ul><li><ol start=3><li><font color=red>下载安装</font><code>libiconv</code></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ wget -P /usr/local/src http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.14.tar.gz
</span></span><span style=display:flex><span>$ tar -zxf /usr/local/src/libiconv-1.14.tar.gz -C /usr/local/src
</span></span><span style=display:flex><span>cd /usr/local/src/libiconv-1.14
</span></span><span style=display:flex><span>$ ./configure --prefix<span style=color:#f92672>=</span>/usr/local/libiconv
</span></span><span style=display:flex><span>$ make
</span></span><span style=display:flex><span>$ make install
</span></span></code></pre></div><ul><li>3.1 <font color=red>配置<code>PHP</code>启用</font><code>libiconv</code></li></ul><blockquote><ul><li><code>--prefix=/application/php5.5.32</code><font color=red>： 表示指定<code>PHP</code>的安装路径</font></li><li><code>--with-mysql=/application/mysql</code><font color=red>：表示需要指定<code>MySQL</code>的安装路径，安装<code>PHP需</code>要<code>MySQL</code>的相关内容，当然如果没有<code>MySQL</code>安装包也可以不单独安装，这样情况下使用</font><code>--with-mysql=mysqlnd</code>替代<code>--with-mysql=/application/mysql</code>，因为<code>PHP</code>软件自带连接<code>MySQL</code>客户工具</li><li><code>--with-fpm-user=nginx</code><font color=red>：表示指定<code>PHP-FPM</code>进程管理用户为<code>Nginx</code>，此处最好和<code>Nginx</code>服务用户统一</font></li><li><code>--with-fpm-group=nginx</code><font color=red>：表示指定<code>PHP-FPM</code>进程管理组为<code>Nginx</code>，此处最好和<code>Nginx</code>服务用户组统一</font></li><li><code>--enable-fpm</code><font color=red>:表示激活<code>PHP-FPM</code>方式服务，即<code>FastCGIF</code>方式运行<code>PHP</code>服务</font></li><li>可以通过执行<code>./configure --help</code><font color=red>命令来详细查看以上各参数用途</font></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ cd /usr/local/src/php5.5.32
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ./configure <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--prefix<span style=color:#f92672>=</span>/application/php5.5.32 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--with-iconv-dir<span style=color:#f92672>=</span>/usr/local/libiconv <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--with-mysql<span style=color:#f92672>=</span>mysqlnd --with-libxml-dir<span style=color:#f92672>=</span>/usr <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--with-freetype-dir --with-jpeg-dir --with-png-dir <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--with-zlib --enable-xml --disable-rpath --enable-safe-mode <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-bcmath --enable-shmop --enable-sysvsem --with-curl <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-inline-optimization --with-curlwrappers --enable-fpm <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-mbregex --enable-mbstring --with-mcrypt --with-gd <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-sockets --with-xmlrpc --enable-zip --enable-soap <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-short-tags --enable-zend-multibyte --enable-ftp <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-static --with-xsl --enable-opcache<span style=color:#f92672>=</span>no --with-fpm-user<span style=color:#f92672>=</span>www <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--with-fpm-group<span style=color:#f92672>=</span>www
</span></span><span style=display:flex><span>$ ln -s /application/mysql/lib/libmysqlclient.so.18 /usr/lib64/
</span></span><span style=display:flex><span>$ touch ext/phar/phar.phar
</span></span><span style=display:flex><span>$ make <span style=color:#f92672>&amp;&amp;</span> make install
</span></span></code></pre></div></blockquote></blockquote><ul><li><ol start=4><li><font color=red>在<code>Nginx</code>的<code>conf</code>配置中字段<code>server</code>编写<code>php</code>的</font><code>location</code></li></ol></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>location ~ .*<span style=color:#ae81ff>\.</span><span style=color:#f92672>(</span>php|php5<span style=color:#f92672>)</span>?$ <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>root html/blog;
</span></span><span style=display:flex><span>fastcgi_pass 127.0.0.1:9000;  	<span style=color:#75715e># 或者使用：unix:/tmp/php-cgi-56.sock;</span>
</span></span><span style=display:flex><span>fastcgi_index index.php;
</span></span><span style=display:flex><span>fastcgi_split_path_info ^<span style=color:#f92672>((</span>?U<span style=color:#f92672>)</span>.+<span style=color:#ae81ff>\.</span>php<span style=color:#f92672>)(</span>/?.+<span style=color:#f92672>)</span>$;
</span></span><span style=display:flex><span>fastcgi_param PATH_INFO $fastcgi_path_info;
</span></span><span style=display:flex><span>include fastcgi_params;
</span></span><span style=display:flex><span><span style=color:#75715e># include fastcgi.conf</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>4.1 <font color=red>配置<code>fastcgi.conf</code>文件</font></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ cat &gt;fastcgi.conf<span style=color:#e6db74>&lt;&lt;-EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;# 脚本文件请求的路径
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  QUERY_STRING       $query_string;  	 # 请求的参数;如?app=123
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  REQUEST_METHOD     $request_method;  	# 请求的动作(GET,POST)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  CONTENT_TYPE       $content_type;  	# 请求头中的Content-Type字段
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  CONTENT_LENGTH     $content_length;  	 # 请求头中的Content-length字段
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;  	# 脚本名称
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  REQUEST_URI        $request_uri;  	# 请求的地址不带参数
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  DOCUMENT_URI       $document_uri;  	# 与document_uri; #与uri相同
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  DOCUMENT_ROOT      $document_root;  	# 网站的根目录。在server配置中root指令中指定的值
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  SERVER_PROTOCOL    $server_protocol;  	# 请求使用的协议，通常是HTTP/1.0或HTTP/1.1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  REQUEST_SCHEME     $scheme;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  HTTPS              $https if_not_empty;  	# https 如果value非空才进行设置
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;  	# cgi 版本
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;  	# nginx 版本号，可修改、隐藏
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  REMOTE_ADDR        $remote_addr;  	 # 客户端IP
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  REMOTE_PORT        $remote_port;  	# 客户端端口
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  SERVER_ADDR        $server_addr;  	# 服务器IP地址
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  SERVER_PORT        $server_port;  	# 服务器端口
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  SERVER_NAME        $server_name;  	# 服务器名，域名在server配置中指定的server_name
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>## GeoIP
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_ADDR $remote_addr;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_COUNTRY_CODE $geoip_country_code;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_COUNTRY_NAME $geoip_country_name;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_REGION $geoip_region;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_REGION_NAME $geoip_region_name;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_CITY $geoip_city;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_AREA_CODE $geoip_area_code;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_LATITUDE $geoip_latitude;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_LONGITUDE $geoip_longitude;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_POSTAL_CODE $geoip_postal_code;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#fastcgi_param GEOIP_ORGANIZATION $geoip_org;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># PHP only, required if PHP was built with --enable-force-cgi-redirect
</span></span></span><span style=display:flex><span><span style=color:#e6db74>fastcgi_param  REDIRECT_STATUS    200;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><ul><li>4.2 <code>nginx -t</code><font color=red>检查语法成功，重启</font><code>nginx</code>，写一个<code>PHP</code>页面</li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>&lt;?php phpinfo<span style=color:#f92672>()</span>； ?&gt;
</span></span></code></pre></div></blockquote><ul><li>4.32 <font color=red>测试<code>PHP</code>连接</font><code>mysql</code></li></ul><blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>&lt;?php
</span></span><span style=display:flex><span>$link_id<span style=color:#f92672>=</span>mysql_connect<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;localhost&#39;</span>,<span style=color:#e6db74>&#39;root&#39;</span>,<span style=color:#e6db74>&#39;oldboy123&#39;</span><span style=color:#f92672>)</span> or mysql_error<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>$link_id<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;mysql successful by oldboy !&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span><span style=color:#66d9ef>else</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>echo mysql_error<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>?&gt;
</span></span></code></pre></div></blockquote></blockquote></div></div><footer class=post-footer><div class=post-tags><a href=/tags/php>PHP
</a><a href=/tags/php-redis>PHP-Redis
</a><a href=/tags/php-swoole>PHP-Swoole
</a><a href=/tags/php-freetype>PHP-Freetype
</a><a href=/tags/php-amqp>PHP-Amqp
</a><a href=/tags/php-fastcgi>PHP-FastCGI</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="二哥 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="二哥 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
Configure PHP Expand</li><li class=post-copyright-author><strong>本文作者： </strong>二哥</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://erge.blog/systems/linux/backend/php/configure-php-expand/ title="Configure PHP Expand">https://erge.blog/systems/linux/backend/php/configure-php-expand/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/atom.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/systems/linux/work-order/install-ferry/ rel=next title="Install Ferry"><i class="fa fa-chevron-left"></i> Install Ferry</a></div><div class="post-nav-prev post-nav-item"><a href=/systems/linux/vpn/install-vpn/ rel=prev title="Install VPN">Install VPN
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div><div class=comment-switch><span class=first-comment>Giscus</span>
<span class=switch-btn></span>
<span class=second-comment>Waline</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=waline-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>二哥</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.125.4 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>粤ICP备 18047355-1 号</a>
<img src=/imgs/gongan.png alt=沪公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402009770" target=_blank>沪公网安备 31011402009770 号</a></div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel>
</a><a target=_blank href=https://upyun.com title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云>
</a><a target=_blank href=https://webify.cloudbase.net title=Webify>Webify
</a><span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://erge.blog/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.b0c78e5a4df586ee46d02716ffa91a4a322e56763e04e91eb2ba052c9469ed02.js defer></script></body></html>
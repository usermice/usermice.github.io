<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Rediså®‰è£… åç§°åœ°å€ æè¿° Rediså®‰è£…åŒ… Redisä¾èµ–gccä¸gcc-c&#43;&#43;ï¼Œè€ŒRedis5.0ä»¥ä¸Šéœ€è¦æ›´é«˜ç‰ˆæœ¬gcc å®‰è£…Gcc # Debianç³»ç»Ÿ $ sudo apt-get install wget gcc make pkg-config $ yum -y install gcc gcc-c&#43;&#43; centos-release-scl wget git å®‰è£…é«˜ç‰ˆæœ¬gcc $ yum -y install devtoolset-9-gcc devtoolset-9-gcc-c&#43;&#43; devtoolset-9-binutils # ä¸´æ—¶ç”Ÿæ•ˆ $ echo &#39;scl enable devtoolset-9 bash&#39; # æ·»åŠ åˆ°ç¯å¢ƒå˜é‡æ°¸ä¹…ç”Ÿæ•ˆ $ echo &#34;source /opt/rh/devtoolset-9/enable&#34; &gt;&gt;/etc/profile $ source /etc/profile $ echo &#39;scl enable devtoolset-9 bash&#39; &gt;&gt; ~/.">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/s2-1.png">
    <meta name="twitter:title" content="Install_Redis :: Hugo Relearn Theme">
    <meta name="twitter:description" content="Rediså®‰è£… åç§°åœ°å€ æè¿° Rediså®‰è£…åŒ… Redisä¾èµ–gccä¸gcc-c&#43;&#43;ï¼Œè€ŒRedis5.0ä»¥ä¸Šéœ€è¦æ›´é«˜ç‰ˆæœ¬gcc å®‰è£…Gcc # Debianç³»ç»Ÿ $ sudo apt-get install wget gcc make pkg-config $ yum -y install gcc gcc-c&#43;&#43; centos-release-scl wget git å®‰è£…é«˜ç‰ˆæœ¬gcc $ yum -y install devtoolset-9-gcc devtoolset-9-gcc-c&#43;&#43; devtoolset-9-binutils # ä¸´æ—¶ç”Ÿæ•ˆ $ echo &#39;scl enable devtoolset-9 bash&#39; # æ·»åŠ åˆ°ç¯å¢ƒå˜é‡æ°¸ä¹…ç”Ÿæ•ˆ $ echo &#34;source /opt/rh/devtoolset-9/enable&#34; &gt;&gt;/etc/profile $ source /etc/profile $ echo &#39;scl enable devtoolset-9 bash&#39; &gt;&gt; ~/.">
    <meta property="og:url" content="https://erge.blog/systems/linux/nosql/install_redis/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Install_Redis :: Hugo Relearn Theme">
    <meta property="og:description" content="Rediså®‰è£… åç§°åœ°å€ æè¿° Rediså®‰è£…åŒ… Redisä¾èµ–gccä¸gcc-c&#43;&#43;ï¼Œè€ŒRedis5.0ä»¥ä¸Šéœ€è¦æ›´é«˜ç‰ˆæœ¬gcc å®‰è£…Gcc # Debianç³»ç»Ÿ $ sudo apt-get install wget gcc make pkg-config $ yum -y install gcc gcc-c&#43;&#43; centos-release-scl wget git å®‰è£…é«˜ç‰ˆæœ¬gcc $ yum -y install devtoolset-9-gcc devtoolset-9-gcc-c&#43;&#43; devtoolset-9-binutils # ä¸´æ—¶ç”Ÿæ•ˆ $ echo &#39;scl enable devtoolset-9 bash&#39; # æ·»åŠ åˆ°ç¯å¢ƒå˜é‡æ°¸ä¹…ç”Ÿæ•ˆ $ echo &#34;source /opt/rh/devtoolset-9/enable&#34; &gt;&gt;/etc/profile $ source /etc/profile $ echo &#39;scl enable devtoolset-9 bash&#39; &gt;&gt; ~/.">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Systems">
    <meta property="article:published_time" content="2024-06-21T18:43:00+08:00">
    <meta property="article:modified_time" content="2024-06-21T18:43:00+08:00">
    <meta property="og:image" content="https://erge.blog/images/s2-1.png">
    <meta itemprop="name" content="Install_Redis :: Hugo Relearn Theme">
    <meta itemprop="description" content="Rediså®‰è£… åç§°åœ°å€ æè¿° Rediså®‰è£…åŒ… Redisä¾èµ–gccä¸gcc-c&#43;&#43;ï¼Œè€ŒRedis5.0ä»¥ä¸Šéœ€è¦æ›´é«˜ç‰ˆæœ¬gcc å®‰è£…Gcc # Debianç³»ç»Ÿ $ sudo apt-get install wget gcc make pkg-config $ yum -y install gcc gcc-c&#43;&#43; centos-release-scl wget git å®‰è£…é«˜ç‰ˆæœ¬gcc $ yum -y install devtoolset-9-gcc devtoolset-9-gcc-c&#43;&#43; devtoolset-9-binutils # ä¸´æ—¶ç”Ÿæ•ˆ $ echo &#39;scl enable devtoolset-9 bash&#39; # æ·»åŠ åˆ°ç¯å¢ƒå˜é‡æ°¸ä¹…ç”Ÿæ•ˆ $ echo &#34;source /opt/rh/devtoolset-9/enable&#34; &gt;&gt;/etc/profile $ source /etc/profile $ echo &#39;scl enable devtoolset-9 bash&#39; &gt;&gt; ~/.">
    <meta itemprop="datePublished" content="2024-06-21T18:43:00+08:00">
    <meta itemprop="dateModified" content="2024-06-21T18:43:00+08:00">
    <meta itemprop="wordCount" content="572">
    <meta itemprop="image" content="https://erge.blog/images/s2-1.png">
    <title>Install_Redis :: Hugo Relearn Theme</title>
    <link href="../../../../images/favicon.ico?1721644198" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../../css/fontawesome-all.min.css?1721644199" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fontawesome-all.min.css?1721644199" rel="stylesheet"></noscript>
    <link href="../../../../css/nucleus.css?1721644199" rel="stylesheet">
    <link href="../../../../css/auto-complete.css?1721644199" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/auto-complete.css?1721644199" rel="stylesheet"></noscript>
    <link href="../../../../css/perfect-scrollbar.min.css?1721644199" rel="stylesheet">
    <link href="../../../../css/fonts.css?1721644199" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fonts.css?1721644199" rel="stylesheet"></noscript>
    <link href="../../../../css/theme.css?1721644199" rel="stylesheet">
    <link href="../../../../css/theme-relearn-auto.css?1721644199" rel="stylesheet" id="R-variant-style">
    <link href="../../../../css/chroma-relearn-auto.css?1721644199" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../../css/variant.css?1721644199" rel="stylesheet">
    <link href="../../../../css/print.css?1721644199" rel="stylesheet" media="print">
    <link href="../../../../css/format-print.css?1721644199" rel="stylesheet">
    <script src="../../../../js/variant.js?1721644199"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../../systems/linux/nosql/install_redis/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/nosql/"><span itemprop="name">Nosql</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Install_Redis</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/nosql/install_scylladb/" title="Install_Scylladb (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/nosql/install_redis_cluster/" title="Install_Redis_Cluster (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_redis">Install_Redis</h1>

<h2 id="rediså®‰è£…"><code>Redis</code>å®‰è£…</h2>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://download.redis.io/releases/" rel="external" target="_self"><code>Redis</code>å®‰è£…åŒ…</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol>
<li><code>Redis</code><!-- raw HTML omitted -->ä¾èµ–<!-- raw HTML omitted --><code>gcc</code><!-- raw HTML omitted -->ä¸<!-- raw HTML omitted --><code>gcc-c++</code><!-- raw HTML omitted -->ï¼Œè€Œ<!-- raw HTML omitted --><code>Redis5.0</code><!-- raw HTML omitted -->ä»¥ä¸Šéœ€è¦æ›´é«˜ç‰ˆæœ¬<!-- raw HTML omitted --><code>gcc</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Gcc</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Debianç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span>$ sudo apt-get install wget gcc make pkg-config
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ yum -y install gcc gcc-c++ centos-release-scl wget git</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å®‰è£…é«˜ç‰ˆæœ¬<!-- raw HTML omitted --><code>gcc</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¸´æ—¶ç”Ÿæ•ˆ</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;scl enable devtoolset-9 bash&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ·»åŠ åˆ°ç¯å¢ƒå˜é‡æ°¸ä¹…ç”Ÿæ•ˆ</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;source /opt/rh/devtoolset-9/enable&#34;</span> &gt;&gt;/etc/profile
</span></span><span style="display:flex;"><span>$ source /etc/profile
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;scl enable devtoolset-9 bash&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span>$ source ~/.bashrc   <span style="color:#75715e"># ä½¿æ›´æ”¹ç”Ÿæ•ˆ</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¦‚æœå‡ºç°ä¸èƒ½è·³è½¬rootæ‰§è¡Œ</span>
</span></span><span style="display:flex;"><span>$ sudo scl enable devtoolset-9 bash</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Redis</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¸‹è½½<!-- raw HTML omitted --><code>tar</code><!-- raw HTML omitted -->åŒ…åˆ°æŒ‡å®šç›®å¹¶è§£å‹<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget -P /usr/local/src/ https://download.redis.io/releases/redis-6.2.6.tar.gz  	<span style="color:#75715e"># ä¸‹è½½åˆ°æŒ‡å®šç›®å½•</span>
</span></span><span style="display:flex;"><span>$ sudo wget -P /usr/local/src/ https://download.redis.io/redis-stable.tar.gz</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è§£å‹åˆ°æŒ‡å®šç›®å½•å¹¶é‡å‘½å<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /usr/local/redis <span style="color:#f92672">&amp;&amp;</span> tar zxvf /usr/local/src/redis-6.2.6.tar.gz -C /usr/local/redis --strip-components <span style="color:#ae81ff">1</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>redis</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /usr/local/redis
</span></span><span style="display:flex;"><span>$ make MALLOC<span style="color:#f92672">=</span>libc BUILD_TLS<span style="color:#f92672">=</span>yes  	<span style="color:#75715e"># æœ‰äº›ç‰ˆæœ¬æˆ–è€…äº‘éœ€è¦ BUILD_TLS=yes å‚æ•°</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æ‰§è¡Œå®‰è£…<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ make PREFIX<span style="color:#f92672">=</span>/usr/local/redis install </span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹é…ç½®æ–‡ä»¶<!-- raw HTML omitted --><code>daemonize</code><!-- raw HTML omitted -->å‚æ•°èƒ½åå°å¯åŠ¨ä»¥åŠä½¿ç”¨å¯†ç è¿æ¥<!-- raw HTML omitted --><!-- raw HTML omitted -->æ³¨é‡Šä¸å¯ä»¥åœ¨è¡Œå°¾<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;# redisåå°è¿è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">daemonize yes
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Redisçš„pidæ–‡ä»¶å­˜æ”¾ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">pidfile /usr/local/redis/logs/redis_6379.pid
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Redisçš„æ—¥å¿—æ–‡ä»¶å­˜æ”¾ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">logfile /usr/local/redis/logs/redis_6379.log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ç«¯å£å·
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">port 6379
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æœ€å¥½æ˜¯æœ¬æœºIP
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">bind 192.168.176.131
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># è¶…æ—¶æ—¶é—´300ç§’ 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">timeout 300
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ç¼“å­˜åº“çš„ä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">databases 8
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># å°†æ•°æ®åº“è½¬å‚¨åˆ°çš„æ–‡ä»¶å
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dbfilename dump-16379.db
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æ•°æ®å­˜æ”¾ç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dir /opt/data/redis/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¸»åº“å¯†ç 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">masterauth password
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># è¿æ¥å¯†ç 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">requirepass password &#39;</span>&gt; /usr/local/redis/redis.conf</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨<!-- raw HTML omitted --><code>Redis</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /usr/local/redis/bin/redis-server /usr/local/redis/redis.conf</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->ç¼–å†™å¸¸è§„å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Simple Redis init.d script conceived to work on Linux systems
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># as it does use of the /proc filesystem.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># chkconfig:   2345 90 10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># description:  Redis is a persistent key-value database
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">REDISPORT=6379
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EXEC=/usr/local/redis/bin/redis-server
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">CLIEXEC=/usr/local/redis/bin/redis-cli
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">$CLIEXEC -a &#34;Redis&#34; -p $REDISPORT shutdown
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">PIDFILE=/var/run/redis_${REDISPORT}.pid
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">CONF=&#34;/usr/local/redis/redis.conf&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">case &#34;$1&#34; in
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">start)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  if [ -f $PIDFILE ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          echo &#34;$PIDFILE exists, process is already running or crashed&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          echo &#34;Starting Redis server...&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          $EXEC $CONF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">stop)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  if [ ! -f $PIDFILE ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          echo &#34;$PIDFILE does not exist, process is not running&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          PID=$(cat $PIDFILE)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          echo &#34;Stopping ...&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          $CLIEXEC -p $REDISPORT shutdown
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          while [ -x /proc/${PID} ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              echo &#34;Waiting for Redis to shutdown ...&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              sleep 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          echo &#34;Redis stopped&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">*)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  echo &#34;Please use start or stop as first argument&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">esac&#39;</span> &gt; /etc/init.d/redis
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ chmod +x /etc/init.d/redis
</span></span><span style="display:flex;"><span>$ chkconfig redis on
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯åŠ¨å¹¶æŸ¥çœ‹ç«¯å£å·</span>
</span></span><span style="display:flex;"><span>$ service redis start
</span></span><span style="display:flex;"><span>$ netstat -nuplt | grep <span style="color:#ae81ff">6379</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->ç¼–å†™æŒ‡å®šç›®å½•å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;## ç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">REDIS_PATH=&#34;/opt/apps/redis&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sql_conf_dir=&#39;</span>/opt/apps/redis<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sql_conf_file=$(ls $sql_conf_dir/* |egrep conf$)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sql_user=&#39;</span>admin<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">## 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">start_redis(){
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  sql_pid=$(ps -ef |egrep redis-server |egrep -v root |awk &#39;</span><span style="color:#f92672">{</span>print $2<span style="color:#f92672">}</span><span style="color:#e6db74">&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  [ ! -z ${sql_pid} ] &amp;&amp; echo -e &#34;\n\033[31mredis running...\033[0m\n&#34; &amp;&amp; exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  su ${sql_user} -s /bin/bash -c &#34;${REDIS_PATH}/bin/redis-server ${sql_conf_file}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">stop_redis(){
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  sql_pid=$(ps -ef |egrep redis-server |egrep -v root |awk &#39;</span><span style="color:#f92672">{</span>print $2<span style="color:#f92672">}</span><span style="color:#e6db74">&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  [ -z ${sql_pid} ] &amp;&amp; echo -e &#34;\n\033[31mredis not run...\033[0m\n&#34; &amp;&amp; exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  su swadmin -s /bin/bash -c &#34;kill ${sql_pid}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">### Finally the input handling.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">case &#34;$1&#34; in
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">start)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  start_redis
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">stop)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  stop_redis
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">*)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  echo &#34;Usage: service redis {start|stop}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  exit 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">esac
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">exit &#39;</span>&gt; /etc/init.d/redis
</span></span><span style="display:flex;"><span>$ chmod +x /etc/init.d/redis
</span></span><span style="display:flex;"><span>$ chkconfig redis on</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->éƒ¨ç½²è„šæœ¬<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;redis-install.sh<span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#!/bin/bash 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sed -i &#34;N;56isource /opt/rh/devtoolset-9/enable&#34;  /etc/profile  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">id swadmin
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">if [ $? -ne 0 ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># åˆ›å»ºæ™®é€šç”¨æˆ·éƒ¨ç½²è¿è¡ŒRedis
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">groupadd swadmin &amp;&amp; useradd -g swadmin swadmi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sleep 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;20210623@123&#34;|passwd --stdin2 swadmin &amp;&gt;/dev/null   # ç»™swadminç”¨æˆ·è®¾ç½®å¯†ç 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">fi  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">mkdir -p /opt/{src,conf,data,apps} /opt/data/{data_17693,data_17694,data_17695,data_16303}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">chown -R swadmin. /opt/* 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;#####   Start/Stop Service   #####
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Cmnd_Alias SWADMIN_START_SERVICES = /etc/init.d/redis, /opt/*  # æˆäºˆæ™®é€šç”¨æˆ·å¯åŠ¨åœæ­¢æƒé™
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">swadmin ALL=(ALL)NOPASSWD:SWADMIN_START_SERVICES&#34; &gt;/etc/sudoers.d/swadmin 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">chmod 660 /etc/sudoers.d/swadmin
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Redisä¾èµ–gcc ä¸gcc-c++,#Redis5.0ä»¥ä¸Šéœ€è¦é«˜ç‰ˆæœ¬gcc  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">yum -y install gcc gcc-c++ centos-release-scl wget git
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#39;scl enable devtoolset-9 bash&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;source /opt/rh/devtoolset-9/enable&#34; &gt;&gt;/etc/profile
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">source /etc/profile
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">## å¦‚é‡å› ç¼ºå°‘gccæŠ¥é”™å…ˆæ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">## make distclean å†meke
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">su swadmin -c &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">git clone https://admin:&#34;frTd3KbJct_pgoBstA5f&#34;@gitlab.com/usererge/redis-conf.git /opt/conf/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">wget -P /opt/src/ http://download.redis.io/releases/redis-5.0.7.tar.gz
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">mkdir -p /opt/apps/redis &amp;&amp; tar zxvf /opt/src/redis-5.0.7.tar.gz -C /opt/apps/redis --strip-components 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">cd /opt/apps/redis/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">make MALLOC=libc 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">make PREFIX=/opt/apps/redis install
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">/opt/apps/redis/src/redis-server
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">/opt/conf/redis-conf/re_17693.conf &amp;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">source /etc/profile  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="../../../../js/clipboard.min.js?1721644199" defer></script>
    <script src="../../../../js/perfect-scrollbar.min.js?1721644199" defer></script>
    <script src="../../../../js/theme.js?1721644199" defer></script>
  </body>
</html>

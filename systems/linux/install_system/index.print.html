<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="二哥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/s2-1.png">
    <meta name="twitter:title" content="Install_System :: Hugo Relearn Theme">
    <meta property="og:url" content="https://erge.blog/systems/linux/install_system/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Install_System :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://erge.blog/images/s2-1.png">
    <meta itemprop="name" content="Install_System :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T00:28:03+08:00">
    <meta itemprop="dateModified" content="2024-06-13T00:28:03+08:00">
    <meta itemprop="image" content="https://erge.blog/images/s2-1.png">
    <title>Install_System :: Hugo Relearn Theme</title>
    <link href="../../../images/favicon.ico?1719330258" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../css/fontawesome-all.min.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1719330259" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1719330259" rel="stylesheet">
    <link href="../../../css/fonts.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1719330259" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1719330259" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1719330259" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1719330259" rel="stylesheet">
    <link href="../../../css/print.css?1719330259" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1719330259" rel="stylesheet">
    <script src="../../../js/variant.js?1719330259"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../systems/linux/install_system/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Install_System</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/jdk/install_jdk_and_jar_run/" title="Install_Jdk_And_Jar_Run (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/install_system/install_cobbler/" title="Install_Cobbler (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_system">Install_System</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Install_System</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_cobbler">Install_Cobbler</h1>

<h2 id="cobbler简介"><code>Cobbler</code>简介</h2>
<blockquote>
<ul>
<li><code>Cobbler</code>是一个快速网络安装<code>linux</code>的服务，而且在经过调整也可以支持网络安装<code>windows</code>。该工具使用<code>python</code>开发，小巧轻便（才<code>15k</code>行<code>python</code>代码），使用简单的命令即可完成<code>PXE</code>网络安装环境的配置，同时还可以管理<code>DHCP</code>、<code>DNS</code>、<code>TFTP</code>、<code>RSYNC</code>以及<code>yum</code>仓库、构造系统<code>ISO</code>镜像</li>
<li><code>Cobbler</code>支持命令行管理，<code>web</code>界面管理，还提供了<code>API</code>接口，可以方便二次开发使用</li>
<li><code>Cobbler</code>客户端<code>Koan</code>支持虚拟机安装和操作系统重新安装，使重装系统更便捷</li>
<li>运维自动化在生产环境中占据着举足轻重的地位，尤其是面对几百台，几千台甚至几万台的服务器时，仅仅是安装操作系统，如果不通过自动化来完成，根本是不可想象的。</li>
<li>面对生产环境中不同服务器的需求，该如何实现批量部署多版本的操作系统呢？<code>Cobbler</code>便可以的满足这一实际需求，实现多版本操作系统批量部署</li>
<li><code>Cobbler</code>各个组件之间关系</li>
</ul>
<blockquote>
<ul>
<li><code>distro</code>-&gt;<code>profile-system</code>(可选)</li>
</ul>
<p><a href="#R-image-d13e09e1d27dcc3251d949d5a1c8a32c" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Cobbler_Server/cobbler.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d13e09e1d27dcc3251d949d5a1c8a32c"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Cobbler_Server/cobbler.png"></a></p>
</blockquote>
<ul>
<li><code>distro</code>发行版</li>
</ul>
<blockquote>
<ul>
<li>面对不同的操作系统</li>
<li>面对同一个操作系统不同的版本</li>
</ul>
</blockquote>
<ul>
<li><code>profile</code></li>
</ul>
<blockquote>
<ul>
<li>核心特性是通过<code>kickstart</code>来部署</li>
</ul>
</blockquote>
<ul>
<li><code>system</code></li>
</ul>
<blockquote>
<ul>
<li>主要目的配置网络接口</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="cobbler功能"><code>Cobbler</code>功能</h3>
<blockquote>
<ul>
<li>使用<code>Cobbler</code>，您无需进行人工干预即可安装机器。<code>Cobbler</code>设置一个<code>PXE</code>引导环境（它还可使用<code>yaboot</code>支持<code>PowerPC</code>），并控制与安装相关的所有方面，比如网络引导服务（<code>DHCP</code>和<code>TFTP</code>）与存储库镜像。当希望安装一台新机器时，<code>Cobbler</code>可以：使用一个以前定义的模板来配置<code>DHCP</code>服务（如果启用了管理<code>DHCP</code>）将一个存储库（<code>yum</code>或<code>rsync</code>）建立镜像或解压缩一个媒介，以注册一个新操作系统，在<code>DHCP</code>配置文件中为需要安装的机器创建一个条目，并使用您指定的参数（<code>IP</code>和<code>MAC</code>地址），在<code>TFTFP</code>服务目录下创建适当的<code>PXE</code>文件，重新启动<code>DHCP</code>服务以反映更改，重新启动机器以开始安装（如果电源管理已启用）</li>
<li><code>Cobbler</code>支持众多的发行版：<code>Red Hat</code>、<code>Fedora</code>、<code>CentOS</code>、<code>Debian</code>、<code>Ubuntu</code>和<code>SuSE</code>。当添加一个操作系统（通常通过使用<code>ISO</code>文件）时，<code>Cobbler</code>知道如何解压缩合适的文件并调整网络服务，以正确引导机器。</li>
<li><code>Cobbler</code>可使用<code>kickstart</code>模板。基于<code>Red Hat</code>或<code>Fedora</code>的系统使用<code>kickstart</code>文件来自动化安装流程。通过使用模板，您就会拥有基本的<code>kickstart</code>模板，然后定义如何针对一种配置文件或机器配置而替换其中的变量。例如，一个模板可能包含两个变量<code>$domain</code>和<code>$machine_name</code>。在 <code>Cobbler</code>配置中，一个配置文件指定<code>domain=mydomain.com</code>，并且每台使用该配置文件的机器在<code>machine_name</code>变量中指定其名称。该配置文件中的所有机器都使用相同的<code>kickstart</code>安装且针对 <code>domain=mydomain.com</code>进行配置，但每台机器拥有其自己的机器名称。您仍然可以使用<code>kickstart</code>模板在不同的域中安装其他机器并使用不同的机器名称。</li>
<li>为了协助管理系统，Cobbler 可通过 fence scripts 连接到各种电源管理环境。</li>
<li><code>Cobbler</code>支持<code>apc_snmp</code>、<code>bladecenter</code>、<code>bullpap</code>、<code>drac</code>、<code>ether_wake</code>、<code>ilo</code>、<code>integrity</code>、<code>ipmilan</code>、<code>ipmitool</code>、<code>lpar</code>、<code>rsa</code>、<code>virsh</code>和<code>wti</code>。要重新安装一台机器，可运行<code>reboot system foo</code>命令，而且<code>Cobbler</code>会使用必要的凭据和信息来为您运行恰当的<code>fence scripts</code>（比如机器插槽数）</li>
<li>除了这些特性，还可使用一个配置管理系统 (<code>CMS</code>)。您有两种选择：该工具内的一个内部系统，或者集成一个现有的外部<code>CMS</code>，比如<code>Chef</code>或<code>Puppet</code>。借助内部系统，您可以指定文件模板，这些模板会依据配置参数进行处理（与<code>kickstart</code>模板的处理方式一样），然后复制到您指定的位置。如果必须自动将配置文件部署到特定机器，那么此功能很有用</li>
<li>使用<code>koan</code>客户端，<code>Cobbler</code>可从客户端配置虚拟机并重新安装系统。我不会讨论配置管理和<code>koan</code>特性，因为它们不属于本文的介绍范畴。但是，它们是值得研究的有用特性</li>
</ul>
</blockquote>
<hr>
<h3 id="cobbler自动部署"><code>Cobbler</code>自动部署</h3>
<h4 id="基础环境准备">基础环境准备</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->提示：虚拟机网卡采用<!-- raw HTML omitted --><code>NAT</code><!-- raw HTML omitted -->模式，因为我们会搭建<!-- raw HTML omitted --><code>DHCP</code><!-- raw HTML omitted -->服务器，在同一局域网多个<!-- raw HTML omitted --><code>DHCP</code><!-- raw HTML omitted -->服务会有冲突，并且导致实践失败<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat /etc/redhat-release  	<span style="color:#75715e"># 系统版本</span>
</span></span><span style="display:flex;"><span>$ uname –r  	<span style="color:#75715e"># 内核版本</span>
</span></span><span style="display:flex;"><span>$ getenforce  	<span style="color:#75715e"># 检测selinux是否关闭(必须关闭)</span>
</span></span><span style="display:flex;"><span>$ systemctl stop firewalld  	<span style="color:#75715e"># 关闭防火墙</span>
</span></span><span style="display:flex;"><span>$ ifconfig eth0|awk -F <span style="color:#e6db74">&#39;[ :]+&#39;</span> <span style="color:#e6db74">&#39;NR==2 {print $3}&#39;</span>  	<span style="color:#75715e"># 查看IP地址</span>
</span></span><span style="display:flex;"><span>$ hostname  	<span style="color:#75715e"># 查看主机名</span>
</span></span><span style="display:flex;"><span>$ wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo  	<span style="color:#75715e"># cobbler安装必须使用到epel源</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="安装cobbler">安装<code>Cobbler</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install cobbler cobbler-web pykickstart httpd tftp dhcp xinetd
</span></span><span style="display:flex;"><span>cobbler  	<span style="color:#75715e"># cobbler程序包</span>
</span></span><span style="display:flex;"><span>cobbler-web  	<span style="color:#75715e"># cobbler的web服务包</span>
</span></span><span style="display:flex;"><span>pykickstart  	<span style="color:#75715e"># cobbler检查kickstart语法错误</span>
</span></span><span style="display:flex;"><span>httpd  	<span style="color:#75715e"># Apache web服务</span>
</span></span><span style="display:flex;"><span>tftp  	<span style="color:#75715e"># tftp服务</span>
</span></span><span style="display:flex;"><span>dhcp  	<span style="color:#75715e"># dhcp服务</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/etc/cobbler  	<span style="color:#75715e"># 配置文件目录</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/settings  	<span style="color:#75715e"># cobbler主配置文件</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/dhcp.template  	<span style="color:#75715e"># DHCP服务的配置模板</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/tftpd.template  	<span style="color:#75715e"># tftp服务的配置模板</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/rsync.template  	<span style="color:#75715e"># rsync服务的配置模板</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/iso  	<span style="color:#75715e"># iso模板配置文件目录</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/pxe  	<span style="color:#75715e"># pxe模板文件目录</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/power  	<span style="color:#75715e"># 电源的配置文件目录</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/users.conf  	<span style="color:#75715e"># Web服务授权配置文件</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/users.digest  	<span style="color:#75715e"># web访问的用户名密码配置文件</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/dnsmasq.template  	<span style="color:#75715e"># DNS服务的配置模板</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/modules.conf  	<span style="color:#75715e"># Cobbler模块配置文件</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler  	<span style="color:#75715e"># Cobbler数据目录</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler/config  	<span style="color:#75715e"># 配置文件</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler/kickstarts  	<span style="color:#75715e"># 默认存放kickstart文件</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler/loaders  	<span style="color:#75715e"># 存放的各种引导程序</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler  	<span style="color:#75715e"># 系统安装镜像目录</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler/ks_mirror  	<span style="color:#75715e"># 导入的系统镜像列表</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler/images  	<span style="color:#75715e"># 导入的系统镜像启动文件</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler/repo_mirror  	<span style="color:#75715e"># yum源存储目录</span>
</span></span><span style="display:flex;"><span>/var/log/cobbler  	<span style="color:#75715e"># 日志目录</span>
</span></span><span style="display:flex;"><span>/var/log/cobbler/install.log  	<span style="color:#75715e"># 客户端系统安装日志</span>
</span></span><span style="display:flex;"><span>/var/log/cobbler/cobbler.log  	<span style="color:#75715e"># cobbler日志</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="检测cobbler">检测<code>Cobbler</code></h4>
<blockquote>
<ul>
<li>
<p><code>cobbler</code>的运行依赖于<code>dhcp</code>、<code>tftp</code>、<code>rsync</code>及<code>dns</code>服务，其中<code>dhcp</code>可由<code>dhcpd（isc）</code>提供，也可由<code>dnsmasq</code>提供；<code>tftp</code>可由<code>tftp-server</code>程序包提供，也可由<code>cobbler</code>功能提供，<code>rsync</code>有<code>rsync</code>程序包提供，<code>dns</code>可由<code>bind</code>提供，也可由<code>dnsmasq</code>提供</p>
</li>
<li>
<p><code>cobbler</code>可自行管理这些服务中的部分甚至是全部，但需要配置<code>/etc/cobbler/settings</code>文件中的<code>manange_dhcp</code>、<code>manager_tftpd</code>、<code>manager_rsync</code>、<code>manager_dns</code>分别来进行定义，另外，由于各种服务都有着不同的实现方式，如若需要进行自定义，需要通过修改<code>/etc/cobbler/modules.conf</code>配置文件中各服务的模块参数的值来实现</p>
</li>
<li>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl start httpd  	<span style="color:#75715e"># 启动apache服务</span>
</span></span><span style="display:flex;"><span>$ systemctl start cobblerd  	<span style="color:#75715e"># 启动cobbler程序</span></span></span></code></pre></div></li>
</ul>
<blockquote>
<ul>
<li>检查配置文件，需要在<code>cobblerd</code>和<code>httpd</code>启动的情况下检查</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl start httpd  	<span style="color:#75715e"># 启动apache服务</span>
</span></span><span style="display:flex;"><span>$ systemctl start cobblerd  	<span style="color:#75715e"># 启动cobbler程序</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 检查配置文件，需要在cobblerd和httpd启动的情况下检查</span>
</span></span><span style="display:flex;"><span>$ cobbler check  	<span style="color:#75715e"># 检查存在的问题,逐一解决</span>
</span></span><span style="display:flex;"><span>The following are potential configuration items that you may want to fix:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> : The <span style="color:#e6db74">&#39;server&#39;</span> field in /etc/cobbler/settings must be set to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP <span style="color:#66d9ef">for</span> the boot server as reachable by all machines that will use it.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> : For PXE to be functional, the <span style="color:#e6db74">&#39;next_server&#39;</span> field in /etc/cobbler/settings must be set to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> : change <span style="color:#e6db74">&#39;disable&#39;</span> to <span style="color:#e6db74">&#39;no&#39;</span> in /etc/xinetd.d/tftp
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> : some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run <span style="color:#e6db74">&#39;cobbler get-loaders&#39;</span> to download them, or, <span style="color:#66d9ef">if</span> you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The <span style="color:#e6db74">&#39;cobbler get-loaders&#39;</span> command is the easiest way to resolve these requirements.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> : enable and start rsyncd.service with systemctl
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span> : debmirror package is not installed, it will be required to manage debian deployments and repositories
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span> : The default password used by the sample templates <span style="color:#66d9ef">for</span> newly installed machines <span style="color:#f92672">(</span>default_password_crypted in /etc/cobbler/settings<span style="color:#f92672">)</span> is still set to <span style="color:#e6db74">&#39;cobbler&#39;</span> and should be changed, try: <span style="color:#e6db74">&#34;openssl passwd -1 -salt &#39;random-phrase-here&#39; &#39;your-password-here&#39;&#34;</span> to generate new one
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> : fencing tools were not found, and are required to use the <span style="color:#f92672">(</span>optional<span style="color:#f92672">)</span> power management features. install cman or fence-agents to use them
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Restart cobblerd and <span style="color:#66d9ef">then</span> run <span style="color:#e6db74">&#39;cobbler sync&#39;</span> to apply changes.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如上各问题的解决方法如下所示：</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1. 修改/etc/cobbler/settings文件中的server参数的值为提供cobbler服务的主机相应的IP地址或主机名，如server: 10.0.0.101；</span>
</span></span><span style="display:flex;"><span>$  sed -i <span style="color:#e6db74">&#39;s/server: 127.0.0.1/server: 10.0.0.101/&#39;</span> /etc/cobbler/settings
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. 修改/etc/cobbler/settings文件中的next_server参数的值为提供PXE服务的主机相应的IP地址，如next_server: 10.0.0.101；</span>
</span></span><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#39;s/next_server: 127.0.0.1/next_server: 10.0.0.101/&#39;</span> /etc/cobbler/settings
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. 修改/etc/xinetd.d/tftp文件中的disable参数修改为 disable = no</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. 执行 cobbler get-loaders 命令即可；否则，需要安装syslinux程序包，而后复制/usr/share/syslinux/{pxelinux.0,memu.c32}等文件至/var/lib/cobbler/loaders/目录中；</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 5. 执行 systemctl enable rsyncd命令即可；</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 6. 如果有强迫症可以选择 yum –y install debmirror 然后根据错误进行解决,一般错误如下。</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 注释/etc/dedmirror.conf文件中的  @dists=”sid”;  @arches=”i386”; </span>
</span></span><span style="display:flex;"><span>$ openssl passwd -1 -salt <span style="color:#e6db74">&#39;$(openssl rand -hex 4)&#39;</span> <span style="color:#e6db74">&#39;xuliangwei&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># $1$$(openss$.wbDUBV/STL0YaNuAcusK/  	# 返回参数</span>
</span></span><span style="display:flex;"><span>$ grep <span style="color:#e6db74">&#34;default_password_crypted&#34;</span> /etc/cobbler/settings  	<span style="color:#75715e"># 替换/etc/cobbler/setting内的default_password_crypted default_password_crypted: &#34;$1$$(openss$.wbDUBV/STL0YaNuAcusK/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 7. yum –y install cman fence-agents</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 最后重启Cobbler：systemctl restart cobblerd </span></span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h4 id="配置dhcp">配置<code>DHCP</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#39;s#manage_dhcp: 0#manage_dhcp: 1#g&#39;</span> /etc/cobbler/settings  	<span style="color:#75715e"># 使用cobbler管理dhcp</span>
</span></span><span style="display:flex;"><span>$ vim /etc/cobbler/dhcp.template  	<span style="color:#75715e"># 修改cobbler的dhcp模版，因为cobbler会替换。</span>
</span></span><span style="display:flex;"><span>subnet 10.0.0.0 netmask 255.255.255.0 <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  option routers             10.0.0.2;
</span></span><span style="display:flex;"><span>  option domain-name-servers 10.0.0.2;
</span></span><span style="display:flex;"><span>  option subnet-mask         255.255.255.0;
</span></span><span style="display:flex;"><span>  range dynamic-bootp        10.0.0.200 10.0.0.250;
</span></span><span style="display:flex;"><span>  default-lease-time         21600;
</span></span><span style="display:flex;"><span>  max-lease-time             43200;
</span></span><span style="display:flex;"><span>  next-server                $next_server;</span></span></code></pre></div></blockquote>
<hr>
<h4 id="同步cobbler">同步<code>Cobbler</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl restart xinetd  	<span style="color:#75715e"># 重启xinetd</span>
</span></span><span style="display:flex;"><span>$ systemctl restart cobblerd  	<span style="color:#75715e"># 重启cobbler</span>
</span></span><span style="display:flex;"><span>$ cobbler sync  	<span style="color:#75715e"># 同步最新cobbler配置，可以看具体做了哪些操作</span>
</span></span><span style="display:flex;"><span>task started: 2016-04-29_234117_sync
</span></span><span style="display:flex;"><span>task started <span style="color:#f92672">(</span>id<span style="color:#f92672">=</span>Sync, time<span style="color:#f92672">=</span>Fri Apr <span style="color:#ae81ff">29</span> 23:41:17 2016<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>running pre-sync triggers
</span></span><span style="display:flex;"><span>cleaning trees
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/pxelinux.cfg/default
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/images
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/grub-x86.efi
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/grub-x86_64.efi
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/efidefault
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/s390x/profile_list
</span></span><span style="display:flex;"><span>copying bootloaders
</span></span><span style="display:flex;"><span>trying hardlink /var/lib/cobbler/loaders/grub-x86.efi -&gt; /var/lib/tftpboot/grub/grub-x86.efi
</span></span><span style="display:flex;"><span>trying hardlink /var/lib/cobbler/loaders/grub-x86_64.efi -&gt; /var/lib/tftpboot/grub/grub-x86_64.efi
</span></span><span style="display:flex;"><span>copying distros to tftpboot
</span></span><span style="display:flex;"><span>copying images
</span></span><span style="display:flex;"><span>generating PXE configuration files
</span></span><span style="display:flex;"><span>generating PXE menu structure
</span></span><span style="display:flex;"><span>rendering DHCP files
</span></span><span style="display:flex;"><span>generating /etc/dhcp/dhcpd.conf
</span></span><span style="display:flex;"><span>rendering TFTPD files
</span></span><span style="display:flex;"><span>generating /etc/xinetd.d/tftp
</span></span><span style="display:flex;"><span>cleaning link caches
</span></span><span style="display:flex;"><span>running post-sync triggers
</span></span><span style="display:flex;"><span>running python triggers from /var/lib/cobbler/triggers/sync/post/*
</span></span><span style="display:flex;"><span>running python trigger cobbler.modules.sync_post_restart_services
</span></span><span style="display:flex;"><span>running: dhcpd -t -q
</span></span><span style="display:flex;"><span>received on stdout: 
</span></span><span style="display:flex;"><span>received on stderr: 
</span></span><span style="display:flex;"><span>running: service dhcpd restart
</span></span><span style="display:flex;"><span>received on stdout: 
</span></span><span style="display:flex;"><span>received on stderr: Redirecting to /bin/systemctl restart  dhcpd.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>running shell triggers from /var/lib/cobbler/triggers/sync/post/*
</span></span><span style="display:flex;"><span>running python triggers from /var/lib/cobbler/triggers/change/*
</span></span><span style="display:flex;"><span>running python trigger cobbler.modules.scm_track
</span></span><span style="display:flex;"><span>running shell triggers from /var/lib/cobbler/triggers/change/*
</span></span><span style="display:flex;"><span>*** TASK COMPLETE ***</span></span></code></pre></div></blockquote>
<hr>
<h4 id="管理cobbler">管理<code>Cobbler</code></h4>
<ul>
<li>
<ol>
<li>管理<code>distro</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>cobbler</code>变得可用的第一步为定义<code>distro</code>，其可以通过为其指定外部的安装引导内核及<code>ramdisk文</code>件的方式实现。如果已经有完成的安装树（如<code>os</code>的安装镜像）则推荐使用<code>improt</code>之间导入的方式进行</li>
<li>如果有<code>kickstart</code>文件，也可以使用<code>--kickstart=/path/to/kickstart_file</code>进行导入，因此<code>import</code>会自动为导入的<code>distro</code>生成一个<code>profile</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mount /dev/cdrom /mnt/  	<span style="color:#75715e"># 挂在ISO光盘至服务器</span>
</span></span><span style="display:flex;"><span>mount: /dev/sr0 is write-protected, mounting read-only
</span></span><span style="display:flex;"><span>$ cobbler import --path<span style="color:#f92672">=</span>/mnt/ --name<span style="color:#f92672">=</span>CentOS-7.1-x86_64-distro --arch<span style="color:#f92672">=</span>x86_64
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --path 镜像路径</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --name 为安装源定义一个名字</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --arch 指定安装源是32位、64位、ia64, 目前支持的选项有: x86│x86_64│ia64</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装源的唯一标示就是根据name参数来定义，本例导入成功后，安装源的唯一标示就是：CentOS-7.1-distro-x86_64。</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 镜像存放目录，cobbler会将镜像中的所有安装文件拷贝到本地一份，放在/var/www/cobbler/ks_mirror下的CentOS-7.1-x86_64-distro-x86_64目录下。因此/var/www/cobbler目录必须具有足够容纳安装文件的空间。</span>
</span></span><span style="display:flex;"><span>task started: 2016-04-30_010122_import
</span></span><span style="display:flex;"><span>task started <span style="color:#f92672">(</span>id<span style="color:#f92672">=</span>Media import, time<span style="color:#f92672">=</span>Sat Apr <span style="color:#ae81ff">30</span> 01:01:22 2016<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Found a candidate signature: breed<span style="color:#f92672">=</span>redhat, version<span style="color:#f92672">=</span>rhel6
</span></span><span style="display:flex;"><span>Found a candidate signature: breed<span style="color:#f92672">=</span>redhat, version<span style="color:#f92672">=</span>rhel7
</span></span><span style="display:flex;"><span>Found a matching signature: breed<span style="color:#f92672">=</span>redhat, version<span style="color:#f92672">=</span>rhel7
</span></span><span style="display:flex;"><span>Adding distros from path /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64:
</span></span><span style="display:flex;"><span>creating new distro: CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>trying symlink: /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64 -&gt; /var/www/cobbler/links/CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>creating new profile: CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>associating repos
</span></span><span style="display:flex;"><span>checking <span style="color:#66d9ef">for</span> rsync repo<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>checking <span style="color:#66d9ef">for</span> rhn repo<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>checking <span style="color:#66d9ef">for</span> yum repo<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>starting descent into /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64 <span style="color:#66d9ef">for</span> CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>processing repo at : /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64
</span></span><span style="display:flex;"><span>need to process repo/comps: /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64
</span></span><span style="display:flex;"><span>looking <span style="color:#66d9ef">for</span> /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64/repodata/*comps*.xml
</span></span><span style="display:flex;"><span>Keeping repodata as-is :/var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64/repodata
</span></span><span style="display:flex;"><span>*** TASK COMPLETE ***
</span></span><span style="display:flex;"><span>$ cobbler distro list  	<span style="color:#75715e"># 列出所有的distro</span>
</span></span><span style="display:flex;"><span>   CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>$ cobbler profile list  	<span style="color:#75715e"># 导入distro会自动生成profile</span>
</span></span><span style="display:flex;"><span>   CentOS-7.1-distro-x86_64</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li>管理<code>profile</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>cobbler</code>使用<code>profile</code>来为特定的需求类别提供锁需要安装的配置，即在<code>distro</code>的基础上通过提供<code>kiskstart</code>文件来生成一个特定的系统安装配置。<code>distro</code>的<code>profile</code>可以出现在<code>pxe</code>的引导菜单中作为安装的选择之一</li>
<li><code>Cobbler-CentOS-7.1-x86_64.cfg</code>配置文件我会上传至至附件，默认是有<code>kickstart</code>文件的，所以<code>edit</code>，如果没有<code>kickstart</code>文件可以<code>add</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler profile edit --name<span style="color:#f92672">=</span>Centos7.1-distro-x86_64 --kickstart<span style="color:#f92672">=</span>/var/lib/cobbler/kickstarts/Cobbler-CentOS-7.1-x86_64.cfg  	<span style="color:#75715e"># 指定ks路径</span></span></span></code></pre></div><ul>
<li><code>CentOS7</code>系统网卡名变成<code>eno...</code>这种，为了运维标准化，我们需要修改为我们常用的<code>eth0</code>，使用下面的参数。但要注意是<code>CentOS7</code>才需要下面的步骤，<code>CentOS6</code>不需要</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler profile edit --name<span style="color:#f92672">=</span>Centos7.1-distro-x86_64 --kopts<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;net.ifnames=0 biosdevname=0&#39;</span>  	<span style="color:#75715e"># 修改centos7内核</span></span></span></code></pre></div><ul>
<li>新部署机器安装<code>yum</code>源，并同步。建议使用内网<code>yum</code>源，在这里使用阿里云<code>yum</code>源</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler repo add --name<span style="color:#f92672">=</span>base --mirror<span style="color:#f92672">=</span>http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/ --arch<span style="color:#f92672">=</span>x86_64 --breed<span style="color:#f92672">=</span>yum  	<span style="color:#75715e"># 添加yum源</span>
</span></span><span style="display:flex;"><span>$ cobbler reposync  	<span style="color:#75715e"># 同步yum源</span>
</span></span><span style="display:flex;"><span>$ cobbler sync  	<span style="color:#75715e"># 每次修改profile都需要同步</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="署操作系统">署操作系统</h4>
<ul>
<li>
<ol>
<li>新建一台虚拟机，通过网络启动即可。（我这里虚拟机使用的是<code>NAT</code>模式,并且关闭<code>DHCP</code>功能）</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>用户：<code>root</code></li>
<li>密码：<code>xuliangwei</code></li>
<li><code>openssl</code>生成时指定</li>
</ul>
<p><a href="#R-image-1c100273f5bc03bfc55975e3cde074dc" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1c100273f5bc03bfc55975e3cde074dc"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="2">
<li>定制化安装</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>由于<code>kickstart</code>指定某台服务器使用某个<code>ks</code>文件比较复杂，所以引用<code>Cobbler</code>就很简单。通过物理<code>MAC</code>地址来区分</li>
<li>自定义安装：<code>system</code>主要目的配置网络接口，通过<code>system</code>来固定机器的<code>IP</code>、掩码、网关、<code>DNS</code>、主机名、等等实现基础环境标准化</li>
<li>根据机器的<code>MAC</code>地址，自动绑定<code>IP</code>，网关，<code>dns</code>等</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler system add --name<span style="color:#f92672">=</span>xuliangwei-pc --mac<span style="color:#f92672">=</span>00:0C:29:6E:41:CB --profile<span style="color:#f92672">=</span>Centos7.1-profile-x86_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--ip-address<span style="color:#f92672">=</span>10.0.0.110 --subnet<span style="color:#f92672">=</span>255.255.255.0 --gateway<span style="color:#f92672">=</span>10.0.0.2 --interface<span style="color:#f92672">=</span>eth0 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--static<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> --hostname<span style="color:#f92672">=</span>xuliangwei.com --name-servers<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;114.114.114.114 8.8.8.8&#34;</span>
</span></span><span style="display:flex;"><span>$ cobbler sync
</span></span><span style="display:flex;"><span>$ cobbler system list
</span></span><span style="display:flex;"><span>   xuliangwei-pc</span></span></code></pre></div><p><a href="#R-image-01fd68fb928885f64820c8557f05189d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-01fd68fb928885f64820c8557f05189d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="3">
<li>自定义登陆界面</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ grep <span style="color:#e6db74">&#34;xuliangwei&#34;</span> /etc/cobbler/pxe/pxedefault.template  	<span style="color:#75715e"># 自定义装机页面</span>
</span></span><span style="display:flex;"><span>MENU TITLE Xuliangwei | http://xuliangwei.com
</span></span><span style="display:flex;"><span>$ cobbler sync  	<span style="color:#75715e"># 同步</span></span></span></code></pre></div><p><a href="#R-image-aa559cef118cff1a6d308acae998fee2" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/xuliangwe.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-aa559cef118cff1a6d308acae998fee2"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/xuliangwe.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="4">
<li><code>web</code>管理<code>Cobbler</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>
<p>新版<code>cobbler</code>的<code>web</code>界面使用的是<code>https</code>，登录https://10.0.0.7/cobbler_web</p>
<p><code>cobbler_web</code>支持多种认证方式，如<code>authn_configfil</code>、<code>authn_ldap</code>或<code>authn_pam</code>等，默认为<code>authn_denyall</code>即拒绝所有用户登陆，下面说明三种能认证用户登录<code>cobbler_web</code>的方式</p>
</li>
<li>
<p><strong>使用<code>authn_pam</code>模块认证<code>cobbler_web</code>用户</strong></p>
</li>
</ul>
<blockquote>
<ul>
<li>首先修改<code>modules</code>中的<code>authentication</code>段中的<code>module</code>参数的值为<code>authn_pam</code>
接着创建系统用户，并为用户设定密码而后将设定的系统用户添加至<code>cobbler_web</code>的<code>admin</code>组中，修改<code>/etc/cobbler/users.conf</code>文件，将设定的用户添加为<code>admin</code>参数的值即可</li>
</ul>
</blockquote>
<ul>
<li><strong>使用<code>authn_configfile</code>模块认证<code>cobbler_web</code>用户</strong></li>
</ul>
<blockquote>
<ul>
<li>首先修改<code>modules</code>中的<code>authentication</code>段中的<code>module</code>参数的值为<code>authn_configfile</code>
添加第一用户时，需要为<code>htdigest</code>命令使用<code>&quot;-c&quot; etc/cobbler/users.digest</code>，后续添加其他用户则不能再使用，同步<code>cobbler</code>重启<code>httpd</code>以及<code>cobbler</code></li>
</ul>
</blockquote>
<ul>
<li><strong>使用<code>cobbler</code>默认的<code>web</code>账号密码认证</strong></li>
</ul>
<blockquote>
<ul>
<li><code>user</code>：<code>cobbler</code></li>
<li><code>pass</code>：<code>cobbler</code></li>
</ul>
<p><a href="#R-image-0e056c2964ad8b95a39b2d1bd059077b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0e056c2964ad8b95a39b2d1bd059077b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web.png"></a></p>
<p><a href="#R-image-b09c8b9adf5ab83534c93a7ecef7b42b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b09c8b9adf5ab83534c93a7ecef7b42b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_1.png"></a></p>
<p><a href="#R-image-f09d4aece85377c7b4a5df4a2f82486a" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f09d4aece85377c7b4a5df4a2f82486a"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_2.png"></a></p>
<p><a href="#R-image-69cbcbb35ac1fc8966e213649f614efd" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-69cbcbb35ac1fc8966e213649f614efd"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_3.png"></a></p>
<p><a href="#R-image-5c1d54b94d186b5fd3e5501ddcf3d9c5" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5c1d54b94d186b5fd3e5501ddcf3d9c5"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_4.png"></a></p>
<p><a href="#R-image-64a0cfaf8d3659ef3eb75d752200100f" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-64a0cfaf8d3659ef3eb75d752200100f"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_5.png"></a></p>
<p><a href="#R-image-1bf54e5ffe6824b229900430a5d1362b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_6.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1bf54e5ffe6824b229900430a5d1362b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_6.png"></a></p>
</blockquote>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_kickstart">Install_Kickstart</h1>

<h2 id="kickstart无人值守"><code>KICKSTART</code>无人值守</h2>
<h3 id="指令作用介绍">指令作用介绍</h3>
<blockquote>
<ul>
<li>
<p><strong><code>pxe</code></strong></p>
<p><code>PXE</code>使用<code>DHCP</code>（动态主机配置协议）和<code>TFTP</code>（普通文件传送协议）从网络上查找并装载引导程序。<code>PXE</code>环境从<code>NIC</code>（<code>Network Interface Card</code>）上的<code>BIOS</code>装载。预引导服务使用<code>PXE</code>来发现设备是否存在为其指定的预引导服务工作，并向设备提供执行指派工作所需的文件。通过使用预引导服务，可以自动将映像放置到设备上，即使设备的硬盘为空</p>
</li>
<li>
<p><strong><code>pxelinux.0</code></strong></p>
<p>主要作用是装载执行指派的预引导工作所需的操作系统。<code>pxelinux.0</code>文件是<code>syslinux</code>这一开放源代码项目的一部分的改进版本。虽然<code>pxelinux.0</code>主要是<code>Linux</code>加载器，但它也可以装载其他操作系统。它的工作方式是使用位于<code>TFTP</code>服务器上的配置文件来提供引导指令</p>
</li>
<li>
<p><strong><code>vmlinuz</code></strong></p>
<p><code>vmlinuz</code>是<code>Linux</code>内核的镜像文件,可以被引导程序加载,从而启动<code>Linux</code>系统</p>
</li>
<li>
<p><strong><code>initrd</code></strong></p>
<p><code>initrd</code>&mdash;-<code>boot loader initialized RAM disk</code>(全称)，是一种启动<code>Linux</code>系统的方式，当前流行的<code>Linux</code>版本一般都采用模块化的内核,这种方式可以在不重新编译构建内核的情形下增加功能模块，但是如果你的<code>Linux</code>的<code>root</code>文件系统所在设备的驱动是一个模块(没有编译进内核映象),就不能被引导程序(例如<code>loadlin</code>)直接加载，这时会用到<code>initrd</code>方式来启动你的<code>Linux</code>系统</p>
<ul>
<li>这种方式包括两个阶段:</li>
</ul>
<blockquote>
<ol>
<li>在一个<code>RAM disk</code>上建立一个临时的<code>root</code>文件系统,在这个<code>RAM disk</code>上包含着你需要的驱动模块</li>
<li>载入所需驱动模块,挂载实际的<code>root</code>文件系统 ,启动<code>Linux</code></li>
</ol>
</blockquote>
</li>
<li>
<p><strong><code>initrd.img</code></strong></p>
<p>就是<code>RAM disk</code>的映象</p>
</li>
</ul>
</blockquote>
<hr>
<h3 id="pxekickstart工作流程"><code>PXE</code>+<code>Kickstart</code>工作流程</h3>
<blockquote>
<ul>
<li><code>Kickstart</code>是一种无人值守的安装方式。它的工作原理是在安装过程中记录典型的需要人工干预填写的各种参数，并生成一个名为<code>ks.cfg</code>的文件。如果在安装过程中（不只局限于生成<code>Kickstart</code>安装文件的机器）出现要填写参数的情况，安装程序首先会去查找<code>Kickstart</code>生成的文件，如果找到合适的参数，就采用所找到的参数；如果没有找到合适的参数，便需要安装者手工干预了。所以，如果<code>Kickstart</code>文件涵盖了安装过程中可能出现的所有需要填写的参数，那么安装者完全可以只告诉安装程序从何处取<code>ks.cfg</code>文件，然后就去忙自己的事情。等安装完毕，安装程序会根据<code>ks.cfg</code>中的设置重启系统，并结束安装</li>
<li><code>PXE</code>+<code>Kickstart</code>无人值守安装操作系统完整过程如下</li>
</ul>
<blockquote>
<p><a href="#R-image-642cb4dd8221e43119f7ca98c2505c6d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/PXE+Kickstart.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-642cb4dd8221e43119f7ca98c2505c6d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/PXE+Kickstart.png"></a></p>
</blockquote>
<ul>
<li>
<p>**<code>PXE Client</code>向<code>DHCP</code>发送请求 **</p>
<p><code>PXE Client</code>从自己的<code>PXE</code>网卡启动，通过<code>PXE BootROM</code>(自启动芯片)会以<code>UDP</code>(简单用户数据报协议)发送一个广播请求，向本网络中的<code>DHCP</code>服务器索取<code>IP</code></p>
</li>
<li>
<p><strong><code>DHCP</code>服务器提供信息</strong></p>
<p><code>DHCP</code>服务器收到客户端的请求，验证是否来至合法的<code>PXE Client</code>的请求，验证通过它将给客户端一个<code>提供</code>响应，这个<code>提供</code>响应中包含了为客户端分配的<code>IP</code>地址、<code>pxelinux</code>启动程序(<code>TFTP</code>)位置，以及配置文件所在位置</p>
</li>
<li>
<p><strong><code>PXE</code>客户端请求下载启动文件</strong></p>
<p>客户端收到服务器的<code>回应</code>后，会回应一个帧，以请求传送启动所需文件。这些启动文件包括：<code>pxelinux.0</code>、<code>pxelinux.cfg/default</code>、<code>vmlinuz</code>、<code>initrd.img</code>等文件</p>
</li>
<li>
<p><strong><code>Boot Server</code>响应客户端请求并传送文件</strong></p>
<p>当服务器收到客户端的请求后，他们之间之后将有更多的信息在客户端与服务器之间作应答, 用以决定启动参数。<code>BootROM</code>由<code>TFTP</code>通讯协议从<code>Boot Server</code>下载启动安装程序所必须的文件(<code>pxelinux.0</code>、<code>pxelinux.cfg/default</code>)。<code>default</code>文件下载完成后，会根据该文件中定义的引导顺序，启动<code>Linux</code>安装程序的引导内核</p>
</li>
<li>
<p><strong>请求下载自动应答文件</strong></p>
<p>客户端通过<code>pxelinux.cfg/default</code>文件成功的引导<code>Linux</code>安装内核后，安装程序首先必须确定你通过什么安装介质来安装<code>linux</code>，如果是通过网络安装(<code>NFS</code>, <code>FTP</code>, <code>HTTP</code>)，则会在这个时候初始化网络，并定位安装源位置。接着会读取<code>default</code>文件中指定的自动应答文件<code>ks.cfg</code>所在位置，根据该位置请求下载该文件</p>
</li>
<li>
<p><strong>客户端安装操作系统</strong></p>
<p>将<code>ks.cfg</code>文件下载回来后，通过该文件找到<code>OS Server</code>，并按照该文件的配置请求下载安装过程需要的软件包。</p>
<p><code>OS Server</code>和客户端建立连接后，将开始传输软件包，客户端将开始安装操作系统。安装完成后，将提示重新引导计算机</p>
</li>
</ul>
</blockquote>
<hr>
<h3 id="安装">安装</h3>
<blockquote>
<ul>
<li><code>Kickstart</code>的安装方式有多种组合，<code>Kickstart</code>+<code>DHCP</code>+<code>TFTP</code>+<code>HTTP/NFS/FTP</code>等，不管是<code>HTTP、NFS</code>或者<code>FTP</code>，都是为了寻找到系统引导后需要安装的包组等文件。下面的安装方式是<code>Kickstart</code>+<code>DHCP</code>+<code>TFTP</code>+<code>HTTP</code></li>
</ul>
</blockquote>
<hr>
<h4 id="dhcp安装配置"><code>DHCP</code>安装配置</h4>
<blockquote>
<ul>
<li>
<p><code>/etc/dhcp/dhcpd.conf </code></p>
</li>
<li>
<p><code>range 10.0.0.100 10.0.0.200;</code>  	# 可分配的起始<code>IP</code>-结束<code>IP</code></p>
</li>
<li>
<p><code>option subnet-mask 255.255.255.0;</code>  	# 设定<code>netmask</code></p>
</li>
<li>
<p><code>default-lease-time 21600;</code>  	# 设置默认的<code>IP</code>租用期限</p>
</li>
<li>
<p><code>max-lease-time 43200;</code>  	# 设置最大的<code>IP</code>租用期限</p>
</li>
<li>
<p><code>next-server 10.0.0.7;</code>       # 告知客户端<code>TFTP</code>服务器的<code>ip</code></p>
</li>
<li>
<p><code>filename &quot;/pxelinux.0&quot;;</code>      # 告知客户端从<code>TFTP</code>根目录下载<code>pxelinux.0</code>文件</p>
</li>
<li>
<p><strong>注意：</strong></p>
<p>如果机器数量过多的话，注意<code>dhcp</code>服务器的地址池，不要因为耗尽<code>IP</code>而导致<code>dhcpd</code>服务器没有<code>IP</code>地址<code>release</code>的情况</p>
<p>本来软件装完后都要加入开机自启动，但这个<code>Kickstart</code>系统就不能开机自启动，而且用完后服务都要关闭，防止未来重启服务器自动重装系统了</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install dhcp
</span></span><span style="display:flex;"><span>$ vim /etc/dhcp/dhcpd.conf
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DHCP Server Configuration file.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  see /usr/share/doc/dhcp*/dhcpd.conf.sample</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  see &#39;man 5 dhcpd.conf&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>subnet 10.0.0.0 netmask 255.255.255.0 <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>range 10.0.0.201 10.0.0.210;
</span></span><span style="display:flex;"><span>option subnet-mask 255.255.255.0;
</span></span><span style="display:flex;"><span>default-lease-time 21600;
</span></span><span style="display:flex;"><span>max-lease-time 43200;
</span></span><span style="display:flex;"><span>next-server 10.0.0.61;
</span></span><span style="display:flex;"><span>filename <span style="color:#e6db74">&#34;/pxelinux.0&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/etc/dhcp/dhcpd.conf&#34;</span> 13L, 360C 已写入
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /etc/init.d/dhcpd start
</span></span><span style="display:flex;"><span>正在启动 dhcpd：                      <span style="color:#f92672">[</span>确定<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>$ netstat -lntup|grep dhcp
</span></span><span style="display:flex;"><span>udp    <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">0</span> 0.0.0.0:67         0.0.0.0:*                2040/dhcpd</span></span></code></pre></div></blockquote>
<hr>
<h4 id="tftp安装配置"><code>TFTP</code>安装配置</h4>
<blockquote>
<ul>
<li><code>TFTP</code>服务器提供文件使用简单文件传输协议。<code>TFTP</code>协议通常用于启动无盘工作站，下载配置文件到客户端，并开始对部分操作系统的安装过程</li>
<li><code>server_args</code> = <code>-s /var/lib/tftpboot</code>  	# 指定<code>boot</code>启动目录，保持默认</li>
<li><code>disable</code> = <code>yes</code>  # <code>no</code>改为<code>yes</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install tftp.server
</span></span><span style="display:flex;"><span>$ vim /etc/xinetd.d/tftp 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># default: off</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># description: The tftp server serves files using the trivial file transfer \</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    protocol. The tftp protocol is often used to boot diskless \</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    workstations, download configuration files to network-aware printers, \</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    and to start the installation process for some operating systems.</span>
</span></span><span style="display:flex;"><span>service tftp
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> socket_type       <span style="color:#f92672">=</span> dgram
</span></span><span style="display:flex;"><span> protocol        <span style="color:#f92672">=</span> udp
</span></span><span style="display:flex;"><span> wait          <span style="color:#f92672">=</span> yes
</span></span><span style="display:flex;"><span> user          <span style="color:#f92672">=</span> root
</span></span><span style="display:flex;"><span> server         <span style="color:#f92672">=</span> /usr/sbin/in.tftpd
</span></span><span style="display:flex;"><span> server_args       <span style="color:#f92672">=</span> -s /var/lib/tftpboot
</span></span><span style="display:flex;"><span> disable         <span style="color:#f92672">=</span> no
</span></span><span style="display:flex;"><span> per_source       <span style="color:#f92672">=</span> <span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span> cps           <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span> flags          <span style="color:#f92672">=</span> IPv4
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/etc/xinetd.d/tftp&#34;</span> 18L, 517C 已写入
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /etc/init.d/xinetd restart
</span></span><span style="display:flex;"><span>停止 xinetd：                       <span style="color:#f92672">[</span>确定<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>正在启动 xinetd：                     <span style="color:#f92672">[</span>确定<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ netstat -lntup|grep xinetd
</span></span><span style="display:flex;"><span>udp    <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">0</span> 0.0.0.0:69         0.0.0.0:*                2066/xinetd</span></span></code></pre></div></blockquote>
<hr>
<h4 id="http安装配置"><code>HTTP</code>安装配置</h4>
<blockquote>
<ul>
<li><code>ServerName</code>指定<code>Nginx</code>用于识别自身的名字和端口号。通常这个值是自动指定的，但是我们推荐你显式的指定它以防止启动时出错。如果你为你的主机指定了一个无效的<code>DNS</code>名，<code>server-generated</code>重定向将不能工作</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#34;277i ServerName 127.0.0.1:80&#34;</span> /etc/httpd/conf/httpd.conf</span></span></code></pre></div></blockquote>
<ul>
<li>将<code>CentOS-6.7</code>挂载到<code>http</code>服务下</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mount /dev/cdrom /var/www/html/CentOS-6.7/</span></span></code></pre></div></blockquote>
<ul>
<li>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat extra/www.conf 
</span></span><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>listen    80;
</span></span><span style="display:flex;"><span>server_name www.ky.com;  	<span style="color:#75715e"># 域名设置</span>
</span></span><span style="display:flex;"><span>autoindex on;  	<span style="color:#75715e"># 不找首页文件，展示目录结构</span>
</span></span><span style="display:flex;"><span>location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>   root  /var/www/html/;  	<span style="color:#75715e"># 显示网页内容的文件目录路径</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></li>
<li>
<p>访问浏览器<code>10.0.0.61/CentOS-6.7/</code>查看配置是否正确</p>
</li>
</ul>
<blockquote>
<p><a href="#R-image-5c3b95db08846ffeb75e796928fad114" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Index.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5c3b95db08846ffeb75e796928fad114"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Index.png"></a></p>
</blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install httpd
</span></span><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#34;277i ServerName 127.0.0.1:80&#34;</span> /etc/httpd/conf/httpd.conf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /etc/init.d/httpd start
</span></span><span style="display:flex;"><span>正在启动 httpd：                      <span style="color:#f92672">[</span>确定<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ netstat -lntup|grep <span style="color:#e6db74">&#34;httpd&#34;</span>
</span></span><span style="display:flex;"><span>tcp    <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">0</span> :::80            :::*            LISTEN   2085/httpd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ mkdir /var/www/html/CentOS-6.7
</span></span><span style="display:flex;"><span>$ mount /dev/cdrom /var/www/html/CentOS-6.7/
</span></span><span style="display:flex;"><span>mount: block device /dev/sr0 is write-protected, mounting read-only
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ df -h
</span></span><span style="display:flex;"><span>Filesystem   Size Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>/dev/sda3    8.8G 1.5G 6.9G 18% /
</span></span><span style="display:flex;"><span>tmpfs      495M   <span style="color:#ae81ff">0</span> 495M  0% /dev/shm
</span></span><span style="display:flex;"><span>/dev/sda1    190M  36M 145M 20% /boot
</span></span><span style="display:flex;"><span>/dev/sr0    3.7G 3.7G   <span style="color:#ae81ff">0</span> 100% /var/www/html/CentOS-6.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat nginx.conf
</span></span><span style="display:flex;"><span>worker_processes 1;
</span></span><span style="display:flex;"><span>events <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>worker_connections 1024;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>http <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>include    mime.types;
</span></span><span style="display:flex;"><span>default_type application/octet-stream;
</span></span><span style="display:flex;"><span>sendfile    on;
</span></span><span style="display:flex;"><span>keepalive_timeout 65;
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">\#</span>include set
</span></span><span style="display:flex;"><span>include extra/www.conf;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat extra/www.conf 
</span></span><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> listen    80;
</span></span><span style="display:flex;"><span> server_name www.ky.com;
</span></span><span style="display:flex;"><span> autoindex on;
</span></span><span style="display:flex;"><span> location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>   root  /var/www/html/;
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ fuser -k 80/tcp 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 杀死因前面开启httpd服务占用80的端口进程，然后就可以开启nginx服务</span></span></span></code></pre></div></blockquote>
<hr>
<h5 id="syslinux配置"><code>syslinux</code>配置</h5>
<blockquote>
<ul>
<li><code>syslinux</code>是一个功能强大的引导加载程序，而且兼容各种介质。<code>SYSLINUX</code>是一个小型的<code>Linux</code>操作系统，它的目的是简化首次安装<code>Linux</code>的时间，并建立修护或其它特殊用途的启动盘。如果没有找到<code>pxelinux.0</code>这个文件,可以安装一下</li>
<li>将<code>sysliunx</code>的<code>pxelinux.0</code>文件拷贝到<code>tftp</code>启动目录下</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/ </span></span></code></pre></div></blockquote>
<ul>
<li>将<code>/var/www/html/CentOS-6.7/isolinux/*</code>下的所有系统引导安装的文件拷贝到<code>tftp</code>启动目录下</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp -a /var/www/html/CentOS-6.7/isolinux/* /var/lib/tftpboot/</span></span></code></pre></div></blockquote>
<ul>
<li>将<code>isolinux.cfg</code>文件拷贝到<code>tftp</code>启动目录下的<code>pxelinux.cfg</code>目录下并改名为<code>default</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /var/lib/tftpboot/pxelinux.cfg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cp /var/www/html/CentOS-6.7/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</span></span></code></pre></div></blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install syslinux
</span></span><span style="display:flex;"><span>$ cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cp -a /var/www/html/CentOS-6.7/isolinux/* /var/lib/tftpboot/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ mkdir -p /var/lib/tftpboot/pxelinux.cfg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cp /var/www/html/CentOS-6.7/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</span></span></code></pre></div><blockquote>
<ul>
<li><code>/var/www/html/CentOS-6.7/isolinux/isolinux.cfg</code>文件详解</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat /var/www/html/CentOS-6.7/isolinux/isolinux.cfg 
</span></span><span style="display:flex;"><span>default vesamenu.c32 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 默认加载一个菜单</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># prompt 1 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 开启会显示命令行&#39;boot: &#39;提示符。prompt值为0时则不提示，将会直接启动&#39;default&#39;参数中指定的内容</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>timeout <span style="color:#ae81ff">600</span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># timeout时间是引导时等待用户手动选择的时间，设为1可直接引导，单位为1/10秒</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>display boot.msg 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 菜单背景图片、标题、颜色</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>menu background splash.jpg
</span></span><span style="display:flex;"><span>menu title Welcome to CentOS 6.7!
</span></span><span style="display:flex;"><span>menu color border <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color sel <span style="color:#ae81ff">7</span> <span style="color:#75715e">#ffffffff #ff000000</span>
</span></span><span style="display:flex;"><span>menu color title <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color tabmsg <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color unsel <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color hotsel <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ff000000 #ffffffff</span>
</span></span><span style="display:flex;"><span>menu color hotkey <span style="color:#ae81ff">7</span> <span style="color:#75715e">#ffffffff #ff000000</span>
</span></span><span style="display:flex;"><span>menu color scrollbar <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>label linux
</span></span><span style="display:flex;"><span><span style="color:#75715e"># label指定在boot:提示符下输入的关键字，比如boot:linux[ENTER]，这个会启动label linux下标记的kernel和initrd.img文件</span>
</span></span><span style="display:flex;"><span>menu label ^Install or upgrade an existing system
</span></span><span style="display:flex;"><span>menu default
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 一个标签就是前面图片的一行选项</span>
</span></span><span style="display:flex;"><span>kernel vmlinuz 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 指定要启动的内核。同样要注意路径，默认是/tftpboot目录</span>
</span></span><span style="display:flex;"><span>append initrd<span style="color:#f92672">=</span>initrd.img 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 指定追加给内核的参数，initrd.img是一个最小的linux系统</span>
</span></span><span style="display:flex;"><span>label vesa
</span></span><span style="display:flex;"><span>menu label Install system with ^basic video driver
</span></span><span style="display:flex;"><span>kernel vmlinuz
</span></span><span style="display:flex;"><span>append initrd<span style="color:#f92672">=</span>initrd.img nomodeset
</span></span><span style="display:flex;"><span>label rescue
</span></span><span style="display:flex;"><span>menu label ^Rescue installed system
</span></span><span style="display:flex;"><span>kernel vmlinuz
</span></span><span style="display:flex;"><span>append initrd<span style="color:#f92672">=</span>initrd.img rescue
</span></span><span style="display:flex;"><span>label local
</span></span><span style="display:flex;"><span>menu label Boot from ^local drive
</span></span><span style="display:flex;"><span>localboot 0xffff
</span></span><span style="display:flex;"><span>label memtest86
</span></span><span style="display:flex;"><span>menu label ^Memory test
</span></span><span style="display:flex;"><span>kernel memtest
</span></span><span style="display:flex;"><span>append -</span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h5 id="编辑default">编辑<code>default</code></h5>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/var/lib/tftpboot/pxelinux.cfg/default<span style="color:#e6db74">&lt;&lt;-EOF  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default ks
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">prompt 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">label ks
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kernel vmlinuz
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">append initrd=initrd.img ks=http://10.0.0.61/ks_config/CentOS-6.7-ks.cfg ksdevice=eth0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li>这个文件就是实现下图这个界面的功能</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/var/lib/tftpboot/pxelinux.cfg/default<span style="color:#e6db74">&lt;&lt;-EOF  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default ks
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">prompt 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">label linux
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kernel vmlinuz
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">append initrd=initrd.img ks=http://10.0.0.61/ks_config/CentOS-6.7-ks.cfg ksdevice=eth0  	# 告诉安装程序ks.cfg文件在哪里，ksdevice=eth0代表当客户端有多块网卡的时候，设置从eth0安装
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><p><a href="#R-image-c5879800578584efc02a5012eb3df49d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Install-Centos6.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c5879800578584efc02a5012eb3df49d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Install-Centos6.png"></a></p>
</blockquote>
</blockquote>
<hr>
<h4 id="kscfg文件"><code>ks.cfg</code>文件</h4>
<blockquote>
<ul>
<li>通常，我们在安装操作系统的过程中，需要大量的和服务器交互操作，为了减少这个交互过程，<code>kickstart</code>就诞生了。使用这种<code>kickstart</code>，只需事先定义好一个<code>Kickstart</code>自动应答配置文件<code>ks.cfg</code>（通常存放在安装服务器上），并让安装程序知道该配置文件的位置，在安装过程中安装程序就可以自己从该文件中读取安装配置，这样就避免了在安装过程中多次的人机交互，从而实现无人值守的自动化安装</li>
<li>生成<code>kickstart</code>配置文件的三种方法：</li>
</ul>
<blockquote>
<ul>
<li>方法1、 每安装好一台<code>Centos</code>机器，<code>Centos</code>安装程序都会创建一个<code>kickstart</code>配置文件，记录你的真实安装配置。如果你希望实现和某系统类似的安装，可以基于该系统的<code>kickstart</code>配置文件来生成你自己的<code>kickstart</code>配置文件。（生成的文件名字叫<code>anaconda-ks.cfg位于/root/anaconda-ks.cfg</code>）</li>
<li>方法2、<code>Centos</code>提供了一个图形化的<code>kickstart</code>配置工具。在任何一个安装好的<code>Linux</code>系统上运行该工具，就可以很容易地创建你自己的<code>kickstart</code>配置文件。<code>kickstart</code>配置工具命令为<code>redhat-config-kickstart</code>（<code>RHEL3</code>）或<code>system-config-kickstart</code>（<code>RHEL4</code>，<code>RHEL5</code>）.网上有很多用<code>CentOS</code>桌面版生成<code>ks</code>文件的文章，如果有现成的系统就没什么可说。但没有现成的，也没有必要去用桌面版，命令行也很简单</li>
<li>方法3、阅读<code>kickstart</code>配置文件的手册。用任何一个文本编辑器都可以创建你自己的<code>kickstart</code>配置文件</li>
</ul>
</blockquote>
<ul>
<li>编写<code>ks.cfg</code>文件</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ grub-crypt 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 生成一个密码</span>
</span></span><span style="display:flex;"><span>Password:
</span></span><span style="display:flex;"><span>Retype password: 
</span></span><span style="display:flex;"><span>$6$PqVOBDIH4wHJ.JyH$6/xoqOGnm3DnEJyyXgWxCdmscsWrGKbTmMYYE/lgVgzIep999j8z9s7Ci5V5TG16TALy/Grtk6Vh/jj2WLnEn1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat /var/www/html/ks_config/CentOS-6.7-ks.cfg
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Kickstart Configurator for CentOS 6.7 by ky</span>
</span></span><span style="display:flex;"><span>install
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 告知安装程序，这是一次全新安装，而不是升级upgrade</span>
</span></span><span style="display:flex;"><span>url --url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://10.0.0.61/CentOS-6.7/&#34;</span>       
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 指定系统安装的包组等的路径</span>
</span></span><span style="display:flex;"><span>text 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 文本模式安装</span>
</span></span><span style="display:flex;"><span>lang en_US.UTF-8 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装使用的语言</span>
</span></span><span style="display:flex;"><span>keyboard us 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置系统键盘类型</span>
</span></span><span style="display:flex;"><span>zerombr
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 清楚mbr引导信息</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bootloader --location<span style="color:#f92672">=</span>mbr --driveorder<span style="color:#f92672">=</span>sda --append<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;crashkernel=auto rhgb quiet&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --location=,指定引导记录被写入的位置.有效的值如下:mbr(缺省),partition(在包含内核的分区的第一个扇区安装引导装载程序)或none(不安装引导装载程序；--driveorder,指定在BIOS引导顺序中居首的驱动器；--append=,指定内核参数.要指定多个参数,使用空格分隔它们</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>network --bootproto<span style="color:#f92672">=</span>dhcp --device<span style="color:#f92672">=</span>eth0 --onboot<span style="color:#f92672">=</span>yes --noipv6 --hostname<span style="color:#f92672">=</span>CentOS6
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 指定ip地址为dhcp分发，网卡eth0启动，是否在引导时启用该设备，禁用此设备的IPv6安装的系统的主机名</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>timezone --utc Asia/Shanghai
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置系统时区</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>authconfig --enableshadow --passalgo<span style="color:#f92672">=</span>sha512
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 系统认证信息，设置密码加密方式为sha512 启用shadow文件</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rootpw --iscrypted $6$X20eRtuZhkHznTb4$dK0BJByOSAWSDD8jccLVFz0CscijS9ldMWwpoCw/ZE
</span></span><span style="display:flex;"><span>jYw2BTQYGWlgKsn945fFTjRC658UXjuocwJbAjVI5D6/
</span></span><span style="display:flex;"><span><span style="color:#75715e"># root密码</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>clearpart --all –initlabel
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 清空分区</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>part /boot --fstype<span style="color:#f92672">=</span>ext4 --asprimary --size<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span>part swap --size<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>
</span></span><span style="display:flex;"><span>part / --fstype<span style="color:#f92672">=</span>ext4 --grow --asprimary --size<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --fstype=,为分区设置文件系统类型.有效的类型，--asprimary,强迫把分区分配为主分区,否则提示分区失败，--size=,以MB为单位的分区最小值.在此处指定一个整数值,如500.不要在数字后面加MB</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>firstboot –disable
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 负责协助配置redhat一些重要的信息</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>selinux --disabled
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>firewall –disabled
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 关闭selinux、防火墙</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>logging --level<span style="color:#f92672">=</span>info
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置日志级别</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>reboot
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设定安装完成后重启,此选项必须存在，不然kickstart显示一条消息，并等待用户按任意键后才重新引导，也可以选择halt关机</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>%packages
</span></span><span style="display:flex;"><span>@base
</span></span><span style="display:flex;"><span>@compat-libraries
</span></span><span style="display:flex;"><span>@debugging
</span></span><span style="display:flex;"><span>@development
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 要安装的包组</span>
</span></span><span style="display:flex;"><span>tree
</span></span><span style="display:flex;"><span>nmap
</span></span><span style="display:flex;"><span>sysstat
</span></span><span style="display:flex;"><span>lrzsz
</span></span><span style="display:flex;"><span>telnet
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 要安装的软件</span>
</span></span><span style="display:flex;"><span>%end</span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h4 id="无人值守安装系统">无人值守安装系统</h4>
<ul>
<li>
<ol>
<li>新建一个虚拟机加电，即可开始无人值守安装<code>linux</code>系统</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>Rpm</code>打包</li>
<li><code>Yum</code>仓库</li>
</ul>
<p><a href="#R-image-d9ee68b34d283f16455e8e47476a0452" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/configure.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d9ee68b34d283f16455e8e47476a0452"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/configure.png"></a>
<a href="#R-image-8691ca88a183d9b8408de0a6f17f24f2" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Retrieving.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8691ca88a183d9b8408de0a6f17f24f2"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Retrieving.png"></a>
<a href="#R-image-e563e7005a3fdb91be604f73b76d925d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Packages.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e563e7005a3fdb91be604f73b76d925d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Packages.png"></a></p>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1719330259" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1719330259" defer></script>
    <script src="../../../js/theme.js?1719330259" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/s2-1.png">
    <meta name="twitter:title" content="Install_System :: Hugo Relearn Theme">
    <meta property="og:url" content="https://erge.blog/systems/linux/install_system/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Install_System :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://erge.blog/images/s2-1.png">
    <meta itemprop="name" content="Install_System :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T00:28:03+08:00">
    <meta itemprop="dateModified" content="2024-06-13T00:28:03+08:00">
    <meta itemprop="image" content="https://erge.blog/images/s2-1.png">
    <title>Install_System :: Hugo Relearn Theme</title>
    <link href="../../../images/favicon.ico?1719330258" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../css/fontawesome-all.min.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1719330259" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1719330259" rel="stylesheet">
    <link href="../../../css/fonts.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1719330259" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1719330259" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1719330259" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1719330259" rel="stylesheet">
    <link href="../../../css/print.css?1719330259" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1719330259" rel="stylesheet">
    <script src="../../../js/variant.js?1719330259"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../systems/linux/install_system/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Install_System</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/jdk/install_jdk_and_jar_run/" title="Install_Jdk_And_Jar_Run (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/install_system/install_cobbler/" title="Install_Cobbler (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_system">Install_System</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Install_System</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_cobbler">Install_Cobbler</h1>

<h2 id="cobblerç®€ä»‹"><code>Cobbler</code>ç®€ä»‹</h2>
<blockquote>
<ul>
<li><code>Cobbler</code>æ˜¯ä¸€ä¸ªå¿«é€Ÿç½‘ç»œå®‰è£…<code>linux</code>çš„æœåŠ¡ï¼Œè€Œä¸”åœ¨ç»è¿‡è°ƒæ•´ä¹Ÿå¯ä»¥æ”¯æŒç½‘ç»œå®‰è£…<code>windows</code>ã€‚è¯¥å·¥å…·ä½¿ç”¨<code>python</code>å¼€å‘ï¼Œå°å·§è½»ä¾¿ï¼ˆæ‰<code>15k</code>è¡Œ<code>python</code>ä»£ç ï¼‰ï¼Œä½¿ç”¨ç®€å•çš„å‘½ä»¤å³å¯å®Œæˆ<code>PXE</code>ç½‘ç»œå®‰è£…ç¯å¢ƒçš„é…ç½®ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç®¡ç†<code>DHCP</code>ã€<code>DNS</code>ã€<code>TFTP</code>ã€<code>RSYNC</code>ä»¥åŠ<code>yum</code>ä»“åº“ã€æ„é€ ç³»ç»Ÿ<code>ISO</code>é•œåƒ</li>
<li><code>Cobbler</code>æ”¯æŒå‘½ä»¤è¡Œç®¡ç†ï¼Œ<code>web</code>ç•Œé¢ç®¡ç†ï¼Œè¿˜æä¾›äº†<code>API</code>æ¥å£ï¼Œå¯ä»¥æ–¹ä¾¿äºŒæ¬¡å¼€å‘ä½¿ç”¨</li>
<li><code>Cobbler</code>å®¢æˆ·ç«¯<code>Koan</code>æ”¯æŒè™šæ‹Ÿæœºå®‰è£…å’Œæ“ä½œç³»ç»Ÿé‡æ–°å®‰è£…ï¼Œä½¿é‡è£…ç³»ç»Ÿæ›´ä¾¿æ·</li>
<li>è¿ç»´è‡ªåŠ¨åŒ–åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å æ®ç€ä¸¾è¶³è½»é‡çš„åœ°ä½ï¼Œå°¤å…¶æ˜¯é¢å¯¹å‡ ç™¾å°ï¼Œå‡ åƒå°ç”šè‡³å‡ ä¸‡å°çš„æœåŠ¡å™¨æ—¶ï¼Œä»…ä»…æ˜¯å®‰è£…æ“ä½œç³»ç»Ÿï¼Œå¦‚æœä¸é€šè¿‡è‡ªåŠ¨åŒ–æ¥å®Œæˆï¼Œæ ¹æœ¬æ˜¯ä¸å¯æƒ³è±¡çš„ã€‚</li>
<li>é¢å¯¹ç”Ÿäº§ç¯å¢ƒä¸­ä¸åŒæœåŠ¡å™¨çš„éœ€æ±‚ï¼Œè¯¥å¦‚ä½•å®ç°æ‰¹é‡éƒ¨ç½²å¤šç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿå‘¢ï¼Ÿ<code>Cobbler</code>ä¾¿å¯ä»¥çš„æ»¡è¶³è¿™ä¸€å®é™…éœ€æ±‚ï¼Œå®ç°å¤šç‰ˆæœ¬æ“ä½œç³»ç»Ÿæ‰¹é‡éƒ¨ç½²</li>
<li><code>Cobbler</code>å„ä¸ªç»„ä»¶ä¹‹é—´å…³ç³»</li>
</ul>
<blockquote>
<ul>
<li><code>distro</code>-&gt;<code>profile-system</code>(å¯é€‰)</li>
</ul>
<p><a href="#R-image-d13e09e1d27dcc3251d949d5a1c8a32c" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Cobbler_Server/cobbler.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d13e09e1d27dcc3251d949d5a1c8a32c"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Cobbler_Server/cobbler.png"></a></p>
</blockquote>
<ul>
<li><code>distro</code>å‘è¡Œç‰ˆ</li>
</ul>
<blockquote>
<ul>
<li>é¢å¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿ</li>
<li>é¢å¯¹åŒä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸åŒçš„ç‰ˆæœ¬</li>
</ul>
</blockquote>
<ul>
<li><code>profile</code></li>
</ul>
<blockquote>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§æ˜¯é€šè¿‡<code>kickstart</code>æ¥éƒ¨ç½²</li>
</ul>
</blockquote>
<ul>
<li><code>system</code></li>
</ul>
<blockquote>
<ul>
<li>ä¸»è¦ç›®çš„é…ç½®ç½‘ç»œæ¥å£</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="cobbleråŠŸèƒ½"><code>Cobbler</code>åŠŸèƒ½</h3>
<blockquote>
<ul>
<li>ä½¿ç”¨<code>Cobbler</code>ï¼Œæ‚¨æ— éœ€è¿›è¡Œäººå·¥å¹²é¢„å³å¯å®‰è£…æœºå™¨ã€‚<code>Cobbler</code>è®¾ç½®ä¸€ä¸ª<code>PXE</code>å¼•å¯¼ç¯å¢ƒï¼ˆå®ƒè¿˜å¯ä½¿ç”¨<code>yaboot</code>æ”¯æŒ<code>PowerPC</code>ï¼‰ï¼Œå¹¶æ§åˆ¶ä¸å®‰è£…ç›¸å…³çš„æ‰€æœ‰æ–¹é¢ï¼Œæ¯”å¦‚ç½‘ç»œå¼•å¯¼æœåŠ¡ï¼ˆ<code>DHCP</code>å’Œ<code>TFTP</code>ï¼‰ä¸å­˜å‚¨åº“é•œåƒã€‚å½“å¸Œæœ›å®‰è£…ä¸€å°æ–°æœºå™¨æ—¶ï¼Œ<code>Cobbler</code>å¯ä»¥ï¼šä½¿ç”¨ä¸€ä¸ªä»¥å‰å®šä¹‰çš„æ¨¡æ¿æ¥é…ç½®<code>DHCP</code>æœåŠ¡ï¼ˆå¦‚æœå¯ç”¨äº†ç®¡ç†<code>DHCP</code>ï¼‰å°†ä¸€ä¸ªå­˜å‚¨åº“ï¼ˆ<code>yum</code>æˆ–<code>rsync</code>ï¼‰å»ºç«‹é•œåƒæˆ–è§£å‹ç¼©ä¸€ä¸ªåª’ä»‹ï¼Œä»¥æ³¨å†Œä¸€ä¸ªæ–°æ“ä½œç³»ç»Ÿï¼Œåœ¨<code>DHCP</code>é…ç½®æ–‡ä»¶ä¸­ä¸ºéœ€è¦å®‰è£…çš„æœºå™¨åˆ›å»ºä¸€ä¸ªæ¡ç›®ï¼Œå¹¶ä½¿ç”¨æ‚¨æŒ‡å®šçš„å‚æ•°ï¼ˆ<code>IP</code>å’Œ<code>MAC</code>åœ°å€ï¼‰ï¼Œåœ¨<code>TFTFP</code>æœåŠ¡ç›®å½•ä¸‹åˆ›å»ºé€‚å½“çš„<code>PXE</code>æ–‡ä»¶ï¼Œé‡æ–°å¯åŠ¨<code>DHCP</code>æœåŠ¡ä»¥åæ˜ æ›´æ”¹ï¼Œé‡æ–°å¯åŠ¨æœºå™¨ä»¥å¼€å§‹å®‰è£…ï¼ˆå¦‚æœç”µæºç®¡ç†å·²å¯ç”¨ï¼‰</li>
<li><code>Cobbler</code>æ”¯æŒä¼—å¤šçš„å‘è¡Œç‰ˆï¼š<code>Red Hat</code>ã€<code>Fedora</code>ã€<code>CentOS</code>ã€<code>Debian</code>ã€<code>Ubuntu</code>å’Œ<code>SuSE</code>ã€‚å½“æ·»åŠ ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼ˆé€šå¸¸é€šè¿‡ä½¿ç”¨<code>ISO</code>æ–‡ä»¶ï¼‰æ—¶ï¼Œ<code>Cobbler</code>çŸ¥é“å¦‚ä½•è§£å‹ç¼©åˆé€‚çš„æ–‡ä»¶å¹¶è°ƒæ•´ç½‘ç»œæœåŠ¡ï¼Œä»¥æ­£ç¡®å¼•å¯¼æœºå™¨ã€‚</li>
<li><code>Cobbler</code>å¯ä½¿ç”¨<code>kickstart</code>æ¨¡æ¿ã€‚åŸºäº<code>Red Hat</code>æˆ–<code>Fedora</code>çš„ç³»ç»Ÿä½¿ç”¨<code>kickstart</code>æ–‡ä»¶æ¥è‡ªåŠ¨åŒ–å®‰è£…æµç¨‹ã€‚é€šè¿‡ä½¿ç”¨æ¨¡æ¿ï¼Œæ‚¨å°±ä¼šæ‹¥æœ‰åŸºæœ¬çš„<code>kickstart</code>æ¨¡æ¿ï¼Œç„¶åå®šä¹‰å¦‚ä½•é’ˆå¯¹ä¸€ç§é…ç½®æ–‡ä»¶æˆ–æœºå™¨é…ç½®è€Œæ›¿æ¢å…¶ä¸­çš„å˜é‡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡æ¿å¯èƒ½åŒ…å«ä¸¤ä¸ªå˜é‡<code>$domain</code>å’Œ<code>$machine_name</code>ã€‚åœ¨ <code>Cobbler</code>é…ç½®ä¸­ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶æŒ‡å®š<code>domain=mydomain.com</code>ï¼Œå¹¶ä¸”æ¯å°ä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶çš„æœºå™¨åœ¨<code>machine_name</code>å˜é‡ä¸­æŒ‡å®šå…¶åç§°ã€‚è¯¥é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰æœºå™¨éƒ½ä½¿ç”¨ç›¸åŒçš„<code>kickstart</code>å®‰è£…ä¸”é’ˆå¯¹ <code>domain=mydomain.com</code>è¿›è¡Œé…ç½®ï¼Œä½†æ¯å°æœºå™¨æ‹¥æœ‰å…¶è‡ªå·±çš„æœºå™¨åç§°ã€‚æ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨<code>kickstart</code>æ¨¡æ¿åœ¨ä¸åŒçš„åŸŸä¸­å®‰è£…å…¶ä»–æœºå™¨å¹¶ä½¿ç”¨ä¸åŒçš„æœºå™¨åç§°ã€‚</li>
<li>ä¸ºäº†ååŠ©ç®¡ç†ç³»ç»Ÿï¼ŒCobbler å¯é€šè¿‡ fence scripts è¿æ¥åˆ°å„ç§ç”µæºç®¡ç†ç¯å¢ƒã€‚</li>
<li><code>Cobbler</code>æ”¯æŒ<code>apc_snmp</code>ã€<code>bladecenter</code>ã€<code>bullpap</code>ã€<code>drac</code>ã€<code>ether_wake</code>ã€<code>ilo</code>ã€<code>integrity</code>ã€<code>ipmilan</code>ã€<code>ipmitool</code>ã€<code>lpar</code>ã€<code>rsa</code>ã€<code>virsh</code>å’Œ<code>wti</code>ã€‚è¦é‡æ–°å®‰è£…ä¸€å°æœºå™¨ï¼Œå¯è¿è¡Œ<code>reboot system foo</code>å‘½ä»¤ï¼Œè€Œä¸”<code>Cobbler</code>ä¼šä½¿ç”¨å¿…è¦çš„å‡­æ®å’Œä¿¡æ¯æ¥ä¸ºæ‚¨è¿è¡Œæ°å½“çš„<code>fence scripts</code>ï¼ˆæ¯”å¦‚æœºå™¨æ’æ§½æ•°ï¼‰</li>
<li>é™¤äº†è¿™äº›ç‰¹æ€§ï¼Œè¿˜å¯ä½¿ç”¨ä¸€ä¸ªé…ç½®ç®¡ç†ç³»ç»Ÿ (<code>CMS</code>)ã€‚æ‚¨æœ‰ä¸¤ç§é€‰æ‹©ï¼šè¯¥å·¥å…·å†…çš„ä¸€ä¸ªå†…éƒ¨ç³»ç»Ÿï¼Œæˆ–è€…é›†æˆä¸€ä¸ªç°æœ‰çš„å¤–éƒ¨<code>CMS</code>ï¼Œæ¯”å¦‚<code>Chef</code>æˆ–<code>Puppet</code>ã€‚å€ŸåŠ©å†…éƒ¨ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥æŒ‡å®šæ–‡ä»¶æ¨¡æ¿ï¼Œè¿™äº›æ¨¡æ¿ä¼šä¾æ®é…ç½®å‚æ•°è¿›è¡Œå¤„ç†ï¼ˆä¸<code>kickstart</code>æ¨¡æ¿çš„å¤„ç†æ–¹å¼ä¸€æ ·ï¼‰ï¼Œç„¶åå¤åˆ¶åˆ°æ‚¨æŒ‡å®šçš„ä½ç½®ã€‚å¦‚æœå¿…é¡»è‡ªåŠ¨å°†é…ç½®æ–‡ä»¶éƒ¨ç½²åˆ°ç‰¹å®šæœºå™¨ï¼Œé‚£ä¹ˆæ­¤åŠŸèƒ½å¾ˆæœ‰ç”¨</li>
<li>ä½¿ç”¨<code>koan</code>å®¢æˆ·ç«¯ï¼Œ<code>Cobbler</code>å¯ä»å®¢æˆ·ç«¯é…ç½®è™šæ‹Ÿæœºå¹¶é‡æ–°å®‰è£…ç³»ç»Ÿã€‚æˆ‘ä¸ä¼šè®¨è®ºé…ç½®ç®¡ç†å’Œ<code>koan</code>ç‰¹æ€§ï¼Œå› ä¸ºå®ƒä»¬ä¸å±äºæœ¬æ–‡çš„ä»‹ç»èŒƒç•´ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬æ˜¯å€¼å¾—ç ”ç©¶çš„æœ‰ç”¨ç‰¹æ€§</li>
</ul>
</blockquote>
<hr>
<h3 id="cobblerè‡ªåŠ¨éƒ¨ç½²"><code>Cobbler</code>è‡ªåŠ¨éƒ¨ç½²</h3>
<h4 id="åŸºç¡€ç¯å¢ƒå‡†å¤‡">åŸºç¡€ç¯å¢ƒå‡†å¤‡</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->æç¤ºï¼šè™šæ‹Ÿæœºç½‘å¡é‡‡ç”¨<!-- raw HTML omitted --><code>NAT</code><!-- raw HTML omitted -->æ¨¡å¼ï¼Œå› ä¸ºæˆ‘ä»¬ä¼šæ­å»º<!-- raw HTML omitted --><code>DHCP</code><!-- raw HTML omitted -->æœåŠ¡å™¨ï¼Œåœ¨åŒä¸€å±€åŸŸç½‘å¤šä¸ª<!-- raw HTML omitted --><code>DHCP</code><!-- raw HTML omitted -->æœåŠ¡ä¼šæœ‰å†²çªï¼Œå¹¶ä¸”å¯¼è‡´å®è·µå¤±è´¥<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat /etc/redhat-release  	<span style="color:#75715e"># ç³»ç»Ÿç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>$ uname â€“r  	<span style="color:#75715e"># å†…æ ¸ç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>$ getenforce  	<span style="color:#75715e"># æ£€æµ‹selinuxæ˜¯å¦å…³é—­(å¿…é¡»å…³é—­)</span>
</span></span><span style="display:flex;"><span>$ systemctl stop firewalld  	<span style="color:#75715e"># å…³é—­é˜²ç«å¢™</span>
</span></span><span style="display:flex;"><span>$ ifconfig eth0|awk -F <span style="color:#e6db74">&#39;[ :]+&#39;</span> <span style="color:#e6db74">&#39;NR==2 {print $3}&#39;</span>  	<span style="color:#75715e"># æŸ¥çœ‹IPåœ°å€</span>
</span></span><span style="display:flex;"><span>$ hostname  	<span style="color:#75715e"># æŸ¥çœ‹ä¸»æœºå</span>
</span></span><span style="display:flex;"><span>$ wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo  	<span style="color:#75715e"># cobblerå®‰è£…å¿…é¡»ä½¿ç”¨åˆ°epelæº</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="å®‰è£…cobbler">å®‰è£…<code>Cobbler</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install cobbler cobbler-web pykickstart httpd tftp dhcp xinetd
</span></span><span style="display:flex;"><span>cobbler  	<span style="color:#75715e"># cobblerç¨‹åºåŒ…</span>
</span></span><span style="display:flex;"><span>cobbler-web  	<span style="color:#75715e"># cobblerçš„webæœåŠ¡åŒ…</span>
</span></span><span style="display:flex;"><span>pykickstart  	<span style="color:#75715e"># cobbleræ£€æŸ¥kickstartè¯­æ³•é”™è¯¯</span>
</span></span><span style="display:flex;"><span>httpd  	<span style="color:#75715e"># Apache webæœåŠ¡</span>
</span></span><span style="display:flex;"><span>tftp  	<span style="color:#75715e"># tftpæœåŠ¡</span>
</span></span><span style="display:flex;"><span>dhcp  	<span style="color:#75715e"># dhcpæœåŠ¡</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/etc/cobbler  	<span style="color:#75715e"># é…ç½®æ–‡ä»¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/settings  	<span style="color:#75715e"># cobblerä¸»é…ç½®æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/dhcp.template  	<span style="color:#75715e"># DHCPæœåŠ¡çš„é…ç½®æ¨¡æ¿</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/tftpd.template  	<span style="color:#75715e"># tftpæœåŠ¡çš„é…ç½®æ¨¡æ¿</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/rsync.template  	<span style="color:#75715e"># rsyncæœåŠ¡çš„é…ç½®æ¨¡æ¿</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/iso  	<span style="color:#75715e"># isoæ¨¡æ¿é…ç½®æ–‡ä»¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/pxe  	<span style="color:#75715e"># pxeæ¨¡æ¿æ–‡ä»¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/power  	<span style="color:#75715e"># ç”µæºçš„é…ç½®æ–‡ä»¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/users.conf  	<span style="color:#75715e"># WebæœåŠ¡æˆæƒé…ç½®æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/users.digest  	<span style="color:#75715e"># webè®¿é—®çš„ç”¨æˆ·åå¯†ç é…ç½®æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/dnsmasq.template  	<span style="color:#75715e"># DNSæœåŠ¡çš„é…ç½®æ¨¡æ¿</span>
</span></span><span style="display:flex;"><span>/etc/cobbler/modules.conf  	<span style="color:#75715e"># Cobbleræ¨¡å—é…ç½®æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler  	<span style="color:#75715e"># Cobbleræ•°æ®ç›®å½•</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler/config  	<span style="color:#75715e"># é…ç½®æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler/kickstarts  	<span style="color:#75715e"># é»˜è®¤å­˜æ”¾kickstartæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>/var/lib/cobbler/loaders  	<span style="color:#75715e"># å­˜æ”¾çš„å„ç§å¼•å¯¼ç¨‹åº</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler  	<span style="color:#75715e"># ç³»ç»Ÿå®‰è£…é•œåƒç›®å½•</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler/ks_mirror  	<span style="color:#75715e"># å¯¼å…¥çš„ç³»ç»Ÿé•œåƒåˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler/images  	<span style="color:#75715e"># å¯¼å…¥çš„ç³»ç»Ÿé•œåƒå¯åŠ¨æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>/var/www/cobbler/repo_mirror  	<span style="color:#75715e"># yumæºå­˜å‚¨ç›®å½•</span>
</span></span><span style="display:flex;"><span>/var/log/cobbler  	<span style="color:#75715e"># æ—¥å¿—ç›®å½•</span>
</span></span><span style="display:flex;"><span>/var/log/cobbler/install.log  	<span style="color:#75715e"># å®¢æˆ·ç«¯ç³»ç»Ÿå®‰è£…æ—¥å¿—</span>
</span></span><span style="display:flex;"><span>/var/log/cobbler/cobbler.log  	<span style="color:#75715e"># cobbleræ—¥å¿—</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="æ£€æµ‹cobbler">æ£€æµ‹<code>Cobbler</code></h4>
<blockquote>
<ul>
<li>
<p><code>cobbler</code>çš„è¿è¡Œä¾èµ–äº<code>dhcp</code>ã€<code>tftp</code>ã€<code>rsync</code>åŠ<code>dns</code>æœåŠ¡ï¼Œå…¶ä¸­<code>dhcp</code>å¯ç”±<code>dhcpdï¼ˆiscï¼‰</code>æä¾›ï¼Œä¹Ÿå¯ç”±<code>dnsmasq</code>æä¾›ï¼›<code>tftp</code>å¯ç”±<code>tftp-server</code>ç¨‹åºåŒ…æä¾›ï¼Œä¹Ÿå¯ç”±<code>cobbler</code>åŠŸèƒ½æä¾›ï¼Œ<code>rsync</code>æœ‰<code>rsync</code>ç¨‹åºåŒ…æä¾›ï¼Œ<code>dns</code>å¯ç”±<code>bind</code>æä¾›ï¼Œä¹Ÿå¯ç”±<code>dnsmasq</code>æä¾›</p>
</li>
<li>
<p><code>cobbler</code>å¯è‡ªè¡Œç®¡ç†è¿™äº›æœåŠ¡ä¸­çš„éƒ¨åˆ†ç”šè‡³æ˜¯å…¨éƒ¨ï¼Œä½†éœ€è¦é…ç½®<code>/etc/cobbler/settings</code>æ–‡ä»¶ä¸­çš„<code>manange_dhcp</code>ã€<code>manager_tftpd</code>ã€<code>manager_rsync</code>ã€<code>manager_dns</code>åˆ†åˆ«æ¥è¿›è¡Œå®šä¹‰ï¼Œå¦å¤–ï¼Œç”±äºå„ç§æœåŠ¡éƒ½æœ‰ç€ä¸åŒçš„å®ç°æ–¹å¼ï¼Œå¦‚è‹¥éœ€è¦è¿›è¡Œè‡ªå®šä¹‰ï¼Œéœ€è¦é€šè¿‡ä¿®æ”¹<code>/etc/cobbler/modules.conf</code>é…ç½®æ–‡ä»¶ä¸­å„æœåŠ¡çš„æ¨¡å—å‚æ•°çš„å€¼æ¥å®ç°</p>
</li>
<li>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl start httpd  	<span style="color:#75715e"># å¯åŠ¨apacheæœåŠ¡</span>
</span></span><span style="display:flex;"><span>$ systemctl start cobblerd  	<span style="color:#75715e"># å¯åŠ¨cobblerç¨‹åº</span></span></span></code></pre></div></li>
</ul>
<blockquote>
<ul>
<li>æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œéœ€è¦åœ¨<code>cobblerd</code>å’Œ<code>httpd</code>å¯åŠ¨çš„æƒ…å†µä¸‹æ£€æŸ¥</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl start httpd  	<span style="color:#75715e"># å¯åŠ¨apacheæœåŠ¡</span>
</span></span><span style="display:flex;"><span>$ systemctl start cobblerd  	<span style="color:#75715e"># å¯åŠ¨cobblerç¨‹åº</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œéœ€è¦åœ¨cobblerdå’Œhttpdå¯åŠ¨çš„æƒ…å†µä¸‹æ£€æŸ¥</span>
</span></span><span style="display:flex;"><span>$ cobbler check  	<span style="color:#75715e"># æ£€æŸ¥å­˜åœ¨çš„é—®é¢˜,é€ä¸€è§£å†³</span>
</span></span><span style="display:flex;"><span>The following are potential configuration items that you may want to fix:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> : The <span style="color:#e6db74">&#39;server&#39;</span> field in /etc/cobbler/settings must be set to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP <span style="color:#66d9ef">for</span> the boot server as reachable by all machines that will use it.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> : For PXE to be functional, the <span style="color:#e6db74">&#39;next_server&#39;</span> field in /etc/cobbler/settings must be set to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> : change <span style="color:#e6db74">&#39;disable&#39;</span> to <span style="color:#e6db74">&#39;no&#39;</span> in /etc/xinetd.d/tftp
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> : some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run <span style="color:#e6db74">&#39;cobbler get-loaders&#39;</span> to download them, or, <span style="color:#66d9ef">if</span> you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The <span style="color:#e6db74">&#39;cobbler get-loaders&#39;</span> command is the easiest way to resolve these requirements.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> : enable and start rsyncd.service with systemctl
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span> : debmirror package is not installed, it will be required to manage debian deployments and repositories
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span> : The default password used by the sample templates <span style="color:#66d9ef">for</span> newly installed machines <span style="color:#f92672">(</span>default_password_crypted in /etc/cobbler/settings<span style="color:#f92672">)</span> is still set to <span style="color:#e6db74">&#39;cobbler&#39;</span> and should be changed, try: <span style="color:#e6db74">&#34;openssl passwd -1 -salt &#39;random-phrase-here&#39; &#39;your-password-here&#39;&#34;</span> to generate new one
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> : fencing tools were not found, and are required to use the <span style="color:#f92672">(</span>optional<span style="color:#f92672">)</span> power management features. install cman or fence-agents to use them
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Restart cobblerd and <span style="color:#66d9ef">then</span> run <span style="color:#e6db74">&#39;cobbler sync&#39;</span> to apply changes.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¦‚ä¸Šå„é—®é¢˜çš„è§£å†³æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1. ä¿®æ”¹/etc/cobbler/settingsæ–‡ä»¶ä¸­çš„serverå‚æ•°çš„å€¼ä¸ºæä¾›cobbleræœåŠ¡çš„ä¸»æœºç›¸åº”çš„IPåœ°å€æˆ–ä¸»æœºåï¼Œå¦‚server: 10.0.0.101ï¼›</span>
</span></span><span style="display:flex;"><span>$  sed -i <span style="color:#e6db74">&#39;s/server: 127.0.0.1/server: 10.0.0.101/&#39;</span> /etc/cobbler/settings
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ä¿®æ”¹/etc/cobbler/settingsæ–‡ä»¶ä¸­çš„next_serverå‚æ•°çš„å€¼ä¸ºæä¾›PXEæœåŠ¡çš„ä¸»æœºç›¸åº”çš„IPåœ°å€ï¼Œå¦‚next_server: 10.0.0.101ï¼›</span>
</span></span><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#39;s/next_server: 127.0.0.1/next_server: 10.0.0.101/&#39;</span> /etc/cobbler/settings
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ä¿®æ”¹/etc/xinetd.d/tftpæ–‡ä»¶ä¸­çš„disableå‚æ•°ä¿®æ”¹ä¸º disable = no</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. æ‰§è¡Œ cobbler get-loaders å‘½ä»¤å³å¯ï¼›å¦åˆ™ï¼Œéœ€è¦å®‰è£…syslinuxç¨‹åºåŒ…ï¼Œè€Œåå¤åˆ¶/usr/share/syslinux/{pxelinux.0,memu.c32}ç­‰æ–‡ä»¶è‡³/var/lib/cobbler/loaders/ç›®å½•ä¸­ï¼›</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 5. æ‰§è¡Œ systemctl enable rsyncdå‘½ä»¤å³å¯ï¼›</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 6. å¦‚æœæœ‰å¼ºè¿«ç—‡å¯ä»¥é€‰æ‹© yum â€“y install debmirror ç„¶åæ ¹æ®é”™è¯¯è¿›è¡Œè§£å†³,ä¸€èˆ¬é”™è¯¯å¦‚ä¸‹ã€‚</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ³¨é‡Š/etc/dedmirror.confæ–‡ä»¶ä¸­çš„  @dists=â€sidâ€;  @arches=â€i386â€; </span>
</span></span><span style="display:flex;"><span>$ openssl passwd -1 -salt <span style="color:#e6db74">&#39;$(openssl rand -hex 4)&#39;</span> <span style="color:#e6db74">&#39;xuliangwei&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># $1$$(openss$.wbDUBV/STL0YaNuAcusK/  	# è¿”å›å‚æ•°</span>
</span></span><span style="display:flex;"><span>$ grep <span style="color:#e6db74">&#34;default_password_crypted&#34;</span> /etc/cobbler/settings  	<span style="color:#75715e"># æ›¿æ¢/etc/cobbler/settingå†…çš„default_password_crypted default_password_crypted: &#34;$1$$(openss$.wbDUBV/STL0YaNuAcusK/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 7. yum â€“y install cman fence-agents</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æœ€åé‡å¯Cobblerï¼šsystemctl restart cobblerd </span></span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h4 id="é…ç½®dhcp">é…ç½®<code>DHCP</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#39;s#manage_dhcp: 0#manage_dhcp: 1#g&#39;</span> /etc/cobbler/settings  	<span style="color:#75715e"># ä½¿ç”¨cobblerç®¡ç†dhcp</span>
</span></span><span style="display:flex;"><span>$ vim /etc/cobbler/dhcp.template  	<span style="color:#75715e"># ä¿®æ”¹cobblerçš„dhcpæ¨¡ç‰ˆï¼Œå› ä¸ºcobblerä¼šæ›¿æ¢ã€‚</span>
</span></span><span style="display:flex;"><span>subnet 10.0.0.0 netmask 255.255.255.0 <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  option routers             10.0.0.2;
</span></span><span style="display:flex;"><span>  option domain-name-servers 10.0.0.2;
</span></span><span style="display:flex;"><span>  option subnet-mask         255.255.255.0;
</span></span><span style="display:flex;"><span>  range dynamic-bootp        10.0.0.200 10.0.0.250;
</span></span><span style="display:flex;"><span>  default-lease-time         21600;
</span></span><span style="display:flex;"><span>  max-lease-time             43200;
</span></span><span style="display:flex;"><span>  next-server                $next_server;</span></span></code></pre></div></blockquote>
<hr>
<h4 id="åŒæ­¥cobbler">åŒæ­¥<code>Cobbler</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl restart xinetd  	<span style="color:#75715e"># é‡å¯xinetd</span>
</span></span><span style="display:flex;"><span>$ systemctl restart cobblerd  	<span style="color:#75715e"># é‡å¯cobbler</span>
</span></span><span style="display:flex;"><span>$ cobbler sync  	<span style="color:#75715e"># åŒæ­¥æœ€æ–°cobbleré…ç½®ï¼Œå¯ä»¥çœ‹å…·ä½“åšäº†å“ªäº›æ“ä½œ</span>
</span></span><span style="display:flex;"><span>task started: 2016-04-29_234117_sync
</span></span><span style="display:flex;"><span>task started <span style="color:#f92672">(</span>id<span style="color:#f92672">=</span>Sync, time<span style="color:#f92672">=</span>Fri Apr <span style="color:#ae81ff">29</span> 23:41:17 2016<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>running pre-sync triggers
</span></span><span style="display:flex;"><span>cleaning trees
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/pxelinux.cfg/default
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/images
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/grub-x86.efi
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/grub-x86_64.efi
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/grub/efidefault
</span></span><span style="display:flex;"><span>removing: /var/lib/tftpboot/s390x/profile_list
</span></span><span style="display:flex;"><span>copying bootloaders
</span></span><span style="display:flex;"><span>trying hardlink /var/lib/cobbler/loaders/grub-x86.efi -&gt; /var/lib/tftpboot/grub/grub-x86.efi
</span></span><span style="display:flex;"><span>trying hardlink /var/lib/cobbler/loaders/grub-x86_64.efi -&gt; /var/lib/tftpboot/grub/grub-x86_64.efi
</span></span><span style="display:flex;"><span>copying distros to tftpboot
</span></span><span style="display:flex;"><span>copying images
</span></span><span style="display:flex;"><span>generating PXE configuration files
</span></span><span style="display:flex;"><span>generating PXE menu structure
</span></span><span style="display:flex;"><span>rendering DHCP files
</span></span><span style="display:flex;"><span>generating /etc/dhcp/dhcpd.conf
</span></span><span style="display:flex;"><span>rendering TFTPD files
</span></span><span style="display:flex;"><span>generating /etc/xinetd.d/tftp
</span></span><span style="display:flex;"><span>cleaning link caches
</span></span><span style="display:flex;"><span>running post-sync triggers
</span></span><span style="display:flex;"><span>running python triggers from /var/lib/cobbler/triggers/sync/post/*
</span></span><span style="display:flex;"><span>running python trigger cobbler.modules.sync_post_restart_services
</span></span><span style="display:flex;"><span>running: dhcpd -t -q
</span></span><span style="display:flex;"><span>received on stdout: 
</span></span><span style="display:flex;"><span>received on stderr: 
</span></span><span style="display:flex;"><span>running: service dhcpd restart
</span></span><span style="display:flex;"><span>received on stdout: 
</span></span><span style="display:flex;"><span>received on stderr: Redirecting to /bin/systemctl restart  dhcpd.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>running shell triggers from /var/lib/cobbler/triggers/sync/post/*
</span></span><span style="display:flex;"><span>running python triggers from /var/lib/cobbler/triggers/change/*
</span></span><span style="display:flex;"><span>running python trigger cobbler.modules.scm_track
</span></span><span style="display:flex;"><span>running shell triggers from /var/lib/cobbler/triggers/change/*
</span></span><span style="display:flex;"><span>*** TASK COMPLETE ***</span></span></code></pre></div></blockquote>
<hr>
<h4 id="ç®¡ç†cobbler">ç®¡ç†<code>Cobbler</code></h4>
<ul>
<li>
<ol>
<li>ç®¡ç†<code>distro</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>cobbler</code>å˜å¾—å¯ç”¨çš„ç¬¬ä¸€æ­¥ä¸ºå®šä¹‰<code>distro</code>ï¼Œå…¶å¯ä»¥é€šè¿‡ä¸ºå…¶æŒ‡å®šå¤–éƒ¨çš„å®‰è£…å¼•å¯¼å†…æ ¸åŠ<code>ramdiskæ–‡</code>ä»¶çš„æ–¹å¼å®ç°ã€‚å¦‚æœå·²ç»æœ‰å®Œæˆçš„å®‰è£…æ ‘ï¼ˆå¦‚<code>os</code>çš„å®‰è£…é•œåƒï¼‰åˆ™æ¨èä½¿ç”¨<code>improt</code>ä¹‹é—´å¯¼å…¥çš„æ–¹å¼è¿›è¡Œ</li>
<li>å¦‚æœæœ‰<code>kickstart</code>æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>--kickstart=/path/to/kickstart_file</code>è¿›è¡Œå¯¼å…¥ï¼Œå› æ­¤<code>import</code>ä¼šè‡ªåŠ¨ä¸ºå¯¼å…¥çš„<code>distro</code>ç”Ÿæˆä¸€ä¸ª<code>profile</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mount /dev/cdrom /mnt/  	<span style="color:#75715e"># æŒ‚åœ¨ISOå…‰ç›˜è‡³æœåŠ¡å™¨</span>
</span></span><span style="display:flex;"><span>mount: /dev/sr0 is write-protected, mounting read-only
</span></span><span style="display:flex;"><span>$ cobbler import --path<span style="color:#f92672">=</span>/mnt/ --name<span style="color:#f92672">=</span>CentOS-7.1-x86_64-distro --arch<span style="color:#f92672">=</span>x86_64
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --path é•œåƒè·¯å¾„</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --name ä¸ºå®‰è£…æºå®šä¹‰ä¸€ä¸ªåå­—</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --arch æŒ‡å®šå®‰è£…æºæ˜¯32ä½ã€64ä½ã€ia64, ç›®å‰æ”¯æŒçš„é€‰é¡¹æœ‰: x86â”‚x86_64â”‚ia64</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®‰è£…æºçš„å”¯ä¸€æ ‡ç¤ºå°±æ˜¯æ ¹æ®nameå‚æ•°æ¥å®šä¹‰ï¼Œæœ¬ä¾‹å¯¼å…¥æˆåŠŸåï¼Œå®‰è£…æºçš„å”¯ä¸€æ ‡ç¤ºå°±æ˜¯ï¼šCentOS-7.1-distro-x86_64ã€‚</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é•œåƒå­˜æ”¾ç›®å½•ï¼Œcobblerä¼šå°†é•œåƒä¸­çš„æ‰€æœ‰å®‰è£…æ–‡ä»¶æ‹·è´åˆ°æœ¬åœ°ä¸€ä»½ï¼Œæ”¾åœ¨/var/www/cobbler/ks_mirrorä¸‹çš„CentOS-7.1-x86_64-distro-x86_64ç›®å½•ä¸‹ã€‚å› æ­¤/var/www/cobblerç›®å½•å¿…é¡»å…·æœ‰è¶³å¤Ÿå®¹çº³å®‰è£…æ–‡ä»¶çš„ç©ºé—´ã€‚</span>
</span></span><span style="display:flex;"><span>task started: 2016-04-30_010122_import
</span></span><span style="display:flex;"><span>task started <span style="color:#f92672">(</span>id<span style="color:#f92672">=</span>Media import, time<span style="color:#f92672">=</span>Sat Apr <span style="color:#ae81ff">30</span> 01:01:22 2016<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Found a candidate signature: breed<span style="color:#f92672">=</span>redhat, version<span style="color:#f92672">=</span>rhel6
</span></span><span style="display:flex;"><span>Found a candidate signature: breed<span style="color:#f92672">=</span>redhat, version<span style="color:#f92672">=</span>rhel7
</span></span><span style="display:flex;"><span>Found a matching signature: breed<span style="color:#f92672">=</span>redhat, version<span style="color:#f92672">=</span>rhel7
</span></span><span style="display:flex;"><span>Adding distros from path /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64:
</span></span><span style="display:flex;"><span>creating new distro: CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>trying symlink: /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64 -&gt; /var/www/cobbler/links/CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>creating new profile: CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>associating repos
</span></span><span style="display:flex;"><span>checking <span style="color:#66d9ef">for</span> rsync repo<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>checking <span style="color:#66d9ef">for</span> rhn repo<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>checking <span style="color:#66d9ef">for</span> yum repo<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>starting descent into /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64 <span style="color:#66d9ef">for</span> CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>processing repo at : /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64
</span></span><span style="display:flex;"><span>need to process repo/comps: /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64
</span></span><span style="display:flex;"><span>looking <span style="color:#66d9ef">for</span> /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64/repodata/*comps*.xml
</span></span><span style="display:flex;"><span>Keeping repodata as-is :/var/www/cobbler/ks_mirror/CentOS-7.1-x86_64-distro-x86_64/repodata
</span></span><span style="display:flex;"><span>*** TASK COMPLETE ***
</span></span><span style="display:flex;"><span>$ cobbler distro list  	<span style="color:#75715e"># åˆ—å‡ºæ‰€æœ‰çš„distro</span>
</span></span><span style="display:flex;"><span>   CentOS-7.1-distro-x86_64
</span></span><span style="display:flex;"><span>$ cobbler profile list  	<span style="color:#75715e"># å¯¼å…¥distroä¼šè‡ªåŠ¨ç”Ÿæˆprofile</span>
</span></span><span style="display:flex;"><span>   CentOS-7.1-distro-x86_64</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li>ç®¡ç†<code>profile</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>cobbler</code>ä½¿ç”¨<code>profile</code>æ¥ä¸ºç‰¹å®šçš„éœ€æ±‚ç±»åˆ«æä¾›é”éœ€è¦å®‰è£…çš„é…ç½®ï¼Œå³åœ¨<code>distro</code>çš„åŸºç¡€ä¸Šé€šè¿‡æä¾›<code>kiskstart</code>æ–‡ä»¶æ¥ç”Ÿæˆä¸€ä¸ªç‰¹å®šçš„ç³»ç»Ÿå®‰è£…é…ç½®ã€‚<code>distro</code>çš„<code>profile</code>å¯ä»¥å‡ºç°åœ¨<code>pxe</code>çš„å¼•å¯¼èœå•ä¸­ä½œä¸ºå®‰è£…çš„é€‰æ‹©ä¹‹ä¸€</li>
<li><code>Cobbler-CentOS-7.1-x86_64.cfg</code>é…ç½®æ–‡ä»¶æˆ‘ä¼šä¸Šä¼ è‡³è‡³é™„ä»¶ï¼Œé»˜è®¤æ˜¯æœ‰<code>kickstart</code>æ–‡ä»¶çš„ï¼Œæ‰€ä»¥<code>edit</code>ï¼Œå¦‚æœæ²¡æœ‰<code>kickstart</code>æ–‡ä»¶å¯ä»¥<code>add</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler profile edit --name<span style="color:#f92672">=</span>Centos7.1-distro-x86_64 --kickstart<span style="color:#f92672">=</span>/var/lib/cobbler/kickstarts/Cobbler-CentOS-7.1-x86_64.cfg  	<span style="color:#75715e"># æŒ‡å®šksè·¯å¾„</span></span></span></code></pre></div><ul>
<li><code>CentOS7</code>ç³»ç»Ÿç½‘å¡åå˜æˆ<code>eno...</code>è¿™ç§ï¼Œä¸ºäº†è¿ç»´æ ‡å‡†åŒ–ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸ºæˆ‘ä»¬å¸¸ç”¨çš„<code>eth0</code>ï¼Œä½¿ç”¨ä¸‹é¢çš„å‚æ•°ã€‚ä½†è¦æ³¨æ„æ˜¯<code>CentOS7</code>æ‰éœ€è¦ä¸‹é¢çš„æ­¥éª¤ï¼Œ<code>CentOS6</code>ä¸éœ€è¦</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler profile edit --name<span style="color:#f92672">=</span>Centos7.1-distro-x86_64 --kopts<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;net.ifnames=0 biosdevname=0&#39;</span>  	<span style="color:#75715e"># ä¿®æ”¹centos7å†…æ ¸</span></span></span></code></pre></div><ul>
<li>æ–°éƒ¨ç½²æœºå™¨å®‰è£…<code>yum</code>æºï¼Œå¹¶åŒæ­¥ã€‚å»ºè®®ä½¿ç”¨å†…ç½‘<code>yum</code>æºï¼Œåœ¨è¿™é‡Œä½¿ç”¨é˜¿é‡Œäº‘<code>yum</code>æº</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler repo add --name<span style="color:#f92672">=</span>base --mirror<span style="color:#f92672">=</span>http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/ --arch<span style="color:#f92672">=</span>x86_64 --breed<span style="color:#f92672">=</span>yum  	<span style="color:#75715e"># æ·»åŠ yumæº</span>
</span></span><span style="display:flex;"><span>$ cobbler reposync  	<span style="color:#75715e"># åŒæ­¥yumæº</span>
</span></span><span style="display:flex;"><span>$ cobbler sync  	<span style="color:#75715e"># æ¯æ¬¡ä¿®æ”¹profileéƒ½éœ€è¦åŒæ­¥</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="ç½²æ“ä½œç³»ç»Ÿ">ç½²æ“ä½œç³»ç»Ÿ</h4>
<ul>
<li>
<ol>
<li>æ–°å»ºä¸€å°è™šæ‹Ÿæœºï¼Œé€šè¿‡ç½‘ç»œå¯åŠ¨å³å¯ã€‚ï¼ˆæˆ‘è¿™é‡Œè™šæ‹Ÿæœºä½¿ç”¨çš„æ˜¯<code>NAT</code>æ¨¡å¼,å¹¶ä¸”å…³é—­<code>DHCP</code>åŠŸèƒ½ï¼‰</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>ç”¨æˆ·ï¼š<code>root</code></li>
<li>å¯†ç ï¼š<code>xuliangwei</code></li>
<li><code>openssl</code>ç”Ÿæˆæ—¶æŒ‡å®š</li>
</ul>
<p><a href="#R-image-1c100273f5bc03bfc55975e3cde074dc" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1c100273f5bc03bfc55975e3cde074dc"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="2">
<li>å®šåˆ¶åŒ–å®‰è£…</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>ç”±äº<code>kickstart</code>æŒ‡å®šæŸå°æœåŠ¡å™¨ä½¿ç”¨æŸä¸ª<code>ks</code>æ–‡ä»¶æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å¼•ç”¨<code>Cobbler</code>å°±å¾ˆç®€å•ã€‚é€šè¿‡ç‰©ç†<code>MAC</code>åœ°å€æ¥åŒºåˆ†</li>
<li>è‡ªå®šä¹‰å®‰è£…ï¼š<code>system</code>ä¸»è¦ç›®çš„é…ç½®ç½‘ç»œæ¥å£ï¼Œé€šè¿‡<code>system</code>æ¥å›ºå®šæœºå™¨çš„<code>IP</code>ã€æ©ç ã€ç½‘å…³ã€<code>DNS</code>ã€ä¸»æœºåã€ç­‰ç­‰å®ç°åŸºç¡€ç¯å¢ƒæ ‡å‡†åŒ–</li>
<li>æ ¹æ®æœºå™¨çš„<code>MAC</code>åœ°å€ï¼Œè‡ªåŠ¨ç»‘å®š<code>IP</code>ï¼Œç½‘å…³ï¼Œ<code>dns</code>ç­‰</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cobbler system add --name<span style="color:#f92672">=</span>xuliangwei-pc --mac<span style="color:#f92672">=</span>00:0C:29:6E:41:CB --profile<span style="color:#f92672">=</span>Centos7.1-profile-x86_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--ip-address<span style="color:#f92672">=</span>10.0.0.110 --subnet<span style="color:#f92672">=</span>255.255.255.0 --gateway<span style="color:#f92672">=</span>10.0.0.2 --interface<span style="color:#f92672">=</span>eth0 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--static<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> --hostname<span style="color:#f92672">=</span>xuliangwei.com --name-servers<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;114.114.114.114 8.8.8.8&#34;</span>
</span></span><span style="display:flex;"><span>$ cobbler sync
</span></span><span style="display:flex;"><span>$ cobbler system list
</span></span><span style="display:flex;"><span>   xuliangwei-pc</span></span></code></pre></div><p><a href="#R-image-01fd68fb928885f64820c8557f05189d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-01fd68fb928885f64820c8557f05189d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="3">
<li>è‡ªå®šä¹‰ç™»é™†ç•Œé¢</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ grep <span style="color:#e6db74">&#34;xuliangwei&#34;</span> /etc/cobbler/pxe/pxedefault.template  	<span style="color:#75715e"># è‡ªå®šä¹‰è£…æœºé¡µé¢</span>
</span></span><span style="display:flex;"><span>MENU TITLE Xuliangwei | http://xuliangwei.com
</span></span><span style="display:flex;"><span>$ cobbler sync  	<span style="color:#75715e"># åŒæ­¥</span></span></span></code></pre></div><p><a href="#R-image-aa559cef118cff1a6d308acae998fee2" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/xuliangwe.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-aa559cef118cff1a6d308acae998fee2"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/xuliangwe.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="4">
<li><code>web</code>ç®¡ç†<code>Cobbler</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>
<p>æ–°ç‰ˆ<code>cobbler</code>çš„<code>web</code>ç•Œé¢ä½¿ç”¨çš„æ˜¯<code>https</code>ï¼Œç™»å½•https://10.0.0.7/cobbler_web</p>
<p><code>cobbler_web</code>æ”¯æŒå¤šç§è®¤è¯æ–¹å¼ï¼Œå¦‚<code>authn_configfil</code>ã€<code>authn_ldap</code>æˆ–<code>authn_pam</code>ç­‰ï¼Œé»˜è®¤ä¸º<code>authn_denyall</code>å³æ‹’ç»æ‰€æœ‰ç”¨æˆ·ç™»é™†ï¼Œä¸‹é¢è¯´æ˜ä¸‰ç§èƒ½è®¤è¯ç”¨æˆ·ç™»å½•<code>cobbler_web</code>çš„æ–¹å¼</p>
</li>
<li>
<p><strong>ä½¿ç”¨<code>authn_pam</code>æ¨¡å—è®¤è¯<code>cobbler_web</code>ç”¨æˆ·</strong></p>
</li>
</ul>
<blockquote>
<ul>
<li>é¦–å…ˆä¿®æ”¹<code>modules</code>ä¸­çš„<code>authentication</code>æ®µä¸­çš„<code>module</code>å‚æ•°çš„å€¼ä¸º<code>authn_pam</code>
æ¥ç€åˆ›å»ºç³»ç»Ÿç”¨æˆ·ï¼Œå¹¶ä¸ºç”¨æˆ·è®¾å®šå¯†ç è€Œåå°†è®¾å®šçš„ç³»ç»Ÿç”¨æˆ·æ·»åŠ è‡³<code>cobbler_web</code>çš„<code>admin</code>ç»„ä¸­ï¼Œä¿®æ”¹<code>/etc/cobbler/users.conf</code>æ–‡ä»¶ï¼Œå°†è®¾å®šçš„ç”¨æˆ·æ·»åŠ ä¸º<code>admin</code>å‚æ•°çš„å€¼å³å¯</li>
</ul>
</blockquote>
<ul>
<li><strong>ä½¿ç”¨<code>authn_configfile</code>æ¨¡å—è®¤è¯<code>cobbler_web</code>ç”¨æˆ·</strong></li>
</ul>
<blockquote>
<ul>
<li>é¦–å…ˆä¿®æ”¹<code>modules</code>ä¸­çš„<code>authentication</code>æ®µä¸­çš„<code>module</code>å‚æ•°çš„å€¼ä¸º<code>authn_configfile</code>
æ·»åŠ ç¬¬ä¸€ç”¨æˆ·æ—¶ï¼Œéœ€è¦ä¸º<code>htdigest</code>å‘½ä»¤ä½¿ç”¨<code>&quot;-c&quot; etc/cobbler/users.digest</code>ï¼Œåç»­æ·»åŠ å…¶ä»–ç”¨æˆ·åˆ™ä¸èƒ½å†ä½¿ç”¨ï¼ŒåŒæ­¥<code>cobbler</code>é‡å¯<code>httpd</code>ä»¥åŠ<code>cobbler</code></li>
</ul>
</blockquote>
<ul>
<li><strong>ä½¿ç”¨<code>cobbler</code>é»˜è®¤çš„<code>web</code>è´¦å·å¯†ç è®¤è¯</strong></li>
</ul>
<blockquote>
<ul>
<li><code>user</code>ï¼š<code>cobbler</code></li>
<li><code>pass</code>ï¼š<code>cobbler</code></li>
</ul>
<p><a href="#R-image-0e056c2964ad8b95a39b2d1bd059077b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0e056c2964ad8b95a39b2d1bd059077b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web.png"></a></p>
<p><a href="#R-image-b09c8b9adf5ab83534c93a7ecef7b42b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b09c8b9adf5ab83534c93a7ecef7b42b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_1.png"></a></p>
<p><a href="#R-image-f09d4aece85377c7b4a5df4a2f82486a" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f09d4aece85377c7b4a5df4a2f82486a"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_2.png"></a></p>
<p><a href="#R-image-69cbcbb35ac1fc8966e213649f614efd" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-69cbcbb35ac1fc8966e213649f614efd"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_3.png"></a></p>
<p><a href="#R-image-5c1d54b94d186b5fd3e5501ddcf3d9c5" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5c1d54b94d186b5fd3e5501ddcf3d9c5"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_4.png"></a></p>
<p><a href="#R-image-64a0cfaf8d3659ef3eb75d752200100f" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-64a0cfaf8d3659ef3eb75d752200100f"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_5.png"></a></p>
<p><a href="#R-image-1bf54e5ffe6824b229900430a5d1362b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_6.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1bf54e5ffe6824b229900430a5d1362b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Cobbler_web_6.png"></a></p>
</blockquote>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_kickstart">Install_Kickstart</h1>

<h2 id="kickstartæ— äººå€¼å®ˆ"><code>KICKSTART</code>æ— äººå€¼å®ˆ</h2>
<h3 id="æŒ‡ä»¤ä½œç”¨ä»‹ç»">æŒ‡ä»¤ä½œç”¨ä»‹ç»</h3>
<blockquote>
<ul>
<li>
<p><strong><code>pxe</code></strong></p>
<p><code>PXE</code>ä½¿ç”¨<code>DHCP</code>ï¼ˆåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰å’Œ<code>TFTP</code>ï¼ˆæ™®é€šæ–‡ä»¶ä¼ é€åè®®ï¼‰ä»ç½‘ç»œä¸ŠæŸ¥æ‰¾å¹¶è£…è½½å¼•å¯¼ç¨‹åºã€‚<code>PXE</code>ç¯å¢ƒä»<code>NIC</code>ï¼ˆ<code>Network Interface Card</code>ï¼‰ä¸Šçš„<code>BIOS</code>è£…è½½ã€‚é¢„å¼•å¯¼æœåŠ¡ä½¿ç”¨<code>PXE</code>æ¥å‘ç°è®¾å¤‡æ˜¯å¦å­˜åœ¨ä¸ºå…¶æŒ‡å®šçš„é¢„å¼•å¯¼æœåŠ¡å·¥ä½œï¼Œå¹¶å‘è®¾å¤‡æä¾›æ‰§è¡ŒæŒ‡æ´¾å·¥ä½œæ‰€éœ€çš„æ–‡ä»¶ã€‚é€šè¿‡ä½¿ç”¨é¢„å¼•å¯¼æœåŠ¡ï¼Œå¯ä»¥è‡ªåŠ¨å°†æ˜ åƒæ”¾ç½®åˆ°è®¾å¤‡ä¸Šï¼Œå³ä½¿è®¾å¤‡çš„ç¡¬ç›˜ä¸ºç©º</p>
</li>
<li>
<p><strong><code>pxelinux.0</code></strong></p>
<p>ä¸»è¦ä½œç”¨æ˜¯è£…è½½æ‰§è¡ŒæŒ‡æ´¾çš„é¢„å¼•å¯¼å·¥ä½œæ‰€éœ€çš„æ“ä½œç³»ç»Ÿã€‚<code>pxelinux.0</code>æ–‡ä»¶æ˜¯<code>syslinux</code>è¿™ä¸€å¼€æ”¾æºä»£ç é¡¹ç›®çš„ä¸€éƒ¨åˆ†çš„æ”¹è¿›ç‰ˆæœ¬ã€‚è™½ç„¶<code>pxelinux.0</code>ä¸»è¦æ˜¯<code>Linux</code>åŠ è½½å™¨ï¼Œä½†å®ƒä¹Ÿå¯ä»¥è£…è½½å…¶ä»–æ“ä½œç³»ç»Ÿã€‚å®ƒçš„å·¥ä½œæ–¹å¼æ˜¯ä½¿ç”¨ä½äº<code>TFTP</code>æœåŠ¡å™¨ä¸Šçš„é…ç½®æ–‡ä»¶æ¥æä¾›å¼•å¯¼æŒ‡ä»¤</p>
</li>
<li>
<p><strong><code>vmlinuz</code></strong></p>
<p><code>vmlinuz</code>æ˜¯<code>Linux</code>å†…æ ¸çš„é•œåƒæ–‡ä»¶,å¯ä»¥è¢«å¼•å¯¼ç¨‹åºåŠ è½½,ä»è€Œå¯åŠ¨<code>Linux</code>ç³»ç»Ÿ</p>
</li>
<li>
<p><strong><code>initrd</code></strong></p>
<p><code>initrd</code>&mdash;-<code>boot loader initialized RAM disk</code>(å…¨ç§°)ï¼Œæ˜¯ä¸€ç§å¯åŠ¨<code>Linux</code>ç³»ç»Ÿçš„æ–¹å¼ï¼Œå½“å‰æµè¡Œçš„<code>Linux</code>ç‰ˆæœ¬ä¸€èˆ¬éƒ½é‡‡ç”¨æ¨¡å—åŒ–çš„å†…æ ¸,è¿™ç§æ–¹å¼å¯ä»¥åœ¨ä¸é‡æ–°ç¼–è¯‘æ„å»ºå†…æ ¸çš„æƒ…å½¢ä¸‹å¢åŠ åŠŸèƒ½æ¨¡å—ï¼Œä½†æ˜¯å¦‚æœä½ çš„<code>Linux</code>çš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿæ‰€åœ¨è®¾å¤‡çš„é©±åŠ¨æ˜¯ä¸€ä¸ªæ¨¡å—(æ²¡æœ‰ç¼–è¯‘è¿›å†…æ ¸æ˜ è±¡),å°±ä¸èƒ½è¢«å¼•å¯¼ç¨‹åº(ä¾‹å¦‚<code>loadlin</code>)ç›´æ¥åŠ è½½ï¼Œè¿™æ—¶ä¼šç”¨åˆ°<code>initrd</code>æ–¹å¼æ¥å¯åŠ¨ä½ çš„<code>Linux</code>ç³»ç»Ÿ</p>
<ul>
<li>è¿™ç§æ–¹å¼åŒ…æ‹¬ä¸¤ä¸ªé˜¶æ®µ:</li>
</ul>
<blockquote>
<ol>
<li>åœ¨ä¸€ä¸ª<code>RAM disk</code>ä¸Šå»ºç«‹ä¸€ä¸ªä¸´æ—¶çš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿ,åœ¨è¿™ä¸ª<code>RAM disk</code>ä¸ŠåŒ…å«ç€ä½ éœ€è¦çš„é©±åŠ¨æ¨¡å—</li>
<li>è½½å…¥æ‰€éœ€é©±åŠ¨æ¨¡å—,æŒ‚è½½å®é™…çš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿ ,å¯åŠ¨<code>Linux</code></li>
</ol>
</blockquote>
</li>
<li>
<p><strong><code>initrd.img</code></strong></p>
<p>å°±æ˜¯<code>RAM disk</code>çš„æ˜ è±¡</p>
</li>
</ul>
</blockquote>
<hr>
<h3 id="pxekickstartå·¥ä½œæµç¨‹"><code>PXE</code>+<code>Kickstart</code>å·¥ä½œæµç¨‹</h3>
<blockquote>
<ul>
<li><code>Kickstart</code>æ˜¯ä¸€ç§æ— äººå€¼å®ˆçš„å®‰è£…æ–¹å¼ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯åœ¨å®‰è£…è¿‡ç¨‹ä¸­è®°å½•å…¸å‹çš„éœ€è¦äººå·¥å¹²é¢„å¡«å†™çš„å„ç§å‚æ•°ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªåä¸º<code>ks.cfg</code>çš„æ–‡ä»¶ã€‚å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼ˆä¸åªå±€é™äºç”Ÿæˆ<code>Kickstart</code>å®‰è£…æ–‡ä»¶çš„æœºå™¨ï¼‰å‡ºç°è¦å¡«å†™å‚æ•°çš„æƒ…å†µï¼Œå®‰è£…ç¨‹åºé¦–å…ˆä¼šå»æŸ¥æ‰¾<code>Kickstart</code>ç”Ÿæˆçš„æ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°åˆé€‚çš„å‚æ•°ï¼Œå°±é‡‡ç”¨æ‰€æ‰¾åˆ°çš„å‚æ•°ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„å‚æ•°ï¼Œä¾¿éœ€è¦å®‰è£…è€…æ‰‹å·¥å¹²é¢„äº†ã€‚æ‰€ä»¥ï¼Œå¦‚æœ<code>Kickstart</code>æ–‡ä»¶æ¶µç›–äº†å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„æ‰€æœ‰éœ€è¦å¡«å†™çš„å‚æ•°ï¼Œé‚£ä¹ˆå®‰è£…è€…å®Œå…¨å¯ä»¥åªå‘Šè¯‰å®‰è£…ç¨‹åºä»ä½•å¤„å–<code>ks.cfg</code>æ–‡ä»¶ï¼Œç„¶åå°±å»å¿™è‡ªå·±çš„äº‹æƒ…ã€‚ç­‰å®‰è£…å®Œæ¯•ï¼Œå®‰è£…ç¨‹åºä¼šæ ¹æ®<code>ks.cfg</code>ä¸­çš„è®¾ç½®é‡å¯ç³»ç»Ÿï¼Œå¹¶ç»“æŸå®‰è£…</li>
<li><code>PXE</code>+<code>Kickstart</code>æ— äººå€¼å®ˆå®‰è£…æ“ä½œç³»ç»Ÿå®Œæ•´è¿‡ç¨‹å¦‚ä¸‹</li>
</ul>
<blockquote>
<p><a href="#R-image-642cb4dd8221e43119f7ca98c2505c6d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/PXE+Kickstart.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-642cb4dd8221e43119f7ca98c2505c6d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/PXE+Kickstart.png"></a></p>
</blockquote>
<ul>
<li>
<p>**<code>PXE Client</code>å‘<code>DHCP</code>å‘é€è¯·æ±‚ **</p>
<p><code>PXE Client</code>ä»è‡ªå·±çš„<code>PXE</code>ç½‘å¡å¯åŠ¨ï¼Œé€šè¿‡<code>PXE BootROM</code>(è‡ªå¯åŠ¨èŠ¯ç‰‡)ä¼šä»¥<code>UDP</code>(ç®€å•ç”¨æˆ·æ•°æ®æŠ¥åè®®)å‘é€ä¸€ä¸ªå¹¿æ’­è¯·æ±‚ï¼Œå‘æœ¬ç½‘ç»œä¸­çš„<code>DHCP</code>æœåŠ¡å™¨ç´¢å–<code>IP</code></p>
</li>
<li>
<p><strong><code>DHCP</code>æœåŠ¡å™¨æä¾›ä¿¡æ¯</strong></p>
<p><code>DHCP</code>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼ŒéªŒè¯æ˜¯å¦æ¥è‡³åˆæ³•çš„<code>PXE Client</code>çš„è¯·æ±‚ï¼ŒéªŒè¯é€šè¿‡å®ƒå°†ç»™å®¢æˆ·ç«¯ä¸€ä¸ª<code>æä¾›</code>å“åº”ï¼Œè¿™ä¸ª<code>æä¾›</code>å“åº”ä¸­åŒ…å«äº†ä¸ºå®¢æˆ·ç«¯åˆ†é…çš„<code>IP</code>åœ°å€ã€<code>pxelinux</code>å¯åŠ¨ç¨‹åº(<code>TFTP</code>)ä½ç½®ï¼Œä»¥åŠé…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®</p>
</li>
<li>
<p><strong><code>PXE</code>å®¢æˆ·ç«¯è¯·æ±‚ä¸‹è½½å¯åŠ¨æ–‡ä»¶</strong></p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„<code>å›åº”</code>åï¼Œä¼šå›åº”ä¸€ä¸ªå¸§ï¼Œä»¥è¯·æ±‚ä¼ é€å¯åŠ¨æ‰€éœ€æ–‡ä»¶ã€‚è¿™äº›å¯åŠ¨æ–‡ä»¶åŒ…æ‹¬ï¼š<code>pxelinux.0</code>ã€<code>pxelinux.cfg/default</code>ã€<code>vmlinuz</code>ã€<code>initrd.img</code>ç­‰æ–‡ä»¶</p>
</li>
<li>
<p><strong><code>Boot Server</code>å“åº”å®¢æˆ·ç«¯è¯·æ±‚å¹¶ä¼ é€æ–‡ä»¶</strong></p>
<p>å½“æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚åï¼Œä»–ä»¬ä¹‹é—´ä¹‹åå°†æœ‰æ›´å¤šçš„ä¿¡æ¯åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä½œåº”ç­”, ç”¨ä»¥å†³å®šå¯åŠ¨å‚æ•°ã€‚<code>BootROM</code>ç”±<code>TFTP</code>é€šè®¯åè®®ä»<code>Boot Server</code>ä¸‹è½½å¯åŠ¨å®‰è£…ç¨‹åºæ‰€å¿…é¡»çš„æ–‡ä»¶(<code>pxelinux.0</code>ã€<code>pxelinux.cfg/default</code>)ã€‚<code>default</code>æ–‡ä»¶ä¸‹è½½å®Œæˆåï¼Œä¼šæ ¹æ®è¯¥æ–‡ä»¶ä¸­å®šä¹‰çš„å¼•å¯¼é¡ºåºï¼Œå¯åŠ¨<code>Linux</code>å®‰è£…ç¨‹åºçš„å¼•å¯¼å†…æ ¸</p>
</li>
<li>
<p><strong>è¯·æ±‚ä¸‹è½½è‡ªåŠ¨åº”ç­”æ–‡ä»¶</strong></p>
<p>å®¢æˆ·ç«¯é€šè¿‡<code>pxelinux.cfg/default</code>æ–‡ä»¶æˆåŠŸçš„å¼•å¯¼<code>Linux</code>å®‰è£…å†…æ ¸åï¼Œå®‰è£…ç¨‹åºé¦–å…ˆå¿…é¡»ç¡®å®šä½ é€šè¿‡ä»€ä¹ˆå®‰è£…ä»‹è´¨æ¥å®‰è£…<code>linux</code>ï¼Œå¦‚æœæ˜¯é€šè¿‡ç½‘ç»œå®‰è£…(<code>NFS</code>, <code>FTP</code>, <code>HTTP</code>)ï¼Œåˆ™ä¼šåœ¨è¿™ä¸ªæ—¶å€™åˆå§‹åŒ–ç½‘ç»œï¼Œå¹¶å®šä½å®‰è£…æºä½ç½®ã€‚æ¥ç€ä¼šè¯»å–<code>default</code>æ–‡ä»¶ä¸­æŒ‡å®šçš„è‡ªåŠ¨åº”ç­”æ–‡ä»¶<code>ks.cfg</code>æ‰€åœ¨ä½ç½®ï¼Œæ ¹æ®è¯¥ä½ç½®è¯·æ±‚ä¸‹è½½è¯¥æ–‡ä»¶</p>
</li>
<li>
<p><strong>å®¢æˆ·ç«¯å®‰è£…æ“ä½œç³»ç»Ÿ</strong></p>
<p>å°†<code>ks.cfg</code>æ–‡ä»¶ä¸‹è½½å›æ¥åï¼Œé€šè¿‡è¯¥æ–‡ä»¶æ‰¾åˆ°<code>OS Server</code>ï¼Œå¹¶æŒ‰ç…§è¯¥æ–‡ä»¶çš„é…ç½®è¯·æ±‚ä¸‹è½½å®‰è£…è¿‡ç¨‹éœ€è¦çš„è½¯ä»¶åŒ…ã€‚</p>
<p><code>OS Server</code>å’Œå®¢æˆ·ç«¯å»ºç«‹è¿æ¥åï¼Œå°†å¼€å§‹ä¼ è¾“è½¯ä»¶åŒ…ï¼Œå®¢æˆ·ç«¯å°†å¼€å§‹å®‰è£…æ“ä½œç³»ç»Ÿã€‚å®‰è£…å®Œæˆåï¼Œå°†æç¤ºé‡æ–°å¼•å¯¼è®¡ç®—æœº</p>
</li>
</ul>
</blockquote>
<hr>
<h3 id="å®‰è£…">å®‰è£…</h3>
<blockquote>
<ul>
<li><code>Kickstart</code>çš„å®‰è£…æ–¹å¼æœ‰å¤šç§ç»„åˆï¼Œ<code>Kickstart</code>+<code>DHCP</code>+<code>TFTP</code>+<code>HTTP/NFS/FTP</code>ç­‰ï¼Œä¸ç®¡æ˜¯<code>HTTPã€NFS</code>æˆ–è€…<code>FTP</code>ï¼Œéƒ½æ˜¯ä¸ºäº†å¯»æ‰¾åˆ°ç³»ç»Ÿå¼•å¯¼åéœ€è¦å®‰è£…çš„åŒ…ç»„ç­‰æ–‡ä»¶ã€‚ä¸‹é¢çš„å®‰è£…æ–¹å¼æ˜¯<code>Kickstart</code>+<code>DHCP</code>+<code>TFTP</code>+<code>HTTP</code></li>
</ul>
</blockquote>
<hr>
<h4 id="dhcpå®‰è£…é…ç½®"><code>DHCP</code>å®‰è£…é…ç½®</h4>
<blockquote>
<ul>
<li>
<p><code>/etc/dhcp/dhcpd.conf </code></p>
</li>
<li>
<p><code>range 10.0.0.100 10.0.0.200;</code>  	# å¯åˆ†é…çš„èµ·å§‹<code>IP</code>-ç»“æŸ<code>IP</code></p>
</li>
<li>
<p><code>option subnet-mask 255.255.255.0;</code>  	# è®¾å®š<code>netmask</code></p>
</li>
<li>
<p><code>default-lease-time 21600;</code>  	# è®¾ç½®é»˜è®¤çš„<code>IP</code>ç§Ÿç”¨æœŸé™</p>
</li>
<li>
<p><code>max-lease-time 43200;</code>  	# è®¾ç½®æœ€å¤§çš„<code>IP</code>ç§Ÿç”¨æœŸé™</p>
</li>
<li>
<p><code>next-server 10.0.0.7;</code>       # å‘ŠçŸ¥å®¢æˆ·ç«¯<code>TFTP</code>æœåŠ¡å™¨çš„<code>ip</code></p>
</li>
<li>
<p><code>filename &quot;/pxelinux.0&quot;;</code>      # å‘ŠçŸ¥å®¢æˆ·ç«¯ä»<code>TFTP</code>æ ¹ç›®å½•ä¸‹è½½<code>pxelinux.0</code>æ–‡ä»¶</p>
</li>
<li>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>å¦‚æœæœºå™¨æ•°é‡è¿‡å¤šçš„è¯ï¼Œæ³¨æ„<code>dhcp</code>æœåŠ¡å™¨çš„åœ°å€æ± ï¼Œä¸è¦å› ä¸ºè€—å°½<code>IP</code>è€Œå¯¼è‡´<code>dhcpd</code>æœåŠ¡å™¨æ²¡æœ‰<code>IP</code>åœ°å€<code>release</code>çš„æƒ…å†µ</p>
<p>æœ¬æ¥è½¯ä»¶è£…å®Œåéƒ½è¦åŠ å…¥å¼€æœºè‡ªå¯åŠ¨ï¼Œä½†è¿™ä¸ª<code>Kickstart</code>ç³»ç»Ÿå°±ä¸èƒ½å¼€æœºè‡ªå¯åŠ¨ï¼Œè€Œä¸”ç”¨å®ŒåæœåŠ¡éƒ½è¦å…³é—­ï¼Œé˜²æ­¢æœªæ¥é‡å¯æœåŠ¡å™¨è‡ªåŠ¨é‡è£…ç³»ç»Ÿäº†</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install dhcp
</span></span><span style="display:flex;"><span>$ vim /etc/dhcp/dhcpd.conf
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DHCP Server Configuration file.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  see /usr/share/doc/dhcp*/dhcpd.conf.sample</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  see &#39;man 5 dhcpd.conf&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>subnet 10.0.0.0 netmask 255.255.255.0 <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>range 10.0.0.201 10.0.0.210;
</span></span><span style="display:flex;"><span>option subnet-mask 255.255.255.0;
</span></span><span style="display:flex;"><span>default-lease-time 21600;
</span></span><span style="display:flex;"><span>max-lease-time 43200;
</span></span><span style="display:flex;"><span>next-server 10.0.0.61;
</span></span><span style="display:flex;"><span>filename <span style="color:#e6db74">&#34;/pxelinux.0&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/etc/dhcp/dhcpd.conf&#34;</span> 13L, 360C å·²å†™å…¥
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /etc/init.d/dhcpd start
</span></span><span style="display:flex;"><span>æ­£åœ¨å¯åŠ¨ dhcpdï¼š                      <span style="color:#f92672">[</span>ç¡®å®š<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>$ netstat -lntup|grep dhcp
</span></span><span style="display:flex;"><span>udp    <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">0</span> 0.0.0.0:67         0.0.0.0:*                2040/dhcpd</span></span></code></pre></div></blockquote>
<hr>
<h4 id="tftpå®‰è£…é…ç½®"><code>TFTP</code>å®‰è£…é…ç½®</h4>
<blockquote>
<ul>
<li><code>TFTP</code>æœåŠ¡å™¨æä¾›æ–‡ä»¶ä½¿ç”¨ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ã€‚<code>TFTP</code>åè®®é€šå¸¸ç”¨äºå¯åŠ¨æ— ç›˜å·¥ä½œç«™ï¼Œä¸‹è½½é…ç½®æ–‡ä»¶åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶å¼€å§‹å¯¹éƒ¨åˆ†æ“ä½œç³»ç»Ÿçš„å®‰è£…è¿‡ç¨‹</li>
<li><code>server_args</code> = <code>-s /var/lib/tftpboot</code>  	# æŒ‡å®š<code>boot</code>å¯åŠ¨ç›®å½•ï¼Œä¿æŒé»˜è®¤</li>
<li><code>disable</code> = <code>yes</code>  # <code>no</code>æ”¹ä¸º<code>yes</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install tftp.server
</span></span><span style="display:flex;"><span>$ vim /etc/xinetd.d/tftp 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># default: off</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># description: The tftp server serves files using the trivial file transfer \</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    protocol. The tftp protocol is often used to boot diskless \</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    workstations, download configuration files to network-aware printers, \</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    and to start the installation process for some operating systems.</span>
</span></span><span style="display:flex;"><span>service tftp
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> socket_type       <span style="color:#f92672">=</span> dgram
</span></span><span style="display:flex;"><span> protocol        <span style="color:#f92672">=</span> udp
</span></span><span style="display:flex;"><span> wait          <span style="color:#f92672">=</span> yes
</span></span><span style="display:flex;"><span> user          <span style="color:#f92672">=</span> root
</span></span><span style="display:flex;"><span> server         <span style="color:#f92672">=</span> /usr/sbin/in.tftpd
</span></span><span style="display:flex;"><span> server_args       <span style="color:#f92672">=</span> -s /var/lib/tftpboot
</span></span><span style="display:flex;"><span> disable         <span style="color:#f92672">=</span> no
</span></span><span style="display:flex;"><span> per_source       <span style="color:#f92672">=</span> <span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span> cps           <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span> flags          <span style="color:#f92672">=</span> IPv4
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;/etc/xinetd.d/tftp&#34;</span> 18L, 517C å·²å†™å…¥
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /etc/init.d/xinetd restart
</span></span><span style="display:flex;"><span>åœæ­¢ xinetdï¼š                       <span style="color:#f92672">[</span>ç¡®å®š<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>æ­£åœ¨å¯åŠ¨ xinetdï¼š                     <span style="color:#f92672">[</span>ç¡®å®š<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ netstat -lntup|grep xinetd
</span></span><span style="display:flex;"><span>udp    <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">0</span> 0.0.0.0:69         0.0.0.0:*                2066/xinetd</span></span></code></pre></div></blockquote>
<hr>
<h4 id="httpå®‰è£…é…ç½®"><code>HTTP</code>å®‰è£…é…ç½®</h4>
<blockquote>
<ul>
<li><code>ServerName</code>æŒ‡å®š<code>Nginx</code>ç”¨äºè¯†åˆ«è‡ªèº«çš„åå­—å’Œç«¯å£å·ã€‚é€šå¸¸è¿™ä¸ªå€¼æ˜¯è‡ªåŠ¨æŒ‡å®šçš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ¨èä½ æ˜¾å¼çš„æŒ‡å®šå®ƒä»¥é˜²æ­¢å¯åŠ¨æ—¶å‡ºé”™ã€‚å¦‚æœä½ ä¸ºä½ çš„ä¸»æœºæŒ‡å®šäº†ä¸€ä¸ªæ— æ•ˆçš„<code>DNS</code>åï¼Œ<code>server-generated</code>é‡å®šå‘å°†ä¸èƒ½å·¥ä½œ</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#34;277i ServerName 127.0.0.1:80&#34;</span> /etc/httpd/conf/httpd.conf</span></span></code></pre></div></blockquote>
<ul>
<li>å°†<code>CentOS-6.7</code>æŒ‚è½½åˆ°<code>http</code>æœåŠ¡ä¸‹</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mount /dev/cdrom /var/www/html/CentOS-6.7/</span></span></code></pre></div></blockquote>
<ul>
<li>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat extra/www.conf 
</span></span><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>listen    80;
</span></span><span style="display:flex;"><span>server_name www.ky.com;  	<span style="color:#75715e"># åŸŸåè®¾ç½®</span>
</span></span><span style="display:flex;"><span>autoindex on;  	<span style="color:#75715e"># ä¸æ‰¾é¦–é¡µæ–‡ä»¶ï¼Œå±•ç¤ºç›®å½•ç»“æ„</span>
</span></span><span style="display:flex;"><span>location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>   root  /var/www/html/;  	<span style="color:#75715e"># æ˜¾ç¤ºç½‘é¡µå†…å®¹çš„æ–‡ä»¶ç›®å½•è·¯å¾„</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></li>
<li>
<p>è®¿é—®æµè§ˆå™¨<code>10.0.0.61/CentOS-6.7/</code>æŸ¥çœ‹é…ç½®æ˜¯å¦æ­£ç¡®</p>
</li>
</ul>
<blockquote>
<p><a href="#R-image-5c3b95db08846ffeb75e796928fad114" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Index.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5c3b95db08846ffeb75e796928fad114"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Index.png"></a></p>
</blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install httpd
</span></span><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#34;277i ServerName 127.0.0.1:80&#34;</span> /etc/httpd/conf/httpd.conf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /etc/init.d/httpd start
</span></span><span style="display:flex;"><span>æ­£åœ¨å¯åŠ¨ httpdï¼š                      <span style="color:#f92672">[</span>ç¡®å®š<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ netstat -lntup|grep <span style="color:#e6db74">&#34;httpd&#34;</span>
</span></span><span style="display:flex;"><span>tcp    <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">0</span> :::80            :::*            LISTEN   2085/httpd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ mkdir /var/www/html/CentOS-6.7
</span></span><span style="display:flex;"><span>$ mount /dev/cdrom /var/www/html/CentOS-6.7/
</span></span><span style="display:flex;"><span>mount: block device /dev/sr0 is write-protected, mounting read-only
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ df -h
</span></span><span style="display:flex;"><span>Filesystem   Size Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>/dev/sda3    8.8G 1.5G 6.9G 18% /
</span></span><span style="display:flex;"><span>tmpfs      495M   <span style="color:#ae81ff">0</span> 495M  0% /dev/shm
</span></span><span style="display:flex;"><span>/dev/sda1    190M  36M 145M 20% /boot
</span></span><span style="display:flex;"><span>/dev/sr0    3.7G 3.7G   <span style="color:#ae81ff">0</span> 100% /var/www/html/CentOS-6.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat nginx.conf
</span></span><span style="display:flex;"><span>worker_processes 1;
</span></span><span style="display:flex;"><span>events <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>worker_connections 1024;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>http <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>include    mime.types;
</span></span><span style="display:flex;"><span>default_type application/octet-stream;
</span></span><span style="display:flex;"><span>sendfile    on;
</span></span><span style="display:flex;"><span>keepalive_timeout 65;
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">\#</span>include set
</span></span><span style="display:flex;"><span>include extra/www.conf;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat extra/www.conf 
</span></span><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> listen    80;
</span></span><span style="display:flex;"><span> server_name www.ky.com;
</span></span><span style="display:flex;"><span> autoindex on;
</span></span><span style="display:flex;"><span> location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>   root  /var/www/html/;
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ fuser -k 80/tcp 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ€æ­»å› å‰é¢å¼€å¯httpdæœåŠ¡å ç”¨80çš„ç«¯å£è¿›ç¨‹ï¼Œç„¶åå°±å¯ä»¥å¼€å¯nginxæœåŠ¡</span></span></span></code></pre></div></blockquote>
<hr>
<h5 id="syslinuxé…ç½®"><code>syslinux</code>é…ç½®</h5>
<blockquote>
<ul>
<li><code>syslinux</code>æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¼•å¯¼åŠ è½½ç¨‹åºï¼Œè€Œä¸”å…¼å®¹å„ç§ä»‹è´¨ã€‚<code>SYSLINUX</code>æ˜¯ä¸€ä¸ªå°å‹çš„<code>Linux</code>æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„ç›®çš„æ˜¯ç®€åŒ–é¦–æ¬¡å®‰è£…<code>Linux</code>çš„æ—¶é—´ï¼Œå¹¶å»ºç«‹ä¿®æŠ¤æˆ–å…¶å®ƒç‰¹æ®Šç”¨é€”çš„å¯åŠ¨ç›˜ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°<code>pxelinux.0</code>è¿™ä¸ªæ–‡ä»¶,å¯ä»¥å®‰è£…ä¸€ä¸‹</li>
<li>å°†<code>sysliunx</code>çš„<code>pxelinux.0</code>æ–‡ä»¶æ‹·è´åˆ°<code>tftp</code>å¯åŠ¨ç›®å½•ä¸‹</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/ </span></span></code></pre></div></blockquote>
<ul>
<li>å°†<code>/var/www/html/CentOS-6.7/isolinux/*</code>ä¸‹çš„æ‰€æœ‰ç³»ç»Ÿå¼•å¯¼å®‰è£…çš„æ–‡ä»¶æ‹·è´åˆ°<code>tftp</code>å¯åŠ¨ç›®å½•ä¸‹</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp -a /var/www/html/CentOS-6.7/isolinux/* /var/lib/tftpboot/</span></span></code></pre></div></blockquote>
<ul>
<li>å°†<code>isolinux.cfg</code>æ–‡ä»¶æ‹·è´åˆ°<code>tftp</code>å¯åŠ¨ç›®å½•ä¸‹çš„<code>pxelinux.cfg</code>ç›®å½•ä¸‹å¹¶æ”¹åä¸º<code>default</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /var/lib/tftpboot/pxelinux.cfg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cp /var/www/html/CentOS-6.7/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</span></span></code></pre></div></blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install syslinux
</span></span><span style="display:flex;"><span>$ cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cp -a /var/www/html/CentOS-6.7/isolinux/* /var/lib/tftpboot/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ mkdir -p /var/lib/tftpboot/pxelinux.cfg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cp /var/www/html/CentOS-6.7/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</span></span></code></pre></div><blockquote>
<ul>
<li><code>/var/www/html/CentOS-6.7/isolinux/isolinux.cfg</code>æ–‡ä»¶è¯¦è§£</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat /var/www/html/CentOS-6.7/isolinux/isolinux.cfg 
</span></span><span style="display:flex;"><span>default vesamenu.c32 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é»˜è®¤åŠ è½½ä¸€ä¸ªèœå•</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># prompt 1 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¼€å¯ä¼šæ˜¾ç¤ºå‘½ä»¤è¡Œ&#39;boot: &#39;æç¤ºç¬¦ã€‚promptå€¼ä¸º0æ—¶åˆ™ä¸æç¤ºï¼Œå°†ä¼šç›´æ¥å¯åŠ¨&#39;default&#39;å‚æ•°ä¸­æŒ‡å®šçš„å†…å®¹</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>timeout <span style="color:#ae81ff">600</span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># timeoutæ—¶é—´æ˜¯å¼•å¯¼æ—¶ç­‰å¾…ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©çš„æ—¶é—´ï¼Œè®¾ä¸º1å¯ç›´æ¥å¼•å¯¼ï¼Œå•ä½ä¸º1/10ç§’</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>display boot.msg 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># èœå•èƒŒæ™¯å›¾ç‰‡ã€æ ‡é¢˜ã€é¢œè‰²</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>menu background splash.jpg
</span></span><span style="display:flex;"><span>menu title Welcome to CentOS 6.7!
</span></span><span style="display:flex;"><span>menu color border <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color sel <span style="color:#ae81ff">7</span> <span style="color:#75715e">#ffffffff #ff000000</span>
</span></span><span style="display:flex;"><span>menu color title <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color tabmsg <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color unsel <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>menu color hotsel <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ff000000 #ffffffff</span>
</span></span><span style="display:flex;"><span>menu color hotkey <span style="color:#ae81ff">7</span> <span style="color:#75715e">#ffffffff #ff000000</span>
</span></span><span style="display:flex;"><span>menu color scrollbar <span style="color:#ae81ff">0</span> <span style="color:#75715e">#ffffffff #00000000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>label linux
</span></span><span style="display:flex;"><span><span style="color:#75715e"># labelæŒ‡å®šåœ¨boot:æç¤ºç¬¦ä¸‹è¾“å…¥çš„å…³é”®å­—ï¼Œæ¯”å¦‚boot:linux[ENTER]ï¼Œè¿™ä¸ªä¼šå¯åŠ¨label linuxä¸‹æ ‡è®°çš„kernelå’Œinitrd.imgæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>menu label ^Install or upgrade an existing system
</span></span><span style="display:flex;"><span>menu default
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¸€ä¸ªæ ‡ç­¾å°±æ˜¯å‰é¢å›¾ç‰‡çš„ä¸€è¡Œé€‰é¡¹</span>
</span></span><span style="display:flex;"><span>kernel vmlinuz 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŒ‡å®šè¦å¯åŠ¨çš„å†…æ ¸ã€‚åŒæ ·è¦æ³¨æ„è·¯å¾„ï¼Œé»˜è®¤æ˜¯/tftpbootç›®å½•</span>
</span></span><span style="display:flex;"><span>append initrd<span style="color:#f92672">=</span>initrd.img 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŒ‡å®šè¿½åŠ ç»™å†…æ ¸çš„å‚æ•°ï¼Œinitrd.imgæ˜¯ä¸€ä¸ªæœ€å°çš„linuxç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span>label vesa
</span></span><span style="display:flex;"><span>menu label Install system with ^basic video driver
</span></span><span style="display:flex;"><span>kernel vmlinuz
</span></span><span style="display:flex;"><span>append initrd<span style="color:#f92672">=</span>initrd.img nomodeset
</span></span><span style="display:flex;"><span>label rescue
</span></span><span style="display:flex;"><span>menu label ^Rescue installed system
</span></span><span style="display:flex;"><span>kernel vmlinuz
</span></span><span style="display:flex;"><span>append initrd<span style="color:#f92672">=</span>initrd.img rescue
</span></span><span style="display:flex;"><span>label local
</span></span><span style="display:flex;"><span>menu label Boot from ^local drive
</span></span><span style="display:flex;"><span>localboot 0xffff
</span></span><span style="display:flex;"><span>label memtest86
</span></span><span style="display:flex;"><span>menu label ^Memory test
</span></span><span style="display:flex;"><span>kernel memtest
</span></span><span style="display:flex;"><span>append -</span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h5 id="ç¼–è¾‘default">ç¼–è¾‘<code>default</code></h5>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/var/lib/tftpboot/pxelinux.cfg/default<span style="color:#e6db74">&lt;&lt;-EOF  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default ks
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">prompt 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">label ks
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kernel vmlinuz
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">append initrd=initrd.img ks=http://10.0.0.61/ks_config/CentOS-6.7-ks.cfg ksdevice=eth0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li>è¿™ä¸ªæ–‡ä»¶å°±æ˜¯å®ç°ä¸‹å›¾è¿™ä¸ªç•Œé¢çš„åŠŸèƒ½</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/var/lib/tftpboot/pxelinux.cfg/default<span style="color:#e6db74">&lt;&lt;-EOF  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default ks
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">prompt 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">label linux
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kernel vmlinuz
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">append initrd=initrd.img ks=http://10.0.0.61/ks_config/CentOS-6.7-ks.cfg ksdevice=eth0  	# å‘Šè¯‰å®‰è£…ç¨‹åºks.cfgæ–‡ä»¶åœ¨å“ªé‡Œï¼Œksdevice=eth0ä»£è¡¨å½“å®¢æˆ·ç«¯æœ‰å¤šå—ç½‘å¡çš„æ—¶å€™ï¼Œè®¾ç½®ä»eth0å®‰è£…
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><p><a href="#R-image-c5879800578584efc02a5012eb3df49d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Install-Centos6.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c5879800578584efc02a5012eb3df49d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Install-Centos6.png"></a></p>
</blockquote>
</blockquote>
<hr>
<h4 id="kscfgæ–‡ä»¶"><code>ks.cfg</code>æ–‡ä»¶</h4>
<blockquote>
<ul>
<li>é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨å®‰è£…æ“ä½œç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¤§é‡çš„å’ŒæœåŠ¡å™¨äº¤äº’æ“ä½œï¼Œä¸ºäº†å‡å°‘è¿™ä¸ªäº¤äº’è¿‡ç¨‹ï¼Œ<code>kickstart</code>å°±è¯ç”Ÿäº†ã€‚ä½¿ç”¨è¿™ç§<code>kickstart</code>ï¼Œåªéœ€äº‹å…ˆå®šä¹‰å¥½ä¸€ä¸ª<code>Kickstart</code>è‡ªåŠ¨åº”ç­”é…ç½®æ–‡ä»¶<code>ks.cfg</code>ï¼ˆé€šå¸¸å­˜æ”¾åœ¨å®‰è£…æœåŠ¡å™¨ä¸Šï¼‰ï¼Œå¹¶è®©å®‰è£…ç¨‹åºçŸ¥é“è¯¥é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­å®‰è£…ç¨‹åºå°±å¯ä»¥è‡ªå·±ä»è¯¥æ–‡ä»¶ä¸­è¯»å–å®‰è£…é…ç½®ï¼Œè¿™æ ·å°±é¿å…äº†åœ¨å®‰è£…è¿‡ç¨‹ä¸­å¤šæ¬¡çš„äººæœºäº¤äº’ï¼Œä»è€Œå®ç°æ— äººå€¼å®ˆçš„è‡ªåŠ¨åŒ–å®‰è£…</li>
<li>ç”Ÿæˆ<code>kickstart</code>é…ç½®æ–‡ä»¶çš„ä¸‰ç§æ–¹æ³•ï¼š</li>
</ul>
<blockquote>
<ul>
<li>æ–¹æ³•1ã€ æ¯å®‰è£…å¥½ä¸€å°<code>Centos</code>æœºå™¨ï¼Œ<code>Centos</code>å®‰è£…ç¨‹åºéƒ½ä¼šåˆ›å»ºä¸€ä¸ª<code>kickstart</code>é…ç½®æ–‡ä»¶ï¼Œè®°å½•ä½ çš„çœŸå®å®‰è£…é…ç½®ã€‚å¦‚æœä½ å¸Œæœ›å®ç°å’ŒæŸç³»ç»Ÿç±»ä¼¼çš„å®‰è£…ï¼Œå¯ä»¥åŸºäºè¯¥ç³»ç»Ÿçš„<code>kickstart</code>é…ç½®æ–‡ä»¶æ¥ç”Ÿæˆä½ è‡ªå·±çš„<code>kickstart</code>é…ç½®æ–‡ä»¶ã€‚ï¼ˆç”Ÿæˆçš„æ–‡ä»¶åå­—å«<code>anaconda-ks.cfgä½äº/root/anaconda-ks.cfg</code>ï¼‰</li>
<li>æ–¹æ³•2ã€<code>Centos</code>æä¾›äº†ä¸€ä¸ªå›¾å½¢åŒ–çš„<code>kickstart</code>é…ç½®å·¥å…·ã€‚åœ¨ä»»ä½•ä¸€ä¸ªå®‰è£…å¥½çš„<code>Linux</code>ç³»ç»Ÿä¸Šè¿è¡Œè¯¥å·¥å…·ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ›å»ºä½ è‡ªå·±çš„<code>kickstart</code>é…ç½®æ–‡ä»¶ã€‚<code>kickstart</code>é…ç½®å·¥å…·å‘½ä»¤ä¸º<code>redhat-config-kickstart</code>ï¼ˆ<code>RHEL3</code>ï¼‰æˆ–<code>system-config-kickstart</code>ï¼ˆ<code>RHEL4</code>ï¼Œ<code>RHEL5</code>ï¼‰.ç½‘ä¸Šæœ‰å¾ˆå¤šç”¨<code>CentOS</code>æ¡Œé¢ç‰ˆç”Ÿæˆ<code>ks</code>æ–‡ä»¶çš„æ–‡ç« ï¼Œå¦‚æœæœ‰ç°æˆçš„ç³»ç»Ÿå°±æ²¡ä»€ä¹ˆå¯è¯´ã€‚ä½†æ²¡æœ‰ç°æˆçš„ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦å»ç”¨æ¡Œé¢ç‰ˆï¼Œå‘½ä»¤è¡Œä¹Ÿå¾ˆç®€å•</li>
<li>æ–¹æ³•3ã€é˜…è¯»<code>kickstart</code>é…ç½®æ–‡ä»¶çš„æ‰‹å†Œã€‚ç”¨ä»»ä½•ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„<code>kickstart</code>é…ç½®æ–‡ä»¶</li>
</ul>
</blockquote>
<ul>
<li>ç¼–å†™<code>ks.cfg</code>æ–‡ä»¶</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ grub-crypt 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç”Ÿæˆä¸€ä¸ªå¯†ç </span>
</span></span><span style="display:flex;"><span>Password:
</span></span><span style="display:flex;"><span>Retype password: 
</span></span><span style="display:flex;"><span>$6$PqVOBDIH4wHJ.JyH$6/xoqOGnm3DnEJyyXgWxCdmscsWrGKbTmMYYE/lgVgzIep999j8z9s7Ci5V5TG16TALy/Grtk6Vh/jj2WLnEn1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat /var/www/html/ks_config/CentOS-6.7-ks.cfg
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Kickstart Configurator for CentOS 6.7 by ky</span>
</span></span><span style="display:flex;"><span>install
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å‘ŠçŸ¥å®‰è£…ç¨‹åºï¼Œè¿™æ˜¯ä¸€æ¬¡å…¨æ–°å®‰è£…ï¼Œè€Œä¸æ˜¯å‡çº§upgrade</span>
</span></span><span style="display:flex;"><span>url --url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://10.0.0.61/CentOS-6.7/&#34;</span>       
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŒ‡å®šç³»ç»Ÿå®‰è£…çš„åŒ…ç»„ç­‰çš„è·¯å¾„</span>
</span></span><span style="display:flex;"><span>text 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ–‡æœ¬æ¨¡å¼å®‰è£…</span>
</span></span><span style="display:flex;"><span>lang en_US.UTF-8 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®‰è£…ä½¿ç”¨çš„è¯­è¨€</span>
</span></span><span style="display:flex;"><span>keyboard us 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è®¾ç½®ç³»ç»Ÿé”®ç›˜ç±»å‹</span>
</span></span><span style="display:flex;"><span>zerombr
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ¸…æ¥šmbrå¼•å¯¼ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bootloader --location<span style="color:#f92672">=</span>mbr --driveorder<span style="color:#f92672">=</span>sda --append<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;crashkernel=auto rhgb quiet&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --location=,æŒ‡å®šå¼•å¯¼è®°å½•è¢«å†™å…¥çš„ä½ç½®.æœ‰æ•ˆçš„å€¼å¦‚ä¸‹:mbr(ç¼ºçœ),partition(åœ¨åŒ…å«å†…æ ¸çš„åˆ†åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºå®‰è£…å¼•å¯¼è£…è½½ç¨‹åº)æˆ–none(ä¸å®‰è£…å¼•å¯¼è£…è½½ç¨‹åºï¼›--driveorder,æŒ‡å®šåœ¨BIOSå¼•å¯¼é¡ºåºä¸­å±…é¦–çš„é©±åŠ¨å™¨ï¼›--append=,æŒ‡å®šå†…æ ¸å‚æ•°.è¦æŒ‡å®šå¤šä¸ªå‚æ•°,ä½¿ç”¨ç©ºæ ¼åˆ†éš”å®ƒä»¬</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>network --bootproto<span style="color:#f92672">=</span>dhcp --device<span style="color:#f92672">=</span>eth0 --onboot<span style="color:#f92672">=</span>yes --noipv6 --hostname<span style="color:#f92672">=</span>CentOS6
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŒ‡å®šipåœ°å€ä¸ºdhcpåˆ†å‘ï¼Œç½‘å¡eth0å¯åŠ¨ï¼Œæ˜¯å¦åœ¨å¼•å¯¼æ—¶å¯ç”¨è¯¥è®¾å¤‡ï¼Œç¦ç”¨æ­¤è®¾å¤‡çš„IPv6å®‰è£…çš„ç³»ç»Ÿçš„ä¸»æœºå</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>timezone --utc Asia/Shanghai
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è®¾ç½®ç³»ç»Ÿæ—¶åŒº</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>authconfig --enableshadow --passalgo<span style="color:#f92672">=</span>sha512
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç³»ç»Ÿè®¤è¯ä¿¡æ¯ï¼Œè®¾ç½®å¯†ç åŠ å¯†æ–¹å¼ä¸ºsha512 å¯ç”¨shadowæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rootpw --iscrypted $6$X20eRtuZhkHznTb4$dK0BJByOSAWSDD8jccLVFz0CscijS9ldMWwpoCw/ZE
</span></span><span style="display:flex;"><span>jYw2BTQYGWlgKsn945fFTjRC658UXjuocwJbAjVI5D6/
</span></span><span style="display:flex;"><span><span style="color:#75715e"># rootå¯†ç </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>clearpart --all â€“initlabel
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ¸…ç©ºåˆ†åŒº</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>part /boot --fstype<span style="color:#f92672">=</span>ext4 --asprimary --size<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span>part swap --size<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>
</span></span><span style="display:flex;"><span>part / --fstype<span style="color:#f92672">=</span>ext4 --grow --asprimary --size<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --fstype=,ä¸ºåˆ†åŒºè®¾ç½®æ–‡ä»¶ç³»ç»Ÿç±»å‹.æœ‰æ•ˆçš„ç±»å‹ï¼Œ--asprimary,å¼ºè¿«æŠŠåˆ†åŒºåˆ†é…ä¸ºä¸»åˆ†åŒº,å¦åˆ™æç¤ºåˆ†åŒºå¤±è´¥ï¼Œ--size=,ä»¥MBä¸ºå•ä½çš„åˆ†åŒºæœ€å°å€¼.åœ¨æ­¤å¤„æŒ‡å®šä¸€ä¸ªæ•´æ•°å€¼,å¦‚500.ä¸è¦åœ¨æ•°å­—åé¢åŠ MB</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>firstboot â€“disable
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è´Ÿè´£ååŠ©é…ç½®redhatä¸€äº›é‡è¦çš„ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>selinux --disabled
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>firewall â€“disabled
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å…³é—­selinuxã€é˜²ç«å¢™</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>logging --level<span style="color:#f92672">=</span>info
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è®¾ç½®æ—¥å¿—çº§åˆ«</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>reboot
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è®¾å®šå®‰è£…å®Œæˆåé‡å¯,æ­¤é€‰é¡¹å¿…é¡»å­˜åœ¨ï¼Œä¸ç„¶kickstartæ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼Œå¹¶ç­‰å¾…ç”¨æˆ·æŒ‰ä»»æ„é”®åæ‰é‡æ–°å¼•å¯¼ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©haltå…³æœº</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>%packages
</span></span><span style="display:flex;"><span>@base
</span></span><span style="display:flex;"><span>@compat-libraries
</span></span><span style="display:flex;"><span>@debugging
</span></span><span style="display:flex;"><span>@development
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è¦å®‰è£…çš„åŒ…ç»„</span>
</span></span><span style="display:flex;"><span>tree
</span></span><span style="display:flex;"><span>nmap
</span></span><span style="display:flex;"><span>sysstat
</span></span><span style="display:flex;"><span>lrzsz
</span></span><span style="display:flex;"><span>telnet
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è¦å®‰è£…çš„è½¯ä»¶</span>
</span></span><span style="display:flex;"><span>%end</span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h4 id="æ— äººå€¼å®ˆå®‰è£…ç³»ç»Ÿ">æ— äººå€¼å®ˆå®‰è£…ç³»ç»Ÿ</h4>
<ul>
<li>
<ol>
<li>æ–°å»ºä¸€ä¸ªè™šæ‹ŸæœºåŠ ç”µï¼Œå³å¯å¼€å§‹æ— äººå€¼å®ˆå®‰è£…<code>linux</code>ç³»ç»Ÿ</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>Rpm</code>æ‰“åŒ…</li>
<li><code>Yum</code>ä»“åº“</li>
</ul>
<p><a href="#R-image-d9ee68b34d283f16455e8e47476a0452" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/configure.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d9ee68b34d283f16455e8e47476a0452"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/configure.png"></a>
<a href="#R-image-8691ca88a183d9b8408de0a6f17f24f2" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Retrieving.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8691ca88a183d9b8408de0a6f17f24f2"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Retrieving.png"></a>
<a href="#R-image-e563e7005a3fdb91be604f73b76d925d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Packages.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e563e7005a3fdb91be604f73b76d925d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Deploy_Server/Packages.png"></a></p>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1719330259" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1719330259" defer></script>
    <script src="../../../js/theme.js?1719330259" defer></script>
  </body>
</html>

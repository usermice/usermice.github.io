<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="é…ç½®Nginx åç§°åœ°å€ æè¿° å…è´¹åŸŸåç”³è¯· Vercel CDN å·¥ä¿¡éƒ¨å¤‡æ¡ˆæŸ¥è¯¢ æŸ¥æ‰¾ä¾¿å®œæœåŠ¡å™¨ éšç¬”åˆ†ç±» - Nginx fly.">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/s2-1.png">
    <meta name="twitter:title" content="Configure_Nginx :: Hugo Relearn Theme">
    <meta name="twitter:description" content="é…ç½®Nginx åç§°åœ°å€ æè¿° å…è´¹åŸŸåç”³è¯· Vercel CDN å·¥ä¿¡éƒ¨å¤‡æ¡ˆæŸ¥è¯¢ æŸ¥æ‰¾ä¾¿å®œæœåŠ¡å™¨ éšç¬”åˆ†ç±» - Nginx fly.">
    <meta property="og:url" content="https://erge.blog/systems/linux/web/configure_nginx/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Configure_Nginx :: Hugo Relearn Theme">
    <meta property="og:description" content="é…ç½®Nginx åç§°åœ°å€ æè¿° å…è´¹åŸŸåç”³è¯· Vercel CDN å·¥ä¿¡éƒ¨å¤‡æ¡ˆæŸ¥è¯¢ æŸ¥æ‰¾ä¾¿å®œæœåŠ¡å™¨ éšç¬”åˆ†ç±» - Nginx fly.">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Systems">
    <meta property="article:published_time" content="2024-06-25T00:41:02+08:00">
    <meta property="article:modified_time" content="2024-06-25T00:41:02+08:00">
    <meta property="og:image" content="https://erge.blog/images/s2-1.png">
    <meta itemprop="name" content="Configure_Nginx :: Hugo Relearn Theme">
    <meta itemprop="description" content="é…ç½®Nginx åç§°åœ°å€ æè¿° å…è´¹åŸŸåç”³è¯· Vercel CDN å·¥ä¿¡éƒ¨å¤‡æ¡ˆæŸ¥è¯¢ æŸ¥æ‰¾ä¾¿å®œæœåŠ¡å™¨ éšç¬”åˆ†ç±» - Nginx fly.">
    <meta itemprop="datePublished" content="2024-06-25T00:41:02+08:00">
    <meta itemprop="dateModified" content="2024-06-25T00:41:02+08:00">
    <meta itemprop="wordCount" content="2646">
    <meta itemprop="image" content="https://erge.blog/images/s2-1.png">
    <title>Configure_Nginx :: Hugo Relearn Theme</title>
    <link href="../../../../images/favicon.ico?1723699579" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../../css/fontawesome-all.min.css?1723699580" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fontawesome-all.min.css?1723699580" rel="stylesheet"></noscript>
    <link href="../../../../css/nucleus.css?1723699580" rel="stylesheet">
    <link href="../../../../css/auto-complete.css?1723699580" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/auto-complete.css?1723699580" rel="stylesheet"></noscript>
    <link href="../../../../css/perfect-scrollbar.min.css?1723699580" rel="stylesheet">
    <link href="../../../../css/fonts.css?1723699580" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fonts.css?1723699580" rel="stylesheet"></noscript>
    <link href="../../../../css/theme.css?1723699580" rel="stylesheet">
    <link href="../../../../css/theme-relearn-auto.css?1723699580" rel="stylesheet" id="R-variant-style">
    <link href="../../../../css/chroma-relearn-auto.css?1723699580" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../../css/variant.css?1723699580" rel="stylesheet">
    <link href="../../../../css/print.css?1723699580" rel="stylesheet" media="print">
    <script src="../../../../js/variant.js?1723699580"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support html disableInlineCopyToClipboard" data-url="../../../../systems/linux/web/configure_nginx/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>


            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li><a href="#é…ç½®nginx">é…ç½®<code>Nginx</code></a>
      <ul>
        <li><a href="#logrodateä½¿ç”¨"><code>logrodate</code>ä½¿ç”¨</a></li>
        <li><a href="#jsonæ—¥å¿—æ ¼å¼"><code>Json</code>æ—¥å¿—æ ¼å¼</a></li>
        <li><a href="#ç³»ç»Ÿæ’æŸ¥">ç³»ç»Ÿæ’æŸ¥</a></li>
        <li><a href="#nginxconfé…ç½®æ–‡ä»¶"><code>nginx.conf</code>é…ç½®æ–‡ä»¶</a></li>
        <li><a href="#confå­é…ç½®æ–‡ä»¶"><code>conf</code>å­é…ç½®æ–‡ä»¶</a></li>
        <li><a href="#nginxé›†ç¾¤åå‘ä»£ç†"><code>nginx</code>é›†ç¾¤ï¼Œåå‘ä»£ç†</a></li>
        <li><a href="#nginxä½¿ç”¨luaè„šæœ¬"><code>Nginx</code>ä½¿ç”¨<code>Lua</code>è„šæœ¬</a></li>
        <li><a href="#è¿‡æ»¤ç™»å½•å’ŒçŠ¶æ€ç ">è¿‡æ»¤ç™»å½•å’ŒçŠ¶æ€ç </a></li>
      </ul>
    </li>
  </ul>
</nav>

                </div>
              </div>
            </div>


          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/web/"><span itemprop="name">Web</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Configure_Nginx</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">

            <div class="topbar-button topbar-button-print" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/web/configure_nginx/index.print.html" title="Print whole chapter (CTRL&#43;ALT&#43;p)"><i class="fa-fw fas fa-print"></i></a>
            </div>


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/web/install_nginx_third_party_modules/" title="Install_Nginx_Third_Party_Modules (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/work_order/" title="Work_Order (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>

            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="configure_nginx">Configure_Nginx</h1>

<h2 id="é…ç½®nginx">é…ç½®<code>Nginx</code></h2>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.freenom.com/zh/index.html?lang=zh" rel="external" target="_self">å…è´¹åŸŸåç”³è¯·</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://vercel.com/" rel="external" target="_self"><code>Vercel CDN</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://beian.miit.gov.cn/#/Integrated/index" rel="external" target="_self">å·¥ä¿¡éƒ¨å¤‡æ¡ˆæŸ¥è¯¢</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.serverhunter.com/" rel="external" target="_self">æŸ¥æ‰¾ä¾¿å®œæœåŠ¡å™¨</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.cnblogs.com/zhongyehai/category/1406152.html?page=1" rel="external" target="_self">éšç¬”åˆ†ç±» - <code>Nginx</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://fly.io/" rel="external" target="_self"><code>fly.io</code>è¾¹ç¼˜æœåŠ¡å™¨</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://porkbun.com/" rel="external" target="_self"><code>Porkbun</code>åŸŸåè´­ä¹°å•†</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.domcomp.com/" rel="external" target="_self"><code>Domcomp</code>åŸŸåä»·æ ¼å¯¹æ¯”ç½‘ç«™</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://tld-list.com/" rel="external" target="_self"><code>TLD List</code>åŸŸåä»·æ ¼å¯¹æ¯”ç½‘ç«™</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/oneinstack/oneinstack" rel="external" target="_self"><code>Oneinstack</code></a></td>
<td>æœåŠ¡å®‰è£…è„šæœ¬</td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol>
<li><code>ab</code><!-- raw HTML omitted -->å‹åŠ›æµ‹è¯•å·¥å…·<!-- raw HTML omitted -->ï¼Œ<a href="https://www.charlesproxy.com/" rel="external" target="_self"><code>Charles</code>æŠ“åŒ…å·¥å…·</a></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install httpd-tools
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ab -n <span style="color:#ae81ff">50</span> -c <span style="color:#ae81ff">20</span> http://127.0.0.1/index.html  	<span style="color:#75715e"># -nï¼šæ€»å…±å‘èµ·çš„è¯·æ±‚æ•°ï¼Œè¿™é‡Œè®¾ç½®ä¸º50ã€</span>
</span></span><span style="display:flex;"><span>								<span style="color:#75715e"># -cï¼šåŒæ—¶å¹¶å‘çš„è¯·æ±‚ï¼Œè¿™é‡Œè®¾ç½®ä¸º20ä¸ªã€</span>
</span></span><span style="display:flex;"><span>								<span style="color:#75715e"># -kï¼šæ˜¯å¦å¼€å¯é•¿è¿æ¥</span></span></span></code></pre></div><ul>
<li><code>ab</code><!-- raw HTML omitted -->æ¢æµ‹åˆ°æ€§èƒ½æŒ‡æ ‡<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><code>Concurrency Level</code><!-- raw HTML omitted -->ï¼šè®¾å®šçš„å¹¶å‘æ•°<!-- raw HTML omitted --></li>
<li><code>Time taken for tests</code><!-- raw HTML omitted -->ï¼šå‹æµ‹æ€»å…±èŠ±è´¹çš„æ—¶é—´<!-- raw HTML omitted --></li>
<li><code>Complete requests</code><!-- raw HTML omitted -->ï¼šæ€»è¯·æ±‚æ•°<!-- raw HTML omitted --></li>
<li><code>Failed requests</code><!-- raw HTML omitted -->ï¼šå¤±è´¥çš„ä¸ªæ•°<!-- raw HTML omitted --></li>
<li><code>Requests per second</code><!-- raw HTML omitted -->ï¼šæ¯ç§’è¯·æ±‚æ•°<!-- raw HTML omitted --><code>TPS</code></li>
<li><code>Time per request</code><!-- raw HTML omitted -->ï¼šä»å®¢æˆ·ç«¯æ¥çœ‹ï¼Œä¸€ä¸ªè¯·æ±‚éœ€è¦ç”¨åˆ°çš„æ—¶é—´<!-- raw HTML omitted --></li>
<li><code>Time per request</code><!-- raw HTML omitted -->ï¼šä»æœåŠ¡ç«¯æ¥çœ‹ï¼Œå¤„ç†ä¸€ä¸ªè¯·æ±‚è¦èŠ±è´¹çš„æ—¶é—´<!-- raw HTML omitted --></li>
<li><code>Transfer rate</code><!-- raw HTML omitted -->ï¼šä¼ è¾“çš„é€Ÿç‡<!-- raw HTML omitted --></li>
</ul>
</blockquote>
</blockquote>
<ul>
<li>
<ol start="2">
<li><code>Nginx</code><!-- raw HTML omitted -->åŸºäº<!-- raw HTML omitted --><code>Lua</code><!-- raw HTML omitted -->åš<!-- raw HTML omitted --><code>Waf</code><!-- raw HTML omitted -->è§„åˆ™è¿‡æ»¤<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://github.com/loveshell/ngx_lua_waf" rel="external" target="_self"><code>ngx_lua_waf</code></a></li>
</ul>
</blockquote>
<hr>
<h3 id="logrodateä½¿ç”¨"><code>logrodate</code>ä½¿ç”¨</h3>
<blockquote>
<ul>
<li></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ man logrotate  	<span style="color:#75715e">#  æŸ¥çœ‹ä½¿ç”¨è¯¦æƒ… </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;/etc/logrotate.d/nginx<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">/opt/apps/nginx/logs/*.log{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">copytruncate  	# ç”¨äºè¿˜åœ¨æ‰“å¼€ä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼ŒæŠŠå½“å‰æ—¥å¿—å¤‡ä»½å¹¶æˆªæ–­
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">daily  	# å®‰æ—¥æœŸè½®è½¬æ—¥å¿—ï¼šdaily(å¤©)ã€weekly(æœˆ)ã€monthly(æœˆ)ã€yearly(å¹´)ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dateext  	# æ–‡ä»¶åç¼€æ˜¯æ—¥æœŸæ ¼å¼,ä¹Ÿå°±æ˜¯åˆ‡å‰²åæ–‡ä»¶æ˜¯:xxx.log-20150828.gz
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">rotate 7  	# æŒ‡å®šæ—¥å¿—æ–‡ä»¶åˆ é™¤ä¹‹å‰è½¬å‚¨çš„æ¬¡æ•°ï¼Œ0æŒ‡æ²¡æœ‰å¤‡ä»½ï¼Œ7æŒ‡ä¿ç•™7ä¸ªå¤‡ä»½
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">missingok  	# å¦‚æœæ—¥å¿—ä¸å­˜åœ¨åˆ™å¿½ç•¥è¯¥è­¦å‘Šä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">compress  	# é€šè¿‡gzipå‹ç¼©è½¬å‚¨ä»¥åçš„æ—¥å¿—ï¼ˆgzip -d xxx.gzè§£å‹ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">notifempty  	# å¦‚æœæ˜¯ç©ºæ–‡ä»¶çš„è¯ï¼Œä¸è½¬å‚¨
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">size 100k	# åœ¨æ—¥å¿—å¤§å°å¤§äº logsizeï¼ˆä¾‹å¦‚ 100Kï¼Œ4Mï¼‰æ—¶è½®æ¢
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">su root root
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">} 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ‰‹åŠ¨è°ƒè¯•éªŒè¯ï¼š-d</span>
</span></span><span style="display:flex;"><span>$ /usr/sbin/logrotate -d /etc/logrotate.d/nginx
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ‰‹åŠ¨å¼ºåˆ¶æ‰§è¡Œï¼š-f</span>
</span></span><span style="display:flex;"><span>$ /usr/sbin/logrotate -f /etc/logrotate.d/nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ–°å¢åˆªé™¤7å¤©ä»¥å‰logå®šæ™‚è…³æœ¬  </span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;###nginxè¶…éä¸ƒå¤©logåˆªé™¤
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">1 0 * * * /bin/bash /opt/scripts/DEL_NGINX.sh &gt;&gt; ~/del_tom.log 2&gt;&amp;1&#34;</span> &gt;&gt; /var/spool/cron/admin</span></span></code></pre></div></blockquote>
<hr>
<h3 id="jsonæ—¥å¿—æ ¼å¼"><code>Json</code>æ—¥å¿—æ ¼å¼</h3>
<blockquote>
<table>
<thead>
<tr>
<th>å˜é‡å</th>
<th>æè¿°</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>'&quot;@timestamp&quot;:&quot;$time_iso8601&quot;,'</code></td>
<td><code>ISO 8601</code>æ ‡å‡†æ ¼å¼çš„å½“åœ°æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>'&quot;uri&quot;:&quot;$uri&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;args&quot;:&quot;$args&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;host&quot;:&quot;$host&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;https&quot;:&quot;$https&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;scheme&quot;:&quot;$scheme&quot;,' </code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;domain&quot;:&quot;$domain&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;status&quot;:&quot;$status&quot;,'</code></td>
<td><code>HTTP</code>è¯·æ±‚çŠ¶æ€ç </td>
<td><code>200 403 499 502 503</code></td>
</tr>
<tr>
<td><code>'&quot;request&quot;:&quot;$request&quot;,'</code></td>
<td>è¯·æ±‚çš„<code>URI</code>å’Œ<code>HTTP</code>åè®®</td>
<td><code>&quot;GET /api/img/home/logo-aipay.png HTTP/1.1&quot;</code></td>
</tr>
<tr>
<td><code>'&quot;hostname&quot;:&quot;$hostname&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_host&quot;:&quot;$http_host&quot;,'</code></td>
<td>è®¿é—®çš„åŸŸåæˆ–è€…<code>IP</code></td>
<td><code>www.domain.com</code><!-- raw HTML omitted -->192.168.1.1</td>
</tr>
<tr>
<td><code>'&quot;time_local&quot;:&quot;$time_local&quot;,'</code></td>
<td>é€šç”¨æ—¥å¿—æ ¼å¼ä¸­çš„æœ¬åœ°æ—¶é—´</td>
<td><code>18/Jul/2021:13:00:00 +0800</code></td>
</tr>
<tr>
<td><code>'&quot;ssl_cipher&quot;:&quot;$ssl_cipher&quot;,'</code></td>
<td>äº¤æ¢æ•°æ®ä¸­çš„ç®—æ³•</td>
<td><code>RC4-SHA</code></td>
</tr>
<tr>
<td><code>'&quot;requesturl&quot;:&quot;$request_uri&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;remote_addr&quot;:&quot;$remote_addr&quot;,'</code></td>
<td>å®¢æˆ·ç«¯åœ°å€</td>
<td></td>
</tr>
<tr>
<td><code>'&quot;remote_user&quot;:&quot;$remote_user&quot;,'</code></td>
<td>å®¢æˆ·ç«¯ç”¨æˆ·åç§°</td>
<td></td>
</tr>
<tr>
<td><code>'&quot;server_addr&quot;:&quot;$server_addr&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_cookie&quot;:&quot;$http_cookie&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_gp_xreal&quot;:&quot;$http_GP_IP&quot;,' </code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;ssl_protocol&quot;:&quot;$ssl_protocol&quot;,'</code></td>
<td><code>SSL</code>åè®®ç‰ˆæœ¬</td>
<td><code>TLSv1</code></td>
</tr>
<tr>
<td><code>'&quot;request_body&quot;:&quot;$request_body&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;request_time&quot;:&quot;$request_time&quot;,' </code></td>
<td>æ•´ä¸ªè¯·æ±‚çš„æ€»æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_referer&quot;:&quot;$http_referer&quot;,' </code></td>
<td>è·³è½¬æ¥æº</td>
<td></td>
</tr>
<tr>
<td><code>'&quot;client_realip&quot;:&quot;$clientRealIp&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;upstream_addr&quot;:&quot;$upstream_addr&quot;,'</code></td>
<td><code>upstream</code>ä»£ç†çš„åç«¯æœåŠ¡åœ°å€</td>
<td><code>java tomcat php</code></td>
</tr>
<tr>
<td><code>'&quot;request_length&quot;:&quot;$request_length&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;upstream_status&quot;:&quot;$upstream_status&quot;,'</code></td>
<td><code>upstream</code>çŠ¶æ€ç </td>
<td><code>200 403 499 502 503</code></td>
</tr>
<tr>
<td><code>'&quot;body_bytes_sent&quot;:&quot;$body_bytes_sent&quot;,'</code></td>
<td>å‘é€ç»™å®¢æˆ·çš„æ–‡ä»¶å¤§å°</td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_user_agent&quot;:&quot;$http_user_agent&quot;,'</code></td>
<td>ç”¨æˆ·æµè§ˆå™¨è®¿é—®ç±»å‹</td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_wangsu_xreal&quot;:&quot;$http_cdn_src_IP&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_ali_xreal&quot;:&quot;$http_Ali_CDN_Real_IP&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_cf_xreal&quot;:&quot;$http_CF_Connecting_IP&quot;,'</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>'&quot;http_x_forwarded_for&quot;:&quot;$http_x_forwarded_for&quot;,'</code></td>
<td></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>'&quot;upstream_response_time&quot;:&quot;$upstream_response_time&quot;,'</code></td>
<td>è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œ<code>upstream</code>å“åº”æ—¶é—´</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>'&quot;proxy_add_x_forwarded_for&quot;:&quot;$proxy_add_x_forwarded_for&quot;,'</code></td>
<td>&mdash;</td>
<td>&mdash;</td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">log_format</span> <span style="color:#e6db74">json</span> <span style="color:#e6db74">escape=json</span>  <span style="color:#e6db74">&#39;</span>{<span style="color:#f92672">&#34;@timestamp&#34;:&#34;$time_iso8601&#34;,&#39;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;client_realip&#34;:&#34;</span>$clientRealIp&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;remote_addr&#34;:&#34;</span>$remote_addr&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;status&#34;:&#34;</span>$status&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;upstream_status&#34;:&#34;</span>$upstream_status&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;request_time&#34;:&#34;</span>$request_time&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;upstream_response_time&#34;:&#34;</span>$upstream_response_time&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;upstream_addr&#34;:&#34;</span>$upstream_addr&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;request&#34;:&#34;</span>$request&#34;,&#39;
</span></span><span style="display:flex;"><span>  	<span style="color:#e6db74">&#39;&#34;http_scheme&#34;:&#34;</span>$http_X_Forwarded_Proto&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;server_name&#34;:&#34;</span>$host&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;uri&#34;:&#34;</span>$uri&#34;,&#39;
</span></span><span style="display:flex;"><span>  	<span style="color:#e6db74">&#39;&#34;request_body&#34;:&#34;</span>$request_body&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;body_bytes_sent&#34;:&#34;</span>$body_bytes_sent&#34;,&#39;
</span></span><span style="display:flex;"><span>  	<span style="color:#e6db74">&#39;&#34;bytes_sent&#34;:&#34;</span>$body_bytes_sent&#34;, <span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;request_length&#34;:&#34;</span>$request_length&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_referer&#34;:&#34;</span>$http_referer&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_wangsu_xreal&#34;:&#34;</span>$http_cdn_src_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_ali_xreal&#34;:&#34;</span>$http_Ali_CDN_Real_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_cf_xreal&#34;:&#34;</span>$http_CF_Connecting_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_gp_xreal&#34;:&#34;</span>$http_GP_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_x_forwarded_for&#34;:&#34;</span>$proxy_add_x_forwarded_for&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_user_agent&#34;:&#34;</span>$http_user_agent&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;xdevice&#34;:&#34;</span>$http_x_device&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;xversion&#34;:&#34;</span>$http_x_version&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;trace-id&#34;:&#34;</span>$http_x_trace_id&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;uid&#34;:&#34;</span>$http_x_id&#34;&#39;
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;</span><span style="color:#960050;background-color:#1e0010">}</span><span style="color:#e6db74">&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">è¿™é‡Œæ³¨æ„ä½¿ç”¨ä¸‹åˆ’çº¿ï¼Œ</span></span></span></code></pre></div><ul>
<li><code>Json</code><!-- raw HTML omitted -->æ–¹å¼æŸ¥çœ‹æ—¥å¿—<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ tail -n1 /var/log/nginx/gitlab.log | awk -F <span style="color:#e6db74">&#39;&#34;&#39;</span> <span style="color:#e6db74">&#39;{if($3 == &#34;x.x.x.x&#34; &amp;&amp; $6 != &#34;403&#34;) {print $0}}&#39;</span> | jq</span></span></code></pre></div></blockquote>
<hr>
<h3 id="ç³»ç»Ÿæ’æŸ¥">ç³»ç»Ÿæ’æŸ¥</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># URLè§£ç ã€ç¼–ç </span>
</span></span><span style="display:flex;"><span>$ yum -y install gridsite-clients
</span></span><span style="display:flex;"><span>$ tail -n10 nginx.logs | awk -F <span style="color:#e6db74">&#39;[:]&#39;</span> <span style="color:#e6db74">&#39;{print $24}&#39;</span> | xargs urlencode -d decode
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åå°åŠ ç™½</span>
</span></span><span style="display:flex;"><span>$ sed -Ei <span style="color:#e6db74">&#34;s@((([0-9]{1,3}\.?){4})+)@\1|{{ ip }}@&#34;</span> /usr/local/nginx/conf/vhosts/ white_list.ini
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åˆ é™¤åŠ ç™½</span>
</span></span><span style="display:flex;"><span>$ sed -Ei <span style="color:#e6db74">&#34;s@((\|?){{ ip }}\|?)@\2@&#34;</span> /usr/local/nginx/conf/vhosts/ white_list.ini
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ’æŸ¥ç³»ç»Ÿä¸­å†…å­˜å ç”¨å‰ 5 çš„è¿›ç¨‹</span>
</span></span><span style="display:flex;"><span>$ ps -eo pid,ppid,cmd,%mem,%cpu --sort<span style="color:#f92672">=</span>-%mem |head -5
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># nginx</span>
</span></span><span style="display:flex;"><span>$ netstat -ntu|awk <span style="color:#e6db74">&#39;{print $5}&#39;</span>|cut -d: -f1|wc -l  	<span style="color:#75715e"># æŸ¥çœ‹æ–‡ä»¶æ‰“å¼€æ•°é‡</span>
</span></span><span style="display:flex;"><span>$ netstat -n | awk <span style="color:#e6db74">&#39;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&#39;</span>  	<span style="color:#75715e"># æŸ¥çœ‹æœåŠ¡å™¨ç½‘ç»œè´Ÿè½½</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ tail -n100 /opt/logs/nginx/web_access.log |awk <span style="color:#e6db74">&#39;{print $1}&#39;</span> |sort -rn |uniq -c |sort -rn |head
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å‘½ä»¤è¡Œè·¨åŸŸæµ‹è¯• -iï¼šå…è®¸è·¨åŸŸçš„åŸŸåï¼Œ-Hï¼šè®¿é—®åŸŸå</span>
</span></span><span style="display:flex;"><span>$ curl -i https://baidu.com/text.txt -H <span style="color:#e6db74">&#34;Origin: http://www.example.com&#34;</span></span></span></code></pre></div><ul>
<li>æ‰“å¼€æµè§ˆå™¨æŒ‰<code>F12</code>ç„¶åè®¿é—®è·¨åŸŸåŸŸåï¼ŒæŸ¥çœ‹æ˜¯å¦æ˜¾ç¤ºæœ‰ï¼š<code>access-control-allow-origin: *</code>è·¨åŸŸå‚æ•°</li>
</ul>
</blockquote>
<hr>
<h3 id="nginxconfé…ç½®æ–‡ä»¶"><code>nginx.conf</code>é…ç½®æ–‡ä»¶</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># ç”¨æˆ·å’Œç»„: user nobody nogroup;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">user</span> <span style="color:#e6db74">nobody</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># nginxè¿›ç¨‹æ•°ï¼Œautoä¸ºè‡ªåŠ¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">worker_processes</span> <span style="color:#e6db74">auto</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">worker_cpu_affinity</span>  <span style="color:#e6db74">auto</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># nginxè¿›ç¨‹æ‰“å¼€çš„æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ•°ç›®ï¼Œç†è®ºå€¼åº”è¯¥æ˜¯æœ€å¤šæ‰“å¼€æ–‡ä»¶æ•°ï¼ˆulimit -nï¼‰ä¸ nginx è¿›ç¨‹æ•°ç›¸é™¤ï¼Œä½†æ˜¯ nginx åˆ†é…è¯·æ±‚å¹¶ä¸æ˜¯é‚£ä¹ˆå‡åŒ€ï¼Œæ‰€ä»¥æœ€å¥½ä¸ ulimit -n çš„å€¼ä¿æŒä¸€è‡´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">worker_rlimit_nofile</span> <span style="color:#ae81ff">51200</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">error_log</span> <span style="color:#e6db74">/usr/local/nginx/logs/web_error.log</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pid</span> <span style="color:#e6db74">/usr/local/nginx/logs/nginx.pid</span>;</span></span></code></pre></div><ul>
<li><code>events</code><!-- raw HTML omitted -->å‚æ•°é…ç½®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">events</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># ä½¿ç”¨epollçš„I/Oæ¨¡å‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">use</span> <span style="color:#e6db74">epoll</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># æ¯ä¸ªè¿›ç¨‹å…è®¸çš„æœ€å¤šè¿æ¥æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">worker_connections</span>  <span style="color:#ae81ff">2048</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">multi_accept</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>	}</span></span></code></pre></div></blockquote>
<ul>
<li><code>http</code><!-- raw HTML omitted -->å‚æ•°é…ç½®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">http</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">log_format</span> <span style="color:#e6db74">main</span> <span style="color:#e6db74">&#39;</span>$remote_addr <span style="color:#e6db74">-</span> $remote_user <span style="color:#e6db74">[</span>$time_iso8601] <span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;fwf[</span>$http_x_forwarded_for] <span style="color:#e6db74">tip[</span>$http_true_client_ip] <span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;</span>$upstream_addr $upstream_response_time $request_time <span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;</span>$http_host $request <span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;&#34;</span>$status&#34; $body_bytes_sent $request_body <span style="color:#e6db74">&#34;</span>$http_referer&#34; <span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;&#34;</span>$http_accept_language&#34; <span style="color:#e6db74">&#34;</span>$http_user_agent&#34; <span style="color:#e6db74">&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">access_log</span>  <span style="color:#e6db74">/usr/local/nginx/logs/web_access.log</span>  <span style="color:#e6db74">main</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># è°ƒç”¨ mime.types è¯·æ±‚å¤´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">include</span>             <span style="color:#e6db74">mime.types</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># é»˜è®¤æ•°æ®æµæ¨¡å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">default_type</span>        <span style="color:#e6db74">application/octet-stream</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># åŸºæœ¬é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/basic.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># ç¼“å­˜é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e"># include inc.d/cache.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># fastcgi é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/fastcgi.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># å‹ç¼©é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/compaction.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 	<span style="color:#75715e"># IP é™åˆ¶é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/ip-limits.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 	<span style="color:#75715e"># è¯·æ±‚å¤´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/proxy_set_header.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 	<span style="color:#75715e"># æ—¥å¿—é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/logs.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 	<span style="color:#75715e"># è®¿é—®é¢‘ç‡é™åˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/limit-speed.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 	<span style="color:#75715e"># è·¨åŸŸ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/cross-domain.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 	<span style="color:#75715e"># åä»£ç¼“å­˜
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 	<span style="color:#f92672">include</span> <span style="color:#e6db74">inc.d/reverse-proxy.ini</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">include</span> <span style="color:#e6db74">vhosts/*.conf</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">include</span> <span style="color:#e6db74">vhosts/*/*.conf</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åŸºæœ¬é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/basic.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¿®æ”¹luaè„šæœ¬åä¸é‡å¯nginxé…ç½®ï¼Œ å¯¹æœåŠ¡æ€§èƒ½ä¸å‹å¥½ï¼Œè„šæœ¬ç¼–å†™æœŸé—´ä½¿ç”¨æ­¤é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">lua_code_cache</span> <span style="color:#66d9ef">off</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç”Ÿå‘½ä¸€ä¸ªåç§°ä¸ºï¼šshared_dataï¼Œå¤§å°ï¼š1Mbå†…å­˜ç©ºé—´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">lua_shared_dict</span> <span style="color:#e6db74">shared_data</span> <span style="color:#ae81ff">1m</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ˜¾ç¤ºjsonæ•°æ®ä¸­æ–‡ä¹±ç é—®é¢˜
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">charset</span> <span style="color:#e6db74">utf-8</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é›¶æ‹·è´æ¨¡å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">sendfile</span>	<span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½œç”¨ï¼šsendfileå¼€å¯çš„æƒ…å†µä¸‹ï¼Œæé«˜ç½‘ç»œåŒ…çš„ä¼ è¾“æ•ˆç‡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">tcp_nopush</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">tcp_nodelay</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># keepalive è¶…æ—¶æ—¶é—´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">keepalive_timeout</span>  <span style="color:#ae81ff">90</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¸€ä¸ªTcpå¤ç”¨ä¸­ï¼Œå¯ä»¥å¹¶å‘æ¥å—çš„è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">keepalive_requests</span> <span style="color:#ae81ff">1000</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">server_names_hash_max_size</span> <span style="color:#ae81ff">1024</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># nginxå…³æ‰ç‰ˆæœ¬å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">server_tokens</span> <span style="color:#66d9ef">off</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">server_names_hash_bucket_size</span> <span style="color:#ae81ff">128</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">large_client_header_buffers</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">128k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">client_max_body_size</span> <span style="color:#ae81ff">8m</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">client_header_buffer_size</span> <span style="color:#ae81ff">4k</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¸é…ç½®æˆ–è€…æ˜¯off,è¯·æ±‚å¤´ä¸­çš„è‡ªå®šä¹‰è¯·æ±‚å¤´ç”¨ - è¿æ¥æ˜¯æ”¯æŒçš„ï¼Œä¸è¦é…ç½® _ æ¥æ¥æ”¶,å¦‚æœæ˜¯ä¸‹åˆ’çº¿ _ è‡ªå®šä¹‰è¯·æ±‚å¤´ä¼šä¸¢å¤±
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">underscores_in_headers</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_buffer_size</span> <span style="color:#ae81ff">32k</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è¯»å–ä¸Šæ¸¸æœåŠ¡å™¨èµ„æºï¼Œè¾¹è¯»è¾¹å‘é€æ•°æ®èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">proxy_buffering</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åœ¨å†…å­˜ä¸­åˆ’åˆ†32ä¸ª128Kå¤§å°çš„å†…å­˜ç¼“å†²å—ï¼Œç¼“å†²æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">proxy_buffers</span> <span style="color:#ae81ff">32</span> <span style="color:#ae81ff">128k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_connect_timeout</span> <span style="color:#ae81ff">60</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_read_timeout</span> <span style="color:#ae81ff">60</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_send_timeout</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è¯»å–proxy_passæ•°æ®å†™å…¥åˆ°ç£ç›˜çš„æœ€å¤§å€¼ï¼Œé»˜è®¤1G
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">proxy_max_temp_file_size</span> <span style="color:#ae81ff">1024m</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_busy_buffers_size</span> <span style="color:#ae81ff">128k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_temp_file_write_size</span> <span style="color:#ae81ff">128k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_headers_hash_max_size</span> <span style="color:#ae81ff">51200</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_headers_hash_bucket_size</span> <span style="color:#ae81ff">6400</span>;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¼“å­˜é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/cache.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ‰“å¼€æ–‡ä»¶æŒ‡å®šç¼“å­˜ï¼Œé»˜è®¤æ²¡å¯ç”¨ï¼ŒmaxæŒ‡å®šç¼“å­˜æ•°é‡ï¼Œå»ºè®®å’Œæ‰“å¼€æ–‡ä»¶æ•°ä¸€è‡´ï¼Œinactiveæ˜¯æŒ‡ç»è¿‡å¤šé•¿æ—¶é—´æ–‡ä»¶æ²¡è¢«è¯·æ±‚ååˆ é™¤ç¼“å­˜ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">open_file_cache</span> <span style="color:#e6db74">max=102400</span> <span style="color:#e6db74">inactive=20s</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ˜¯æŒ‡å¤šé•¿æ—¶é—´æ£€æŸ¥ä¸€æ¬¡ç¼“å­˜çš„æœ‰æ•ˆä¿¡æ¯ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">open_file_cache_valid</span> <span style="color:#e6db74">30s</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># open_file_cache æŒ‡ä»¤ä¸­çš„ inactive å‚æ•°æ—¶é—´å†…æ–‡ä»¶çš„æœ€å°‘ä½¿ç”¨æ¬¡æ•°ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶åœ¨ inactive æ—¶é—´å†…ä¸€æ¬¡æ²¡è¢«ä½¿ç”¨ï¼Œå®ƒå°†è¢«ç§»é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">open_file_cache_min_uses</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŒ‡ä»¤ä¸º FastCGI ç¼“å­˜æŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼Œç›®å½•ç»“æ„ç­‰çº§ï¼Œå…³é”®å­—åŒºåŸŸå­˜å‚¨æ—¶é—´å’Œéæ´»åŠ¨åˆ é™¤æ—¶é—´ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fastcgi_cache_path</span> <span style="color:#e6db74">/usr/local/nginx/fastcgi_cache</span> <span style="color:#e6db74">levels=1:2</span> <span style="color:#e6db74">keys_zone=TEST:10m</span> <span style="color:#e6db74">inactive=5m</span>;</span></span></code></pre></div><ul>
<li><code>fastcgi</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/fastcgi.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fastcgi_connect_timeout</span> <span style="color:#ae81ff">300</span>;  	<span style="color:#75715e"># æŒ‡å®šè¿æ¥åˆ°åç«¯ FastCGI çš„è¶…æ—¶æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fastcgi_send_timeout</span> <span style="color:#ae81ff">300</span>;  	<span style="color:#75715e"># å‘ FastCGI ä¼ é€è¯·æ±‚çš„è¶…æ—¶æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fastcgi_read_timeout</span> <span style="color:#ae81ff">300</span>;  	<span style="color:#75715e"># æ¥æ”¶ FastCGI åº”ç­”çš„è¶…æ—¶æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fastcgi_buffer_size</span> <span style="color:#ae81ff">64k</span>;  	<span style="color:#75715e"># æŒ‡å®šè¯»å–FastCGIåº”ç­”ç¬¬ä¸€éƒ¨åˆ†éœ€ç”¨å¤šå¤§ç¼“å†²åŒº
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fastcgi_buffers</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">64k</span>;  	<span style="color:#75715e"># æŒ‡å®šæœ¬åœ°éœ€ç”¨å¤šå°‘å’Œå¤šå¤§ç¼“å†²åŒºç¼“å†²FastCGIçš„åº”ç­”ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fastcgi_busy_buffers_size</span> <span style="color:#ae81ff">128k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fastcgi_temp_file_write_size</span> <span style="color:#ae81ff">128k</span>;  	<span style="color:#75715e"># åœ¨å†™å…¥ fastcgi_temp_path æ—¶å°†ç”¨å¤šå¤§çš„æ•°æ®å—ï¼Œé»˜è®¤å€¼æ˜¯ fastcgi_buffers çš„ä¸¤å€ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># fastcgi_cache TEST  	# å¼€å¯FastCGIç¼“å­˜å¹¶ä¸”ä¸ºå…¶åˆ¶å®šä¸€ä¸ªåç§°ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½CPU è´Ÿè½½ï¼Œå¹¶ä¸”é˜²æ­¢ 502 é”™è¯¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># fastcgi_cache_valid 200 302 1h;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># fastcgi_cache_valid 301 1d;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># fastcgi_cache_valid any 1m;  	# ä¸ºæŒ‡å®šåº”ç­”ä»£ç æŒ‡å®šç¼“å­˜æ—¶é—´,å¦‚å°†200,302åº”ç­”ç¼“å­˜ä¸€å°æ—¶,301åº”ç­”ç¼“å­˜1å¤©.å…¶ä»–ä¸º1åˆ†é’Ÿã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#66d9ef">fastcgi_cache_min_uses</span> <span style="color:#ae81ff">1</span>;  	<span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#66d9ef">ç¼“å­˜åœ¨</span> <span style="color:#e6db74">fastcgi_cache_pathæŒ‡ä»¤inactiveå‚æ•°å€¼æ—¶é—´å†…çš„æœ€å°‘ä½¿ç”¨æ¬¡æ•°,å¦‚æœåœ¨5åˆ†é’Ÿå†…æŸæ–‡ä»¶1æ¬¡ä¹Ÿæ²¡æœ‰è¢«ä½¿ç”¨,é‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°†è¢«ç§»é™¤ã€‚</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å‹ç¼©é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/compaction.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># brotliå‹ç¼©ç®—æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">brotli</span>			<span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">brotli_comp_level</span>	<span style="color:#ae81ff">6</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">brotli_buffers</span>		<span style="color:#ae81ff">16</span> <span style="color:#ae81ff">8k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">brotli_min_length</span>	<span style="color:#ae81ff">256</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">brotli_types</span>		<span style="color:#e6db74">text/plain</span> <span style="color:#e6db74">application/javascript</span> <span style="color:#e6db74">application/x-javascript</span> <span style="color:#e6db74">text/javascript</span> <span style="color:#e6db74">text/css</span> <span style="color:#e6db74">application/xml</span> <span style="color:#e6db74">application/json</span> <span style="color:#e6db74">image/jpeg</span> <span style="color:#e6db74">image/gif</span> <span style="color:#e6db74">image/png</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">brotli_window</span>		<span style="color:#ae81ff">512k</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gzipå‹ç¼©ç®—æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">gzip</span>	<span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_comp_level</span>  <span style="color:#ae81ff">6</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©ï¼š64ä½æ“ä½œç³»ç»Ÿä¸ºï¼š16 8kï¼Œ32ä½æ“ä½œç³»ç»Ÿï¼š32 4k
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">gzip_buffers</span>     <span style="color:#ae81ff">16</span> <span style="color:#ae81ff">8k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_min_length</span>  <span style="color:#ae81ff">1k</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_types</span>       <span style="color:#e6db74">text/plain</span> <span style="color:#e6db74">application/javascript</span> <span style="color:#e6db74">application/x-javascript</span> <span style="color:#e6db74">text/javascript</span> <span style="color:#e6db74">text/css</span> <span style="color:#e6db74">application/xml</span> <span style="color:#e6db74">application/xml+rss</span> <span style="color:#e6db74">application/json</span> <span style="color:#e6db74">text/xml</span> <span style="color:#e6db74">image/jpeg</span> <span style="color:#e6db74">image/gif</span> <span style="color:#e6db74">image/png</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_disable</span>     <span style="color:#e6db74">&#34;msie6&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_http_version</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">.1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_vary</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_proxied</span>     <span style="color:#e6db74">any</span> <span style="color:#e6db74">expired</span> <span style="color:#e6db74">no-cache</span> <span style="color:#e6db74">no-store</span> <span style="color:#e6db74">private</span> <span style="color:#e6db74">auth</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">gzip_disable</span> <span style="color:#e6db74">&#34;MSIE</span> <span style="color:#e6db74">[1-6]\.&#34;</span>;</span></span></code></pre></div><ul>
<li><code>IP</code><!-- raw HTML omitted -->é™åˆ¶é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/ip-limits.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">map</span> $http_upgrade $connection_upgrade {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">default</span> <span style="color:#e6db74">upgrade</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#39;&#39;</span>	<span style="color:#e6db74">close</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">map</span> $http_cdn-src-IP $ali_xreal {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#34;&#34;</span>   $http_Ali-CDN-Real-IP;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~^(?P&lt;firstAddr&gt;[0-9\.]+),?.*$</span> $firstAddr;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">map</span> $ali_xreal $cf_xreal {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#34;&#34;</span>  $http_CF-Connecting-IP;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~^(?P&lt;firstAddr&gt;[0-9\.]+),?.*$</span> $firstAddr;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">map</span> $cf_xreal  $gp_xreal {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#34;&#34;</span> $http_GP_IP;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~^(?P&lt;firstAddr&gt;[0-9\.]+),?.*$</span> $firstAddr;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">map</span> $gp_xreal  $xrealip {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#34;&#34;</span> $http_x_forwarded_for ;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~^(?P&lt;firstAddr&gt;[0-9\.]+),?.*$</span> $firstAddr;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">map</span> $xrealip  $clientRealIp {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#34;&#34;</span> $remote_addr;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~^(?P&lt;firstAddr&gt;[0-9\.]+),?.*$</span> $firstAddr;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span><span style="color:#75715e">#####  	GeoIPè®¿é—®IPé™åˆ¶  #####
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># geoip_country	GeoIP/GeoIP.dat;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># geoip_city		GeoIP/GeoLiteCity.dat;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># geoip_proxy		0.0.0.0/0;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># geoip_proxy_recursive on;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># geo $remote_addr $ip_whitelist {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#	default 0;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#	include ip.conf;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">geoip2</span> <span style="color:#e6db74">/usr/local/nginx/conf/GeoLite2-Country/GeoLite2-Country.mmdb</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">$geoip2_data_country_code</span> <span style="color:#e6db74">country</span> <span style="color:#e6db74">iso_code</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">$geoip2_data_country_name</span> <span style="color:#e6db74">country</span> <span style="color:#e6db74">iso_code</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">geoip2</span> <span style="color:#e6db74">/usr/local/nginx/conf/GeoLite2-City/GeoLite2-City.mmdb</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">$geoip2_data_city_name</span> <span style="color:#e6db74">city</span> <span style="color:#e6db74">iso_code</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é…ç½®1: å…è®¸æ‰€æœ‰å›½å®¶è®¿é—®ï¼Œé™¤äº†ç¾å›½å’Œæ—¥æœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">map</span> $geoip2_data_country_code $allowed_country {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">default</span> <span style="color:#e6db74">yes</span>;  	<span style="color:#75715e"># é»˜è®¤é…ç½® yesï¼šå…è®¸æ‰€æœ‰ï¼Œnoï¼šæ‹’ç»æ‰€æœ‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">US</span> <span style="color:#e6db74">no</span>;  	<span style="color:#75715e"># å•ç‹¬é…ç½®æ‹’ç»
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">JP</span> <span style="color:#e6db74">no</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">CN</span> <span style="color:#e6db74">yes</span>;  	<span style="color:#75715e"># å•ç‹¬é…ç½®å…è®¸ï¼Œå‰ææ˜¯ï¼šdefault no;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># geoip_country /usr/local/nginx/GeoIP/GeoIP.dat;  # Geoipæ‰€åœ¨ç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># map $geoip_country_code $allowed_country {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#	default yes;    # å…è®¸
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#	CN no;      # ä¸­å›½å¤§é™†åŒºå‘½åä¸ºno
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#66d9ef">}</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è¯·æ±‚å¤´<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/proxy_set_header.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $clientRealIp;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $remote_addr;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æ—¥å¿—é…ç½®ï¼Œä»¥åŠé…ç½®<!-- raw HTML omitted --><code>Json</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/logs.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">map</span> $upstream_response_time $upstream_response_timer {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">default</span> $upstream_response_time;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#34;&#34;</span>        <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">log_format</span> <span style="color:#e6db74">json</span> <span style="color:#e6db74">escape=json</span>  <span style="color:#e6db74">&#39;</span>{<span style="color:#f92672">&#34;@timestamp&#34;:&#34;$time_iso8601&#34;,&#39;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;client_realip&#34;:&#34;</span>$clientRealIp&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;remote_addr&#34;:&#34;</span>$remote_addr&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;status&#34;:&#34;</span>$status&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;upstream_status&#34;:&#34;</span>$upstream_status&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;request_time&#34;:&#34;</span>$request_time&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;upstream_response_time&#34;:&#34;</span>$upstream_response_time&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;upstream_addr&#34;:&#34;</span>$upstream_addr&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;request&#34;:&#34;</span>$request&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_scheme&#34;:&#34;</span>$http_X_Forwarded_Proto&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;server_name&#34;:&#34;</span>$host&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;uri&#34;:&#34;</span>$uri&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;request_body&#34;:&#34;</span>$request_body&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;body_bytes_sent&#34;:&#34;</span>$body_bytes_sent&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;bytes_sent&#34;:&#34;</span>$body_bytes_sent&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;request_length&#34;:&#34;</span>$request_length&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_referer&#34;:&#34;</span>$http_referer&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_wangsu_xreal&#34;:&#34;</span>$http_cdn_src_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_ali_xreal&#34;:&#34;</span>$http_Ali_CDN_Real_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_cf_xreal&#34;:&#34;</span>$http_CF_Connecting_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_gp_xreal&#34;:&#34;</span>$http_GP_IP&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_x_forwarded_for&#34;:&#34;</span>$proxy_add_x_forwarded_for&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;http_user_agent&#34;:&#34;</span>$http_user_agent&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;xdevice&#34;:&#34;</span>$http_x_device&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;xversion&#34;:&#34;</span>$http_x_version&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;trace-id&#34;:&#34;</span>$http_x_trace_id&#34;,&#39;
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;&#34;uid&#34;:&#34;</span>$http_x_id&#34;&#39;
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;</span><span style="color:#960050;background-color:#1e0010">}</span><span style="color:#e6db74">&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">è¿™é‡Œæ³¨æ„ä½¿ç”¨ä¸‹åˆ’çº¿ï¼Œ</span>		</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->è®¿é—®é¢‘ç‡é™åˆ¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/limit-speed.ini; 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é™é€Ÿé…ç½®æŒ‡ä»¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">limit_conn_log_level</span> <span style="color:#e6db74">error</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®¢æˆ·ç«¯å¹¶å‘è®¿é—®æ•°é™åˆ¶ï¼Œåå­—ä¸ºip_limitï¼Œå¤§å°ä¸º15Mbçš„å†…å­˜ç©ºé—´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">limit_conn_zone</span> $binary_remote_addr <span style="color:#e6db74">zone=ip_limit:15m</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®¢æˆ·ç«¯ qps é¢‘ç‡è®¿é—®é™åˆ¶é…ç½®ã€åˆ†é…ä¸€ä¸ª10Mbçš„å†…å­˜ç©ºé—´ï¼ŒåŒä¸€ä¸ªIPä¸€ç§’é’Ÿå…è®¸5r(5æ¬¡è¯·æ±‚)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">limit_req_zone</span>  $binary_remote_addr <span style="color:#e6db74">zone=one:10m</span> <span style="color:#e6db74">rate=5r/s</span>;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è·¨åŸŸé…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/cross-domain.ini;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">add_header</span> <span style="color:#e6db74">Access-Control-Allow-Origin</span> <span style="color:#e6db74">*</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">add_header</span> <span style="color:#e6db74">Access-Control-Allow-Methods</span> <span style="color:#e6db74">GET,POST,OPTIONS</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">add_header</span> <span style="color:#e6db74">Access-Control-Allow-Headers</span> <span style="color:#e6db74">DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization</span>;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åä»£ç¼“å­˜<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># include inc.d/reverse-proxy.ini; 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åä»£ç¼“å­˜é…ç½®ï¼Œkeys_zone=af:1024m ä¸­çš„ï¼š1024mæ˜¯åœ¨å†…å­˜ä¸­å ç”¨çš„ç©ºé—´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">proxy_temp_path</span>   <span style="color:#e6db74">/var/www/temp</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_cache_path</span> <span style="color:#e6db74">/var/www/temp/baidu</span> <span style="color:#e6db74">levels=1:2</span> <span style="color:#e6db74">keys_zone=af:1024m</span> <span style="color:#e6db74">inactive=1h</span> <span style="color:#e6db74">max_size=10g</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_cache_path</span> <span style="color:#e6db74">/var/www/temp/ali</span> <span style="color:#e6db74">levels=1:2</span> <span style="color:#e6db74">keys_zone=yunlai01:1024m</span> <span style="color:#e6db74">inactive=1h</span> <span style="color:#e6db74">max_size=10g</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_cache_path</span> <span style="color:#e6db74">/var/www/temp/jd</span>  <span style="color:#e6db74">levels=1:2</span> <span style="color:#e6db74">keys_zone=vns01:1024m</span> <span style="color:#e6db74">inactive=1h</span> <span style="color:#e6db74">max_size=10g</span>;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="confå­é…ç½®æ–‡ä»¶"><code>conf</code>å­é…ç½®æ–‡ä»¶</h3>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://zyan.cc/nginx_php_v5" rel="external" target="_self"><code>Nginx</code>ä¸»é…ç½®æ–‡ä»¶å‚è€ƒèµ„æ–™</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><code>server</code><!-- raw HTML omitted -->å‚æ•°é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><blockquote>
<ul>
<li><code>HSTS</code><!-- raw HTML omitted -->å®‰å…¨ç­–ç•¥æœºåˆ¶<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><code>Strict-Transport-Security</code>è¿™æ˜¯<code>HSTS</code>å¤´éƒ¨çš„åç§°ã€‚<code>HSTS</code>æ˜¯ä¸€ç§<code>web</code>å®‰å…¨ç­–ç•¥æœºåˆ¶ï¼Œå¸®åŠ©ä¿æŠ¤ç½‘ç«™å…å—ä¸­é—´äººæ”»å‡»ï¼Œç¡®ä¿ç”¨æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å§‹ç»ˆä½¿ç”¨<code>HTTPS</code></li>
<li><code>max-age</code>æŒ‡å®šäº†æµè§ˆå™¨åº”å½“ç¼“å­˜è¯¥ç­–ç•¥çš„æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œ<code>86400</code>ç§’ç­‰äº<code>24</code>å°æ—¶</li>
<li><code>includeSubdomains</code>è¿™ä¸ªå‚æ•°æŒ‡ç¤ºæµè§ˆå™¨å¯¹æ‰€æœ‰å­åŸŸåä¹Ÿåº”ç”¨<code>HSTS</code>ç­–ç•¥</li>
<li><code>preload</code>å‚æ•°åï¼Œåº”è¯¥ç¡®ä¿ç½‘ç«™å§‹ç»ˆæ”¯æŒ<code>HTTPS</code>ï¼Œå¦åˆ™ä¼šå¯¼è‡´è®¿é—®é”™è¯¯ã€‚</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">add_header</span> <span style="color:#e6db74">Strict-Transport-Security</span> <span style="color:#e6db74">&#34;max-age=86400</span>; <span style="color:#f92672">includeSubdomains</span>; <span style="color:#f92672">preload&#34;</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></blockquote>
<ul>
<li><code>server_name</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span> <span style="color:#e6db74">default_server</span>;  	<span style="color:#75715e"># å¦‚æœæ²¡æœ‰å…¶ä»–serverå—åŒ¹é…è¯·æ±‚çš„Hostå¤´ï¼Œä½¿ç”¨è¿™ä¸ªä½œä¸ºé»˜è®¤å¤„ç†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">443</span> <span style="color:#e6db74">ssl</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">8443</span> <span style="color:#e6db74">ssl</span> <span style="color:#e6db74">proxy_protocol</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">ssl</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># .domain.comåŒ¹é…æ‰€æœ‰ä»¥.domain.comç»“å°¾çš„è¯·æ±‚ åŒ…æ‹¬æ‰€æœ‰å­åŸŸåï¼Œ^baidu\d+\.com åŒ…å«ä»»æ„æ•°å­—
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">server_name</span> <span style="color:#e6db74">domain.com</span> <span style="color:#e6db74">.domain.com</span>$ <span style="color:#e6db74">^baidu\d+\.com</span>$;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è¯ä¹¦é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">ssl_certificate</span>      <span style="color:#e6db74">certs/domain/domain.com.crt</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">ssl_certificate_key</span>  <span style="color:#e6db74">certs/domain/domain.com.key</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># ssl_dhparam certs/domain/dhparam.pem;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">ssl_session_cache</span>    <span style="color:#e6db74">shared:SSL:10m</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">ssl_session_timeout</span>  <span style="color:#ae81ff">30m</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">ssl_protocols</span> <span style="color:#e6db74">TLSv1</span> <span style="color:#e6db74">TLSv1.1</span> <span style="color:#e6db74">TLSv1.2</span> <span style="color:#e6db74">TLSv1.3</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">ssl_ciphers</span> <span style="color:#e6db74">&#39;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:!RC4:!MD5:!aNULL:!NULL&#39;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># ä¼˜å…ˆä½¿ç”¨æœåŠ¡å™¨é…ç½®çš„åŠ å¯†å¥—ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">ssl_prefer_server_ciphers</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">resolver</span> <span style="color:#ae81ff">8</span><span style="color:#e6db74">.8.8.8</span> <span style="color:#e6db74">valid=300</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">resolver_timeout</span> <span style="color:#e6db74">10s</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># å¼€å¯ OCSP Stapling
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">ssl_stapling</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># éªŒè¯ OCSP å“åº”
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">ssl_stapling_verify</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>} </span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¼ºè·³è¯ä¹¦ä»¥åŠä¸»åŸŸå<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># httpå¼ºè·³443ï¼Œ æˆ–ä½¿ç”¨ $host å­—æ®µ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span> $scheme = <span style="color:#e6db74">http</span> <span style="color:#e6db74">)</span>{ 
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">return</span> <span style="color:#ae81ff">301</span> <span style="color:#e6db74">https://</span>$server_name$request_uri; 
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># å¼ºè·³ä¸»åŸŸå
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span> $host <span style="color:#e6db74">!=</span> <span style="color:#e6db74">&#39;domain.com&#39;</span> <span style="color:#e6db74">)</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">rewrite</span> <span style="color:#e6db74">^(.*)</span>$ <span style="color:#e6db74">https://domain.com/</span>$1 <span style="color:#e6db74">permanent</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># é¿å…ç›´æ¥è¿”å› 404ï¼Œè€Œæ˜¯è¿”å›åº”ç”¨çš„ä¸»å…¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">try_files</span> $uri $uri/ <span style="color:#e6db74">/index.html</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li><code>location</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>
<p><code>location</code><!-- raw HTML omitted -->åŒ¹é…è§„åˆ™ä»¥åŠä¼˜å…ˆçº§<!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted -->ç²¾ç¡®åŒ¹é…<!-- raw HTML omitted -->å’Œ<!-- raw HTML omitted -->å‰ç¼€åŒ¹é…<!-- raw HTML omitted -->ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œä¸€æ—¦åŒ¹é…åˆ°ä¸€ä¸ªå°±ç›´æ¥èµ°æ­¤<code>location</code>ï¼Œåˆ™ä¸ä¼šå†å¾€ä¸‹åŒ¹é…ã€‚
<!-- raw HTML omitted -->æ­£åˆ™åŒ¹é…<!-- raw HTML omitted -->å°±ç®—åŒ¹é…åˆ°ä¸€ä¸ª<code>location</code>ï¼Œä¹Ÿè¿˜æ˜¯ä¼šæ¥ç€åŒ¹é…ï¼Œçœ‹æ—¶å€™è¿˜æœ‰æ¯”å½“å‰<code>location</code>æ›´å®Œæ•´ï¼Œæ›´åŒ¹é…çš„<code>location</code>å­˜åœ¨ï¼Œåé¢æ²¡æœ‰äº†ï¼Œæ‰åŒ¹é…æœ¬èº«</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>æ­£åˆ™ç¬¦å·</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>~</code></td>
<td>è¡¨ç¤ºå¼€å§‹æ­£åˆ™åŒ¹é…</td>
</tr>
<tr>
<td><code>~*</code></td>
<td>è¡¨ç¤ºæ­£åˆ™åŒ¹é…<!-- raw HTML omitted -->ä¸åŒºåˆ†å¤§å°å†™<!-- raw HTML omitted --></td>
</tr>
<tr>
<td><code>=</code></td>
<td>è¿›è¡Œæ™®é€šå­—ç¬¦ç²¾ç¡®åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯å®Œå…¨åŒ¹é…</td>
</tr>
<tr>
<td><code>^~</code></td>
<td>è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ï¼Œä½¿ç”¨å‰ç¼€åŒ¹é…</td>
</tr>
<tr>
<td><code>~ \~*</code></td>
<td>è¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªæ­£åˆ™åŒ¹é…ï¼ˆï¼‰</td>
</tr>
<tr>
<td>`/(xxx</td>
<td>xxx</td>
</tr>
<tr>
<td><code>$</code></td>
<td>è¡¨ç¤º<!-- raw HTML omitted -->æ­£åˆ™ç»“æŸç¬¦<!-- raw HTML omitted -->å·</td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># è¿™ä¸ªéå¸¸é‡è¦ï¼Œå¦‚æœgitåº“é‡Œæœ‰å¤§æ–‡ä»¶ï¼Œè®¾ç½®å¤ªå°ï¼Œæ–‡ä»¶pushä¼šå¤±è´¥ï¼Œæ ¹æ®æƒ…å†µè°ƒæ•´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">client_max_body_size</span> <span style="color:#ae81ff">50m</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># ç¦ç”¨é‡å®šå‘å¤„ç†ï¼Œé»˜è®¤é‡å®šå‘ï¼šdefault
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_redirect</span> <span style="color:#66d9ef">off</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># ä»¥ä¸‹ç¡®ä¿ gitlabä¸­é¡¹ç›®çš„ url æ˜¯åŸŸåè€Œä¸æ˜¯ http://gitï¼Œä¸å¯ç¼ºå°‘
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-Port</span> $remote_port;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_connect_timeout</span> <span style="color:#e6db74">15s</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_read_timeout</span> <span style="color:#e6db74">600s</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_send_timeout</span> <span style="color:#e6db74">60s</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># è®¾ç½®httpç‰ˆæœ¬ä¸º1.1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_http_version</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">.1</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># å‡çº§åè®®å¤´ websocket
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Upgrade</span> $http_upgrade;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Connection</span> <span style="color:#e6db74">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># å‡çº§åè®®å¤´ä¸ºhttps
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Upgrade-Insecure-Requests</span> <span style="color:#ae81ff">1</span>;   
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> <span style="color:#e6db74">https</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">add_header</span> <span style="color:#e6db74">Content-Security-Policy</span> <span style="color:#e6db74">upgrade-insecure-requests</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">add_header</span> <span style="color:#e6db74">Nginx-Cache</span> <span style="color:#e6db74">â€œ</span>$upstream_cache_statusâ€;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># nginx åå‘ä»£ç†åˆ° gitlab å®¹å™¨æš´éœ²çš„ç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:8080</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">index</span> <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">location</span> ~ <span style="color:#e6db74">.*\.(gif|jpg|jpeg|png|bmp|swf)$</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:8082</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_redirect</span> <span style="color:#e6db74">default</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $remote_addr;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">add_header</span> <span style="color:#e6db74">Nginx-Cache</span> <span style="color:#e6db74">&#34;</span>$upstream_cache_status&#34;;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">expires</span> <span style="color:#e6db74">30d</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">location</span> ~ <span style="color:#e6db74">.*\.(js|css)?$</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">expires</span> <span style="color:#e6db74">12h</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">location</span> ~ <span style="color:#e6db74">/\.</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">deny</span> <span style="color:#e6db74">all</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># è¿‡æ»¤åªå…è®¸GETï¼ŒHEADå’ŒPOSTæ–¹æ³•è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span>$request_method <span style="color:#e6db74">!~</span> <span style="color:#e6db74">^(GET|HEAD|POST)</span>$ <span style="color:#e6db74">)</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">return</span> <span style="color:#ae81ff">444</span>;
</span></span><span style="display:flex;"><span>	}   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">### é˜»æ­¢User-Agents,å¦‚æ‰«æå™¨ï¼Œæœºå™¨äººä»¥åŠæ»¥ç”¨ä½ æœåŠ¡å™¨çš„åƒåœ¾é‚®ä»¶å‘é€è€…ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span>$http_user_agent ~<span style="color:#e6db74">*</span> <span style="color:#e6db74">LWP::Simple|BBBike|wget|&#34;Windows</span> <span style="color:#ae81ff">5</span><span style="color:#e6db74">.1&#34;)</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">return</span> <span style="color:#ae81ff">405</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->ç¦æ­¢<!-- raw HTML omitted --><code>IP</code><!-- raw HTML omitted -->è®¿é—®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><a href="https://developer.aliyun.com/article/548497" rel="external" target="_self"><code>Nginx</code>ç¦æ­¢<code>IP</code>è®¿é—® åªå…è®¸åŸŸåè®¿é—®</a></li>
<li><!-- raw HTML omitted -->æ–¹å¼ä¸€<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">server_name</span> <span style="color:#e6db74">www.domain.com</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span>$host <span style="color:#e6db74">!=</span> <span style="color:#e6db74">&#39;www.domain.com&#39;)</span>{ <span style="color:#f92672">return</span> <span style="color:#ae81ff">403</span>; }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æ–¹å¼äºŒ<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->æ·»åŠ ä¸€ä¸ª<!-- raw HTML omitted --><code>server</code>ï¼Œ<!-- raw HTML omitted -->æ–°åŠ çš„<!-- raw HTML omitted --><code>server</code><!-- raw HTML omitted -->ï¼ˆæ³¨æ„æ˜¯æ–°å¢ï¼Œå¹¶ä¸æ˜¯åœ¨åŸæœ‰çš„<!-- raw HTML omitted --><code>server</code><!-- raw HTML omitted -->åŸºç¡€ä¸Šä¿®æ”¹ï¼‰ <!-- raw HTML omitted --></li>
<li><code>rewrite</code><!-- raw HTML omitted -->é‡å®šå‘<!-- raw HTML omitted --></li>
</ul>
<table>
<thead>
<tr>
<th>å¼€å§‹å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.</code></td>
<td>åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td><code>?</code></td>
<td>é‡å¤0æ¬¡æˆ–1æ¬¡</td>
</tr>
<tr>
<td><code>+</code></td>
<td>é‡å¤1æ¬¡æˆ–å¤šæ¬¡</td>
</tr>
<tr>
<td><code>*</code></td>
<td>æœ€å°‘è¿æ¥æ•°ã€é‚£ä¸ªæœºå™¨è¿æ¥æ•°å°‘å°±åˆ†å‘</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>åŒ¹é…æ•°å­—</td>
</tr>
<tr>
<td><code>^</code></td>
<td>åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹</td>
</tr>
<tr>
<td><code>$</code></td>
<td>åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸ</td>
</tr>
<tr>
<td><code>{n}</code></td>
<td>é‡å¤<code>n</code>æ­¤</td>
</tr>
<tr>
<td><code>{n,}</code></td>
<td>é‡å¤<code>n</code>æˆ–æ›´å¤šæ¬¡</td>
</tr>
<tr>
<td><code>[c]</code></td>
<td>åŒ¹é…å•ä¸ªå­—ç¬¦<code>c</code></td>
</tr>
<tr>
<td><code>[a-z]</code>ï¼Œ<code>[A-Z]</code></td>
<td>åŒ¹é…<code>a-z</code>å°å†™å­—æ¯çš„ä»»æ„ä¸€ä¸ªï¼Œ<code>[^a-z]</code>è¡¨ç¤ºå–åï¼ŒåŒ¹é…<code>A-z</code>å¤§å†™å­—æ¯ä¸­ä»»æ„ä¸€ä¸ªï¼Œ<code>[^A-Z]</code>è¡¨ç¤ºå–å</td>
</tr>
<tr>
<td><code>[0-9]</code></td>
<td>åŒ¹é…<code>0-9</code>æ•°å­—çš„ä»»æ„ä¸€ä¸ªï¼Œ<code>[^0-9]</code>è¡¨ç¤ºå–å</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>ç»“å°¾å®šä¹‰å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>last</code></td>
<td>åŒ¹é…å®Œæˆåï¼Œç»§ç»­å‘ä¸‹åŒ¹é…æ–°çš„<code>location URL</code>è§„åˆ™</td>
</tr>
<tr>
<td><code>break</code></td>
<td>åŒ¹é…å®Œæˆå³åœæ­¢å‘ä¸‹åŒ¹é…</td>
</tr>
<tr>
<td><code>redirect</code></td>
<td>è¿”å›302ä¸´æ—¶é‡å®šå‘ã€åœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬ååœ°å€</td>
</tr>
<tr>
<td><code>permanent</code></td>
<td>è¿”å›301æ°¸ä¹…é‡å®šå‘ã€åœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬ååœ°å€</td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span> <span style="color:#e6db74">dufault</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">server_name</span> <span style="color:#e6db74">_</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">return</span> <span style="color:#ae81ff">403</span>;  	<span style="color:#75715e"># ç›´æ¥è¿”å›ä¸€ä¸ª403
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">rewrite</span> <span style="color:#e6db74">^(.*)</span> <span style="color:#e6db74">http://domain.com</span> <span style="color:#e6db74">permanent</span>;  	<span style="color:#75715e"># æˆ–è€…è·³è½¬åˆ°å…¶ä»–åŸŸå
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç¦æ­¢IPè®¿é—® 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">server</span> { 
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span> <span style="color:#e6db74">default</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">server_name</span> <span style="color:#e6db74">_</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">server_name</span>  <span style="color:#e6db74">domain.com</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">return</span> <span style="color:#ae81ff">500</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></blockquote>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->æ–‡ä»¶ä¸‹è½½<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># å¯ç”¨ç›®å½•æµè§ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">autoindex</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># è®¾ç½®ä¸ºoff æ—¶ï¼Œæ˜¾ç¤ºæ–‡ä»¶å¤§å°ï¼Œæ˜“äºç†è§£çš„å•ä½ï¼ˆå¦‚ KBã€MB ç­‰ï¼‰ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">autoindex_exact_size</span> <span style="color:#66d9ef">off</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># è®¾ç½®ä¸ºon æ—¶ï¼Œæ˜¾ç¤ºçš„æ—¶é—´å°†æ ¹æ®æœåŠ¡å™¨çš„æœ¬åœ°æ—¶é—´æ¥æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">autoindex_localtime</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">location</span> ~ {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æ—¥å¿—åˆ‡å‰²<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span>$time_iso8601 ~ <span style="color:#e6db74">&#34;^(\d</span>{<span style="color:#f92672">4})-(\d{2})-(\d{2})&#34;)</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">set</span> $year $1;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">set</span> $month $2;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">set</span> $day $3;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">error_page</span> <span style="color:#ae81ff">404</span> <span style="color:#e6db74">http://domain.com</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">access_log</span>  <span style="color:#e6db74">/home/logs/nginx/domain.access_</span>$year-$month-$day.log  <span style="color:#e6db74">main</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">error_log</span>   <span style="color:#e6db74">/home/logs/nginx/domain.error.log</span>  <span style="color:#e6db74">info</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é…ç½®è·³è½¬<!-- raw HTML omitted --><code>Web</code><!-- raw HTML omitted -->æˆ–<!-- raw HTML omitted --><code>H5</code></li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://blog.csdn.net/weixin_34128501/article/details/91370181?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-4.vipsorttest&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-4.vipsorttest" rel="external" target="_self"><code>nginx</code>é…ç½®æ‰‹æœºç«¯<code>PC</code>ç«¯è®¿é—®ä¸åŒçš„é¡¹ç›®</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://blog.csdn.net/weixin_37008947/article/details/105725236" rel="external" target="_self"><code>nginx</code>æ ¹æ®<code>PC</code>ç«¯è¿˜æ˜¯æ‰‹æœºç«¯è®¾ç½®ä¸åŒçš„ç½‘ç«™æ ¹ç›®å½•</a></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">root</span> <span style="color:#e6db74">/var/www/web/pc</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">index</span>  <span style="color:#e6db74">index.php</span> <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">location</span> <span style="color:#e6db74">^~</span> <span style="color:#e6db74">/api</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">rewrite</span> <span style="color:#e6db74">^/api/(.*)</span>$ <span style="color:#e6db74">/</span>$1 <span style="color:#e6db74">break</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://swofit/</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-Port</span> $remote_port;
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># å¦‚æœæ˜¯æ‰‹æœºç§»åŠ¨ç«¯è®¿é—®å†…å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span> $http_user_agent ~<span style="color:#e6db74">*</span> <span style="color:#e6db74">&#34;(MIDP)|(WAP)|(UP.Browser)|(Smartphone)|(Obigo)|(Mobile)|(AU.Browser)|(wxd.Mms)|(WxdB.Browser)|(CLDC)|(UP.Link)|(KM.Browser)|(UCWEB)|(SEMC-Browser)|(Mini)|(Symbian)|(Palm)|(Nokia)|(Panasonic)|(MOT-)|(SonyEricsson)|(NEC-)|(Alcatel)|(Ericsson)|(BENQ)|(BenQ)|(Amoisonic)|(Amoi-)|(Capitel)|(PHILIPS)|(SAMSUNG)|(Lenovo)|(Mitsu)|(Motorola)|(SHARP)|(WAPPER)|(LG-)|(LG/)|(EG900)|(CECT)|(Compal)|(kejian)|(Bird)|(BIRD)|(G900/V1.0)|(Arima)|(CTL)|(TDG)|(Daxian)|(DAXIAN)|(DBTEL)|(Eastcom)|(EASTCOM)|(PANTECH)|(Dopod)|(Haier)|(HAIER)|(KONKA)|(KEJIAN)|(LENOVO)|(Soutec)|(SOUTEC)|(SAGEM)|(SEC-)|(SED-)|(EMOL-)|(INNO55)|(ZTE)|(iPhone)|(ipad)|(Android)|(Windows</span> <span style="color:#e6db74">CE)|(Wget)|(Java)|(curl)|(Opera)|(htc)|(blackberry)&#34;</span> <span style="color:#e6db74">)</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">root</span> <span style="color:#e6db74">/var/www/web/mobile</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">index</span> <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">try_files</span> $uri $uri/ <span style="color:#e6db74">@router</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">location</span> ~ <span style="color:#e6db74">.*\.(gif|jpg|jpeg|png|bmp|swf)$</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">expires</span>      <span style="color:#e6db74">30d</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">location</span> ~ <span style="color:#e6db74">.*\.(js|css)?$</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">expires</span>      <span style="color:#e6db74">12h</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">location</span> ~ <span style="color:#e6db74">/\.</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">deny</span> <span style="color:#e6db74">all</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">if</span> <span style="color:#e6db74">(</span>$time_iso8601 ~ <span style="color:#e6db74">&#34;^(\d</span>{<span style="color:#f92672">4})-(\d{2})-(\d{2})&#34;)</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">set</span> $year $1;
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">set</span> $month $2;
</span></span><span style="display:flex;"><span>			<span style="color:#f92672">set</span> $day $3;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">error_page</span> <span style="color:#ae81ff">404</span> <span style="color:#e6db74">http://domian.com</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">access_log</span>  <span style="color:#e6db74">/home/logs/nginx/domain.access_</span>$year-$month-$day.log  <span style="color:#e6db74">main</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">error_log</span>   <span style="color:#e6db74">/home/logs/nginx/domain.error.log</span>  <span style="color:#e6db74">info</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æˆ–è€…ä½¿ç”¨ä¸‹é¢æ–¹æ³•ã€try_filesç”¨äºæŒ‰é¡ºåºæ£€æµ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›æ–‡ä»¶å†…å®¹ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿›è¡Œé…çš„å¯¹åº”è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">root</span> <span style="color:#e6db74">/opt/www/cms-web</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">index</span>  <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">try_files</span> $uri $uri/ <span style="color:#e6db74">/index.html</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">location</span> <span style="color:#e6db74">/m/</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">alias</span> <span style="color:#e6db74">/opt/www/cms-web/m/</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">index</span>  <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">try_files</span> $uri $uri/ <span style="color:#e6db74">/m/index.html</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></blockquote>
<ul>
<li><code>Nginx</code><!-- raw HTML omitted -->ä»£ç†<!-- raw HTML omitted --><code>Gitlab</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">listen</span> <span style="color:#ae81ff">443</span> <span style="color:#e6db74">ssl</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">listen</span> <span style="color:#ae81ff">8081</span> <span style="color:#e6db74">ssl</span> <span style="color:#e6db74">default_server</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># æ­¤åŸŸåæ˜¯æä¾›ç»™æœ€ç»ˆç”¨æˆ·çš„è®¿é—®åœ°å€
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">server_name</span> <span style="color:#e6db74">gitlab.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># é¿å…ç›´æ¥è¿”å› 404ï¼Œè€Œæ˜¯è¿”å›åº”ç”¨çš„ä¸»å…¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">try_files</span> $uri $uri/ <span style="color:#e6db74">/index.html</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># ä¸»é¡µé¢ä¸å…è®¸ç¼“å­˜ï¼ˆé¿å…é¡¹ç›®å‡çº§ ç©ºç™½é¡µçš„é—®é¢˜ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">location</span> <span style="color:#e6db74">/index.html</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">add_header</span> <span style="color:#e6db74">Expires</span> <span style="color:#e6db74">-1</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">add_header</span> <span style="color:#e6db74">Cache-Control</span> <span style="color:#e6db74">no-cache</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># è¿™ä¸ªéå¸¸é‡è¦ï¼Œå¦‚æœgitåº“é‡Œæœ‰å¤§æ–‡ä»¶ï¼Œè®¾ç½®å¤ªå°ï¼Œæ–‡ä»¶pushä¼šå¤±è´¥ï¼Œæ ¹æ®æƒ…å†µè°ƒæ•´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">client_max_body_size</span> <span style="color:#ae81ff">50m</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_redirect</span> <span style="color:#66d9ef">off</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># ä»¥ä¸‹ç¡®ä¿ gitlabä¸­é¡¹ç›®çš„ url æ˜¯åŸŸåè€Œä¸æ˜¯ http://gitï¼Œä¸å¯ç¼ºå°‘
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># å‡çº§åè®®å¤´ websocket
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_http_version</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">.1</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Upgrade</span> $http_upgrade;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Connection</span> <span style="color:#e6db74">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># å‡çº§åè®®å¤´ä¸ºhttps
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Upgrade-Insecure-Requests</span> <span style="color:#ae81ff">1</span>;   
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> <span style="color:#e6db74">https</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">add_header</span> <span style="color:#e6db74">Content-Security-Policy</span> <span style="color:#e6db74">upgrade-insecure-requests</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># nginx åå‘ä»£ç†åˆ° gitlab å®¹å™¨æš´éœ²çš„ç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:8080</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">index</span> <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">error_page</span> <span style="color:#ae81ff">404</span> <span style="color:#e6db74">http://gitlab.com</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">access_log</span>  <span style="color:#e6db74">/usr/local/nginx/logs/gitlab.access.log</span>  <span style="color:#e6db74">main</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">error_log</span>   <span style="color:#e6db74">/usr/local/nginx/logs/gitlab.error.log</span>  <span style="color:#e6db74">info</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">}</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="nginxé›†ç¾¤åå‘ä»£ç†"><code>nginx</code>é›†ç¾¤ï¼Œåå‘ä»£ç†</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->é›†ç¾¤ä»‹ç»<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>é›†ç¾¤å°±æ˜¯ä¸€ç»„ç›¸äº’ç‹¬ç«‹çš„è®¡ç®—æœºï¼Œåˆ©ç”¨é«˜é€Ÿç›¸åŒçš„é€šä¿¡ç½‘ç»œç»„æˆä¸€ä¸ªè¾ƒå¤§çš„è®¡ç®—æœºæœåŠ¡ç³»ç»Ÿï¼Œæ¯ä¸ªé›†ç¾¤èŠ‚ç‚¹éƒ½å¯ä»¥å„è‡ªè¿è¡ŒæœåŠ¡ï¼Œå¹¶ä¸”èƒ½å½¼æ­¤é€šä¿¡ï¼ŒååŒå‘å®¢æˆ·æä¾›æœåŠ¡ã€‚ç»Ÿä¸€ç®¡ç†çš„æ¨¡å¼ã€‚ç”¨æˆ·è¯·æ±‚é›†ç¾¤ç³»ç»Ÿæ—¶ï¼Œé›†ç¾¤ç³»ç»Ÿç»™ç”¨æˆ·çš„æ„Ÿå—æ˜¯ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨ï¼Œå®é™…ä¸Šç”¨æˆ·è¯·æ±‚çš„æ˜¯ä¸€ç»„é›†ç¾¤æœåŠ¡å™¨</li>
<li>æ‰“å¼€è°·æ­Œã€ç™¾åº¦çš„é¡µé¢ï¼Œçœ‹åˆ°èµ·æ¥æ˜¯å¥½ç®€å•ã€ä¹Ÿè®¸ä½ è§‰å¾—å‡ åˆ†é’Ÿå¯ä»¥åˆ¶ä½œå‡ºç±»ä¼¼çš„ç½‘é¡µï¼Œè€Œå®é™…ä¸Šï¼Œè¿™ä¸ªé¡µé¢èƒŒåæ˜¯ç”±æˆåƒä¸Šä¸‡å°æœåŠ¡å™¨ååŒå·¥ä½œçš„ç»“æœã€‚é‚£ä¹ˆå¤šå°æœåŠ¡å™¨ç»´æŠ¤å’Œç®¡ç†ï¼Œä»¥åŠç›¸äº’åè°ƒå·¥ä½œå°±æ˜¯è¯»è€…æœªæ¥çš„å·¥ä½œèŒè´£</li>
<li>ä¸€èˆ¬æ˜¯æŒ‡åœ¨é›†ç¾¤ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¤±æ•ˆçš„æƒ…å†µä¸‹ï¼Œè¯¥èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ä»»åŠ¡ä¼šè‡ªåŠ¨è½¬ç§»åˆ°å…¶ä»–æ­£å¸¸çš„èŠ‚ç‚¹ä¸Šã€‚æ­¤è¿‡ç¨‹å¹¶ä¸å½±å“æ•´ä¸ªé›†ç¾¤çš„è¿è¡Œ</li>
<li>å½“é›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ç³»ç»Ÿå‘ç”Ÿæ•…éšœæ—¶ï¼Œè¿è¡Œç€çš„é›†ç¾¤æœåŠ¡ä¼šè¿…é€Ÿåšå‡ºååº”ï¼Œå°†è¯¥ç³»ç»Ÿçš„æœåŠ¡åˆ†é…åˆ°é›†ç¾¤ä¸­å…¶ä»–æ­£åœ¨å·¥ä½œçš„ç³»ç»Ÿä¸Šè¿è¡Œã€‚è€ƒè™‘åˆ°è®¡ç®—æœºç¡¬ä»¶å’Œè½¯ä»¶çš„å®¹é”™æ€§ï¼Œé«˜å¯ç”¨æ€§é›†ç¾¤çš„ä¸»è¦ç›®çš„æ˜¯ä½¿é›†ç¾¤çš„æ•´ä½“æœåŠ¡å°½å¯èƒ½å¯ç”¨ã€‚å¦‚æœé«˜å¯ç”¨æ€§é›†ç¾¤ä¸­çš„ä¸»èŠ‚ç‚¹å‘ç”Ÿäº†æ•…éšœï¼Œé‚£ä¹ˆè¿™æ®µæ—¶é—´å†…å°†ç”±å¤‡èŠ‚ç‚¹ä»£æ›¿å®ƒã€‚å¤‡èŠ‚ç‚¹é€šå¸¸æ˜¯ä¸»èŠ‚ç‚¹çš„é•œåƒã€‚å½“å®ƒä»£æ›¿ä¸»èŠ‚ç‚¹æ—¶ï¼Œå®ƒå¯ä»¥å®Œå…¨æ¥ç®¡ä¸»èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬<code>IP</code>åœ°å€åŠå…¶ä»–èµ„æºï¼‰æä¾›æœåŠ¡ï¼Œå› æ­¤ï¼Œä½¿é›†ç¾¤ç³»ç»Ÿç¯å¢ƒå¯¹äºç”¨æˆ·æ¥è¯´æ˜¯ä¸€è‡´çš„ï¼Œå³ä¸ä¼šå½±å“ç”¨æˆ·çš„è®¿é—®ã€‚é«˜å¯ç”¨æ€§é›†ç¾¤ä½¿æœåŠ¡å™¨ç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦å’Œå“åº”é€Ÿåº¦ä¼šå°½å¯èƒ½çš„å¿«ã€‚å®ƒä»¬ç»å¸¸åˆ©ç”¨åœ¨å¤šå°æœºå™¨ä¸Šè¿è¡Œçš„å†—ä½™èŠ‚ç‚¹å’ŒæœåŠ¡æ¥ç›¸äº’è·Ÿè¸ªã€‚å¦‚æœæŸä¸ªèŠ‚ç‚¹å¤±è´¥ï¼Œå®ƒçš„æ›¿è¡¥è€…å°†åœ¨å‡ ç§’é’Ÿæˆ–æ›´çŸ­æ—¶é—´å†…æ¥ç®¡å®ƒçš„èŒè´£ã€‚å› æ­¤ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œé›†ç¾¤é‡Œçš„ä»»æ„ä¸€å°æœºå™¨å®•æœºï¼Œä¸šåŠ¡éƒ½ä¸ä¼šå—å½±å“</li>
<li>é«˜æ€§èƒ½è®¡ç®—é›†ç¾¤ä¹Ÿç§°å¹¶è¡Œè®¡ç®—ã€‚é€šå¸¸ï¼Œé«˜æ€§èƒ½è®¡ç®—é›†ç¾¤æ¶‰åŠä¸ºé›†ç¾¤å¼€å‘çš„å¹¶è¡Œåº”ç”¨ç¨‹åºï¼Œä»¥è§£å†³å¤æ‚çš„ç§‘å­¦é—®é¢˜ï¼ˆå¤©æ°”é¢„æŠ¥ã€çŸ³æ²¹å‹˜æ¢ã€æ ¸ååº”æ¨¡æ‹Ÿç­‰ï¼‰ã€‚é«˜æ€§èƒ½è®¡ç®—é›†ç¾¤å¯¹å¤–å°±å¥½åƒä¸€ä¸ªè¶…çº§è®¡ç®—æœºï¼Œè¿™ç§è¶…çº§è®¡ç®—æœºå†…éƒ¨ç”±æ•°åè‡³ä¸Šä¸‡ä¸ªç‹¬ç«‹æœåŠ¡å™¨ç»„æˆï¼Œå¹¶ä¸”åœ¨å…¬å…±æ¶ˆæ¯ä¼ é€’å±‚ä¸Šè¿›è¡Œé€šä¿¡ä»¥è¿è¡Œå¹¶è¡Œåº”ç”¨ç¨‹åºã€‚åœ¨è€ç”·å­©çš„å·¥ä½œä¸­å®é™…æ˜¯æŠŠä»»åŠ¡åˆ‡æˆè›‹ç³•ï¼Œç„¶åä¸‹å‘åˆ°é›†ç¾¤èŠ‚ç‚¹è®¡ç®—ï¼Œè®¡ç®—åè¿”å›ç»“æœï¼Œç„¶åç»§ç»­é¢†æ–°ä»»åŠ¡è®¡ç®—ï¼Œå¦‚æ­¤å¾€å¤</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->é›†ç¾¤çš„ä¼˜åŠ¿ç‰¹ç‚¹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->é«˜æ€§èƒ½<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->å»‰ä»·æ€§<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->å¯ä¼¸ç¼©æ€§<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->é«˜å¯ç”¨æ€§<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->é€æ˜æ€§<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->å¯ç®¡ç†æ€§<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->å¯ç¼–ç¨‹æ€§<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->é›†ç¾¤åˆ†ç±»<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->è´Ÿè½½å‡è¡¡é›†ç¾¤<!-- raw HTML omitted -->(<code>Load balancing clusters</code>)ç®€ç§°<code>LBC</code>æˆ–è€…<code>LB</code></li>
<li><!-- raw HTML omitted -->é«˜å¯ç”¨æ€§é›†ç¾¤<!-- raw HTML omitted -->(<code>High-availavlability (HA) clusters</code>)ç®€ç§°<code>HAC</code></li>
<li><!-- raw HTML omitted -->é«˜æ€§èƒ½è®¡ç®—é›†ç¾¤<!-- raw HTML omitted -->(<code>Hight-perfomance (HPC) clusters</code>)ç®€ç§°<code>HPC</code></li>
<li><!-- raw HTML omitted -->ç½‘æ ¼è®¡ç®—<!-- raw HTML omitted -->(<code>Grid computing</code>)</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->è´Ÿè½½å‡è¡¡é›†ç¾¤<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>è´Ÿè½½å‡è¡¡é›†ç¾¤ä¸ºäº†å¼ºä¼ä¸šæä¾›æ›´ä¸ºå®ç”¨ã€æ€§ä»·æ¯”æ›´é«˜çš„ç³»ç»Ÿæ¶æ„è§£å†³æ–¹æ¡ˆã€‚è´Ÿè½½å‡è¡¡é›†ç¾¤å¯ä»¥å°†å¾ˆå¤šå®¢æˆ·é›†ä¸­è®¿é—®è´Ÿè½½å‹åŠ›å°½å¯èƒ½åœ°å¹³å‡åˆ†æ‘Šåœ¨è®¡ç®—æœºé›†ç¾¤ä¸­å¤„ç†ã€‚å®¢æˆ·è®¿é—®è¯·æ±‚è´Ÿè½½åŒ…æ‹¬åº”ç”¨ç¨‹åºå¤„ç†è´Ÿè½½å’Œç½‘ç»œæµé‡è´Ÿè½½ã€‚è¿™æ ·ä½¿åŒä¸€ç»„åº”ç”¨ç¨‹åºä¸ºå¤§é‡ç”¨æˆ·æä¾›æœåŠ¡çš„æ¨¡å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æ‰¿æ‹…ä¸€å®šçš„è®¿é—®æ±‚è´Ÿè½½å‹åŠ›å¹¶ä¸”å¯ä»¥å®ç°è®¿é—®è¯·æ±‚åœ¨å„èŠ‚ç‚¹ä¹‹é—´åŠ¨æ€åˆ†é…ï¼Œä»¥å®ç°è´Ÿè½½å‡è¡¡</li>
<li>è´Ÿè½½å‡è¡¡ï¼ˆ<code>LoadBalance</code>ï¼‰é›†ç¾¤æä¾›äº†ä¸€ç§å»‰ä»·ã€æœ‰æ•ˆã€é€æ˜çš„æ–¹æ³•ï¼Œæ¥æ‰©å±•ç½‘ç»œè®¾å¤‡å’ŒæœåŠ¡å™¨çš„è´Ÿè½½ã€å¸¦å®½å’Œååé‡ï¼ŒåŒæ—¶åŠ å¼ºäº†ç½‘ç»œæ•°æ®å¤„ç†èƒ½åŠ›ï¼Œæé«˜äº†ç½‘ç»œçš„çµæ´»æ€§å’Œå¯ç”¨æ€§</li>
<li>æŠŠå•å°è®¡ç®—æœºæ— æ³•æ‰¿å—çš„å¤§è§„æ¨¡å¹¶å‘è®¿é—®æˆ–æ•°æ®æµé‡åˆ†æ‹…åˆ°å¤šå°èŠ‚ç‚¹è®¾å¤‡ä¸Šï¼Œåˆ†åˆ«è¿›è¡Œå¤„ç†ï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…å“åº”çš„æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
<li>å•ä¸ªé‡è´Ÿè½½çš„è¿ç®—åˆ†æ‹…åˆ°å¤šå°èŠ‚ç‚¹è®¾å¤‡ä¸Šåšå¹¶è¡Œå¤„ç†ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®¾å¤‡å¤„ç†ç»“æŸåï¼Œå°†ç»“æœæ±‡æ€»ï¼Œè¿”å›ç»™ç”¨æˆ·ï¼Œç³»ç»Ÿå¤„ç†èƒ½åŠ›å¾—åˆ°å¤§å¹…åº¦æé«˜</li>
<li><code>7Ã—24</code>å°æ—¶çš„æœåŠ¡ä¿è¯ï¼Œä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰é™åé¢èŠ‚ç‚¹è®¾å¤‡å®•æœºï¼Œä¸èƒ½å½±å“ä¸šåŠ¡</li>
<li>åœ¨è´Ÿè½½å‡è¡¡é›†ç¾¤ä¸­ï¼ŒåŒç»„é›†ç¾¤çš„æ‰€æœ‰è®¡ç®—æœºèŠ‚ç‚¹éƒ½åº”è¯¥æä¾›ç›¸åŒçš„æœåŠ¡ã€‚é›†ç¾¤è´Ÿè½½å‡è¡¡å™¨ä¼šæˆªè·æ‰€æœ‰å¯¹è¯¥æœåŠ¡çš„å…¥ç«™è¯·æ±‚ã€‚ç„¶åå°†è¿™äº›è¯·æ±‚å°½å¯èƒ½åœ°å¹³å‡åœ°åˆ†é…åœ¨æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹ä¸Š</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->è´Ÿè½½å‡è¡¡é›†ç¾¤çš„ä½œç”¨ <!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ†æ‹…ç”¨æˆ·è®¿é—®è¯·æ±‚åŠæ•°æ®æµé‡ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ - ä¿æŒä¸šåŠ¡è¿ç»­æ€§ï¼Œå³<!-- raw HTML omitted --><code>7Ã—24</code><!-- raw HTML omitted -->å°æ—¶æœåŠ¡ï¼ˆé«˜å¯ç”¨æ€§ï¼‰<!-- raw HTML omitted --></li>
<li>äº<code>Web</code><!-- raw HTML omitted -->ä¸šåŠ¡åŠæ•°æ®åº“ä»åº“ç­‰æœåŠ¡å™¨çš„ä¸šåŠ¡<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->è´Ÿè½½å‡è¡¡é›†ç¾¤å…¸å‹çš„å¼€æºè½¯ä»¶åŒ…æ‹¬<!-- raw HTML omitted --><code>LVS</code>ã€<code>Nginx</code>ã€<code>Haproxy</code>ç­‰</li>
<li><!-- raw HTML omitted -->é«˜å¯ç”¨æ€§é›†ç¾¤çš„ä½œç”¨ <!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å½“ä¸€å°æœºå™¨å®•æœºæ—¶ï¼Œå¦å¤–ä¸€å°æœºå™¨æ¥ç®¡å®•æœºçš„æœºå™¨çš„<!-- raw HTML omitted --><code>IP</code><!-- raw HTML omitted -->èµ„æºå’ŒæœåŠ¡èµ„æºï¼Œæä¾›æœåŠ¡<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->å¸¸ç”¨äºä¸æ˜“å®ç°è´Ÿè½½å‡è¡¡çš„åº”ç”¨ï¼Œæ¯”å¦‚è´Ÿè½½å‡è¡¡å™¨ï¼Œä¸»æ•°æ®åº“ã€ä¸»å­˜å‚¨å¯¹ä¹‹é—´<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->é«˜å¯ç”¨æ€§é›†ç¾¤å¸¸ç”¨çš„å¼€æºè½¯ä»¶åŒ…æ‹¬<!-- raw HTML omitted --><code>Keepalived</code>ã€<code>Heartbeat</code>ç­‰</li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->è¿ç»´ä¸­å¸¸è§çš„é›†ç¾¤è½¯ç¡¬ä»¶äº§å“<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>äº’è”ç½‘ä¼ä¸šå¸¸ç”¨çš„å¼€æºé›†ç¾¤è½¯ä»¶æœ‰ï¼š<code>Nginx</code>ã€<code>LVS</code>ã€<code>Haproxy</code>ã€<code>Keepalived</code>ã€<code>Heartbeat</code>ã€‚äº’è”ç½‘ä¼ä¸šå¸¸ç”¨çš„å•†ä¸šé›†ç¾¤ç¡¬ä»¶æœ‰ï¼š<code>F5</code>ã€<code>Netscaler</code>ã€<code>Rad-ware</code>ã€<code>A10</code>ç­‰ï¼Œå·¥ä½œæ¨¡å¼ç›¸å½“äº<code>Haproxy</code>çš„å·¥ä½œæ¨¡å¼ã€‚æ·˜å®ã€èµ¶é›†ç½‘ã€æ–°æµªç­‰å…¬å¸æ›¾ä½¿ç”¨è¿‡<code>Netscaler</code>è´Ÿè½½å‡è¡¡äº§å“ã€‚é›†ç¾¤ç¡¬ä»¶<code>Netscaler</code>çš„äº§å“</li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->é›†ç¾¤è½¯ç¡¬ä»¶äº§å“å¦‚ä½•é€‰å‹<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>å½“ä¼ä¸šä¸šåŠ¡é‡è¦ï¼ŒæŠ€æœ¯åŠ›é‡åˆè–„å¼±ï¼Œå¹¶ä¸”å¸Œæœ›å‡ºé’±è´­ä¹°äº§å“åŠè·å–æ›´å¥½çš„æœåŠ¡æ—¶ï¼Œå¯ä»¥é€‰æ‹©ç¡¬ä»¶è´Ÿè½½å‡è¡¡äº§å“ï¼Œå¦‚<code>F5</code>ã€<code>Netscaler</code>ã€<code>Radware</code>ç­‰ï¼Œæ­¤ç±»å…¬å¸å¤šä¸ºä¼ ç»Ÿçš„å¤§å‹éäº’è”ç½‘ä¼ä¸šï¼Œå¦‚é“¶è¡Œã€è¯åˆ¸ã€é‡‘èä¸šåŠå®é©¬ã€å¥”é©°å…¬å¸ç­‰</li>
<li>å¯¹äºé—¨æˆ·ç½‘ç«™æ¥è¯´ï¼Œå¤§å¤šä¼šå¹¶ç”¨è½¯ä»¶åŠç¡¬ä»¶äº§å“æ¥åˆ†æ‹…å•ä¸€äº§å“çš„é£é™©ï¼Œå¦‚æ·˜å®ã€è…¾è®¯ã€æ–°æµªç­‰ã€‚èèµ„äº†çš„ä¼ä¸šä¼šè´­ä¹°ç¡¬ä»¶äº§å“ï¼Œå¦‚èµ¶é›†ç­‰ç½‘ç«™</li>
<li>ä¸­å°å‹äº’è”ç½‘ä¼ä¸šï¼Œç”±äºèµ·æ­¥é˜¶æ®µæ— åˆ©æ¶¦å¯èµšæˆ–è€…åˆ©æ¶¦å¾ˆä½ï¼Œä¼šå¸Œæœ›é€šè¿‡ä½¿ç”¨å¼€æºå…è´¹çš„æ–¹æ¡ˆæ¥è§£å†³é—®é¢˜ï¼Œå› æ­¤ä¼šé›‡ä½£ä¸“é—¨çš„è¿ç»´äººå‘˜è¿›è¡Œç»´æŠ¤ã€‚ä¾‹å¦‚ï¼š<code>51CTO</code>ç­‰</li>
</ul>
</blockquote>
<p>ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œå•†ä¸šçš„è´Ÿè½½å‡è¡¡äº§å“æˆæœ¬é«˜ï¼Œæ€§èƒ½å¥½ï¼Œæ›´ç¨³å®šï¼Œç¼ºç‚¹æ˜¯ä¸èƒ½äºŒæ¬¡å¼€å‘ï¼Œå¼€æºçš„è´Ÿè½½å‡è¡¡è½¯ä»¶å¯¹è¿ç»´äººå‘˜çš„èƒ½åŠ›è¦æ±‚è¾ƒé«˜ï¼Œå¦‚æœè¿ç»´åŠå¼€å‘èƒ½åŠ›å¼ºï¼Œé‚£ä¹ˆå¼€æºçš„è´Ÿè½½å‡è¡¡è½¯ä»¶æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œç›®å‰çš„äº’è”ç½‘è¡Œä¸šæ›´å€¾å‘äºä½¿ç”¨å¼€æºçš„è´Ÿè½½å‡è¡¡è½¯ä»¶</p>
<ul>
<li><!-- raw HTML omitted -->å¦‚ä½•é€‰æ‹©å¼€æºé›†ç¾¤è½¯ä»¶äº§å“<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>ä¸­å°ä¼ä¸šäº’è”ç½‘å…¬å¸ç½‘ç«™åœ¨å¹¶å‘è®¿é—®å’Œæ€»è®¿é—®é‡ä¸æ˜¯å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œå»ºè®®é¦–é€‰<code>Nginx</code>è´Ÿè½½å‡è¡¡ï¼Œç†ç”±æ˜¯<code>Nginx</code>è´Ÿè½½å‡è¡¡é…ç½®ç®€å•ã€ä½¿ç”¨æ–¹ä¾¿ã€å®‰å…¨ç¨³å®šã€ç¤¾åŒºæ´»è·ƒï¼Œä½¿ç”¨çš„äººé€æ¸å¢å¤šï¼Œæˆä¸ºæµè¡Œè¶‹åŠ¿ï¼Œå¦å¤–ä¸€ä¸ªå®ç°è´Ÿè½½å‡è¡¡çš„ç±»ä¼¼äº§å“ä¸º<code>Haproxy</code>ï¼ˆæ”¯æŒ<code>L4</code>å’Œ<code>L7</code>è´Ÿè½½ï¼ŒåŒæ ·ä¼˜ç§€ï¼Œä½†ç¤¾åŒºä¸å¦‚<code>Nginx</code>æ´»è·ƒï¼‰</li>
<li>å¦‚æœè¦è€ƒè™‘<code>Nginx</code>è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨åŠŸèƒ½ï¼Œå»ºè®®é¦–é€‰<code>Keepalived</code>è½¯ä»¶ï¼Œç†ç”±æ˜¯å®‰è£…å’Œé…ç½®ç®€å•ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œå®‰å…¨ç¨³å®šï¼Œä¸<code>Keepalived</code>æœåŠ¡ç±»ä¼¼çš„é«˜å¯ç”¨è½¯ä»¶è¿˜æœ‰<code>Heartbeat</code>ï¼ˆä½¿ç”¨æ¯”è¾ƒå¤æ‚ï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼‰</li>
<li>å¦‚æœæ˜¯å¤§å‹ä¼ä¸šäº’è”ç½‘å…¬å¸ï¼Œè´Ÿè½½å‡è¡¡äº§å“å¯ä»¥ä½¿ç”¨<code>LVS</code>+<code>Keepalived</code>åœ¨å‰ç«¯åšå››å±‚è½¬å‘ï¼ˆä¸€èˆ¬æ˜¯ä¸»å¤‡æˆ–ä¸»ä¸»ï¼Œå¦‚æœéœ€è¦æ‰©å±•å¯ä»¥ä½¿ç”¨<code>DNS</code>æˆ–å‰ç«¯ä½¿ç”¨<code>OSPF</code>ï¼‰ï¼Œåç«¯ä½¿ç”¨<code>Nginx</code>æˆ–è€…<code>Haproxy</code>åš<code>7</code>å±‚è½¬å‘ï¼ˆå¯ä»¥æ‰©å±•åˆ°ç™¾å°ï¼‰ï¼Œå†åé¢æ˜¯åº”ç”¨æœåŠ¡å™¨ï¼Œå¦‚æœæ˜¯æ•°æ®åº“ä¸å­˜å‚¨çš„è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨ï¼Œå»ºè®®é€‰æ‹©<code>LVS</code>+<code>Heart-beat</code>ï¼Œ<code>LVS</code>æ”¯æŒ<code>TCP</code>è½¬å‘ä¸”<code>DR</code>æ¨¡å¼æ•ˆç‡å¾ˆé«˜ï¼Œ<code>Heartbeat</code>å¯ä»¥é…åˆ<code>drbd</code>ï¼Œä¸ä½†å¯ä»¥è¿›è¡Œ<code>VIP</code>çš„åˆ‡æ¢ï¼Œè¿˜å¯ä»¥æ”¯æŒå—è®¾å¤‡çº§åˆ«çš„æ•°æ®åŒæ­¥ï¼ˆ<code>drbd</code>ï¼‰ï¼Œä»¥åŠèµ„æºæœåŠ¡çš„ç®¡ç†</li>
</ul>
</blockquote>
</blockquote>
<ul>
<li>
<ol start="6">
<li><!-- raw HTML omitted -->åå‘ä»£ç†ä¸è´Ÿè½½å‡è¡¡æ¦‚å¿µ<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>ä¸¥æ ¼åœ°è¯´ï¼Œ<code>Nginx</code>ä»…ä»…æ˜¯ä½œä¸º<code>Nginx Proxy</code>åå‘ä»£ç†ä½¿ç”¨çš„ï¼Œå› ä¸ºè¿™ä¸ªåå‘ä»£ç†åŠŸèƒ½è¡¨ç°çš„æ•ˆæœæ˜¯è´Ÿè½½å‡è¡¡é›†ç¾¤çš„æ•ˆæœï¼Œæ‰€ä»¥æœ¬æ–‡ç§°ä¹‹ä¸º<code>Nginx</code>è´Ÿè½½å‡è¡¡ã€‚é‚£ä¹ˆï¼Œåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</li>
<li>æ™®é€šè´Ÿè½½å‡è¡¡è½¯ä»¶ï¼Œä¾‹å¦‚å¤§åé¼é¼çš„<code>LVS</code>ï¼Œå…¶å®ç°çš„åŠŸèƒ½åªæ˜¯å¯¹è¯·æ±‚æ•°æ®åŒ…çš„è½¬å‘ï¼ˆä¹Ÿå¯èƒ½ä¼šæ”¹å†™æ•°æ®åŒ…ï¼‰ã€ä¼ é€’ï¼Œå…¶ä¸­<code>DR</code>æ¨¡å¼æ˜æ˜¾çš„ç‰¹å¾æ˜¯ä»è´Ÿè½½å‡è¡¡ä¸‹é¢çš„èŠ‚ç‚¹æœåŠ¡å™¨æ¥çœ‹ï¼Œæ¥æ”¶åˆ°çš„è¯·æ±‚è¿˜æ˜¯æ¥è‡ªè®¿é—®è´Ÿè½½å‡è¡¡å™¨çš„å®¢æˆ·ç«¯çš„çœŸå®ç”¨æˆ·ï¼Œè€Œåå‘ä»£ç†å°±ä¸ä¸€æ ·äº†ï¼Œåå‘ä»£ç†æ¥æ”¶è®¿é—®ç”¨æˆ·çš„è¯·æ±‚åï¼Œä¼šä»£ç†ç”¨æˆ·é‡æ–°å‘èµ·è¯·æ±‚ä»£ç†ä¸‹çš„èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œæœ€åæŠŠæ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ç”¨æˆ·ï¼Œåœ¨èŠ‚ç‚¹æœåŠ¡å™¨çœ‹æ¥ï¼Œè®¿é—®çš„èŠ‚ç‚¹æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ç”¨æˆ·å°±æ˜¯åå‘ä»£ç†æœåŠ¡å™¨äº†ï¼Œè€ŒéçœŸå®çš„ç½‘ç«™è®¿é—®ç”¨æˆ·</li>
<li>ä¸€å¥è¯ï¼Œ<code>LVS</code>ç­‰çš„è´Ÿè½½å‡è¡¡æ˜¯è½¬å‘ç”¨æˆ·è¯·æ±‚çš„æ•°æ®åŒ…ï¼Œè€Œ<code>Nginx</code>åå‘ä»£ç†æ˜¯æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ç„¶åé‡æ–°å‘èµ·è¯·æ±‚å»è¯·æ±‚å…¶åé¢çš„èŠ‚ç‚¹ã€‚2. å®ç°<code>Nginx</code>è´Ÿè½½å‡è¡¡çš„ç»„ä»¶è¯´æ˜å®ç°<code>Nginx</code>è´Ÿè½½å‡è¡¡çš„ç»„ä»¶ä¸»è¦æœ‰ä¸¤ä¸ª</li>
</ul>
<p><a href="#R-image-7d6c753c07a78fd78f302007735de8a9" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/37fcolxnhiou5s9t0pb0vm8l/image_1akuo4vrcpke1vb010f3rdd14gi9.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7d6c753c07a78fd78f302007735de8a9"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/37fcolxnhiou5s9t0pb0vm8l/image_1akuo4vrcpke1vb010f3rdd14gi9.png"></a></p>
<p><a href="#R-image-4c60c936763783b6528cd42d3aaef859" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/xd2ms7ck0a33wxf36vwwktgs/image_1akv2ig1519723ljs261b4d1kbo9.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4c60c936763783b6528cd42d3aaef859"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/xd2ms7ck0a33wxf36vwwktgs/image_1akv2ig1519723ljs261b4d1kbo9.png"></a></p>
<p><a href="#R-image-86c68d83ed5203ce2c6a66e6cf0d64d6" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/7dalazu3amny9rg192ing2l9/image_1akv2hcu286b1piavpv9jdsunm.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-86c68d83ed5203ce2c6a66e6cf0d64d6"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/7dalazu3amny9rg192ing2l9/image_1akv2hcu286b1piavpv9jdsunm.png"></a></p>
<p><a href="#R-image-52f278a8558ab8d104a23966f6ab8279" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/c4i7xy39l9tymsjbb0fem2l1/image_1akv8kcjorbhsq917bq9h382t13.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-52f278a8558ab8d104a23966f6ab8279"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/c4i7xy39l9tymsjbb0fem2l1/image_1akv8kcjorbhsq917bq9h382t13.png"></a></p>
<p><a href="#R-image-e0dd7195862ae4cb673f21dcbb02f99e" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/f3esrb2do4bgexfvltp6l9im/%E5%8F%82%E6%95%B01.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e0dd7195862ae4cb673f21dcbb02f99e"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/f3esrb2do4bgexfvltp6l9im/%E5%8F%82%E6%95%B01.jpg"></a></p>
<p><a href="#R-image-c05fa2f038903eaea985238de968e88d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/x676usyjxgo3idhklzrkqaz5/%E5%8F%82%E6%95%B02.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c05fa2f038903eaea985238de968e88d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/x676usyjxgo3idhklzrkqaz5/%E5%8F%82%E6%95%B02.jpg"></a></p>
<p><a href="#R-image-555b1dc7b383ac049d2490e352a9a8df" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/i9cazzd6tqyik5hpa0opxjuc/image_1akvc4rs112et1noc12s3d711h49.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-555b1dc7b383ac049d2490e352a9a8df"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="http://static.zybuluo.com/WindWhisperer/i9cazzd6tqyik5hpa0opxjuc/image_1akvc4rs112et1noc12s3d711h49.png"></a></p>
<ul>
<li><!-- raw HTML omitted -->å®ç°è´Ÿè½½å‡è¡¡ç»„ä»¶è¯´æ˜<!-- raw HTML omitted --></li>
</ul>
<table>
<thead>
<tr>
<th><code>Nginx http</code>åŠŸèƒ½æ¨¡å—</th>
<th>æ¨¡å—è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ngx_http_proxy_module</code></td>
<td><code>proxy</code>ä»£ç†æ¨¡å—ï¼Œç”¨æˆ·æŠŠè¯·æ±‚æŠ›ç»™èŠ‚ç‚¹æœåŠ¡å™¨æˆ–<code>upstream</code>æœåŠ¡æ± </td>
</tr>
<tr>
<td><code>ngx_http_upstream_module</code></td>
<td>è´Ÿè½½å‡è¡¡æ¨¡å—ï¼Œå¯ä»¥å®ç°ç½‘ç«™è´Ÿè½½å‡è¡¡åŠŸèƒ½åŠèŠ‚ç‚¹å¥åº·æ£€æŸ¥</td>
</tr>
</tbody>
</table>
<ul>
<li><code>nginx upstream</code><!-- raw HTML omitted -->æ¨¡å—<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><code>Nginx</code>çš„è´Ÿè½½å‡è¡¡åŸºäº<code>ngx_http_upstream_module</code>æ‰€æ”¯æŒçš„ä»£ç†æ–¹å¼åŒ…æ‹¬<code>proxy_pass</code>ã€<code>fastcgi_pass</code>ã€<code>memcached_pass</code>ç­‰</li>
<li><code>rr</code><!-- raw HTML omitted -->ï¼šè½®è¯¢ï¼ˆæ€§èƒ½ç›¸è¿‘ï¼Œä¸šåŠ¡ä¸€æ ·ï¼‰<!-- raw HTML omitted --></li>
<li><code>wrr</code><!-- raw HTML omitted -->ï¼šæƒé‡è½®è¯¢<!-- raw HTML omitted --></li>
<li><code>ip_hash;</code><!-- raw HTML omitted -->ï¼šæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®<!-- raw HTML omitted --><code>IP</code><!-- raw HTML omitted -->çš„<!-- raw HTML omitted --><code>hash</code><!-- raw HTML omitted -->ç»“æœåˆ†é…ã€åŒä¸€ä¸ª<!-- raw HTML omitted --><code>IP</code><!-- raw HTML omitted -->å›ºå®šè®¿é—®åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨<!-- raw HTML omitted --></li>
<li><code>hash $request_uri;</code><!-- raw HTML omitted -->ï¼šæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®<!-- raw HTML omitted --><code>IP</code>çš„<code>hash</code><!-- raw HTML omitted -->ç»“æœåˆ†é…ã€åŒä¸€ä¸ª<!-- raw HTML omitted --><code>IP</code><!-- raw HTML omitted -->å›ºå®šè®¿é—®åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨<!-- raw HTML omitted -->ï¼Œ<code>$cookie_jsessionid;</code><!-- raw HTML omitted -->æŒ‰ç…§åç«¯åˆ†é…<!-- raw HTML omitted --><code>JSESSIONID</code><!-- raw HTML omitted -->è¿›è¡Œè´Ÿè½½<!-- raw HTML omitted --></li>
<li><code>least_conn;</code><!-- raw HTML omitted -->ï¼šæœ€å°‘è¿æ¥æ•°ã€åˆ†é…ç»™è¿æ¥æ•°æœ€å°‘çš„åç«¯æœåŠ¡å™¨<!-- raw HTML omitted --></li>
<li><code>serverÂ IP:port xxx;</code><!-- raw HTML omitted -->ï¼šå­—æ®µ<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><code>down;</code><!-- raw HTML omitted -->ï¼š å½“å‰<!-- raw HTML omitted --><code>server</code><!-- raw HTML omitted -->æš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡<!-- raw HTML omitted --></li>
<li><code>backup;</code><!-- raw HTML omitted -->ï¼šé¢„ç•™å¤‡ä»½æœåŠ¡å™¨ï¼Œåªæœ‰ä¸»å‚ä¸èŠ‚ç‚¹<!-- raw HTML omitted --><code>down</code>æ‰æ‰å¯ç”¨</li>
<li><code>weigh=3;</code><!-- raw HTML omitted -->ï¼šåŠ æƒè½®è¯¢ã€å€¼è¶Šå¤§åˆ†é…åˆ°è®¿é—®å‡ ç‡è¶Šé«˜<!-- raw HTML omitted --></li>
<li><code>check=3</code><!-- raw HTML omitted -->ï¼šå¼€å¯å¯¹è¯¥æœåŠ¡å™¨å¥åº·æ£€æŸ¥<!-- raw HTML omitted --></li>
<li><code>inter</code><!-- raw HTML omitted -->ï¼šè®¾ç½®è¿ç»­ä¸¤æ¬¡å¥åº·æ£€æŸ¥çš„é—´éš”æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤å€¼<!-- raw HTML omitted --><code>2000</code></li>
<li><code>rise</code><!-- raw HTML omitted -->ï¼šæŒ‡å®šå¤šå°‘æ¬¡è¿ç»­æˆåŠŸå¥åº·æ£€æŸ¥åï¼Œå³å¯è®¤å®šæœåŠ¡å™¨å¯ç”¨çŠ¶æ€<!-- raw HTML omitted --></li>
<li><code>max_fails=3</code><!-- raw HTML omitted -->ï¼šæŒ‡å®šå¤šå°‘æ¬¡ä¸æˆåŠŸåï¼Œå³è®¤ä¸ºå®•æœºçŠ¶æ€ï¼Œé»˜è®¤å€¼<!-- raw HTML omitted --><code>1</code></li>
<li><code>fail_timeout=10 </code><!-- raw HTML omitted -->ï¼šç»è¿‡<!-- raw HTML omitted --><code>max_fails</code><!-- raw HTML omitted -->å¤±è´¥åï¼Œåœ¨<!-- raw HTML omitted --><code>fail_timeout</code><!-- raw HTML omitted -->æ—¶é—´å†…ä¸å†å»è¯·æ±‚å®ƒï¼Œ<!-- raw HTML omitted --><code>fail_timeout</code><!-- raw HTML omitted -->é»˜è®¤æ˜¯<!-- raw HTML omitted --><code>10s</code></li>
<li><code>maxconnï¼š</code>ï¼š</li>
</ul>
</blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># è´Ÿè½½å‡è¡¡UDPè½¬å‘</span>
</span></span><span style="display:flex;"><span>stream <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    upstream dns <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®IPçš„hashç»“æœåˆ†é…ã€åŒä¸€ä¸ªIPå›ºå®šè®¿é—®åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨</span>
</span></span><span style="display:flex;"><span>        ip_hash;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># æœ€å°‘è¿æ¥æ•°ã€åˆ†é…ç»™è¿æ¥æ•°æœ€å°‘çš„åç«¯æœåŠ¡å™¨</span>
</span></span><span style="display:flex;"><span>        least_conn;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># å½“å‰serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡</span>
</span></span><span style="display:flex;"><span>        server 192.168.111.99:10086 down;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># é¢„ç•™å¤‡ä»½æœåŠ¡å™¨ï¼Œåªæœ‰ä¸»å‚ä¸èŠ‚ç‚¹downæ‰æ‰å¯ç”¨</span>
</span></span><span style="display:flex;"><span>        server 192.168.111.100:10086 weigh<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> backup;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># weighï¼šåŠ æƒè½®è¯¢ã€å€¼è¶Šå¤§åˆ†é…åˆ°è®¿é—®å‡ ç‡è¶Šé«˜ï¼Œmax_failsï¼šå…è®¸è¯·æ±‚å¤±è´¥æ¬¡æ•°ï¼Œfail_timeoutï¼šç»è¿‡max_failså¤±è´¥åï¼ŒæœåŠ¡æš‚å®šæ—¶é—´ã€mac_connsï¼šé™åˆ¶æœ€å¤§è¿æ¥æ•°</span>
</span></span><span style="display:flex;"><span>        server 192.168.111.100:10086 weigh<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> max_fails<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> fail_timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span> max_conns<span style="color:#f92672">=</span>128;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># å‘ä¸Šæ¸¸æœåŠ¡å™¨ä¿ç•™çš„è¿æ¥æ•°</span>
</span></span><span style="display:flex;"><span>        keepalive 300;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># è¿æ¥ä¿ç•™æ—¶é—´ã€é»˜è®¤60ç§’ï¼Œ</span>
</span></span><span style="display:flex;"><span>		keepalive_timeout 60;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># ä¸€ä¸ªTcpå¤ç”¨ä¸­å¯ä»¥å¹¶å‘æ¥æ”¶çš„è¯·æ±‚æ•°</span>
</span></span><span style="display:flex;"><span>		keepalive_requests 1000;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>check interval<span style="color:#f92672">=</span><span style="color:#ae81ff">3000</span> rise<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> fall<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span> timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span> type<span style="color:#f92672">=</span>http;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># check interval=3000 rise=2 fall=5 timeout=1000 type=http;</span>
</span></span><span style="display:flex;"><span>ä¸Šé¢é…ç½®çš„æ„æ€æ˜¯ï¼Œå¯¹staticã€uploadã€è¿™ä¸ªè´Ÿè½½å‡è¡¡æ¡ç›®ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ¯éš”3ç§’æ£€æµ‹ä¸€æ¬¡ï¼Œè¯·æ±‚2æ¬¡æ­£å¸¸åˆ™æ ‡è®°realserverçŠ¶æ€ä¸ºupï¼Œå¦‚æœæ£€æµ‹5æ¬¡éƒ½å¤±è´¥ï¼Œåˆ™æ ‡è®°realserverçš„çŠ¶æ€ä¸ºdownï¼Œè¶…æ—¶æ—¶é—´ä¸º1ç§’ï¼Œæ£€æŸ¥çš„åè®®æ˜¯httpã€‚</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é…ç½®è½¬å‘åˆ°<!-- raw HTML omitted --><code>Mysql</code></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->æ·»åŠ <!-- raw HTML omitted --><code>--with-stream</code><!-- raw HTML omitted -->æ¨¡å—æ”¯æŒ<!-- raw HTML omitted --><code>TCP/UDP</code><!-- raw HTML omitted -->åè®®<!-- raw HTML omitted --></li>
<li><a href="https://cloud.tencent.com/developer/article/1768431" rel="external" target="_self"><code>Nginx</code>ä»£ç†è½¬å‘<code>Mysql</code></a></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nginx -V
</span></span><span style="display:flex;"><span>configure arguments: --prefix<span style="color:#f92672">=</span>/usr/local/nginx --with-stream</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->çš„<!-- raw HTML omitted --><code>conf</code><!-- raw HTML omitted -->æ–‡ä»¶ä¸­<!-- raw HTML omitted --><code>server</code><!-- raw HTML omitted -->å­—æ®µ<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">stream</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">upstream</span> <span style="color:#e6db74">cloudsocket</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">hash</span> $remote_addr <span style="color:#e6db74">consistent</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">server</span> 192.168.182.155:<span style="color:#ae81ff">3306</span> <span style="color:#e6db74">weight=5</span> <span style="color:#e6db74">max_fails=3</span> <span style="color:#e6db74">fail_timeout=30s</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">server</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">listen</span> <span style="color:#ae81ff">3306</span>;     <span style="color:#75715e"># æ•°æ®åº“æœåŠ¡å™¨ç›‘å¬ç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_connect_timeout</span> <span style="color:#e6db74">10s</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_timeout</span> <span style="color:#e6db74">300s</span>;      <span style="color:#75715e"># å®¢æˆ·ç«¯ä¸ä»£ç†ä¹‹é—´çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœ5åˆ†é’Ÿå†…æ²¡æ“ä½œå°†è‡ªåŠ¨æ–­å¼€ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">cloudsocket</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è´Ÿè½½å‡è¡¡UDPè½¬å‘
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">stream</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">upstream</span> <span style="color:#e6db74">dns</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">ip_hash</span>;  	<span style="color:#75715e"># æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®IPçš„hashç»“æœåˆ†é…ã€åŒä¸€ä¸ªIPå›ºå®šè®¿é—®åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">hash</span> $request_uri;  	<span style="color:#75715e"># æŒ‰ç…§è®¿é—®URLçš„hashç»“æœåˆ†é…è¯·æ±‚ã€æ¯ä¸ªURLå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">least_conn</span>;  	<span style="color:#75715e"># æœ€å°‘è¿æ¥æ•°ã€åˆ†é…ç»™è¿æ¥æ•°æœ€å°‘çš„åç«¯æœåŠ¡å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">server</span> 192.168.111.99:<span style="color:#ae81ff">10086</span> <span style="color:#e6db74">down</span>;  	<span style="color:#75715e"># å½“å‰serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">server</span> 192.168.111.100:<span style="color:#ae81ff">10086</span> <span style="color:#e6db74">backup</span>;  	<span style="color:#75715e"># é¢„ç•™å¤‡ä»½æœåŠ¡å™¨ï¼Œåªæœ‰ä¸»å‚ä¸èŠ‚ç‚¹downæ‰æ‰å¯ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">server</span> 192.168.111.100:<span style="color:#ae81ff">10086</span> <span style="color:#e6db74">weigh=3</span> <span style="color:#e6db74">max_fails=3</span> <span style="color:#e6db74">fail_timeout=10</span> <span style="color:#e6db74">max_conns=128</span>;  	<span style="color:#75715e"># weighï¼šåŠ æƒè½®è¯¢ã€å€¼è¶Šå¤§åˆ†é…åˆ°è®¿é—®å‡ ç‡è¶Šé«˜ï¼Œmax_failsï¼šå…è®¸è¯·æ±‚å¤±è´¥æ¬¡æ•°ï¼Œfail_timeoutï¼šç»è¿‡max_failså¤±è´¥åï¼ŒæœåŠ¡æš‚å®šæ—¶é—´ã€mac_connsï¼šé™åˆ¶æœ€å¤§è¿æ¥æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">server</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">listen</span> 192.168.111.98:<span style="color:#ae81ff">10086</span> <span style="color:#e6db74">udp</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_responses</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_timeout</span> <span style="color:#e6db74">20s</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_bind</span> $server_addr:$remote_port;
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">dns</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></blockquote>
</blockquote>
</blockquote>
<hr>
<h3 id="nginxä½¿ç”¨luaè„šæœ¬"><code>Nginx</code>ä½¿ç”¨<code>Lua</code>è„šæœ¬</h3>
<blockquote>
<ul>
<li><code>set_by_lua</code><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->å˜é‡<!-- raw HTML omitted --></li>
<li><code>loa_by_lua</code><!-- raw HTML omitted -->æ—¥å¿—<!-- raw HTML omitted --></li>
<li><code>access_by_lua</code><!-- raw HTML omitted -->è®¿é—®æ§åˆ¶<!-- raw HTML omitted --></li>
<li><code>rewrite_by_lua</code><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>uri</code></li>
<li><code>boy_filter_by_lua</code><!-- raw HTML omitted -->ä¿®æ”¹å“åº”ä½“<!-- raw HTML omitted --></li>
<li><code>header_filter_by_lua</code><!-- raw HTML omitted -->ä¿®æ”¹å“åº”å¤´<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">lua.erge.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/lua</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">default_type</span> <span style="color:#e6db74">text/html</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># ç›´æ¥ä½¿ç”¨luaè¯­è¨€æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#f92672">content_by_lua</span> <span style="color:#e6db74">&#39;ngx_say(&#34;&lt;p&gt;Hello</span> <span style="color:#e6db74">World!!!&lt;/p&gt;&#34;)&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># å¼•ç”¨luaè„šæœ¬æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#f92672">content_by_lua_file</span> <span style="color:#e6db74">conf/lua/hello.lua</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><ul>
<li><code>lua</code><!-- raw HTML omitted -->è„šæœ¬<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/hello.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx_say(&#34;&lt;p&gt;Hello World!!!&lt;/p&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è·å–<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->è¯·æ±‚å¤´ä¿¡æ¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/headers.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">local headers = ngx_req.get_headers()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;Host : &#34;, headers[&#34;Host&#34;], &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;user-agent : &#34;, headers[&#34;user-agent&#34;], &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;user-agent : &#34;, headers.user_agent, &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">for key, values in pairs(headers)do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   if type(values) == &#39;table&#39; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       ngx.say(key, &#34; : &#34;, table.concat(values, &#34;,&#34;), &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       ngx.say(key, &#34; : &#34;, values, &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   end
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">end
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è·å–<!-- raw HTML omitted --><code>Post</code><!-- raw HTML omitted -->è¯·æ±‚å‚æ•°<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/post.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.req.read_body()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;Post Args Begin&#34;, &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">local post_args = ngx.req.get_post_args()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">for key,values in pairs(post_args) do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    if type(values) == &#34;table&#34; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ngx.say(key, &#34; : &#34;, table.concat(values, &#34;, &#34;), &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ngx.say(key, &#34; : &#34;, values, &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    end
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">end
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è·å–<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->ç‰ˆæœ¬<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/nginx_version.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;http_version : &#34;, ngx.req.http_version(), &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è·å–è¯·æ±‚æ–¹æ³•<!-- raw HTML omitted --><code>GETã€POSTã€PUT</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/method.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;get_method : &#34;, ngx.req.get_method(), &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åŸå§‹çš„è¯·æ±‚å†…å®¹<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/original.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;raw_hader : &#34;, ngx.req.raw_header(), &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><code>body</code><!-- raw HTML omitted -->å†…å®¹ä½“<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/body.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;get_body_date() : &#34;, ngx.req.get_body_data(), &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><code>Nginx</code><!-- raw HTML omitted -->å…¨å±€å†…å­˜ç¼“å­˜<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/lua/shared.lua<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">local shared_data = ngx.shared.shared_data  	# è·å–ç¼“å­˜
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">local key = shared_data:get(&#34;key&#34;)  	# ç¼“å­˜é‡Œé¢å–å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">if not key then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    key = 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    shared_data:set(&#34;key&#34;, key)  	# è°ƒç”¨set æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ngx.say(&#34;lazy set key &#34;, key, &#34;&lt;br/&gt;&#34;)  	# ç­‰äºä»€ä¹ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">end
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">key = shared_data:incr(&#34;key&#34;, 1)  	# è‡ªå¢åŠ ä¸€
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ngx.say(&#34;key=&#34;, key, &#34;&lt;br/&gt;&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><a href="https://github.com/openresty/lua-resty-lrucache" rel="external" target="_self"><code>lua-resty-lrucache</code></a><!-- raw HTML omitted -->ç¼“å­˜<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;conf/vhosts/server.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">server {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    listen 80;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    server_name lua.erge.com;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    location /lua {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        default_type text/html;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # ç›´æ¥ä½¿ç”¨luaè¯­è¨€æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        content_by_lua &#39;ngx_say(&#34;&lt;p&gt;Hello World!!!&lt;/p&gt;&#34;)&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # å¼•ç”¨luaè„šæœ¬æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        content_by_lua_file conf/lua/hello.lua;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        content_by_lua_block {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            require(&#34;my/cache&#34;).go()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="è¿‡æ»¤ç™»å½•å’ŒçŠ¶æ€ç ">è¿‡æ»¤ç™»å½•å’ŒçŠ¶æ€ç </h3>
<blockquote>
<ul>
<li>è„šæœ¬ä½¿ç”¨<code>nslookup</code>å‘½ä»¤è·å–ç”¨æˆ·<code>IP</code>åœ°å€çš„è¿œç¨‹ä¸»æœºåï¼Œå¹¶ä½¿ç”¨<code>curl</code>å‘½ä»¤è·å–è¿œç¨‹ä¸»æœºçš„çŠ¶æ€ç ã€‚ç„¶åï¼Œå®ƒå°†æ£€æŸ¥è¿œç¨‹ä¸»æœºçš„åŸŸåå’ŒçŠ¶æ€ç æ˜¯å¦åœ¨å…è®¸çš„åˆ—è¡¨ä¸­ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ˜¾ç¤º<code>Access granted</code>å¦åˆ™æ˜¾ç¤º<code>Access denied</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®šä¹‰å…è®¸ç™»å½•çš„åŸŸåå’ŒçŠ¶æ€ç </span>
</span></span><span style="display:flex;"><span>ALLOWED_DOMAINS<span style="color:#f92672">=(</span><span style="color:#e6db74">&#34;example.com&#34;</span> <span style="color:#e6db74">&#34;example.org&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>ALLOWED_STATUS_CODES<span style="color:#f92672">=(</span><span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#e6db74">&#34;301&#34;</span> <span style="color:#e6db74">&#34;302&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–ç”¨æˆ·IPåœ°å€</span>
</span></span><span style="display:flex;"><span>USER_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo $SSH_CLIENT | awk <span style="color:#e6db74">&#39;{print $1}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–ç”¨æˆ·ç™»å½•æ—¶è¿œç¨‹ä¸»æœºçš„åŸŸåå’ŒçŠ¶æ€ç </span>
</span></span><span style="display:flex;"><span>REMOTE_DOMAIN<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>nslookup $USER_IP | awk -F<span style="color:#e6db74">&#39;=&#39;</span> <span style="color:#e6db74">&#39;/name/{print $2}&#39;</span> | sed <span style="color:#e6db74">&#39;s/\.$//&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>REMOTE_STATUS_CODE<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s -o /dev/null -I -w <span style="color:#e6db74">&#34;%{http_code}&#34;</span> http://$REMOTE_DOMAIN<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ£€æŸ¥è¿œç¨‹ä¸»æœºçš„åŸŸåå’ŒçŠ¶æ€ç æ˜¯å¦è¢«å…è®¸</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34; </span><span style="color:#e6db74">${</span>ALLOWED_DOMAINS[*]<span style="color:#e6db74">}</span><span style="color:#e6db74"> &#34;</span> <span style="color:#f92672">=</span>~ <span style="color:#e6db74">&#34; </span><span style="color:#e6db74">${</span>REMOTE_DOMAIN<span style="color:#e6db74">}</span><span style="color:#e6db74"> &#34;</span> <span style="color:#f92672">]]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34; </span><span style="color:#e6db74">${</span>ALLOWED_STATUS_CODES[*]<span style="color:#e6db74">}</span><span style="color:#e6db74"> &#34;</span> <span style="color:#f92672">=</span>~ <span style="color:#e6db74">&#34; </span><span style="color:#e6db74">${</span>REMOTE_STATUS_CODE<span style="color:#e6db74">}</span><span style="color:#e6db74"> &#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Access granted to </span>$REMOTE_DOMAIN<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Access denied to </span>$REMOTE_DOMAIN<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span></span></span></code></pre></div></blockquote>
<ul>
<li>ç¤ºä¾‹è„šæœ¬ï¼Œå®ƒä¼šè¿‡æ»¤ç½‘ç«™åå°ç™»å½•çš„<code>IP</code>åœ°å€å’ŒçŠ¶æ€ç ï¼Œå°†ä¸åœ¨é¢„å®šä¹‰æ–‡ä»¶åˆ—è¡¨ä¸­çš„IPåœ°å€å‘é€åˆ°<code>Telegram</code>é€šçŸ¥ç»„ã€‚</li>
</ul>
<blockquote>
<ul>
<li>è„šæœ¬ä¼šæ£€æŸ¥è¿œç¨‹ä¸»æœºçš„çŠ¶æ€ç æ˜¯å¦ä¸º<code>200</code>ã€‚å¦‚æœæ˜¯ï¼Œåˆ™å®ƒå°†ä»æ–‡ä»¶ä¸­æ£€æŸ¥è¿œç¨‹ä¸»æœºçš„IPåœ°å€æ˜¯å¦åœ¨å…è®¸çš„åˆ—è¡¨ä¸­ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ˜¾ç¤º<code>Access granted</code>ï¼Œå¦åˆ™å°†å‘é€<code>Telegram</code>å‘Šè­¦ï¼Œå¹¶æ˜¾ç¤º<code>Access denied</code>ã€‚è¯·æ³¨æ„ï¼Œæ‚¨éœ€è¦å°†<code>YOUR_TELEGRAM_API_TOKEN</code>å’Œ<code>YOUR_TELEGRAM_CHAT_ID</code>æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„<code>Telegram API Token</code>å’Œ<code>Chat ID</code>ã€‚</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é¢„å®šä¹‰å…è®¸ç™»å½•çš„IPåœ°å€åˆ—è¡¨æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>ALLOWED_IP_LIST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;allowed_ips.txt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®šä¹‰Telegramé€šçŸ¥ç»„çš„API Tokenå’ŒChat ID</span>
</span></span><span style="display:flex;"><span>TELEGRAM_API_TOKEN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_TELEGRAM_API_TOKEN&#34;</span>
</span></span><span style="display:flex;"><span>TELEGRAM_CHAT_ID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_TELEGRAM_CHAT_ID&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–ç”¨æˆ·IPåœ°å€</span>
</span></span><span style="display:flex;"><span>USER_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo $SSH_CLIENT | awk <span style="color:#e6db74">&#39;{print $1}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–ç”¨æˆ·ç™»å½•æ—¶è¿œç¨‹ä¸»æœºçš„çŠ¶æ€ç </span>
</span></span><span style="display:flex;"><span>REMOTE_STATUS_CODE<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s -o /dev/null -I -w <span style="color:#e6db74">&#34;%{http_code}&#34;</span> http://example.com/login<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ£€æŸ¥è¿œç¨‹ä¸»æœºçš„çŠ¶æ€ç æ˜¯å¦ä¸º200</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span> -eq <span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># æ£€æŸ¥è¿œç¨‹ä¸»æœºçš„IPåœ°å€æ˜¯å¦åœ¨å…è®¸çš„åˆ—è¡¨ä¸­</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> grep -Fxq <span style="color:#e6db74">&#34;</span>$USER_IP<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span>$ALLOWED_IP_LIST<span style="color:#e6db74">&#34;</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Access granted to </span>$USER_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        exit <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># å‘é€Telegramå‘Šè­¦</span>
</span></span><span style="display:flex;"><span>        MESSAGE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Unauthorized login attempt from IP </span>$USER_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        URL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://api.telegram.org/bot</span>$TELEGRAM_API_TOKEN<span style="color:#e6db74">/sendMessage&#34;</span>
</span></span><span style="display:flex;"><span>        curl -s -X POST $URL -d chat_id<span style="color:#f92672">=</span>$TELEGRAM_CHAT_ID -d text<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$MESSAGE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Access denied to </span>$USER_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Access denied to </span>$USER_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span></span></span></code></pre></div></blockquote>
<ul>
<li>ç¤ºä¾‹è„šæœ¬ï¼Œç”¨äºè¿‡æ»¤ç½‘ç«™åå°ç™»å½•<code>URL</code>çš„<code>IP</code>åœ°å€å’ŒçŠ¶æ€ç ï¼Œå°†ä¸åœ¨é¢„å®šä¹‰æ–‡ä»¶åˆ—è¡¨ä¸­çš„<code>IP</code>åœ°å€å‘é€åˆ°<code>Telegram</code>é€šçŸ¥ç»„ã€‚</li>
</ul>
<blockquote>
<ul>
<li>è„šæœ¬ä¼šå‘é€ä¸€ä¸ª<code>HTTP</code>è¯·æ±‚æ¥æ£€æŸ¥ç½‘ç«™åå°ç™»å½•<code>URL</code>çš„<code>IP</code>åœ°å€å’ŒçŠ¶æ€ç ã€‚å¦‚æœçŠ¶æ€ç ä¸º<code>200</code>ï¼Œåˆ™å®ƒå°†ä»<code>HTTP</code>å“åº”ä¸­æå–è¿œç¨‹ä¸»æœºçš„IPåœ°å€ï¼Œå¹¶ä»æ–‡ä»¶ä¸­æ£€æŸ¥å®ƒæ˜¯å¦åœ¨å…è®¸çš„åˆ—è¡¨ä¸­ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ˜¾ç¤º<code>Access granted</code>ï¼Œå¦åˆ™å°†å‘é€<code>Telegram</code>å‘Šè­¦ï¼Œå¹¶æ˜¾ç¤º<code>Access denied</code>ã€‚è¯·æ³¨æ„ï¼Œæ‚¨éœ€è¦å°†<code>YOUR_TELEGRAM_API_TOKEN</code>å’Œ<code>YOUR_TELEGRAM_CHAT_ID</code>æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„<code>Telegram API Token</code>å’Œ<code>Chat ID</code>ï¼Œå¹¶æ ¹æ®éœ€è¦ä¿®æ”¹<code>LOGIN_URL</code>å’Œ<code>REQUEST_HEADERS</code>ã€‚</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é¢„å®šä¹‰å…è®¸ç™»å½•çš„IPåœ°å€åˆ—è¡¨æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>ALLOWED_IP_LIST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;allowed_ips.txt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®šä¹‰éœ€è¦æ£€æŸ¥çš„ç½‘ç«™åå°ç™»å½•URLå’Œè¯·æ±‚å¤´ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>LOGIN_URL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://example.com/admin/login&#34;</span>
</span></span><span style="display:flex;"><span>REQUEST_HEADERS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;-H &#39;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:90.0) Gecko/20100101 Firefox/90.0&#39; -H &#39;Accept-Language: en-US,en;q=0.5&#39;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®šä¹‰Telegramé€šçŸ¥ç»„çš„API Tokenå’ŒChat ID</span>
</span></span><span style="display:flex;"><span>TELEGRAM_API_TOKEN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_TELEGRAM_API_TOKEN&#34;</span>
</span></span><span style="display:flex;"><span>TELEGRAM_CHAT_ID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_TELEGRAM_CHAT_ID&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–ç”¨æˆ·IPåœ°å€</span>
</span></span><span style="display:flex;"><span>USER_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s -o /dev/null -w <span style="color:#e6db74">&#34;%{http_code}:%{remote_ip}&#34;</span> $LOGIN_URL -H <span style="color:#e6db74">&#34;</span>$REQUEST_HEADERS<span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–è¿œç¨‹ä¸»æœºçš„çŠ¶æ€ç </span>
</span></span><span style="display:flex;"><span>REMOTE_STATUS_CODE<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">&#34;</span>$USER_IP<span style="color:#e6db74">&#34;</span> | cut -d<span style="color:#e6db74">&#39;:&#39;</span> -f1<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ£€æŸ¥è¿œç¨‹ä¸»æœºçš„çŠ¶æ€ç æ˜¯å¦ä¸º200</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span> -eq <span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># è·å–è¿œç¨‹ä¸»æœºçš„IPåœ°å€</span>
</span></span><span style="display:flex;"><span>    REMOTE_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">&#34;</span>$USER_IP<span style="color:#e6db74">&#34;</span> | cut -d<span style="color:#e6db74">&#39;:&#39;</span> -f2<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># æ£€æŸ¥è¿œç¨‹ä¸»æœºçš„IPåœ°å€æ˜¯å¦åœ¨å…è®¸çš„åˆ—è¡¨ä¸­</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> grep -Fxq <span style="color:#e6db74">&#34;</span>$REMOTE_IP<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span>$ALLOWED_IP_LIST<span style="color:#e6db74">&#34;</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Access granted to </span>$REMOTE_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        exit <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># å‘é€Telegramå‘Šè­¦</span>
</span></span><span style="display:flex;"><span>        MESSAGE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Unauthorized login attempt from IP </span>$REMOTE_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        URL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://api.telegram.org/bot</span>$TELEGRAM_API_TOKEN<span style="color:#e6db74">/sendMessage&#34;</span>
</span></span><span style="display:flex;"><span>        curl -s -X POST $URL -d chat_id<span style="color:#f92672">=</span>$TELEGRAM_CHAT_ID -d text<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$MESSAGE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Access denied to </span>$REMOTE_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Access denied with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span></span></span></code></pre></div></blockquote>
<ul>
<li>ç¨å¾®ä¿®æ”¹çš„è„šæœ¬ï¼Œç”¨äºè¿‡æ»¤ç½‘ç«™åå°ç™»å½•æ—¥å¿—æ–‡ä»¶ä¸­çš„<code>URL</code>ã€<code>IP</code>åœ°å€å’ŒçŠ¶æ€ç ï¼Œå°†ä¸åœ¨é¢„å®šä¹‰æ–‡ä»¶åˆ—è¡¨ä¸­çš„<code>IP</code>åœ°å€å‘é€åˆ°<code>Telegram</code>é€šçŸ¥ç»„ï¼š</li>
</ul>
<blockquote>
<ul>
<li>è¯¥è„šæœ¬ä¼šä»æ—¥å¿—æ–‡ä»¶ä¸­è¿‡æ»¤å‡ºç™»å½•<code>URL</code>ã€<code>IP</code>åœ°å€å’ŒçŠ¶æ€ç ä¿¡æ¯ï¼Œå¹¶éå†è¿™äº›ä¿¡æ¯ã€‚å¯¹äºæ¯ä¸ª<code>IP</code>åœ°å€å’ŒçŠ¶æ€ç ï¼Œå®ƒå°†æ£€æŸ¥çŠ¶æ€ç æ˜¯å¦ä¸º<code>200</code>ï¼Œç„¶åæ£€æŸ¥<code>IP</code>åœ°å€æ˜¯å¦åœ¨å…è®¸çš„åˆ—è¡¨ä¸­ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ˜¾ç¤º<code>Access granted</code>ï¼Œå¦åˆ™å°†å‘é€<code>Telegram</code>å‘Šè­¦ï¼Œå¹¶æ˜¾ç¤º<code>Access denied</code>ã€‚è¯·æ³¨æ„ï¼Œæ‚¨éœ€è¦å°†<code>YOUR_TELEGRAM_API_TOKEN</code>å’Œ<code>YOUR_TELEGRAM_CHAT_ID</code>æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„<code>Telegram API Token</code>å’Œ<code>Chat ID</code>ï¼Œå¹¶æ ¹æ®éœ€è¦ä¿®æ”¹<code>ALLOWED_IP_LIST</code>å’Œ<code>LOG_FILE</code>ã€‚</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é¢„å®šä¹‰å…è®¸ç™»å½•çš„IPåœ°å€åˆ—è¡¨æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>ALLOWED_IP_LIST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;allowed_ips.txt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®šä¹‰éœ€è¦æ£€æŸ¥çš„ç½‘ç«™åå°ç™»å½•æ—¥å¿—æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>LOG_FILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/var/log/nginx/access.log&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®šä¹‰Telegramé€šçŸ¥ç»„çš„API Tokenå’ŒChat ID</span>
</span></span><span style="display:flex;"><span>TELEGRAM_API_TOKEN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_TELEGRAM_API_TOKEN&#34;</span>
</span></span><span style="display:flex;"><span>TELEGRAM_CHAT_ID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_TELEGRAM_CHAT_ID&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨grepå‘½ä»¤ä»æ—¥å¿—æ–‡ä»¶ä¸­è¿‡æ»¤å‡ºç™»å½•URLã€IPåœ°å€å’ŒçŠ¶æ€ç </span>
</span></span><span style="display:flex;"><span>LOG_FILTER<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>grep -E <span style="color:#e6db74">&#39;\/admin\/login.*HTTP\/1\.[01]&#34; 200&#39;</span> $LOG_FILE | awk <span style="color:#e6db74">&#39;{print $1, $7, $9}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># éå†è¿‡æ»¤å‡ºçš„æ—¥å¿—ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> read -r log_info; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># åˆ†åˆ«æå–IPåœ°å€å’ŒçŠ¶æ€ç </span>
</span></span><span style="display:flex;"><span>    REMOTE_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">&#34;</span>$log_info<span style="color:#e6db74">&#34;</span> | awk <span style="color:#e6db74">&#39;{print $1}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>    REMOTE_STATUS_CODE<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">&#34;</span>$log_info<span style="color:#e6db74">&#34;</span> | awk <span style="color:#e6db74">&#39;{print $2}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># æ£€æŸ¥çŠ¶æ€ç æ˜¯å¦ä¸º200</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span> -eq <span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># æ£€æŸ¥IPåœ°å€æ˜¯å¦åœ¨å…è®¸çš„åˆ—è¡¨ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> grep -Fxq <span style="color:#e6db74">&#34;</span>$REMOTE_IP<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">&#34;</span>$ALLOWED_IP_LIST<span style="color:#e6db74">&#34;</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>            echo <span style="color:#e6db74">&#34;Access granted to </span>$REMOTE_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># å‘é€Telegramå‘Šè­¦</span>
</span></span><span style="display:flex;"><span>            MESSAGE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Unauthorized login attempt from IP </span>$REMOTE_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>            URL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://api.telegram.org/bot</span>$TELEGRAM_API_TOKEN<span style="color:#e6db74">/sendMessage&#34;</span>
</span></span><span style="display:flex;"><span>            curl -s -X POST $URL -d chat_id<span style="color:#f92672">=</span>$TELEGRAM_CHAT_ID -d text<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$MESSAGE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>            echo <span style="color:#e6db74">&#34;Access denied to </span>$REMOTE_IP<span style="color:#e6db74"> with status code </span>$REMOTE_STATUS_CODE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span> <span style="color:#f92672">&lt;&lt;&lt;</span> <span style="color:#e6db74">&#34;</span>$LOG_FILTER<span style="color:#e6db74">&#34;</span></span></span></code></pre></div></blockquote>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation showVisitedLinks">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <style>
            #R-logo svg,
            #R-logo svg * {
              color: #282828;
              color: var(--MENU-SECTIONS-BG-color);
              fill: #282828 !important;
              fill: var(--MENU-SECTIONS-BG-color) !important;
              opacity: .945;
            }
            a#R-logo {
              color: #282828;
              color: var(--MENU-SECTIONS-BG-color);
              font-family: 'Work Sans', 'Helvetica', 'Tahoma', 'Geneva', 'Arial', sans-serif;
              font-size: 1.875rem;
              font-weight: 300;
              margin-top: -.8125rem;
              max-width: 60%;
              text-transform: uppercase;
              width: 14.125rem;
              white-space: nowrap;
            }
            a#R-logo:hover {
              color: #282828;
              color: var(--MENU-SECTIONS-BG-color);
            }
            #R-logo svg {
              margin-bottom: -1.25rem;
              margin-inline-start: -1.47rem;
              margin-inline-end: .5rem;
              width: 40.5%;
            }
            @media only all and (max-width: 59.999rem) {
              a#R-logo {
                font-size: 1.5625rem;
                margin-top: -.1875rem;
              }
              #R-logo svg {
                margin-bottom: -.75rem;
                margin-inline-start: -1.47rem;
                margin-inline-end: .5rem;
              }
            }
          </style>
          <a id="R-logo" href="../../../../">
            <img src="images/s2-1.png" alt="äºŒå“¥">
          </a>
        </div>

        <search><form action="../../../../search.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="../../../../js/auto-complete.js?1723699580" defer></script>
        <script src="../../../../js/lunr/lunr.min.js?1723699580" defer></script>
        <script src="../../../../js/lunr/lunr.stemmer.support.min.js?1723699580" defer></script>
        <script src="../../../../js/lunr/lunr.multi.min.js?1723699580" defer></script>
        <script src="../../../../js/lunr/lunr.en.min.js?1723699580" defer></script>
        <script src="../../../../js/search.js?1723699580" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="../../../../"><i class='fa-fw fas fa-home'></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/basics/" class=""><input type="checkbox" id="R-section-a6deabe447afe1b2e1405bfc57ca61ff" aria-controls="R-subsections-a6deabe447afe1b2e1405bfc57ca61ff"><label for="R-section-a6deabe447afe1b2e1405bfc57ca61ff"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Basics</span></label><a class="padding" href="../../../../basics/"><i class="fa-solid fa-bars"></i> Basics<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-a6deabe447afe1b2e1405bfc57ca61ff" class="morespace collapsible-menu">
          <li data-nav-id="/basics/hugo_theme_next/" class="alwaysopen"><input type="checkbox" id="R-section-4c48b58c6275cad2a97afb5c467cac99" aria-controls="R-subsections-4c48b58c6275cad2a97afb5c467cac99" checked><label for="R-section-4c48b58c6275cad2a97afb5c467cac99"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Hugo_Theme_Next</span></label><a class="padding" href="../../../../basics/hugo_theme_next/">Hugo_Theme_Next<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-4c48b58c6275cad2a97afb5c467cac99" class="morespace collapsible-menu">
          <li data-nav-id="/basics/hugo_theme_next/emoji_support/" class=""><a class="padding" href="../../../../basics/hugo_theme_next/emoji_support/">Emoji_Support<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/basics/hugo_theme_next/custom_files/" class=""><a class="padding" href="../../../../basics/hugo_theme_next/custom_files/">Custom_Files<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/basics/video/" class="alwaysopen"><input type="checkbox" id="R-section-42af7fff84a4df6d7df07565c2262bba" aria-controls="R-subsections-42af7fff84a4df6d7df07565c2262bba" checked><label for="R-section-42af7fff84a4df6d7df07565c2262bba"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Video</span></label><a class="padding" href="../../../../basics/video/"><i class="fa-solid fa-video"></i> Video<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-42af7fff84a4df6d7df07565c2262bba" class="morespace collapsible-menu">
          <li data-nav-id="/basics/video/video_download/" class=""><a class="padding" href="../../../../basics/video/video_download/">Video<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/basics/markdown/" class="alwaysopen"><input type="checkbox" id="R-section-8d81245d2120aff81556115f7666a5e0" aria-controls="R-subsections-8d81245d2120aff81556115f7666a5e0" checked><label for="R-section-8d81245d2120aff81556115f7666a5e0"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu MarkDown</span></label><a class="padding" href="../../../../basics/markdown/"><i class="fa-brands fa-markdown"></i> MarkDown<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8d81245d2120aff81556115f7666a5e0" class="morespace collapsible-menu">
          <li data-nav-id="/basics/markdown/markdown_syntax/" class=""><a class="padding" href="../../../../basics/markdown/markdown_syntax/"><i class="fa-brands fa-markdown"></i> Markdown_Syntax<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/basics/ai/" class="alwaysopen"><input type="checkbox" id="R-section-cc50241241d2c4ea02a668bba6462573" aria-controls="R-subsections-cc50241241d2c4ea02a668bba6462573" checked><label for="R-section-cc50241241d2c4ea02a668bba6462573"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu AI</span></label><a class="padding" href="../../../../basics/ai/">AI<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-cc50241241d2c4ea02a668bba6462573" class="morespace collapsible-menu">
          <li data-nav-id="/basics/ai/chatgpt/" class=""><a class="padding" href="../../../../basics/ai/chatgpt/">ChatGPT<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/basics/template/" class="alwaysopen"><input type="checkbox" id="R-section-d35117bb3084276b1f0714ea8420a43e" aria-controls="R-subsections-d35117bb3084276b1f0714ea8420a43e" checked><label for="R-section-d35117bb3084276b1f0714ea8420a43e"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu template</span></label><a class="padding" href="../../../../basics/template/">template<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-d35117bb3084276b1f0714ea8420a43e" class="morespace collapsible-menu">
          <li data-nav-id="/basics/template/syntax_highlighting/" class=""><a class="padding" href="../../../../basics/template/syntax_highlighting/">Syntax_Highlighting<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/basics/template/qrcode_manager/" class=""><a class="padding" href="../../../../basics/template/qrcode_manager/">QRcode_Manager<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/basics/template/mermaid_charts/" class=""><a class="padding" href="../../../../basics/template/mermaid_charts/">Mermaid_Charts<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/basics/template/math_formula/" class=""><a class="padding" href="../../../../basics/template/math_formula/">Math Formula<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li></ul></li>
          <li data-nav-id="/language/" class=""><input type="checkbox" id="R-section-84e0c5289a63136422908a7e4241adc6" aria-controls="R-subsections-84e0c5289a63136422908a7e4241adc6"><label for="R-section-84e0c5289a63136422908a7e4241adc6"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Languges</span></label><a class="padding" href="../../../../language/"><i class="fa-solid fa-language"></i> Languges<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-84e0c5289a63136422908a7e4241adc6" class="morespace collapsible-menu">
          <li data-nav-id="/language/lua/" class="alwaysopen"><input type="checkbox" id="R-section-9000cbd7e4710ffe5c3bf153d3bb1374" aria-controls="R-subsections-9000cbd7e4710ffe5c3bf153d3bb1374" checked><label for="R-section-9000cbd7e4710ffe5c3bf153d3bb1374"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Lua</span></label><a class="padding" href="../../../../language/lua/">Lua<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-9000cbd7e4710ffe5c3bf153d3bb1374" class="morespace collapsible-menu">
          <li data-nav-id="/language/lua/language_lua/" class=""><a class="padding" href="../../../../language/lua/language_lua/">Lua<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/language/yaml/" class="alwaysopen"><input type="checkbox" id="R-section-7d1bf276ada0eceb02dd825b91e54998" aria-controls="R-subsections-7d1bf276ada0eceb02dd825b91e54998" checked><label for="R-section-7d1bf276ada0eceb02dd825b91e54998"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Yaml</span></label><a class="padding" href="../../../../language/yaml/">Yaml<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-7d1bf276ada0eceb02dd825b91e54998" class="morespace collapsible-menu">
          <li data-nav-id="/language/yaml/language-yaml/" class=""><a class="padding" href="../../../../language/yaml/language-yaml/">Yaml<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/language/golang/" class="alwaysopen"><input type="checkbox" id="R-section-68528191e10f5bc742856b3bb35d9f34" aria-controls="R-subsections-68528191e10f5bc742856b3bb35d9f34" checked><label for="R-section-68528191e10f5bc742856b3bb35d9f34"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Golang</span></label><a class="padding" href="../../../../language/golang/"><i class="fa-brands fa-golang"></i> Golang<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-68528191e10f5bc742856b3bb35d9f34" class="morespace collapsible-menu">
          <li data-nav-id="/language/golang/language-golang/" class=""><a class="padding" href="../../../../language/golang/language-golang/">Golang<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/language/python/" class="alwaysopen"><input type="checkbox" id="R-section-be2954e8559d07ab422f7ea1c72c5405" aria-controls="R-subsections-be2954e8559d07ab422f7ea1c72c5405" checked><label for="R-section-be2954e8559d07ab422f7ea1c72c5405"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Python</span></label><a class="padding" href="../../../../language/python/"><i class="fa-brands fa-python"></i> Python<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-be2954e8559d07ab422f7ea1c72c5405" class="morespace collapsible-menu">
          <li data-nav-id="/language/python/language-python-django/" class=""><a class="padding" href="../../../../language/python/language-python-django/">Django<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/language/python/language-python/" class=""><a class="padding" href="../../../../language/python/language-python/">Python<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/language/python/python-crawler/" class=""><a class="padding" href="../../../../language/python/python-crawler/">Crawler<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li></ul></li>
          <li data-nav-id="/services/" class=""><input type="checkbox" id="R-section-95afbf0e432a5495fcd79c6e50f92da5" aria-controls="R-subsections-95afbf0e432a5495fcd79c6e50f92da5"><label for="R-section-95afbf0e432a5495fcd79c6e50f92da5"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Services</span></label><a class="padding" href="../../../../services/"><i class="fa-solid fa-server"></i> Services<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-95afbf0e432a5495fcd79c6e50f92da5" class="morespace collapsible-menu">
          <li data-nav-id="/services/shopping/" class="alwaysopen"><input type="checkbox" id="R-section-e74c46d7456e8bcd8a5b287628f47e95" aria-controls="R-subsections-e74c46d7456e8bcd8a5b287628f47e95" checked><label for="R-section-e74c46d7456e8bcd8a5b287628f47e95"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Shopping</span></label><a class="padding" href="../../../../services/shopping/"><i class="fa-solid fa-shop"></i> Shopping<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-e74c46d7456e8bcd8a5b287628f47e95" class="morespace collapsible-menu">
          <li data-nav-id="/services/shopping/install_prestashop/" class=""><a class="padding" href="../../../../services/shopping/install_prestashop/">PrestaShop<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/services/shopping/install_opencart/" class=""><a class="padding" href="../../../../services/shopping/install_opencart/">OpenCart<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/services/shopping/install_jeepay/" class=""><a class="padding" href="../../../../services/shopping/install_jeepay/">JeePay<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/services/certificate/" class=""><a class="padding" href="../../../../services/certificate/"><i class="fa-solid fa-certificate"></i> Certificate<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/services/blog/" class="alwaysopen"><input type="checkbox" id="R-section-47d595cf5fa5000ee12b114cac976798" aria-controls="R-subsections-47d595cf5fa5000ee12b114cac976798" checked><label for="R-section-47d595cf5fa5000ee12b114cac976798"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Blog</span></label><a class="padding" href="../../../../services/blog/"><i class="fa-solid fa-blog"></i> Blog<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-47d595cf5fa5000ee12b114cac976798" class="morespace collapsible-menu">
          <li data-nav-id="/services/blog/install-blog-hexo/" class=""><a class="padding" href="../../../../services/blog/install-blog-hexo/">Hexo<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li></ul></li>
          <li data-nav-id="/systems/" class="parent "><input type="checkbox" id="R-section-30e48890399c6ecdfb15937b01bd309a" aria-controls="R-subsections-30e48890399c6ecdfb15937b01bd309a" checked><label for="R-section-30e48890399c6ecdfb15937b01bd309a"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Systems</span></label><a class="padding" href="../../../../systems/"><i class="fa-solid fa-gear"></i> Systems<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-30e48890399c6ecdfb15937b01bd309a" class="morespace collapsible-menu">
          <li data-nav-id="/systems/activation_key/" class="alwaysopen"><input type="checkbox" id="R-section-b7cd59ef441cb6c4b9b5d009ebd42017" aria-controls="R-subsections-b7cd59ef441cb6c4b9b5d009ebd42017" checked><label for="R-section-b7cd59ef441cb6c4b9b5d009ebd42017"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Activation Key</span></label><a class="padding" href="../../../../systems/activation_key/"><i class="fa-solid fa-key"></i> Activation Key<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-b7cd59ef441cb6c4b9b5d009ebd42017" class="morespace collapsible-menu">
          <li data-nav-id="/systems/activation_key/windows/" class=""><a class="padding" href="../../../../systems/activation_key/windows/">Windows<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/activation_key/vmware/" class=""><a class="padding" href="../../../../systems/activation_key/vmware/">Vmware<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/activation_key/sublime_text/" class=""><a class="padding" href="../../../../systems/activation_key/sublime_text/">Sublime Text<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/black-macos/" class=""><a class="padding" href="../../../../systems/black-macos/"><i class="fa-brands fa-apple"></i> Black MacOs<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/" class="parent alwaysopen"><input type="checkbox" id="R-section-de656359c9ce2d10a06145d02d07bd35" aria-controls="R-subsections-de656359c9ce2d10a06145d02d07bd35" checked><label for="R-section-de656359c9ce2d10a06145d02d07bd35"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Linux</span></label><a class="padding" href="../../../../systems/linux/"><i class="fa-brands fa-linux"></i> Linux<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-de656359c9ce2d10a06145d02d07bd35" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/ansible/" class="alwaysopen"><input type="checkbox" id="R-section-d91fd45339335865ca8b3da1c08c6f27" aria-controls="R-subsections-d91fd45339335865ca8b3da1c08c6f27" checked><label for="R-section-d91fd45339335865ca8b3da1c08c6f27"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Ansible</span></label><a class="padding" href="../../../../systems/linux/ansible/"> Ansible<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-d91fd45339335865ca8b3da1c08c6f27" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/ansible/use_slatstack/" class=""><a class="padding" href="../../../../systems/linux/ansible/use_slatstack/">Use_Slatstack<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/ansible/use_ansible/" class=""><a class="padding" href="../../../../systems/linux/ansible/use_ansible/">Use_Ansible<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/ansible/install_slatstack/" class=""><a class="padding" href="../../../../systems/linux/ansible/install_slatstack/">Install_Slatstack<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/ansible/install_ansible/" class=""><a class="padding" href="../../../../systems/linux/ansible/install_ansible/">Install_Ansible<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/backend/" class="alwaysopen"><input type="checkbox" id="R-section-a8a02cab0c95abb1fddb36006407a99c" aria-controls="R-subsections-a8a02cab0c95abb1fddb36006407a99c" checked><label for="R-section-a8a02cab0c95abb1fddb36006407a99c"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Backend</span></label><a class="padding" href="../../../../systems/linux/backend/">Backend<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-a8a02cab0c95abb1fddb36006407a99c" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/backend/tomcat/" class="alwaysopen"><input type="checkbox" id="R-section-a37d588e6abdd2fd4d9ed098f2480ef4" aria-controls="R-subsections-a37d588e6abdd2fd4d9ed098f2480ef4" checked><label for="R-section-a37d588e6abdd2fd4d9ed098f2480ef4"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Tomcat</span></label><a class="padding" href="../../../../systems/linux/backend/tomcat/">Tomcat<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-a37d588e6abdd2fd4d9ed098f2480ef4" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/backend/tomcat/configure_tomcat/" class=""><a class="padding" href="../../../../systems/linux/backend/tomcat/configure_tomcat/">Configure_Tomcat<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/backend/tomcat/install_tomcat/" class=""><a class="padding" href="../../../../systems/linux/backend/tomcat/install_tomcat/">Install_Tomcat<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/backend/php/" class="alwaysopen"><input type="checkbox" id="R-section-0f591cf97f2213fd2c12be6cea731d4e" aria-controls="R-subsections-0f591cf97f2213fd2c12be6cea731d4e" checked><label for="R-section-0f591cf97f2213fd2c12be6cea731d4e"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu PHP</span></label><a class="padding" href="../../../../systems/linux/backend/php/"><i class="fa-brands fa-php"></i> PHP<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-0f591cf97f2213fd2c12be6cea731d4e" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/backend/php/configure_php_expand/" class=""><a class="padding" href="../../../../systems/linux/backend/php/configure_php_expand/">Configure_PHP_Expand<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/backend/php/install_php/" class=""><a class="padding" href="../../../../systems/linux/backend/php/install_php/">Install_PHP<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li></ul></li>
          <li data-nav-id="/systems/linux/cdn/" class=""><a class="padding" href="../../../../systems/linux/cdn/">CDN<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/codes/" class="alwaysopen"><input type="checkbox" id="R-section-b1a3b874591fa49fdbf0d03a3df78c1a" aria-controls="R-subsections-b1a3b874591fa49fdbf0d03a3df78c1a" checked><label for="R-section-b1a3b874591fa49fdbf0d03a3df78c1a"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Codes</span></label><a class="padding" href="../../../../systems/linux/codes/"><i class="fa-solid fa-code"></i> Codes<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-b1a3b874591fa49fdbf0d03a3df78c1a" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/codes/configure_sonarqube/" class=""><a class="padding" href="../../../../systems/linux/codes/configure_sonarqube/">Configure_SonarQube<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/codes/install_sonarqube/" class=""><a class="padding" href="../../../../systems/linux/codes/install_sonarqube/">Install_SonarQube<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/crontab/" class="alwaysopen"><input type="checkbox" id="R-section-5dbcbf4ab907358eb8cdb15d3a6874c0" aria-controls="R-subsections-5dbcbf4ab907358eb8cdb15d3a6874c0" checked><label for="R-section-5dbcbf4ab907358eb8cdb15d3a6874c0"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Crontab</span></label><a class="padding" href="../../../../systems/linux/crontab/">Crontab<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-5dbcbf4ab907358eb8cdb15d3a6874c0" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/crontab/install_xxl_job/" class=""><a class="padding" href="../../../../systems/linux/crontab/install_xxl_job/">Install Xxl Job<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/daemon/" class="alwaysopen"><input type="checkbox" id="R-section-adb931a8154ce0d9ab51418f1e06b3ab" aria-controls="R-subsections-adb931a8154ce0d9ab51418f1e06b3ab" checked><label for="R-section-adb931a8154ce0d9ab51418f1e06b3ab"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Daemon</span></label><a class="padding" href="../../../../systems/linux/daemon/">Daemon<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-adb931a8154ce0d9ab51418f1e06b3ab" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/daemon/install_supervisord/" class=""><a class="padding" href="../../../../systems/linux/daemon/install_supervisord/">Install_Supervisord<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/databases/" class="alwaysopen"><input type="checkbox" id="R-section-8d2e8b3049adc0e55fd190214593db4d" aria-controls="R-subsections-8d2e8b3049adc0e55fd190214593db4d" checked><label for="R-section-8d2e8b3049adc0e55fd190214593db4d"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Databases</span></label><a class="padding" href="../../../../systems/linux/databases/"><i class="fa-solid fa-database"></i> Databases<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8d2e8b3049adc0e55fd190214593db4d" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/databases/install_clickhouse/" class=""><a class="padding" href="../../../../systems/linux/databases/install_clickhouse/">Install_ClickHouse<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/update_mysql5-7_to_mysql8/" class=""><a class="padding" href="../../../../systems/linux/databases/update_mysql5-7_to_mysql8/">Update_Mysql5 7_To_Mysql8<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_ydb/" class=""><a class="padding" href="../../../../systems/linux/databases/install_ydb/">Install_Ydb<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_postgresql/" class=""><a class="padding" href="../../../../systems/linux/databases/install_postgresql/">Install_PostgreSQL<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_otter/" class=""><a class="padding" href="../../../../systems/linux/databases/install_otter/">Install_Otter<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_mysql_pxc/" class=""><a class="padding" href="../../../../systems/linux/databases/install_mysql_pxc/">Install_Mysql_PXC<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_mysql_router/" class=""><a class="padding" href="../../../../systems/linux/databases/install_mysql_router/">Install_MySQL_Router<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_maxscale/" class=""><a class="padding" href="../../../../systems/linux/databases/install_maxscale/">Install_MaxScale<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_proxysql/" class=""><a class="padding" href="../../../../systems/linux/databases/install_proxysql/">Install_ProxySQL<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_manticore_search/" class=""><a class="padding" href="../../../../systems/linux/databases/install_manticore_search/">Install_Manticore_Search<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_canal/" class=""><a class="padding" href="../../../../systems/linux/databases/install_canal/">Install_Canal<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/use_mysql/" class=""><a class="padding" href="../../../../systems/linux/databases/use_mysql/">Use_Mysql<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/databases/install_mysql/" class=""><a class="padding" href="../../../../systems/linux/databases/install_mysql/">Install_Mysql<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/email/" class="alwaysopen"><input type="checkbox" id="R-section-89489275bf8e3d75bdaa43edad4e280b" aria-controls="R-subsections-89489275bf8e3d75bdaa43edad4e280b" checked><label for="R-section-89489275bf8e3d75bdaa43edad4e280b"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Email</span></label><a class="padding" href="../../../../systems/linux/email/"><i class="fa-solid fa-envelope"></i> Email<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-89489275bf8e3d75bdaa43edad4e280b" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/email/install_iredmail/" class=""><a class="padding" href="../../../../systems/linux/email/install_iredmail/">Install_iRedMail<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/firewalld/" class="alwaysopen"><input type="checkbox" id="R-section-8a9c9b45fea025ec58be52ee30e98fab" aria-controls="R-subsections-8a9c9b45fea025ec58be52ee30e98fab" checked><label for="R-section-8a9c9b45fea025ec58be52ee30e98fab"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Firewalld</span></label><a class="padding" href="../../../../systems/linux/firewalld/">Firewalld<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8a9c9b45fea025ec58be52ee30e98fab" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/firewalld/use_firewalld/" class=""><a class="padding" href="../../../../systems/linux/firewalld/use_firewalld/">Use_Firewalld<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/gitlab/" class="alwaysopen"><input type="checkbox" id="R-section-eb6fb2d7fa852777afa9d0bd3d061e2f" aria-controls="R-subsections-eb6fb2d7fa852777afa9d0bd3d061e2f" checked><label for="R-section-eb6fb2d7fa852777afa9d0bd3d061e2f"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Gitlab</span></label><a class="padding" href="../../../../systems/linux/gitlab/"><i class="fa-brands fa-gitlab"></i> Gitlab<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-eb6fb2d7fa852777afa9d0bd3d061e2f" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/gitlab/use_gitrunner/" class=""><a class="padding" href="../../../../systems/linux/gitlab/use_gitrunner/">Use_Gitrunner<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/gitlab/use_gitlab/" class=""><a class="padding" href="../../../../systems/linux/gitlab/use_gitlab/">Use_Gitlab<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/gitlab/use_git_command/" class=""><a class="padding" href="../../../../systems/linux/gitlab/use_git_command/">Use_Git_Command<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/gitlab/install_gogs/" class=""><a class="padding" href="../../../../systems/linux/gitlab/install_gogs/">Install_Gogs<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/gitlab/install_gitlab/" class=""><a class="padding" href="../../../../systems/linux/gitlab/install_gitlab/">Install_Gitlab<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/gitlab/install_gitlab_runner/" class=""><a class="padding" href="../../../../systems/linux/gitlab/install_gitlab_runner/">Install_Gitlab_Runner<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/gitlab/install_gitea/" class=""><a class="padding" href="../../../../systems/linux/gitlab/install_gitea/">Install_Gitea<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/haproxy/" class="alwaysopen"><input type="checkbox" id="R-section-7bc7ce397a3c135c33a1fe515157e26b" aria-controls="R-subsections-7bc7ce397a3c135c33a1fe515157e26b" checked><label for="R-section-7bc7ce397a3c135c33a1fe515157e26b"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu HAProxy</span></label><a class="padding" href="../../../../systems/linux/haproxy/">HAProxy<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-7bc7ce397a3c135c33a1fe515157e26b" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/haproxy/install_proxy/" class=""><a class="padding" href="../../../../systems/linux/haproxy/install_proxy/">Install_Proxy<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/haproxy/install_haproxy/" class=""><a class="padding" href="../../../../systems/linux/haproxy/install_haproxy/">Install_HAProxy<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/install_system/" class="alwaysopen"><input type="checkbox" id="R-section-b49d7d5d0bcf33190967e60032a76ba5" aria-controls="R-subsections-b49d7d5d0bcf33190967e60032a76ba5" checked><label for="R-section-b49d7d5d0bcf33190967e60032a76ba5"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Install_System</span></label><a class="padding" href="../../../../systems/linux/install_system/">Install_System<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-b49d7d5d0bcf33190967e60032a76ba5" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/install_system/install_cobbler/" class=""><a class="padding" href="../../../../systems/linux/install_system/install_cobbler/">Install_Cobbler<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/install_system/install_kickstart/" class=""><a class="padding" href="../../../../systems/linux/install_system/install_kickstart/">Install_Kickstart<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/jdk/" class="alwaysopen"><input type="checkbox" id="R-section-36efe864ba441ecbd1a5221b646d395f" aria-controls="R-subsections-36efe864ba441ecbd1a5221b646d395f" checked><label for="R-section-36efe864ba441ecbd1a5221b646d395f"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu JDK</span></label><a class="padding" href="../../../../systems/linux/jdk/">JDK<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-36efe864ba441ecbd1a5221b646d395f" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/jdk/install_jdk_and_jar_run/" class=""><a class="padding" href="../../../../systems/linux/jdk/install_jdk_and_jar_run/">Install_Jdk_And_Jar_Run<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/jenkins/" class="alwaysopen"><input type="checkbox" id="R-section-f690c0dab88e64f38122fac9ce428cdf" aria-controls="R-subsections-f690c0dab88e64f38122fac9ce428cdf" checked><label for="R-section-f690c0dab88e64f38122fac9ce428cdf"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Jenkins</span></label><a class="padding" href="../../../../systems/linux/jenkins/"><i class="fa-brands fa-jenkins"></i> Jenkins<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-f690c0dab88e64f38122fac9ce428cdf" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/jenkins/use_jenkins/" class=""><a class="padding" href="../../../../systems/linux/jenkins/use_jenkins/">Use_Jenkins<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/jenkins/install_jenkins/" class=""><a class="padding" href="../../../../systems/linux/jenkins/install_jenkins/">Install_Jenkins<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/jumpserver/" class="alwaysopen"><input type="checkbox" id="R-section-f322e41abfd5771d40b756709835fa3f" aria-controls="R-subsections-f322e41abfd5771d40b756709835fa3f" checked><label for="R-section-f322e41abfd5771d40b756709835fa3f"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu JumpServer</span></label><a class="padding" href="../../../../systems/linux/jumpserver/">JumpServer<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-f322e41abfd5771d40b756709835fa3f" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/jumpserver/use_jumpserver/" class=""><a class="padding" href="../../../../systems/linux/jumpserver/use_jumpserver/">Use_JumpServer<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/jumpserver/install_jumpserver/" class=""><a class="padding" href="../../../../systems/linux/jumpserver/install_jumpserver/">Install_JumpServer<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/keepalived/" class="alwaysopen"><input type="checkbox" id="R-section-3ca69c2a3ab36ad947b2dfaf7b98bf13" aria-controls="R-subsections-3ca69c2a3ab36ad947b2dfaf7b98bf13" checked><label for="R-section-3ca69c2a3ab36ad947b2dfaf7b98bf13"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Keepalived</span></label><a class="padding" href="../../../../systems/linux/keepalived/">Keepalived<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-3ca69c2a3ab36ad947b2dfaf7b98bf13" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/keepalived/install_keepalived/" class=""><a class="padding" href="../../../../systems/linux/keepalived/install_keepalived/">Install_Keepalived<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/kubernetes/" class="alwaysopen"><input type="checkbox" id="R-section-5c5867ab6fb998140913e96100f44665" aria-controls="R-subsections-5c5867ab6fb998140913e96100f44665" checked><label for="R-section-5c5867ab6fb998140913e96100f44665"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Kubernetes</span></label><a class="padding" href="../../../../systems/linux/kubernetes/">Kubernetes<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-5c5867ab6fb998140913e96100f44665" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/kubernetes/kubernetes_template/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/kubernetes_template/">Kubernetes_Template<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/kubernetes_command/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/kubernetes_command/">Kubernetes_Command<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/install_kubernetes/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/install_kubernetes/">Install_Kubernetes<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/install_k8s_rancher/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/install_k8s_rancher/">Install_K8s_Rancher<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/install_k8s_kubesphere/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/install_k8s_kubesphere/">Install_K8s_KubeSphere<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/install_k8s_harbor/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/install_k8s_harbor/">Install_K8s_Harbor<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/install_k8s_dashboard/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/install_k8s_dashboard/">Install_K8s_Dashboard<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/install_k8s_coredns/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/install_k8s_coredns/">Install_K8s_CoreDNS<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/install_k8s_argo_cd/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/install_k8s_argo_cd/">Install_K8s_Argo_CD<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/configure_k8s_storage/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/configure_k8s_storage/">Configure_K8s_Storage<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/configure_k8s_rancher/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/configure_k8s_rancher/">Configure_K8s_Rancher<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/configure_k8s_jcr/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/configure_k8s_jcr/">Configure_K8s_Jcr<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/configure_k8s_helm/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/configure_k8s_helm/">Configure_K8s_Helm<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/kubernetes/configure_k8s_auth/" class=""><a class="padding" href="../../../../systems/linux/kubernetes/configure_k8s_auth/">Configure_K8s_Auth<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/ldap/" class="alwaysopen"><input type="checkbox" id="R-section-bad9f2f06d1b124e56b35ed49036dda2" aria-controls="R-subsections-bad9f2f06d1b124e56b35ed49036dda2" checked><label for="R-section-bad9f2f06d1b124e56b35ed49036dda2"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu LDAP</span></label><a class="padding" href="../../../../systems/linux/ldap/">LDAP<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-bad9f2f06d1b124e56b35ed49036dda2" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/ldap/config_openldap/" class=""><a class="padding" href="../../../../systems/linux/ldap/config_openldap/">Config_OpenLDAP<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/ldap/install_kerberos/" class=""><a class="padding" href="../../../../systems/linux/ldap/install_kerberos/">Install_Kerberos<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/ldap/install_openldap/" class=""><a class="padding" href="../../../../systems/linux/ldap/install_openldap/">Install_OpenLDAP<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/logs/" class="alwaysopen"><input type="checkbox" id="R-section-78ebf403abc38403afe01438a8d427da" aria-controls="R-subsections-78ebf403abc38403afe01438a8d427da" checked><label for="R-section-78ebf403abc38403afe01438a8d427da"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Logs</span></label><a class="padding" href="../../../../systems/linux/logs/">Logs<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-78ebf403abc38403afe01438a8d427da" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/logs/use_logrotate/" class=""><a class="padding" href="../../../../systems/linux/logs/use_logrotate/">Use_Logrotate<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/install_quickwit/" class=""><a class="padding" href="../../../../systems/linux/logs/install_quickwit/">Install_Quickwit<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/install_logkit/" class=""><a class="padding" href="../../../../systems/linux/logs/install_logkit/">Install_Logkit<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/install_graylog/" class=""><a class="padding" href="../../../../systems/linux/logs/install_graylog/">Install_Graylog<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/install_fluentd/" class=""><a class="padding" href="../../../../systems/linux/logs/install_fluentd/">Install_Fluentd<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/install_finder/" class=""><a class="padding" href="../../../../systems/linux/logs/install_finder/">Install_Finder<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/install_es_head/" class=""><a class="padding" href="../../../../systems/linux/logs/install_es_head/">Install_Es_Head<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/install_elk/" class=""><a class="padding" href="../../../../systems/linux/logs/install_elk/">Install_ELK<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/logs/configure_elk/" class=""><a class="padding" href="../../../../systems/linux/logs/configure_elk/">Configure_ELK<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/message_queue/" class="alwaysopen"><input type="checkbox" id="R-section-861d5d5af8f939283fc63038dd67e207" aria-controls="R-subsections-861d5d5af8f939283fc63038dd67e207" checked><label for="R-section-861d5d5af8f939283fc63038dd67e207"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Message_Queue</span></label><a class="padding" href="../../../../systems/linux/message_queue/">Message_Queue<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-861d5d5af8f939283fc63038dd67e207" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/message_queue/install_activemq/" class=""><a class="padding" href="../../../../systems/linux/message_queue/install_activemq/">Install_ActiveMQ<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/message_queue/install_rocketmq/" class=""><a class="padding" href="../../../../systems/linux/message_queue/install_rocketmq/">Install_RocketMQ<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/message_queue/install_redpanda/" class=""><a class="padding" href="../../../../systems/linux/message_queue/install_redpanda/">Install_Redpanda<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/message_queue/install_rabbitmq/" class=""><a class="padding" href="../../../../systems/linux/message_queue/install_rabbitmq/">Install_RabbitMQ<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/message_queue/install_nsq/" class=""><a class="padding" href="../../../../systems/linux/message_queue/install_nsq/">Install_Nsq<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/message_queue/install_kafka/" class=""><a class="padding" href="../../../../systems/linux/message_queue/install_kafka/">Install_Kafka<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/message_queue/configure_rabbitmq/" class=""><a class="padding" href="../../../../systems/linux/message_queue/configure_rabbitmq/">Configure_Rabbitmq<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/monitor/" class="alwaysopen"><input type="checkbox" id="R-section-abc3124cdccc835552a636499dd41a83" aria-controls="R-subsections-abc3124cdccc835552a636499dd41a83" checked><label for="R-section-abc3124cdccc835552a636499dd41a83"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Monitor</span></label><a class="padding" href="../../../../systems/linux/monitor/">Monitor<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-abc3124cdccc835552a636499dd41a83" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/monitor/install_zabbix/" class=""><a class="padding" href="../../../../systems/linux/monitor/install_zabbix/">Install_Zabbix<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/install_prometheus/" class=""><a class="padding" href="../../../../systems/linux/monitor/install_prometheus/">Install_Prometheus<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/install_open_falcon/" class=""><a class="padding" href="../../../../systems/linux/monitor/install_open_falcon/">Install_Open_Falcon<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/install_nightingale/" class=""><a class="padding" href="../../../../systems/linux/monitor/install_nightingale/">Install_Nightingale<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/install_grafana/" class=""><a class="padding" href="../../../../systems/linux/monitor/install_grafana/">Install_Grafana<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/configure_zabbix/" class=""><a class="padding" href="../../../../systems/linux/monitor/configure_zabbix/">Configure_Zabbix<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/configure_zabbix_grafana/" class=""><a class="padding" href="../../../../systems/linux/monitor/configure_zabbix_grafana/">Configure_Zabbix_Grafana<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/configure_prometheus/" class=""><a class="padding" href="../../../../systems/linux/monitor/configure_prometheus/">Configure_Prometheus<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/monitor/configure_open_falcon/" class=""><a class="padding" href="../../../../systems/linux/monitor/configure_open_falcon/">Configure_Open_Falcon<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/nosql/" class="alwaysopen"><input type="checkbox" id="R-section-58e6fa2c18e9900c5034634874e76aa0" aria-controls="R-subsections-58e6fa2c18e9900c5034634874e76aa0" checked><label for="R-section-58e6fa2c18e9900c5034634874e76aa0"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Nosql</span></label><a class="padding" href="../../../../systems/linux/nosql/">Nosql<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-58e6fa2c18e9900c5034634874e76aa0" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/nosql/install_scylladb/" class=""><a class="padding" href="../../../../systems/linux/nosql/install_scylladb/">Install_Scylladb<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/nosql/install_redis/" class=""><a class="padding" href="../../../../systems/linux/nosql/install_redis/">Install_Redis<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/nosql/install_redis_cluster/" class=""><a class="padding" href="../../../../systems/linux/nosql/install_redis_cluster/">Install_Redis_Cluster<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/nosql/install_cassandra/" class=""><a class="padding" href="../../../../systems/linux/nosql/install_cassandra/">Install_Cassandra<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/nosql/install_aerospike/" class=""><a class="padding" href="../../../../systems/linux/nosql/install_aerospike/">Install_Aerospike<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/nosql/configure_redis/" class=""><a class="padding" href="../../../../systems/linux/nosql/configure_redis/">Configure_Redis<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/rsyncd/" class="alwaysopen"><input type="checkbox" id="R-section-9e23d094a527b7c92407accf5be989fb" aria-controls="R-subsections-9e23d094a527b7c92407accf5be989fb" checked><label for="R-section-9e23d094a527b7c92407accf5be989fb"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Rsyncd</span></label><a class="padding" href="../../../../systems/linux/rsyncd/">Rsyncd<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-9e23d094a527b7c92407accf5be989fb" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/rsyncd/install_timesyncd/" class=""><a class="padding" href="../../../../systems/linux/rsyncd/install_timesyncd/">Install_TimeSyncd<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/rsyncd/install_rsync/" class=""><a class="padding" href="../../../../systems/linux/rsyncd/install_rsync/">Install_Rsync<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/rsyncd/install_lsyncd/" class=""><a class="padding" href="../../../../systems/linux/rsyncd/install_lsyncd/">Install_Lsyncd<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/script/" class="alwaysopen"><input type="checkbox" id="R-section-03579ce96d17eb0c798805c4164837e4" aria-controls="R-subsections-03579ce96d17eb0c798805c4164837e4" checked><label for="R-section-03579ce96d17eb0c798805c4164837e4"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Script</span></label><a class="padding" href="../../../../systems/linux/script/">Script<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-03579ce96d17eb0c798805c4164837e4" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/script/how_to_write_shell_scripts/" class=""><a class="padding" href="../../../../systems/linux/script/how_to_write_shell_scripts/">How_To_Write_Shell_Scripts<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/storage/" class="alwaysopen"><input type="checkbox" id="R-section-78cdb047edff213265dfa96259e7a4f9" aria-controls="R-subsections-78cdb047edff213265dfa96259e7a4f9" checked><label for="R-section-78cdb047edff213265dfa96259e7a4f9"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Storage</span></label><a class="padding" href="../../../../systems/linux/storage/">Storage<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-78cdb047edff213265dfa96259e7a4f9" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/storage/install_nfs/" class=""><a class="padding" href="../../../../systems/linux/storage/install_nfs/">Install_NFS<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/storage/install_moosefs/" class=""><a class="padding" href="../../../../systems/linux/storage/install_moosefs/">Install_MooseFS<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/storage/install_minio/" class=""><a class="padding" href="../../../../systems/linux/storage/install_minio/">Install_Minio<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/storage/install_fastdfs/" class=""><a class="padding" href="../../../../systems/linux/storage/install_fastdfs/">Install_FastDFS<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/storage/configur_storage/" class=""><a class="padding" href="../../../../systems/linux/storage/configur_storage/">Configur_Storage<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/service_management/" class="alwaysopen"><input type="checkbox" id="R-section-14edec8fa5c3e740a4fda2b953c2000b" aria-controls="R-subsections-14edec8fa5c3e740a4fda2b953c2000b" checked><label for="R-section-14edec8fa5c3e740a4fda2b953c2000b"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Service_Management</span></label><a class="padding" href="../../../../systems/linux/service_management/">Service_Management<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-14edec8fa5c3e740a4fda2b953c2000b" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/service_management/install_apollo/" class=""><a class="padding" href="../../../../systems/linux/service_management/install_apollo/">Install_Apollo<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/service_management/install_nacos/" class=""><a class="padding" href="../../../../systems/linux/service_management/install_nacos/">Install_Nacos<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/service_management/install_mesos/" class=""><a class="padding" href="../../../../systems/linux/service_management/install_mesos/">Install_Mesos<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/service_management/install_hive/" class=""><a class="padding" href="../../../../systems/linux/service_management/install_hive/">Install_Hive<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/service_management/install_consul/" class=""><a class="padding" href="../../../../systems/linux/service_management/install_consul/">Install_Consul<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/web/" class="parent alwaysopen"><input type="checkbox" id="R-section-16667cef7ba079f56d077b0672418894" aria-controls="R-subsections-16667cef7ba079f56d077b0672418894" checked><label for="R-section-16667cef7ba079f56d077b0672418894"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Web</span></label><a class="padding" href="../../../../systems/linux/web/">Web<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-16667cef7ba079f56d077b0672418894" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/web/website_optimization_advertise/" class=""><a class="padding" href="../../../../systems/linux/web/website_optimization_advertise/">Website_Optimization_Advertise<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/web/website_http_status_messages/" class=""><a class="padding" href="../../../../systems/linux/web/website_http_status_messages/">Website_HTTP_Status_Messages<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/web/install-nginx/" class=""><a class="padding" href="../../../../systems/linux/web/install-nginx/">Install Nginx<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/web/install_nginx_third_party_modules/" class=""><a class="padding" href="../../../../systems/linux/web/install_nginx_third_party_modules/">Install_Nginx_Third_Party_Modules<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/web/configure_nginx/" class="active"><a class="padding" href="../../../../systems/linux/web/configure_nginx/">Configure_Nginx<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/work_order/" class="alwaysopen"><input type="checkbox" id="R-section-2f07bd5be968f6cd5106cd8668cec86e" aria-controls="R-subsections-2f07bd5be968f6cd5106cd8668cec86e" checked><label for="R-section-2f07bd5be968f6cd5106cd8668cec86e"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Work_Order</span></label><a class="padding" href="../../../../systems/linux/work_order/">Work_Order<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-2f07bd5be968f6cd5106cd8668cec86e" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/work_order/install_ferry/" class=""><a class="padding" href="../../../../systems/linux/work_order/install_ferry/">Install_Ferry<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/docker/" class="alwaysopen"><input type="checkbox" id="R-section-1116a6327fd893a27b6817bb1d1bbc1b" aria-controls="R-subsections-1116a6327fd893a27b6817bb1d1bbc1b" checked><label for="R-section-1116a6327fd893a27b6817bb1d1bbc1b"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Docker</span></label><a class="padding" href="../../../../systems/linux/docker/">Docker<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-1116a6327fd893a27b6817bb1d1bbc1b" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/docker/use_docker/" class=""><a class="padding" href="../../../../systems/linux/docker/use_docker/">Use_Docker<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/docker/install_docker/" class=""><a class="padding" href="../../../../systems/linux/docker/install_docker/">Install_Docker<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/systems/linux/use_linux/" class="alwaysopen"><input type="checkbox" id="R-section-49f8f651101e295f3d007dbb41613e23" aria-controls="R-subsections-49f8f651101e295f3d007dbb41613e23" checked><label for="R-section-49f8f651101e295f3d007dbb41613e23"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Use_Linux</span></label><a class="padding" href="../../../../systems/linux/use_linux/">Use_Linux<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-49f8f651101e295f3d007dbb41613e23" class="morespace collapsible-menu">
          <li data-nav-id="/systems/linux/use_linux/system_optimization/" class=""><a class="padding" href="../../../../systems/linux/use_linux/system_optimization/">System_Optimization<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/use_linux/system_architecture_planning_diagram/" class=""><a class="padding" href="../../../../systems/linux/use_linux/system_architecture_planning_diagram/">System_Architecture_Planning_Diagram<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/use_linux/regular_expression/" class=""><a class="padding" href="../../../../systems/linux/use_linux/regular_expression/">Regular_Expression<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/use_linux/linux_document/" class=""><a class="padding" href="../../../../systems/linux/use_linux/linux_document/">Linux_Document<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/use_linux/linux_conmmon_commands/" class=""><a class="padding" href="../../../../systems/linux/use_linux/linux_conmmon_commands/">Linux_Conmmon_Commands<i class="fa-fw fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/systems/linux/use_linux/install_cloud_foundry/" class=""><a class="padding" href="../../../../systems/linux/use_linux/install_cloud_foundry/">Install_Cloud_Foundry<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li></ul></li></ul></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space">
            <li><a class="padding" href="../../../../categories/"><i class='fa-fw fas fa-layer-group'></i> Categories</a></li>
            <li><a class="padding" href="../../../../tags/"><i class='fa-fw fas fa-tags'></i> Tags</a></li>
            <li><a class="padding" href="../../../../"><i class='fa-solid fa-box-archive'></i> Archive</a></li>
            <li><a class="padding" href="../../../../"><i class='fa-solid fa-screwdriver-wrench'></i> Tools</a></li>
            <li><a class="padding" href="../../../../"><i class='fa-fw fas fa-camera'></i> Showcases</a></li>
            <li><a class="padding" href="../../../../"><i class='fa-fw fas fa-bullhorn'></i> Credits</a></li>
            <li><a class="padding" href="../../../../"><i class='fa-brands fa-qq'></i> QQ</a></li>
            <li><a class="padding" href="https://www.zhihu.com/people/lisenhui"><i class='fa-brands fa-zhihu'></i> çŸ¥ä¹</a></li>
            <li><a class="padding" href="../../../../qq@qq.com"><i class='fa-solid fa-envelope'></i> E-Mail</a></li>
            <li><a class="padding" href="https://weibo.com/yourname"><i class='fa-brands fa-weibo'></i> WeiBo</a></li>
            <li><a class="padding" href="https://www.youtube.com/watch?v=RgKAFK5djSk"><i class='fa-brands fa-youtube'></i> Youtube</a></li>
            <li><a class="padding" href="https://github.com/McShelby/hugo-theme-relearn"><i class='fa-fw fab fa-github'></i> GitHub repo</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showVisitedLinks showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showVisitedLinks showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showLangSwitch showVariantSwitch showVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch showLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="../../../../systems/linux/web/configure_nginx/" lang="en" selected>English</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch showVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-relearn-auto" value="relearn-auto" selected>Relearn Light/Dark</option>
                      <option id="R-select-variant-relearn-light" value="relearn-light">Relearn Light</option>
                      <option id="R-select-variant-relearn-dark" value="relearn-dark">Relearn Dark</option>
                      <option id="R-select-variant-relearn-bright" value="relearn-bright">Relearn Bright</option>
                      <option id="R-select-variant-zen-auto" value="zen-auto">Zen Light/Dark</option>
                      <option id="R-select-variant-zen-light" value="zen-light">Zen Light</option>
                      <option id="R-select-variant-zen-dark" value="zen-dark">Zen Dark</option>
                      <option id="R-select-variant-retro-auto" value="retro-auto">Retro Learn/Neon</option>
                      <option id="R-select-variant-neon" value="neon">Neon</option>
                      <option id="R-select-variant-learn" value="learn">Learn</option>
                      <option id="R-select-variant-blue" value="blue">Blue</option>
                      <option id="R-select-variant-green" value="green">Green</option>
                      <option id="R-select-variant-red" value="red">Red</option>
                      <option id="R-select-variant-my-branding" value="my-branding">Your Branding</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks showVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="../../../../js/clipboard.min.js?1723699580" defer></script>
    <script src="../../../../js/perfect-scrollbar.min.js?1723699580" defer></script>
    <script src="../../../../js/theme.js?1723699580" defer></script>
  </body>
</html>

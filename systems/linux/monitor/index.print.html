<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/s2-1.png">
    <meta name="twitter:title" content="Monitor :: Hugo Relearn Theme">
    <meta property="og:url" content="https://erge.blog/systems/linux/monitor/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Monitor :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://erge.blog/images/s2-1.png">
    <meta itemprop="name" content="Monitor :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T00:33:22+08:00">
    <meta itemprop="dateModified" content="2024-06-13T00:33:22+08:00">
    <meta itemprop="image" content="https://erge.blog/images/s2-1.png">
    <title>Monitor :: Hugo Relearn Theme</title>
    <link href="../../../images/favicon.ico?1719330258" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../css/fontawesome-all.min.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1719330259" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1719330259" rel="stylesheet">
    <link href="../../../css/fonts.css?1719330259" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1719330259" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1719330259" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1719330259" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1719330259" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1719330259" rel="stylesheet">
    <link href="../../../css/print.css?1719330259" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1719330259" rel="stylesheet">
    <script src="../../../js/variant.js?1719330259"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../systems/linux/monitor/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Monitor</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/nosql/configure_redis/" title="Configure_Redis (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/monitor/install_zabbix/" title="Install_Zabbix (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="monitor">Monitor</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Monitor</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_zabbix">Install_Zabbix</h1>

<h2 id="éƒ¨ç½²zabbixç›‘æ§ç³»ç»Ÿ">éƒ¨ç½²<code>Zabbix</code>ç›‘æ§ç³»ç»Ÿ</h2>
<h3 id="åŸºç¡€é…ç½®ç¯å¢ƒè¦æ±‚">åŸºç¡€é…ç½®ç¯å¢ƒè¦æ±‚</h3>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.zabbix.com/manuals" rel="external" target="_self"><code>Zabbix</code>éƒ¨ç½²æ–‡æ¡£</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.zabbix.com/cn/download" rel="external" target="_self">ä¸‹è½½å®‰è£…<code>Zabbix</code></a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->éƒ¨ç½²<!-- raw HTML omitted --><code>Zabbix</code><!-- raw HTML omitted -->ç¡¬ä»¶è¦æ±‚<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>å¹³å°</th>
<th>CPU/å†…å­˜</th>
<th>æ•°æ®åº“</th>
<th>å—ç›‘æ§çš„ä¸»æœº</th>
</tr>
</thead>
<tbody>
<tr>
<td>å°å‹</td>
<td><code>CentOS</code></td>
<td>è™šæ‹Ÿè®¾å¤‡</td>
<td><code>MySQL InnoDB</code></td>
<td>100</td>
</tr>
<tr>
<td>ä¸­å‹</td>
<td><code>CentOS</code></td>
<td><code>2ä¸ªCPUå†…æ ¸/2GB</code></td>
<td><code>MySQL InnoDB</code></td>
<td>500</td>
</tr>
<tr>
<td>å¤§å‹</td>
<td><code>RedHat Enterprise Linux</code></td>
<td><code>4ä¸ªCPUå†…æ ¸/8GB RAID10</code></td>
<td><code>MySQL InnoDB</code>æˆ– <code>PostgreSQL</code></td>
<td>&gt;1000</td>
</tr>
<tr>
<td>è¶…å¤§å‹</td>
<td><code>RedHat Enterprise Linux</code></td>
<td><code>8ä¸ªCPUå†…æ ¸/16GB RAID10</code></td>
<td><code>MySQL InnoDB</code>æˆ– <code>PostgreSQL</code></td>
<td>&gt;10000</td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->éƒ¨ç½²<!-- raw HTML omitted --><code>Zabbix</code><!-- raw HTML omitted -->æ•°æ®åº“ç‰ˆæœ¬è¦æ±‚<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th>æ•°æ®åº“</th>
<th>æ”¯æŒç‰ˆæœ¬</th>
<th>æ¨èç‰ˆæœ¬</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MySQL/Percona</code></td>
<td><code>5.7.28-8.0.X</code></td>
<td><code>8.0.X</code></td>
<td>å¦‚æœ<code>MySQL</code>æˆ–<code>Percona</code>ç”¨ä½œ<code>Zabbix</code>åç«¯æ•°æ®åº“ï¼Œåˆ™éœ€è¦ã€‚éœ€è¦<code>InnoDB</code>å¼•æ“ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨<code>MariaDB Connector/C</code>åº“æ¥æ„å»ºæœåŠ¡å™¨/ä»£ç†</td>
</tr>
<tr>
<td><code>MariaDB</code></td>
<td><code>10.0.37-10.6.X</code></td>
<td><code>10.5.X</code></td>
<td><code>InnoDB</code>å¼•æ“æ˜¯å¿…éœ€çš„ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨<code>MariaDB Connector/C</code> åº“æ¥æ„å»ºæœåŠ¡å™¨/ä»£ç†</td>
</tr>
<tr>
<td><code>PostgreSQL</code></td>
<td><code>10.9-13.X</code></td>
<td><code>12.X.X</code>æˆ–æ›´æ–°</td>
<td>ä½¿ç”¨<code>PostgreSQL</code>ä½œä¸º<code>Zabbix</code>åç«¯æ•°æ®åº“ã€‚<!-- raw HTML omitted -->å»ºè®®ä½¿ç”¨<code>PostgreSQL 8.3</code>ä»¥ä¸Šçš„ç‰ˆæœ¬, ä»¥ <a href="http://www.postgresql.org/docs/8.3/static/release-8-3.html" rel="external" target="_self">æä¾›æ›´å¥½çš„VACUUMæ€§èƒ½</a>ã€‚</td>
</tr>
<tr>
<td><code>SQLite</code></td>
<td><code>3.3.5-3.34.X</code></td>
<td><code>3.3X.X</code></td>
<td>ä»…æ”¯æŒ<code>Zabbix</code>ä»£ç†ã€‚å¦‚æœ<code>SQLite</code>ç”¨ä½œ<code>Zabbix</code>ä»£ç†æ•°æ®åº“</td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl start mariadb
</span></span><span style="display:flex;"><span>$ mysql -uroot -e <span style="color:#e6db74">&#34;create database zabbix character set utf8mb4 collate utf8mb4_bin;&#34;</span> 
</span></span><span style="display:flex;"><span>$ mysql -uroot -e <span style="color:#e6db74">&#34;create user &#39;zabbix&#39;@&#39;localhost&#39; identified by &#39;zabbix&#39;;&#34;</span>   
</span></span><span style="display:flex;"><span>$ mysql -uroot -e <span style="color:#e6db74">&#34;grant all privileges on zabbix.* to &#39;zabbix&#39;@&#39;localhost&#39;;&#34;</span>
</span></span><span style="display:flex;"><span>$ mysql -uroot -e <span style="color:#e6db74">&#34;flush privileges;&#34;</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Zabbix</code><!-- raw HTML omitted -->å‰å‡†å¤‡<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å¸è½½åŸæœ‰æ•°æ®åº“ï¼Œå®‰è£…é«˜ç‰ˆæœ¬<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum remove -y mariadb*</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»ºç”¨æˆ·<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ groupadd --system zabbix
</span></span><span style="display:flex;"><span>$ useradd --system -g zabbix -d /usr/lib/zabbix -s /sbin/nologin -c <span style="color:#e6db74">&#34;Zabbix Monitoring System&#34;</span> zabbix</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»ºæ‰€éœ€ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir /opt/<span style="color:#f92672">{</span>src,zabbix<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>$ chown zabbix:zabbix /opt/*</span></span></code></pre></div><ul>
<li>3.4 <!-- raw HTML omitted -->å®‰è£…ä¾èµ–<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install epel-release wget unixODBC-devel net-snmp-devel libevent-devel <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>libxml2-devel libcurl-devel java-1.6.0-openjdk-devel gcc gcc-c++ <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>mariadb mariadb-server mariadb-devel
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ yum -y install go
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Debian ç³»ç»Ÿ</span>
</span></span><span style="display:flex;"><span>$ sudo apt-get install libxml2 libxml2-dev libsnmp-dev libevent-dev openjdk-11-jdk <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>libcurl4-openssl-dev </span></span></code></pre></div></blockquote>
<hr>
<h3 id="å®‰è£…zabbix-server">å®‰è£…<code>Zabbix Server</code></h3>
<ul>
<li>
<ol>
<li><a href="https://cdn.zabbix.com/zabbix/sources/stable/" rel="external" target="_self">ä¸‹è½½<code>Zabbix Server</code>ç¼–è¯‘å®‰è£…åŒ…</a></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget -P /opt/src/ https://cdn.zabbix.com/zabbix/sources/stable/6.0/zabbix-6.0.14.tar.gz</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->è§£å‹é…ç½®<!-- raw HTML omitted --><code>Zabbix Server</code><!-- raw HTML omitted -->å®‰è£…åŒ…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ tar -zxvf /opt/src/zabbix-6.0.14.tar.gz -C /opt/src/
</span></span><span style="display:flex;"><span>$ cd /opt/src/zabbix-6.0.14/
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç¼–è¯‘å®‰è£…è·¯å¾„</span>
</span></span><span style="display:flex;"><span>$ ./configure --prefix<span style="color:#f92672">=</span>/opt/zabbix --enable-server --enable-agent --enable-ipv6 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--with-net-snmp --with-libcurl --with-libxml2 --enable-java --with-openssl <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--with-mysql<span style="color:#f92672">=</span>/usr/local/mysql/bin/mysql_config
</span></span><span style="display:flex;"><span>$ make -j2 <span style="color:#f92672">&amp;&amp;</span> make install</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->æ‹·è´<!-- raw HTML omitted --><code>Zabbix Server</code><!-- raw HTML omitted -->å¯åŠ¨æ–‡ä»¶ç»™äºˆæ‰§è¡Œæƒé™<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp /opt/src/zabbix-6.0.14/misc/init.d/fedora/core/zabbix_* /etc/init.d/  
</span></span><span style="display:flex;"><span>$ chmod +x /etc/init.d/zabbix_*</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->å¯åŠ¨æ•°æ®åº“å¯¼å…¥<!-- raw HTML omitted --><code>Zabbix SQL</code><!-- raw HTML omitted -->æ–‡ä»¶åå†å¯åŠ¨<!-- raw HTML omitted --><code>Zabbix Server</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ll /opt/src/zabbix-6.0.14/database/mysql/ | grep *.sql
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ mysql -uzabbix -p<span style="color:#e6db74">&#39;zabbix&#39;</span> zabbix &lt; /opt/src/zabbix-6.0.14/database/mysql/schema.sql
</span></span><span style="display:flex;"><span>$ mysql -uzabbix -p<span style="color:#e6db74">&#39;zabbix&#39;</span> zabbix &lt; /opt/src/zabbix-6.0.14/database/mysql/images.sql
</span></span><span style="display:flex;"><span>$ mysql -uzabbix -p<span style="color:#e6db74">&#39;zabbix&#39;</span> zabbix &lt; /opt/src/zabbix-6.0.14/database/mysql/data.sql
</span></span><span style="display:flex;"><span>$ mysql -uzabbix -p<span style="color:#e6db74">&#39;zabbix&#39;</span> zabbix &lt; /opt/src/zabbix-6.0.14/database/mysql/double.sql
</span></span><span style="display:flex;"><span>$ mysql -uzabbix -p<span style="color:#e6db74">&#39;zabbix&#39;</span> zabbix &lt; /opt/src/zabbix-6.0.14/database/mysql/history_pk_prepare.sql</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>zabbix_server</code><!-- raw HTML omitted -->é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/zabbix/etc/zabbix_server.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">DBHost=localhost  	# æ•°æ®åº“åœ°å€
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">DBName=zabbix  	# æ•°æ®åº“å
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">DBUser=root  	# è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">DBPassword=123456  	# å¯†ç 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">DBSocket=/home/ops/opt/mysql/mysql.sock  	# æ•°æ®åº“sockæ–‡ä»¶è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">DBPort=3306  	# ç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LogFile=/opt/zabbix_server/logs/zabbix_server.log  	# æ—¥å¿—æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">PidFile=/opt/zabbix_server/logs/zabbix_server.pid  	# ä¿å­˜pidçš„æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SocketDir=/opt/zabbix/logs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="6">
<li><!-- raw HTML omitted -->æ‹·è´<!-- raw HTML omitted --><code>Zabbix</code><!-- raw HTML omitted -->å‰ç«¯æ–‡ä»¶ï¼Œåˆ°<!-- raw HTML omitted --><code>Nginx</code>çš„<code>web</code><!-- raw HTML omitted -->ç›®å½•<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo cp -rf /opt/src/zabbix-6.0.14/ui/* /usr/local/nginx/html/zabbix/</span></span></code></pre></div></blockquote>
<hr>
<h3 id="dockerå®‰è£…zabbix-server"><code>Docker</code>å®‰è£…<code>Zabbix Server</code></h3>
<blockquote>
<ul>
<li><a href="https://www.zabbix.com/documentation/6.0/en/manual/installation/containers" rel="external" target="_self">ä»<code>Docker</code>å®¹å™¨å®‰è£…</a>ã€<a href="https://www.leeks.info/zh_CN/latest/index.html" rel="external" target="_self">æ¬¢è¿ä½¿ç”¨<code>Leeks</code>çš„ç¬”è®°</a></li>
</ul>
</blockquote>
<ul>
<li>
<ol>
<li>åˆ›å»ºä¸“ç”¨äº<code>Zabbix</code>ç»„ä»¶å®¹å™¨çš„ç½‘ç»œ</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker network create --subnet 172.20.0.0/16 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--ip-range 172.20.100.0/20 zabbix-net</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li>å¯åŠ¨ç©º<code>MySQL</code>æœåŠ¡å™¨å®ä¾‹æ•°æ®åº“<code>8.0</code>ä»¥ä¸Š</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker run -v /etc/localtime:/etc/localtime <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --name mysql-server -t <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e MYSQL_DATABASE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e MYSQL_USER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e MYSQL_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>zabbix_pwd<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>root_pwd<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --network<span style="color:#f92672">=</span>zabbix-net <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --restart unless-stopped <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -d mysql:8.0 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --character-set-server<span style="color:#f92672">=</span>utf8 --collation-server<span style="color:#f92672">=</span>utf8_bin <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --default-authentication-plugin<span style="color:#f92672">=</span>mysql_native_password</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li>å¯åŠ¨<code>Zabbix Java</code>ç½‘å…³å®ä¾‹</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker run -v /etc/localtime:/etc/localtime <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --name zabbix-java-gateway -t <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --network<span style="color:#f92672">=</span>zabbix-net <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --restart unless-stopped <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -d zabbix/zabbix-java-gateway:alpine-6.0-latest</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li>å¯åŠ¨<code>Zabbix</code>æœåŠ¡å™¨å®ä¾‹å¹¶å°†è¯¥å®ä¾‹ä¸åˆ›å»ºçš„<code>MySQL</code>æœåŠ¡å™¨å®ä¾‹é“¾æ¥</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>å¯åŠ¨<code>Zabbix</code>æœåŠ¡å™¨å®ä¾‹å¹¶å°†è¯¥å®ä¾‹ä¸åˆ›å»ºçš„<code>MySQL</code>æœåŠ¡å™¨å®ä¾‹é“¾æ¥</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker volume create zabbix-server-volume
</span></span><span style="display:flex;"><span>$ docker run -v /etc/localtime:/etc/localtime <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --name zabbix-server-mysql -t <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --link zabbix-web-service:zabbix-web-service <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e DB_SERVER_HOST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mysql-server&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_DATABASE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_USER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>zabbix_pwd<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>root_pwd<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e ZBX_JAVAGATEWAY<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix-java-gateway&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e ZBX_STARTREPORTWRITERS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e ZBX_WEBSERVICEURL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://zabbix-web-service:10053/report&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -v zabbix-server-volume:/etc/zabbix <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -v <span style="color:#e6db74">${</span>server_dir<span style="color:#e6db74">}</span>/server/alertscripts:/usr/lib/zabbix/alertscripts <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -v <span style="color:#e6db74">${</span>server_dir<span style="color:#e6db74">}</span>/server/externalscripts:/usr/lib/zabbix/externalscripts <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -v <span style="color:#e6db74">${</span>server_dir<span style="color:#e6db74">}</span>/server/modules:/usr/lib/zabbix/modules <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --network<span style="color:#f92672">=</span>zabbix-net <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -p 10051:10051 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --restart unless-stopped <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -d zabbix/zabbix-server-mysql:alpine-6.0-latest</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="5">
<li>å¯åŠ¨<code>Zabbix Web</code>ç•Œé¢å¹¶å°†å®ä¾‹ä¸åˆ›å»ºçš„<code>MySQL</code>æœåŠ¡å™¨å’Œ<code>Zabbix</code>æœåŠ¡å™¨å®ä¾‹é“¾æ¥</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>Zabbix Web</code>ç•Œé¢å®ä¾‹å‘ä¸»æœºå…¬å¼€<code>80/TCP</code>ç«¯å£ <code>HTTP</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker run -v /etc/localtime:/etc/localtime <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --name zabbix-web-nginx-mysql -t <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e ZBX_SERVER_HOST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix-server-mysql&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e DB_SERVER_HOST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mysql-server&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_DATABASE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_USER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zabbix&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>zabbix_pwd<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>root_pwd<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -e ZBX_SERVER_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>zabbix_server_name<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --network<span style="color:#f92672">=</span>zabbix-net <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -p 8080:8080 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --restart unless-stopped <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -d zabbix/zabbix-web-nginx-mysql:alpine-6.0-latest</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="6">
<li>å®‰è£…<code>Zabbix Proxy</code>æœåŠ¡</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker run --name zabbix-proxy-mysql <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e DB_SERVER_HOST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mysql-server&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e MYSQL_USER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e MYSQL_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;some-password&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e ZBX_HOSTNAME<span style="color:#f92672">=</span>some-hostname <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -e ZBX_SERVER_HOST<span style="color:#f92672">=</span>some-zabbix-server <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -d zabbix/zabbix-proxy-mysql:alpine-6.0-latest</span></span></code></pre></div></blockquote>
<hr>
<h3 id="é…ç½®nginxä½¿æµè§ˆå™¨è®¿é—®zabbix">é…ç½®<code>Nginx</code>ä½¿æµè§ˆå™¨è®¿é—®<code>Zabbix</code></h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo cat &gt;/usr/local/nginx/conf/vhosts/zabbix.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">server{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> listen 80;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> server_name zabbix.com;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> location / {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     root   /usr/local/nginx/html/zabbix;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     index  index.php index.html index.htm;  	# æ·»åŠ &#34;index.php&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # tcp socket é€šä¿¡æ¨¡å¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> location ~ \.php$ {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     root	/usr/local/nginx/html/zabbix;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_pass  127.0.0.1:9000;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_index index.php;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  	# fastcgi_paramè¡Œæ”¹æˆè¿™ä¸ªã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     include  fastcgi_params;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # Unix socke é€šä¿¡æ¨¡å¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> location ~ \.php(.*)$ {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     root	/usr/local/nginx/html/zabbix;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_pass unix:/tmp/php7.sock;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_index index.php;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_split_path_info ^((?U).+\.php)(/?.+)$;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_param PATH_INFO $fastcgi_path_info;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     include  fastcgi_params;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> } 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> error_page 404 http://zabbix.com;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> access_log  /usr/local/nginx/logs/zabbix-access.log  main;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> error_log   /usr/local/nginx/logs/zabbix-error.log  info;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="å¯åŠ¨zabbixæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯">å¯åŠ¨<code>Zabbix</code>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Debian ç³»ç»Ÿéœ€æ‰§è¡Œ</span>
</span></span><span style="display:flex;"><span>$ sudo ln -s /usr/local/mysql/lib/libmysqlclient.so.20 /usr/lib/libmysqlclient.so.20
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /opt/zabbix/sbin/zabbix_server  	<span style="color:#75715e"># å¯åŠ¨ Zabbix Server</span>
</span></span><span style="display:flex;"><span>$ /opt/zabbix/sbin/zabbix_agentd  	<span style="color:#75715e"># å¯åŠ¨ Zabbix Agentd</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="å¤„ç†è®¿é—®é¡µé¢åæ²¡æœ‰ä¸­æ–‡é€‰é¡¹">å¤„ç†è®¿é—®é¡µé¢åæ²¡æœ‰ä¸­æ–‡é€‰é¡¹</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># åˆ—å‡ºè¯´æœ‰æ”¯æŒçš„è¯­è¨€</span>
</span></span><span style="display:flex;"><span>$ locale -a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¦‚æœæ²¡æœ‰æƒ³è¦çš„è¯­è¨€ç¯å¢ƒï¼Œæ‰“å¼€ä¸‹æ–¹æ–‡ä»¶æ‰¾åˆ°éœ€è¦çš„è¯­è¨€å–æ¶ˆæ³¨é‡Š</span>
</span></span><span style="display:flex;"><span>$ sudo cat &gt;/etc/locale.gen<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># zh_CN.UTF-8 UTF-8
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é‡è½½è¯­è¨€ç¯å¢ƒ</span>
</span></span><span style="display:flex;"><span>$ sudo locale-gen
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é‡å¯PHPä½¿é…ç½®ç”Ÿæ•ˆï¼Œç„¶ååˆ·æ–°æµè§ˆå™¨</span>
</span></span><span style="display:flex;"><span>$ sudo /etc/init.d/php-fpm restart</span></span></code></pre></div></blockquote>
<hr>
<h3 id="webé¡µé¢é…ç½®zabbix"><code>web</code>é¡µé¢é…ç½®<code>zabbix</code></h3>
<blockquote>
<p><a href="#R-image-1fa5fe27bf736253883d8583c9f51ec2" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-08-45.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1fa5fe27bf736253883d8583c9f51ec2"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-08-45.png"></a></p>
<ul>
<li><!-- raw HTML omitted -->ä¸‹æ–¹å›¾ç‰‡æ˜¾ç¤ºè¦ä¿®æ”¹çš„<!-- raw HTML omitted --><code>PHP</code><!-- raw HTML omitted -->é…ç½®æ–‡ä»¶,ä¿®æ”¹åé‡å¯<!-- raw HTML omitted --><code>php-fpm</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#34;s/post_max_size = 8M/post_max_size = 16M/g&#34;</span> /usr/local/php/etc/php.ini  
</span></span><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#34;s/max_execution_time = 30/max_execution_time = 300/g&#34;</span> /usr/local/php/etc/php.ini  
</span></span><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#34;s/max_input_time = 60/max_input_time = 300/g&#34;</span> /usr/local/php/etc/php.ini </span></span></code></pre></div><p><a href="#R-image-421e1a14ce741b48d426b7e634b05ce8" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-11-47.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-421e1a14ce741b48d426b7e634b05ce8"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-11-47.png"></a></p>
<ul>
<li><!-- raw HTML omitted -->è¿æ¥æ•°æ®åº“æŠ¥é”™<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ln -s /var/lib/mysql/mysql.sock /tmp/</span></span></code></pre></div><p><a href="#R-image-9a9e62f2bd789b4e5080fa44d8781ec7" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-13-46.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9a9e62f2bd789b4e5080fa44d8781ec7"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-13-46.png"></a></p>
<p><a href="#R-image-c78d8b1e43f9b09954b79e4433c84ede" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-15-02.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c78d8b1e43f9b09954b79e4433c84ede"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-15-02.png"></a></p>
<p><a href="#R-image-893ebe55aa901bd39811208004cf7d0b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-15-52.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-893ebe55aa901bd39811208004cf7d0b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-15-52.png"></a></p>
<p><a href="#R-image-bdbae6608fa8d743b9f6d9d6e673e592" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-16-37.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bdbae6608fa8d743b9f6d9d6e673e592"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-16-37.png"></a></p>
<p><a href="#R-image-a29607182efd2c4ff9daf2b4fa25eed1" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-17-40.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a29607182efd2c4ff9daf2b4fa25eed1"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-17-40.png"></a></p>
<p><a href="#R-image-d7621073de0bb32c3f0f8092348906de" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-18-45.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d7621073de0bb32c3f0f8092348906de"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-18-45.png"></a></p>
<ul>
<li><!-- raw HTML omitted --><strong>é»˜è®¤å¸æˆ·ï¼š</strong><!-- raw HTML omitted --><code>Admin</code><!-- raw HTML omitted -->ï¼Œ<strong>é»˜è®¤å¯†ç ï¼š</strong><!-- raw HTML omitted --><code>zabbix</code></li>
</ul>
<p><a href="#R-image-f2398c2e921c9d3cb5da5a2270d655ee" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-20-31.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f2398c2e921c9d3cb5da5a2270d655ee"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server/Snipaste_2022-09-14_23-20-31.png"></a></p>
<ul>
<li><!-- raw HTML omitted -->å¤„ç†å›¾å½¢æ±‰å­—ä¹±ç <!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ rz /usr/local/nginx/html/assets/fonts
</span></span><span style="display:flex;"><span>$ mv simhei.ttf DejaVuSans.ttf</span></span></code></pre></div></blockquote>
<hr>
<h2 id="ç¼–è¯‘å®‰è£…zabbix-agent">ç¼–è¯‘å®‰è£…<code>Zabbix Agent</code></h2>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->éƒ¨ç½²å‰å‡†å¤‡<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir /opt/<span style="color:#f92672">{</span>src,zabbix-agent<span style="color:#f92672">}</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted --><a href="https://cdn.zabbix.com/zabbix/binaries/stable/" rel="external" target="_self">ä¸‹è½½å®‰è£…åŒ…</a><!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install wget
</span></span><span style="display:flex;"><span>$ wget -P /opt/src/ 
</span></span><span style="display:flex;"><span>https://cdn.zabbix.com/zabbix/binaries/stable/6.0/6.0.14/zabbix_agent-6.0.14-linux-3.0-amd64-static.tar.gz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ tar -zxvf /opt/src/zabbix_agent-6.0.14-linux-3.0-amd64-static.tar.gz -C /opt/zabbix-agent </span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>Zabbix Agent</code><!-- raw HTML omitted -->é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/zabbix-agent/conf/zabbix_agentd.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Server=127.0.0.1  	# æ·»åŠ Zabbix ServeræœåŠ¡å™¨IP
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ServerActive=127.0.0.1  	# æ›¿æ¢ä¸ºZabbix ServeræœåŠ¡å™¨IP
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Hostname=æœ¬æœºä¸»æœºå  	# è¢«ç›‘æ§ç«¯è‡ªå·±çš„ä¸»æœºå
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">AllowKey=system.run[*]  	# ç›‘æ§å¼‚å¸¸åï¼Œæ˜¯å¦å…è®¸æœåŠ¡å™¨è¿œç¨‹è¿‡æ¥æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚é‡å¯æŸä¸ªæœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">UnsafeUserParameters=1  	# æ˜¯å¦å…è®¸è‡ªå®šä¹‰keyç›‘æ§
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->å¯åŠ¨<!-- raw HTML omitted --><code>Zabbix Agent</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /opt/zabbix-agent/sbin/zabbix_agentd -c /opt/zabbix-agent/conf/zabbix_agentd.conf</span></span></code></pre></div></blockquote>
<hr>
<h2 id="é…ç½®zabbixé€šä¿¡åŠ å¯†">é…ç½®<code>Zabbix</code>é€šä¿¡åŠ å¯†</h2>
<ul>
<li>
<ol>
<li>ç”³è¯·è¯ä¹¦</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># ç”Ÿæˆcaç§é’¥</span>
</span></span><span style="display:flex;"><span>$ openssl genrsa <span style="color:#ae81ff">2048</span> &gt; ca.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨caç§é’¥å»ºç«‹caè¯ä¹¦</span>
</span></span><span style="display:flex;"><span>$ openssl req -new -x509 -nodes -days <span style="color:#ae81ff">1000</span> -key ca.key -subj /CN<span style="color:#f92672">=</span>Signing<span style="color:#ae81ff">\ </span>CA/OU<span style="color:#f92672">=</span>Development<span style="color:#ae81ff">\ </span>group/O<span style="color:#f92672">=</span>Zabbix<span style="color:#ae81ff">\ </span>SIA/DC<span style="color:#f92672">=</span>zabbix/DC<span style="color:#f92672">=</span>com &gt; ca.crt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç”ŸæˆæœåŠ¡å™¨csrè¯ä¹¦è¯·æ±‚æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>$ openssl req -newkey rsa:2048 -days <span style="color:#ae81ff">1000</span> -nodes -keyout server.key -subj /CN<span style="color:#f92672">=</span>server/OU<span style="color:#f92672">=</span>Development<span style="color:#ae81ff">\ </span>group/O<span style="color:#f92672">=</span>Zabbix<span style="color:#ae81ff">\ </span>SIA/DC<span style="color:#f92672">=</span>zabbix/DC<span style="color:#f92672">=</span>com &gt; server.csr
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨caè¯ä¹¦ä¸ç§é’¥ç­¾å‘æœåŠ¡å™¨è¯ä¹¦</span>
</span></span><span style="display:flex;"><span>$ openssl x509 -req -in server.csr -days <span style="color:#ae81ff">1000</span> -CA ca.crt -CAkey ca.key -set_serial <span style="color:#ae81ff">01</span> &gt; server.crt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç”Ÿæˆå®¢æˆ·ç«¯csrè¯ä¹¦è¯·æ±‚æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>$ openssl req -newkey rsa:2048 -days <span style="color:#ae81ff">1000</span> -nodes -keyout client.key -subj /CN<span style="color:#f92672">=</span>client/OU<span style="color:#f92672">=</span>Development<span style="color:#ae81ff">\ </span>group/O<span style="color:#f92672">=</span>Zabbix<span style="color:#ae81ff">\ </span>SIA/DC<span style="color:#f92672">=</span>zabbix/DC<span style="color:#f92672">=</span>com &gt; client.csr
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨caè¯ä¹¦ä¸ç§é’¥ç­¾å‘å®¢æˆ·ç«¯è¯ä¹¦</span>
</span></span><span style="display:flex;"><span>$ openssl x509 -req -in client.csr -days <span style="color:#ae81ff">1000</span> -CA ca.crt -CAkey ca.key -set_serial <span style="color:#ae81ff">01</span> &gt; client.crt</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li>é…ç½®<code>Zabbix Server</code>æœåŠ¡ç«¯</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/zabbix/etc/zabbix_server.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹TLSCAFileé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSCAFile=/opt/zabbix_server/zabbix_crt/ca.crt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹TLSCertFileé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSCertFile=/opt/zabbix_server/zabbix_crt/server.crt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹TLSKeyFileé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSKeyFile=/opt/zabbix_server/zabbix_crt/server.key
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li>é…ç½®<code>Zabbix Agent</code>ç«¯</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>é…ç½®<code>PSK</code>åŠ å¯†</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/zabbix-agent/conf/zabbix_agentd.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSPSKIdentity= PSK Name  	# ä¸€è‡´æ€§å…±äº«å¯†é’¥åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSPSKFile= PSK File  	# PSK å…±äº«å¯†é’¥æ–‡ä»¶å­˜æ”¾è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li>é…ç½®è¯ä¹¦åŠ å¯†</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/zabbix-agent/conf/zabbix_agentd.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹agentè¿æ¥æ¨¡å¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSConnect=cert
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹ä¼ å…¥æ•°æ®è¿æ¥æ¨¡å¼
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSAccept=cert
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹TLSCAFileé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSCAFile=/opt/zabbix_agent/zabbix_crt/ca.crt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹TLSCertFileé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSCertFile=/opt/zabbix_agent/zabbix_crt/client.crt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¿®æ”¹TLSKeyFileé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TLSKeyFile=/opt/zabbix_agent/zabbix_crt/client.key
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_prometheus">Install_Prometheus</h1>

<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="prometheus"><code>Prometheus</code></h2>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://prometheus.io/docs/introduction/first_steps/" rel="external" target="_self"><code>Prometheus</code>å®˜ç½‘</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://yunlzheng.gitbook.io/prometheus-book" rel="external" target="_self"><code>prometheus-book</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/prometheus" rel="external" target="_self"><code>Github-Prometheus</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://blog.gmem.cc/prometheus-study-note" rel="external" target="_self"><code>Prometheus</code>å­¦ä¹ ç¬”è®°</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://blog.51cto.com/qiangsh/3093700" rel="external" target="_self"><code>Prometheus</code>ä»‹ç»å’Œä½¿ç”¨</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://juejin.im/post/5d79d804e51d453b7779d5ce" rel="external" target="_self"><code>Prometheus</code>+<code>Grafana</code>è¯¦è§£</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.cnblogs.com/qianjingchen/articles/9578341.html" rel="external" target="_self"><code>Prometheus</code>è‡ªå®šä¹‰ç›‘æ§éƒ¨ç½²</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://prometheus.io/docs/instrumenting/clientlibs/" rel="external" target="_self"><code>Prometheus  CLIENT LIBRARIES</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://juejin.im/post/5d397c2fe51d45775e33f64a" rel="external" target="_self">ä½¿ç”¨<code>Prometheus</code>+<code>Grafana</code>å¿«é€Ÿæ‰“é€ é«˜é€¼æ ¼ç›‘æ§å¹³å°</a></td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->æ¦‚è¿°<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<p><code>Prometheus</code>æ˜¯ä¸€ä¸ªå¼€æºç›‘æ§ç³»ç»Ÿï¼Œå®ƒå‰èº«æ˜¯<a href="https://soundcloud.com" rel="external" target="_self"><code>SoundCloud</code></a>çš„å‘Šè­¦å·¥å…·åŒ…ã€‚ä»<code>2012</code>å¹´å¼€å§‹ï¼Œè®¸å¤šå…¬å¸å’Œç»„ç»‡å¼€å§‹ä½¿ç”¨<code>Prometheus</code>ã€‚è¯¥é¡¹ç›®çš„å¼€å‘äººå‘˜å’Œç”¨æˆ·ç¤¾åŒºéå¸¸æ´»è·ƒï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜å’Œç”¨æˆ·å‚ä¸åˆ°è¯¥é¡¹ç›®ä¸­ã€‚ç›®å‰å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€æºé¡¹ç›®ï¼Œä¸”ä¸ä¾èµ–äºä»»ä½•å…¬å¸ã€‚ä¸ºäº†å¼ºè°ƒè¿™ç‚¹å’Œæ˜ç¡®è¯¥é¡¹ç›®æ²»ç†ç»“æ„ï¼Œ<code>Prometheus</code>åœ¨<code>2016</code>å¹´ç»§<a href="https://kubernetes.io" rel="external" target="_self"><code>Kurberntes</code></a>ä¹‹åï¼ŒåŠ å…¥äº†<a href="https://www.cncf.io" rel="external" target="_self"><code>Cloud Native Computing Foundation</code></a></p>
<ul>
<li>1.1 <code>prometheus</code><!-- raw HTML omitted -->ç‰¹ç‚¹<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å¤šç»´åº¦æ•°æ®æ¨¡å‹ï¼Œä¸€ä¸ªæ—¶é—´åºåˆ—ç”±ä¸€ä¸ªåº¦é‡æŒ‡æ ‡å’Œå¤šä¸ªæ ‡ç­¾é”®å€¼å¯¹ç¡®å®š<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->çµæ´»çš„æŸ¥è¯¢è¯­è¨€ï¼Œå¯¹æ”¶é›†çš„æ—¶è®¸æ•°æ®è¿›è¡Œé‡ç»„<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->å¼ºå¤§çš„æ•°æ®å¯è§†åŒ–åŠŸèƒ½ï¼Œé™¤äº†å†…ç½®çš„æµè§ˆå™¨ï¼Œä¹Ÿæ”¯æŒ<!-- raw HTML omitted --><code>grafana</code><!-- raw HTML omitted -->é›†æˆ<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->é«˜æ•ˆå­˜å‚¨ï¼Œå†…å­˜åŠ æœ¬åœ°ç£ç›˜ï¼Œå¯é€šè¿‡åŠŸèƒ½åˆ†ç‰‡å’Œè”ç›Ÿæ¥æ‹“å±•æ€§èƒ½<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->è¿ç»´ç®€å•ï¼Œåªä¾èµ–äºæœ¬åœ°ç£ç›˜ï¼Œ<!-- raw HTML omitted --><code>go</code><!-- raw HTML omitted -->äºŒè¿›åˆ¶å®‰è£…åŒ…æ²¡æœ‰ä»»ä½•å…¶ä»–ä¾èµ– <!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->ç²¾ç®€å‘Šè­¦<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->éå¸¸å¤šçš„å®¢æˆ·ç«¯åº“<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->æä¾›äº†è®¸å¤šå¯¼å‡ºå™¨æ¥æ”¶é›†å¸¸ç”¨ç³»ç»ŸæŒ‡æ ‡<!-- raw HTML omitted --></li>
</ul>
</blockquote>
</blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->æ•°æ®æ¨¡å‹ <!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<p><code>Prometheus</code>ä»æ ¹æœ¬ä¸Šå­˜å‚¨çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯æ—¶é—´åºåˆ—æ•°æ®ï¼ˆ<code>Time Serie Data</code>ï¼Œç®€ç§°æ—¶åºæ•°æ®ï¼‰ã€‚æ—¶åºæ•°æ®æ˜¯å…·æœ‰æ—¶é—´æˆ³çš„æ•°æ®æµï¼Œè¯¥æ•°æ®æµå±äºæŸä¸ªåº¦é‡æŒ‡æ ‡ï¼ˆ<code>Metric</code>ï¼‰å’Œè¯¥åº¦é‡æŒ‡æ ‡ä¸‹çš„å¤šä¸ªæ ‡ç­¾ï¼ˆ<code>Label</code>ï¼‰ã€‚é™¤äº†æä¾›å­˜å‚¨åŠŸèƒ½ï¼Œ<code>Prometheus</code>è¿˜å¯ä»¥åˆ©ç”¨æŸ¥è¯¢è¡¨è¾¾å¼æ¥æ‰§è¡Œéå¸¸çµæ´»å’Œå¤æ‚çš„æŸ¥è¯¢ã€‚</p>
<ul>
<li>
<p><!-- raw HTML omitted -->åº¦é‡æŒ‡æ ‡å’Œæ ‡ç­¾<!-- raw HTML omitted --></p>
<p>æ¯ä¸ªæ—¶é—´åºåˆ—ï¼ˆ<code>Time Serie</code>ï¼Œç®€ç§°æ—¶åºï¼‰ç”±åº¦é‡æŒ‡æ ‡å’Œä¸€ç»„æ ‡ç­¾é”®å€¼å¯¹å”¯ä¸€ç¡®å®šã€‚</p>
</li>
<li>
<p>åº¦é‡æŒ‡æ ‡åç§°æè¿°äº†è¢«ç›‘æ§ç³»ç»Ÿçš„æŸä¸ªæµ‹é‡ç‰¹å¾ï¼ˆæ¯”å¦‚<code>http_requests_total</code>è¡¨ç¤º<code>http</code>è¯·æ±‚æ€»æ•°ï¼‰ã€‚åº¦é‡æŒ‡æ ‡åç§°ç”±<code>ASCII</code>å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œå†’å·ç»„æˆï¼Œé¡»åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼<code>[a-zA-Z_:][a-zA-Z0-9_:]*</code>ã€‚</p>
</li>
<li>
<p>æ ‡ç­¾å¼€å¯äº†<code>Prometheus</code>çš„å¤šç»´æ•°æ®æ¨¡å‹ã€‚å¯¹äºåŒä¸€ä¸ªåº¦é‡æŒ‡æ ‡ï¼Œä¸åŒæ ‡ç­¾å€¼ç»„åˆä¼šå½¢æˆç‰¹å®šç»´åº¦çš„æ—¶åºã€‚<code>Prometheus</code>çš„æŸ¥è¯¢è¯­è¨€å¯ä»¥é€šè¿‡åº¦é‡æŒ‡æ ‡å’Œæ ‡ç­¾å¯¹æ—¶åºæ•°æ®è¿›è¡Œè¿‡æ»¤å’Œèšåˆã€‚æ”¹å˜ä»»ä½•åº¦é‡æŒ‡æ ‡ä¸Šçš„ä»»ä½•æ ‡ç­¾å€¼ï¼Œéƒ½ä¼šå½¢æˆæ–°çš„æ—¶åºã€‚æ ‡ç­¾åç§°å¯ä»¥åŒ…å«<code>ASCII</code>å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé¡»åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼<code>[a-zA-Z_][a-zA-Z0-9_]*</code>ï¼Œå¸¦æœ‰ _ ä¸‹åˆ’çº¿çš„æ ‡ç­¾åç§°ä¿ç•™ä¸ºå†…éƒ¨ä½¿ç”¨ã€‚æ ‡ç­¾å€¼å¯ä»¥åŒ…å«ä»»æ„<code>Unicode</code>å­—ç¬¦ï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€‚</p>
</li>
<li>
<p><!-- raw HTML omitted -->é‡‡æ ·å€¼(<code>Sample</code>)<!-- raw HTML omitted --></p>
</li>
</ul>
<blockquote>
<p>æ—¶åºæ•°æ®å…¶å®å°±æ˜¯ä¸€ç³»åˆ—é‡‡æ ·å€¼ã€‚æ¯ä¸ªé‡‡æ ·å€¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><!-- raw HTML omitted -->ä¸€ä¸ª<code>64</code>ä½çš„æµ®ç‚¹æ•°å€¼  <!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->ä¸€ä¸ªç²¾ç¡®åˆ°æ¯«ç§’çš„æ—¶é—´æˆ³  <!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->æ³¨è§£(<code>Notation</code>)<!-- raw HTML omitted --></li>
</ul>
<p>ä¸€ä¸ªæ³¨è§£ç”±ä¸€ä¸ªåº¦é‡æŒ‡æ ‡å’Œä¸€ç»„æ ‡ç­¾é”®å€¼å¯¹æ„æˆã€‚å½¢å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f92672">[</span>metric name<span style="color:#f92672">]{[</span>label name<span style="color:#f92672">]=[</span>label value<span style="color:#f92672">]</span>, ...<span style="color:#f92672">}</span>  </span></span></code></pre></div><p>ä¾‹å¦‚ï¼Œåº¦é‡æŒ‡æ ‡ä¸º<code>api_http_requests_total</code>ï¼Œæ ‡ç­¾ä¸º<code>method=&quot;POST&quot;</code>ã€<code>handler=&quot;/messages&quot;</code>çš„æ³¨è§£è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>api_http_requests_total<span style="color:#f92672">{</span>method<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;POST&#34;</span>, handler<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/messages&#34;</span><span style="color:#f92672">}</span></span></span></code></pre></div></blockquote>
</blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->åº¦é‡æŒ‡æ ‡ç±»å‹ <!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->è®¡æ•°å™¨(<code>Counter</code>)<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>è®¡æ•°å™¨æ˜¯ä¸€ç§ç´¯è®¡å‹çš„åº¦é‡æŒ‡æ ‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªåªèƒ½é€’å¢çš„æ•°å€¼ã€‚è®¡æ•°å™¨ä¸»è¦ç”¨äºç»Ÿè®¡ç±»ä¼¼äºæœåŠ¡è¯·æ±‚æ•°ã€ä»»åŠ¡å®Œæˆæ•°å’Œé”™è¯¯å‡ºç°æ¬¡æ•°è¿™æ ·çš„æ•°æ®</code></pre></div><ul>
<li><!-- raw HTML omitted -->è®¡é‡å™¨(<code>Gauge</code>)<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>è®¡é‡å™¨è¡¨ç¤ºä¸€ä¸ªæ—¢å¯ä»¥å¢åŠ , åˆå¯ä»¥å‡å°‘çš„åº¦é‡æŒ‡æ ‡å€¼ã€‚è®¡é‡å™¨ä¸»è¦ç”¨äºæµ‹é‡ç±»ä¼¼äºæ¸©åº¦ã€å†…å­˜ä½¿ç”¨é‡è¿™æ ·çš„ç¬æ—¶æ•°æ®</code></pre></div><ul>
<li><!-- raw HTML omitted -->ç›´æ–¹å›¾(<code>Histogram</code>)<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>ç›´æ–¹å›¾å¯¹è§‚å¯Ÿç»“æœï¼ˆé€šå¸¸æ˜¯è¯·æ±‚æŒç»­æ—¶é—´æˆ–è€…å“åº”å¤§å°è¿™æ ·çš„æ•°æ®ï¼‰è¿›è¡Œé‡‡æ ·ï¼Œå¹¶åœ¨å¯é…ç½®çš„æ¡¶ä¸­å¯¹å…¶è¿›è¡Œç»Ÿè®¡ã€‚æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥äº§ç”Ÿç›´æ–¹å›¾ï¼ˆå‡è®¾åº¦é‡æŒ‡æ ‡ä¸º ï¼‰ï¼š  </code></pre></div><ul>
<li><!-- raw HTML omitted -->æŒ‰æ¡¶è®¡æ•°<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>ç›¸å½“äº&lt;basename&gt;_bucket{le=&#34;&lt;upper inclusive bound&gt;&#34;}</code></pre></div><ul>
<li><!-- raw HTML omitted -->é‡‡æ ·å€¼æ€»å’Œ<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>ç›¸å½“äº &lt;basename&gt;_sum  </code></pre></div><ul>
<li><!-- raw HTML omitted -->é‡‡æ ·å€¼æ€»æ•°<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>ç›¸å½“äº &lt;basename&gt;_count ï¼Œä¹Ÿç­‰åŒäºæŠŠæ‰€æœ‰é‡‡æ ·å€¼æ”¾åˆ°ä¸€ä¸ªæ¡¶é‡Œæ¥è®¡æ•° &lt;basename&gt;_bucket{le=&#34;+Inf&#34;}</code></pre></div><ul>
<li><!-- raw HTML omitted -->æ±‡æ€»(<code>Summary</code>)<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>ç±»ä¼¼äºç›´æ–¹å›¾ï¼Œæ±‡æ€»ä¹Ÿå¯¹è§‚å¯Ÿç»“æœè¿›è¡Œé‡‡æ ·ã€‚é™¤äº†å¯ä»¥ç»Ÿè®¡é‡‡æ ·å€¼æ€»å’Œå’Œæ€»æ•°ï¼Œå®ƒè¿˜èƒ½å¤ŸæŒ‰åˆ†ä½æ•°ç»Ÿè®¡ã€‚æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥äº§ç”Ÿæ±‡æ€»ï¼ˆå‡è®¾åº¦é‡æŒ‡æ ‡ä¸º ï¼‰ï¼š</code></pre></div><ul>
<li><!-- raw HTML omitted -->é‡‡æ ·å€¼æ€»å’Œ<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>ç›¸å½“äº &lt;basename&gt;_sum</code></pre></div><ul>
<li><!-- raw HTML omitted -->é‡‡æ ·å€¼æ€»æ•°<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>ç›¸å½“äº &lt;basename&gt;_count  </code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->ä»»åŠ¡(<code>Job</code>)å’Œå®ä¾‹(<code>Instance</code>)<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<p>åœ¨<code>Prometheus</code>é‡Œï¼Œå¯ä»¥ä»ä¸­æŠ“å–é‡‡æ ·å€¼çš„ç«¯ç‚¹ç§°ä¸ºå®ä¾‹ï¼Œä¸ºäº†æ€§èƒ½æ‰©å±•è€Œå¤åˆ¶å‡ºæ¥çš„å¤šä¸ªè¿™æ ·çš„å®ä¾‹å½¢æˆäº†ä¸€ä¸ªä»»åŠ¡</p>
<ul>
<li><!-- raw HTML omitted -->ä¾‹å¦‚ä¸‹é¢çš„<!-- raw HTML omitted --><code>api-server</code><!-- raw HTML omitted -->ä»»åŠ¡æœ‰å››ä¸ªç›¸åŒçš„å®ä¾‹<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>job: api-server
instance 1: 1.2.3.4:5670
instance 2: 1.2.3.4:5671
instance 3: 5.6.7.8:5670
instance 4: 5.6.7.8:5671</code></pre></div><p>â€‹	<code>Prometheus</code>æŠ“å–å®Œé‡‡æ ·å€¼åï¼Œä¼šè‡ªåŠ¨ç»™é‡‡æ ·å€¼æ·»åŠ ä¸‹é¢çš„æ ‡ç­¾å’Œå€¼ï¼š</p>
<ul>
<li>
<p><code>job:</code><!-- raw HTML omitted --> æŠ“å–æ‰€å±ä»»åŠ¡<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>instance</code><!-- raw HTML omitted -->ï¼š æŠ“å–æ¥æºå®ä¾‹<!-- raw HTML omitted --></p>
<p>å¦å¤–æ¯æ¬¡æŠ“å–æ—¶ï¼Œ<code>Prometheus</code>è¿˜ä¼šè‡ªåŠ¨åœ¨ä»¥ä¸‹æ—¶åºé‡Œæ’å…¥é‡‡æ ·å€¼ï¼š</p>
</li>
<li>
<p><code>up{job=&quot;[job-name]&quot;, instance=&quot;instance-id&quot;}</code><!-- raw HTML omitted -->ï¼šé‡‡æ ·å€¼ä¸º 1 è¡¨ç¤ºå®ä¾‹å¥åº·ï¼Œå¦åˆ™ä¸ºä¸å¥åº·<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>scrape_duration_seconds{job=&quot;[job-name]&quot;, instance=&quot;[instance-id]&quot;}</code><!-- raw HTML omitted -->ï¼šé‡‡æ ·å€¼ä¸ºæœ¬æ¬¡æŠ“å–æ¶ˆè€—æ—¶é—´<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>scrape_samples_post_metric_relabeling{job=&quot;&lt;job-name&gt;&quot;, instance=&quot;&lt;instance-id&gt;&quot;}</code><!-- raw HTML omitted -->ï¼šé‡‡æ ·å€¼ä¸ºé‡æ–°æ‰“æ ‡ç­¾åçš„é‡‡æ ·å€¼ä¸ªæ•°  <!-- raw HTML omitted --></p>
</li>
<li>
<p><code>scrape_samples_scraped{job=&quot;&lt;job-name&gt;&quot;, instance=&quot;&lt;instance-id&gt;&quot;}</code><!-- raw HTML omitted -->ï¼šé‡‡æ ·å€¼ä¸ºæœ¬æ¬¡æŠ“å–åˆ°çš„é‡‡æ ·å€¼ä¸ªæ•°  <!-- raw HTML omitted --></p>
</li>
</ul>
</blockquote>
<hr>
<h3 id="prometheusä¸å…¶ä»–ç›‘æ§ç³»ç»Ÿå¯¹æ¯”"><code>Prometheus</code>ä¸å…¶ä»–ç›‘æ§ç³»ç»Ÿå¯¹æ¯”</h3>
<ul>
<li>
<ol>
<li><code>Prometheus vs Zabbix</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://www.zabbix.com" rel="external" target="_self"><code>Zabbix</code></a><!-- raw HTML omitted -->ä½¿ç”¨çš„æ˜¯<!-- raw HTML omitted --><code>C</code><!-- raw HTML omitted -->å’Œ<!-- raw HTML omitted --><code>PHP</code>, <code>Prometheus</code><!-- raw HTML omitted -->ä½¿ç”¨<!-- raw HTML omitted --><code>Golang</code><!-- raw HTML omitted -->æ•´ä½“è€Œè¨€<!-- raw HTML omitted --><code>Prometheus</code><!-- raw HTML omitted -->è¿è¡Œé€Ÿåº¦æ›´å¿«ä¸€ç‚¹<!-- raw HTML omitted --></li>
<li><code>Zabbix</code><!-- raw HTML omitted -->å±äºä¼ ç»Ÿä¸»æœºç›‘æ§ï¼Œä¸»è¦ç”¨äºç‰©ç†ä¸»æœºã€äº¤æ¢æœºã€ç½‘ç»œç­‰ç›‘æ§ï¼Œ<!-- raw HTML omitted --><code>Prometheus</code><!-- raw HTML omitted -->ä¸ä»…é€‚ç”¨ä¸»æœºç›‘æ§ï¼Œè¿˜é€‚ç”¨äº<!-- raw HTML omitted --><code>Cloud</code>ã€<code>SaaS</code>ã€<code>Openstack</code>ã€<code>Container</code><!-- raw HTML omitted -->ç›‘æ§<!-- raw HTML omitted --></li>
<li><code>Zabbix</code><!-- raw HTML omitted -->åœ¨ä¼ ç»Ÿä¸»æœºç›‘æ§æ–¹é¢ï¼Œæœ‰æ›´ä¸°å¯Œçš„æ’ä»¶<!-- raw HTML omitted --></li>
<li><code>Zabbix</code><!-- raw HTML omitted -->å¯ä»¥åœ¨<!-- raw HTML omitted --><code>WebGui</code><!-- raw HTML omitted -->ä¸­é…ç½®å¾ˆå¤šäº‹æƒ…ï¼Œ<!-- raw HTML omitted --><code>Prometheus</code><!-- raw HTML omitted -->éœ€è¦æ‰‹åŠ¨ä¿®æ”¹æ–‡ä»¶é…ç½®<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<ul>
<li>
<ol start="2">
<li><code>Prometheus vs Nagios</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://www.nagios.org" rel="external" target="_self"><code>Nagios</code></a><!-- raw HTML omitted -->æ•°æ®ä¸æ”¯æŒè‡ªå®šä¹‰<!-- raw HTML omitted --><code>Labels</code><!-- raw HTML omitted -->, ä¸æ”¯æŒæŸ¥è¯¢ï¼Œå‘Šè­¦ä¹Ÿä¸æ”¯æŒå»å™ªã€åˆ†ç»„, æ²¡æœ‰æ•°æ®å­˜å‚¨ï¼Œå¦‚æœæƒ³æŸ¥è¯¢å†å²çŠ¶æ€ï¼Œéœ€è¦å®‰è£…æ’ä»¶<!-- raw HTML omitted --></li>
<li><code>Nagios</code><!-- raw HTML omitted -->æ˜¯ä¸Šä¸–çºª 90 å¹´ä»£çš„ç›‘æ§ç³»ç»Ÿï¼Œæ¯”è¾ƒé€‚åˆå°é›†ç¾¤æˆ–é™æ€ç³»ç»Ÿçš„ç›‘æ§<!-- raw HTML omitted --><code>Nagios</code><!-- raw HTML omitted -->å¤ªå¤è€ï¼Œå¾ˆå¤šç‰¹æ€§éƒ½æ²¡æœ‰<!-- raw HTML omitted --><code>Prometheus</code><!-- raw HTML omitted -->è¦ä¼˜ç§€å¾ˆå¤š<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<ul>
<li>
<ol start="3">
<li><code>Prometheus vs Sensu</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://sensu.io" rel="external" target="_self"><code>Sensu</code></a><!-- raw HTML omitted -->å¹¿ä¹‰ä¸Šè®²æ˜¯<!-- raw HTML omitted --><code>Nagios</code><!-- raw HTML omitted -->çš„å‡çº§ç‰ˆæœ¬ï¼Œå®ƒè§£å†³äº†å¾ˆå¤š<!-- raw HTML omitted --><code>Nagios</code><!-- raw HTML omitted -->çš„é—®é¢˜ï¼Œå¦‚æœä½ å¯¹<!-- raw HTML omitted --><code>Nagios</code><!-- raw HTML omitted -->å¾ˆç†Ÿæ‚‰ï¼Œä½¿ç”¨<!-- raw HTML omitted --><code>Sensu</code><!-- raw HTML omitted -->æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©<!-- raw HTML omitted --></li>
<li><code>Sensu</code><!-- raw HTML omitted -->ä¾èµ–<!-- raw HTML omitted --><code>RabbitMQ</code><!-- raw HTML omitted -->å’Œ<!-- raw HTML omitted --><code>Redis</code><!-- raw HTML omitted -->ï¼Œæ•°æ®å­˜å‚¨ä¸Šæ‰©å±•æ€§æ›´å¥½<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<ul>
<li>
<ol start="4">
<li><code>Prometheus vs InfluxDB</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://www.influxdata.com" rel="external" target="_self"><code>InflusDB</code></a><!-- raw HTML omitted -->æ˜¯ä¸€ä¸ªå¼€æºçš„æ—¶åºæ•°æ®åº“ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ•°æ®ï¼Œå¦‚æœæƒ³æ­å»ºç›‘æ§å‘Šè­¦ç³»ç»Ÿï¼Œéœ€è¦ä¾èµ–å…¶ä»–ç³»ç»Ÿ<!-- raw HTML omitted --></li>
<li><code>InfluxDB</code><!-- raw HTML omitted -->åœ¨å­˜å‚¨æ°´å¹³æ‰©å±•ä»¥åŠé«˜å¯ç”¨æ–¹é¢åšçš„æ›´å¥½, æ¯•ç«Ÿæ ¸å¿ƒæ˜¯æ•°æ®åº“<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<hr>
<h3 id="altermanageræ ¸å¿ƒæ¦‚å¿µ"><code>altermanager</code>æ ¸å¿ƒæ¦‚å¿µ</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->åˆ†ç»„<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>åˆ†ç»„å°†ç±»ä¼¼æ€§è´¨çš„è­¦æŠ¥åˆ†ç±»ä¸ºå•ä¸ªé€šçŸ¥ã€‚åœ¨è®¸å¤šç³»ç»Ÿä¸€æ¬¡æ€§å¤±è´¥å¹¶ä¸”æ•°ç™¾åˆ°æ•°åƒä¸ªè­¦æŠ¥å¯èƒ½åŒæ—¶å‘ç”Ÿçš„è¾ƒå¤§ä¸­æ–­æœŸé—´ï¼Œè¿™å°¤å…¶æœ‰ç”¨</li>
<li>ç¤ºä¾‹ï¼šå‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶ï¼Œç¾¤é›†ä¸­æ­£åœ¨è¿è¡Œæ•°åæˆ–æ•°ç™¾ä¸ªæœåŠ¡å®ä¾‹ã€‚ä¸€åŠçš„æœåŠ¡å®ä¾‹æ— æ³•å†è®¿é—®æ•°æ®åº“ã€‚<code>Prometheus</code>ä¸­çš„è­¦æŠ¥è§„åˆ™é…ç½®ä¸ºåœ¨æ¯ä¸ªæœåŠ¡å®ä¾‹æ— æ³•ä¸æ•°æ®åº“é€šä¿¡æ—¶å‘é€è­¦æŠ¥ã€‚ç»“æœï¼Œæ•°ç™¾ä¸ªè­¦æŠ¥è¢«å‘é€åˆ°<code>Alertmanager</code></li>
<li>ä½œä¸ºç”¨æˆ·ï¼Œäººä»¬åªæƒ³è·å¾—å•ä¸ªé¡µé¢ï¼ŒåŒæ—¶ä»èƒ½å¤Ÿç¡®åˆ‡åœ°çœ‹åˆ°å“ªäº›æœåŠ¡å®ä¾‹å—åˆ°å½±å“ã€‚å› æ­¤ï¼Œå¯ä»¥å°†<code>Alertmanager</code>é…ç½®ä¸ºæŒ‰ç¾¤é›†å’Œ<code>alertname</code>å¯¹è­¦æŠ¥è¿›è¡Œåˆ†ç»„ï¼Œä»¥ä¾¿å‘é€å•ä¸ªç´§å‡‘é€šçŸ¥</li>
<li>é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„è·¯ç”±æ ‘é…ç½®è­¦æŠ¥çš„åˆ†ç»„ï¼Œåˆ†ç»„é€šçŸ¥çš„å®šæ—¶ä»¥åŠè¿™äº›é€šçŸ¥çš„æ¥æ”¶å™¨</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->æŠ‘åˆ¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>å¦‚æœæŸäº›å…¶ä»–è­¦æŠ¥å·²ç»è§¦å‘ï¼Œåˆ™æŠ‘åˆ¶æ˜¯æŠ‘åˆ¶æŸäº›è­¦æŠ¥çš„é€šçŸ¥çš„æ¦‚å¿µã€‚ç¤ºä¾‹ï¼šæ­£åœ¨è§¦å‘è­¦æŠ¥ï¼Œé€šçŸ¥æ— æ³•è®¿é—®æ•´ä¸ªé›†ç¾¤ã€‚<code>Alertmanager</code>å¯ä»¥é…ç½®ä¸ºåœ¨è¯¥ç‰¹å®šè­¦æŠ¥è§¦å‘æ—¶å°†ä¸è¯¥é›†ç¾¤æœ‰å…³çš„æ‰€æœ‰å…¶ä»–è­¦æŠ¥é™éŸ³ã€‚è¿™å¯ä»¥é˜²æ­¢æ•°ç™¾æˆ–æ•°åƒä¸ªä¸å®é™…é—®é¢˜æ— å…³çš„è§¦å‘è­¦æŠ¥çš„é€šçŸ¥ã€‚é€šè¿‡<code>Alertmanager</code>çš„é…ç½®æ–‡ä»¶é…ç½®ç¦æ­¢</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->æ²‰é»˜<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>3æ²‰é»˜æ˜¯åœ¨ç»™å®šæ—¶é—´å†…ç®€å•åœ°é™éŸ³è­¦æŠ¥çš„ç®€å•æ–¹æ³•ã€‚åŸºäºåŒ¹é…å™¨é…ç½®é™é»˜ï¼Œå°±åƒè·¯ç”±æ ‘ä¸€æ ·ã€‚æ£€æŸ¥ä¼ å…¥è­¦æŠ¥å®ƒä»¬æ˜¯å¦åŒ¹é…æ´»åŠ¨é™é»˜çš„æ‰€æœ‰ç›¸ç­‰æˆ–æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å™¨ã€‚å¦‚æœä»–ä»¬è¿™æ ·åšï¼Œåˆ™ä¸ä¼šå‘é€è¯¥è­¦æŠ¥çš„é€šçŸ¥ã€‚åœ¨<code>Alertmanager</code>çš„<code>Web</code>ç•Œé¢ä¸­é…ç½®äº†é™éŸ³</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->å®¢æˆ·ç«¯è¡Œä¸º<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>Alertmanager</code>å¯¹å…¶å®¢æˆ·çš„è¡Œä¸ºæœ‰ç‰¹æ®Šè¦æ±‚ã€‚è¿™äº›ä»…é€‚ç”¨äºä¸ä½¿ç”¨<code>Prometheus</code>å‘é€è­¦æŠ¥çš„é«˜çº§ç”¨ä¾‹</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->é«˜å¯ç”¨<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>Alertmanager</code>æ”¯æŒé…ç½®ä»¥åˆ›å»ºç”¨äºé«˜å¯ç”¨æ€§çš„é›†ç¾¤ã€‚è¿™å¯ä»¥ä½¿ç”¨<code>--cluster- *</code>æ ‡å¿—è¿›è¡Œé…ç½®ã€‚é‡è¦çš„æ˜¯ä¸è¦åœ¨<code>Prometheus</code>å’Œå®ƒçš„<code>Alertmanagers</code>ä¹‹é—´åŠ è½½å¹³è¡¡æµé‡ï¼Œè€Œæ˜¯å°†<code>Prometheus</code>æŒ‡å‘æ‰€æœ‰<code>Alertmanagers</code>çš„åˆ—è¡¨</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="6">
<li><!-- raw HTML omitted -->ç›‘æ§è¦ç‚¹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th>ç›‘æ§æ–¹å¼</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç¡¬ä»¶ç›‘æ§</td>
<td>æ¸©åº¦ã€ç¡¬ä»¶æ•…éšœç­‰</td>
</tr>
<tr>
<td>ç³»ç»Ÿç›‘æ§</td>
<td><code>CPU</code>ã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘å¡æµé‡ã€<code>TCP</code>çŠ¶æ€ã€è¿›ç¨‹æ•°</td>
</tr>
<tr>
<td>åº”ç”¨ç›‘æ§</td>
<td><code>Nginx</code>ã€<code>Tomcat</code>ã€<code>PHP</code>ã€<code>MySQL</code>ã€<code>Redis</code>ç­‰</td>
</tr>
<tr>
<td>æ—¥å¿—ç›‘æ§</td>
<td>ç³»ç»Ÿæ—¥å¿—ã€æœåŠ¡æ—¥å¿—ã€è®¿é—®æ—¥å¿—ã€é”™è¯¯æ—¥å¿—</td>
</tr>
<tr>
<td>å®‰å…¨ç›‘æ§</td>
<td><code>WAF</code>ã€æ•æ„Ÿæ–‡ä»¶ç›‘æ§</td>
</tr>
<tr>
<td><code>API</code>ç›‘æ§</td>
<td>å¯ç”¨æ€§ã€æ¥å£è¯·æ±‚ã€ç›¸åº”æ—¶é—´</td>
</tr>
<tr>
<td>ä¸šåŠ¡ç›‘æ§</td>
<td>ä¾‹å¦‚ç”µå•†ç½‘ç«™ã€æ¯åˆ†é’Ÿç”Ÿæˆå¤šå°‘è®¢å•ã€æ³¨å†Œç”¨æˆ·å¤šå°‘ã€æ¨å¹¿æ´»åŠ¨æ•ˆæœ</td>
</tr>
<tr>
<td>æµé‡åˆ†æ</td>
<td>æ ¹æ®æµé‡è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·åœ°ç†ä½ç½®ã€æŸé¡µé¢è®¿é—®çŠ¶æ€ã€é¡µé¢åœç•™æ—¶é—´ç­‰</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Counter</code></td>
<td>é€’å¢è®¡æ•°å™¨ <code>eg</code>ï¼š <code>API</code></td>
</tr>
<tr>
<td><code>Gauge</code></td>
<td>å¯ä»¥ä»»æ„å˜åŒ–çš„æ•°å€¼ <code>eg. cpu</code>å ç”¨ç‡</td>
</tr>
<tr>
<td><code>Histogram</code></td>
<td>å¯¹ä¸€æ®µæ—¶é—´èŒƒå›´å†…æ•°æ®è¿›è¡Œé‡‡æ ·ï¼Œå¹¶å¯¹æ‰€æœ‰æ•°å€¼æ±‚å’Œä¸ç»Ÿè®¡æ•°é‡<code>eg</code>æŸ±çŠ¶å›¾</td>
</tr>
<tr>
<td><code>Summary</code></td>
<td>ä¸<code>Histogram</code>ç±»ä¼¼</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h3 id="å®‰è£…éƒ¨ç½²">å®‰è£…éƒ¨ç½²</h3>
<h4 id="prometheuså®‰è£…"><code>prometheus</code>å®‰è£…</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted --><a href="https://prometheus.io/docs/prometheus/latest/installation/" rel="external" target="_self"><code>docker</code>å®‰è£…</a><!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /opt/prometheus/<span style="color:#f92672">{</span>conf,logs,data<span style="color:#f92672">}</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ docker run --detach --name prometheus <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--restart always --publish 19090:9090 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume /opt/prometheus/data:/data <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume /opt/prometheus/conf:/etc/prometheus <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--config.file<span style="color:#f92672">=</span>/opt/prometheus/conf/prometheus.yml <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>prom/prometheus:v2.40.0  	<span style="color:#75715e"># --config.file ä½¿ç”¨é¢å¤–å·</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;/opt/docker-compost/prometheus/docker-compose.yml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">version: &#34;3&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">services:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">prometheus:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">container_name: prometheus  # å¯åŠ¨ååç§°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">image: &#39;prom/prometheus:v2.40.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># image: &#39;prom/prometheus:v2.40.4&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># image: &#39;prom/prometheus:v2.40.3&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">restart: always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">hostname: &#39;prometheus&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">environment:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  TZ: Asia/Shanghai
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - &#39;19090:9090&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      volumes:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - &#39;/opt/prometheus/data:/data&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - &#39;/opt/prometheus/conf:/etc/prometheus&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ docker-compose up -d</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted --><a href="https://prometheus.io/docs/prometheus/latest/getting_started/" rel="external" target="_self">äºŒè¿›åˆ¶å®‰è£…</a><!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /opt/src <span style="color:#f92672">&amp;&amp;</span> wget https://github.com/prometheus/prometheus/releases/download/v2.40.0/prometheus-2.40.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ tar -zxf prometheus-2.40.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ mv prometheus-2.40.0.linux-amd64 prometheus  
</span></span><span style="display:flex;"><span>$ chown root.root prometheus -R </span></span></code></pre></div><ul>
<li>2.1 <!-- raw HTML omitted -->ç¼–å†™å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/usr/lib/systemd/system/prometheus.service <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=Prometheus
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Documentation=https://prometheus.io/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Type=simple
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/opt/prometheus/prometheus --config.file=/opt/prometheus/prometheus.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecReload=/bin/kill -HUP $MAINPID
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=on-failure  	# æˆ–è€…ä½¿ç”¨ always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StandardOutput=syslog
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StandardError=syslog
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SyslogIdentifier=prometheus
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">User=user_name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Group=user_name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LimitNOFILE=65535
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li>å¯åŠ¨æœåŠ¡ã€ä»¥åŠè®¾ç½®å¼€æœºè‡ªå¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nohup ./prometheus --config.file<span style="color:#f92672">=</span>prometheus.yml 2&gt;&amp;<span style="color:#ae81ff">1</span> 1&gt;prometheus.log &amp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ systemctl enable prometheus
</span></span><span style="display:flex;"><span>$ systemctl start prometheus</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹æœåŠ¡<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ netstat -lntup |grep prometheus
</span></span><span style="display:flex;"><span>tcp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> :::9090                 :::*                    LISTEN      16655/prometheus</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->æºç å®‰è£…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ go get github.com/prometheus/prometheus/cmd/...  
</span></span><span style="display:flex;"><span>$ prometheus --config.file<span style="color:#f92672">=</span>your_config.yml  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æˆ–è€…make build  </span>
</span></span><span style="display:flex;"><span>$ mkdir -p $GOPATH/src/github.com/prometheus
</span></span><span style="display:flex;"><span>$ cd $GOPATH/src/github.com/prometheus
</span></span><span style="display:flex;"><span>$ git clone https://github.com/prometheus/prometheus.git
</span></span><span style="display:flex;"><span>$ cd prometheus
</span></span><span style="display:flex;"><span>$ make build
</span></span><span style="display:flex;"><span>$ ./prometheus --config.file<span style="color:#f92672">=</span>your_config.yml</span></span></code></pre></div></blockquote>
<hr>
<h4 id="alertmanagerå®‰è£…"><code>alertmanager</code>å®‰è£…</h4>
<ul>
<li>
<ol>
<li><code>docker</code><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://quay.io/repository/prometheus/alertmanager?tab=tags&tag=latest" rel="external" target="_self"><code>Alertmanager</code></a></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /opt/alertmanager/<span style="color:#f92672">{</span>conf,logs,data<span style="color:#f92672">}</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ docker run --detach --name alertmanager <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --restart always --publish 19093:9093 --publish 19094:9094 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --volume /opt/alertmanager/data:/data <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --volume /opt/alertmanager/conf:/etc/alertmanager <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  quay.io/prometheus/alertmanager:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;/opt/docker-compost/alertmanager/docker-compose.yml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">version: &#34;3&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  services:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    alertmanager:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      container_name: alertmanager  # å¯åŠ¨ååç§°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      image: &#39;quay.io/prometheus/alertmanager:latest&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      # image: &#39;quay.io/prometheus/alertmanager:v0.24.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      # image: &#39;quay.io/prometheus/alertmanager:v0.23.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      restart: always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      hostname: &#39;alertmanager&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      environment:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        TZ: Asia/Shanghai
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - &#39;19093:9093&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - &#39;19094:9094&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      volumes:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - &#39;/opt/alertmanager/data:/data&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - &#39;/opt/alertmanager/conf:/etc/alertmanager&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ docker-compose up -d</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->äºŒè¿›åˆ¶å®‰è£…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /opt <span style="color:#f92672">&amp;&amp;</span> wget -c https://github.com/prometheus/alertmanager/releases/download/v0.24.0/alertmanager-0.24.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ tar zxf alertmanager-0.24.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ mv alertmanager-0.24.0.linux-amd64 alertmanager
</span></span><span style="display:flex;"><span>$ chown root.root alertmanager -R</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¼–å†™å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/usr/lib/systemd/system/alertmanager.service <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=Alertmanager
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Documentation=https://prometheus.io/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Type=simple
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/opt/alertmanager/alertmanager --config.file=/opt/alertmanager/alertmanager.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=on-failure
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨æœåŠ¡ã€ä»¥åŠè®¾ç½®å¼€æœºè‡ªå¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nohup ./alertmanager --config.file<span style="color:#f92672">=</span>alertmanager.yml 2&gt;&amp;<span style="color:#ae81ff">1</span> 1&gt;alertmanager.log &amp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ systemctl enable alertmanager
</span></span><span style="display:flex;"><span>$ systemctl start alertmanager</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹å¯åŠ¨æœåŠ¡çš„ç«¯å£<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ netstat -lntup |grep alertmanager
</span></span><span style="display:flex;"><span>tcp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> :::9094                 :::*                    LISTEN      17237/alertmanager
</span></span><span style="display:flex;"><span>tcp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> :::9093                 :::*                    LISTEN      17237/alertmanager
</span></span><span style="display:flex;"><span>udp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> :::9094                 :::*                                17237/alertmanager</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->ç¼–è¯‘å®‰è£…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ GO15VENDOREXPERIMENT<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> go get github.com/prometheus/alertmanager/cmd/...
</span></span><span style="display:flex;"><span><span style="color:#75715e"># cd $GOPATH/src/github.com/prometheus/alertmanager</span>
</span></span><span style="display:flex;"><span>$ alertmanager --config.file<span style="color:#f92672">=</span>&lt;your_file&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ‰‹åŠ¨æºç æ„å»º</span>
</span></span><span style="display:flex;"><span>$ mkdir -p $GOPATH/src/github.com/prometheus
</span></span><span style="display:flex;"><span>$ cd $GOPATH/src/github.com/prometheus
</span></span><span style="display:flex;"><span>$ git clone https://github.com/prometheus/alertmanager.git
</span></span><span style="display:flex;"><span>$ cd alertmanager
</span></span><span style="display:flex;"><span>$ make build
</span></span><span style="display:flex;"><span>$ ./alertmanager --config.file<span style="color:#f92672">=</span>&lt;your_file&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># amtoolæ„å»º</span>
</span></span><span style="display:flex;"><span>$ make build BINARIES<span style="color:#f92672">=</span>amtool</span></span></code></pre></div></blockquote>
<hr>
<h4 id="èŠ‚ç‚¹å®‰è£…node_export">èŠ‚ç‚¹å®‰è£…<code>node_export</code></h4>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ©ç”¨<!-- raw HTML omitted --><code>node_export</code><!-- raw HTML omitted -->æ¥ç›‘æ§ä¸»æœºï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†å¾ˆå¤šå…¶ä»–çš„<!-- raw HTML omitted --><code>export</code><!-- raw HTML omitted -->å¯ä»¥ç”¨æ¥ç›´æ¥ä½¿ç”¨<!-- raw HTML omitted --></li>
<li><a href="https://prometheus.io/docs/instrumenting/exporters/" rel="external" target="_self"><code>EXPORTERS AND INTEGRATIONS</code></a></li>
<li><a href="https://prometheus.io/docs/guides/node-exporter/" rel="external" target="_self">ä½¿ç”¨<code>NODE EXPORTER</code>ç›‘æ§<code>LINUX</code>ä¸»æœºæŒ‡æ ‡</a></li>
<li><a href="https://grafana.com/grafana/dashboards/8919-1-node-exporter-for-prometheus-dashboard-cn-0413-consulmanager/" rel="external" target="_self"><code>1 Node Exporter Dashboard 22/04/13 ConsulManager</code>è‡ªåŠ¨åŒæ­¥ç‰ˆ</a></li>
</ul>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->äºŒè¿›åˆ¶å®‰è£…  <!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /opt <span style="color:#f92672">&amp;&amp;</span> wget -c https://github.com/prometheus/node_exporter/releases/download/v1.4.0/node_exporter-1.4.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ tar zxvf node_exporter-1.4.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ mv node_exporter-1.4.0.linux-amd64 node_exporter
</span></span><span style="display:flex;"><span>$ chown root.root node_exporter -R</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¼–å†™å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/usr/lib/systemd/system/node_exporter.service <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=node_exporter
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Documentation=https://prometheus.io/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Type=simple
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/opt/node_exporter/node_exporter
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=on-failure
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨æœåŠ¡ã€ä»¥åŠè®¾ç½®å¼€æœºè‡ªå¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nohup ./node_exporter --config.file<span style="color:#f92672">=</span>node_exporter.yml 2&gt;&amp;<span style="color:#ae81ff">1</span> 1&gt;node_exporter.log &amp;  
</span></span><span style="display:flex;"><span>$ systemctl enable node_exporter
</span></span><span style="display:flex;"><span>$ systemctl start node_exporter</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹å¯åŠ¨çš„æœåŠ¡ç«¯å£<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ netstat -lntup |grep node_export
</span></span><span style="display:flex;"><span>tcp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> :::9100                 :::*                    LISTEN      4551/node_exporter</span></span></code></pre></div></blockquote>
<hr>
<h4 id="éƒ¨ç½²cadvisoré‡‡é›†æº">éƒ¨ç½²<code>cAdvisor</code>é‡‡é›†æº</h4>
<ul>
<li>
<ol>
<li><code>Docker</code><!-- raw HTML omitted -->éƒ¨ç½²<!-- raw HTML omitted --><code>cAdvisor</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://grafana.com/grafana/dashboards/893-main/" rel="external" target="_self"><code>Docker and system monitoring Grafana dashboard</code></a></li>
<li><a href="https://grafana.com/grafana/dashboards/10585-docker-dashboard/" rel="external" target="_self"><code>Grafana Docker Dashboard</code></a></li>
<li><a href="https://grafana.com/grafana/dashboards/16314-docker-container-os-node-node-exporter-cadvisor/?tab=revisions" rel="external" target="_self"><code>docker container &amp; OS node(node_exporter, cadvisor)</code></a></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker run -d --name<span style="color:#f92672">=</span>cadvisor <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -p 8080:8080 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /:/rootfs:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /var/run:/var/run:rw <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /sys:/sys:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /var/lib/docker/:/var/lib/docker:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  google/cadvisor:v0.33.0</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹æŒ‡æ ‡<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ http://&lt;ç›®æ ‡èŠ‚ç‚¹IP&gt;:8080/metrics</span></span></code></pre></div></blockquote>
<hr>
<h4 id="æ•°æ®åº“æœåŠ¡å™¨éƒ¨ç½²mysqld_exporter">æ•°æ®åº“æœåŠ¡å™¨éƒ¨ç½²<code>mysqld_exporter</code></h4>
<blockquote>
<ul>
<li><a href="https://grafana.com/grafana/dashboards/17320-1-mysqld-exporter-dashboard-22-11-06/" rel="external" target="_self"><code>1 Mysqld Exporter Dashboard 22/11/06ä¸­æ–‡ç‰ˆ</code></a></li>
</ul>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->äºŒè¿›åˆ¶å®‰è£…  <!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /opt <span style="color:#f92672">&amp;&amp;</span> wget https://github.com/prometheus/mysqld_exporter/releases/download/v0.14.0/mysqld_exporter-0.14.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ tar zxvf mysqld_exporter-0.14.0.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ mv mysqld_exporter-0.14.0.linux-amd64 mysqld_exporter  
</span></span><span style="display:flex;"><span>$ chown -R root. mysqld_exporter  </span></span></code></pre></div><ul>
<li><code>mysqld_exporter</code><!-- raw HTML omitted -->éœ€è¦è¿æ¥<!-- raw HTML omitted --><code>Mysql</code><!-- raw HTML omitted -->ï¼Œé¦–å…ˆä¸ºå®ƒåˆ›å»ºç”¨æˆ·å¹¶èµ‹äºˆæ‰€éœ€çš„æƒé™<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> REPLICATION CLIENT, PROCESS <span style="color:#66d9ef">ON</span> <span style="color:#f92672">*</span>.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;exporter&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span> <span style="color:#66d9ef">identified</span> <span style="color:#66d9ef">by</span> <span style="color:#e6db74">&#39;123456&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">ON</span> performance_schema.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;exporter&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">flush</span> <span style="color:#66d9ef">privileges</span>;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åœ¨æ•°æ®åº“æœåŠ¡å™¨<!-- raw HTML omitted --><code>mysqld_exporter</code><!-- raw HTML omitted -->ç›®å½•ä¸‹åˆ›å»º<!-- raw HTML omitted --><code>.my.cnf</code><!-- raw HTML omitted -->æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/mysqld_exporter/.my.cnf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[client]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">user=mysql_monitor
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">password=mysql_monitor
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¼–å†™å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/usr/lib/systemd/system/mysqld_exporter.service <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=mysql_exporter
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Documentation=https://prometheus.io/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Type=simple
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/opt/mysqld_exporter/mysqld_exporter --config.my-cnf=/opt/mysqld_exporter/.my.cnf 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=on-failure
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨æœåŠ¡ã€ä»¥åŠè®¾ç½®å¼€æœºè‡ªå¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./mysqld_exporter  --config.my-cnf<span style="color:#f92672">=</span>/opt/mysqld_exporter/.my.cnf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ systemctl enable mysqld_exporter
</span></span><span style="display:flex;"><span>$ systemctl start mysqld_exporter</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹å¯åŠ¨çš„æœåŠ¡ç«¯å£<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ss -unplt|grep mysqld_exporter
</span></span><span style="display:flex;"><span>tcp    LISTEN     <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">128</span>    <span style="color:#f92672">[</span>::<span style="color:#f92672">]</span>:9104               <span style="color:#f92672">[</span>::<span style="color:#f92672">]</span>:*                   users:<span style="color:#f92672">((</span><span style="color:#e6db74">&#34;mysqld_exporter&#34;</span>,pid<span style="color:#f92672">=</span>7339,fd<span style="color:#f92672">=</span>3<span style="color:#f92672">))</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="éƒ¨ç½²pushgatewayæ¨é€ç½‘å…³">éƒ¨ç½²<code>pushgateway</code>(æ¨é€ç½‘å…³)</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->äºŒè¿›åˆ¶å®‰è£…  <!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /opt <span style="color:#f92672">&amp;&amp;</span> wget -c https://github.com/prometheus/pushgateway/releases/download/v1.4.3/pushgateway-1.4.3.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ tar zxf pushgateway-1.4.3.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ mv pushgateway-1.4.3.linux-amd64 pushgateway
</span></span><span style="display:flex;"><span>$ chown root.root pushgateway -R</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¼–å†™å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/usr/lib/systemd/system/pushgateway.service <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=pushgateway
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Documentation=https://prometheus.io/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Type=simple
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/opt/pushgateway/pushgateway
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=on-failure
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨æœåŠ¡ã€ä»¥åŠè®¾ç½®å¼€æœºè‡ªå¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nohup ./pushgateway --config.file<span style="color:#f92672">=</span>node_exporter.yml 2&gt;&amp;<span style="color:#ae81ff">1</span> 1&gt;node_exporter.log &amp;  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ systemctl enable pushgateway
</span></span><span style="display:flex;"><span>$ systemctl start pushgateway</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹å¯åŠ¨çš„æœåŠ¡ç«¯å£<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ netstat -lntup |grep push
</span></span><span style="display:flex;"><span>tcp6       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> :::9091                 :::*                    LISTEN      5982/pushgateway</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_open_falcon">Install_Open_Falcon</h1>

<h2 id="éƒ¨ç½²open-falconæœåŠ¡">éƒ¨ç½²<code>Open Falcon</code>æœåŠ¡</h2>
<h3 id="open-falconæ¶æ„"><code>Open-falcon</code>æ¶æ„</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->ä»‹ç»<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<p><code>OpenFalcon</code>æ˜¯ä¸€æ¬¾ä¼ä¸šçº§ã€é«˜å¯ç”¨ã€å¯æ‰©å±•çš„å¼€æºç›‘æ§è§£å†³æ–¹æ¡ˆã€‚æ­¤é¡¹ç›®æœ€åˆç”±å°ç±³å…¬å¸å‘èµ·ï¼Œå°ç±³è¿ç»´å›¢é˜Ÿä»äº’è”ç½‘å…¬å¸çš„éœ€æ±‚å‡ºå‘ï¼Œæ ¹æ®å¤šå¹´çš„è¿ç»´ç»éªŒï¼Œç»“åˆ<code>SRE</code>ã€<code>SA</code>ã€<code>DEVS</code>çš„ä½¿ç”¨ç»éªŒå’Œåé¦ˆï¼Œå¼€å‘çš„ä¸€å¥—é¢å‘äº’è”ç½‘çš„ä¼ä¸šçº§å¼€æºç›‘æ§äº§å“ï¼Œæœ€æ–°ç‰ˆæœ¬ä¸º<code>v2.0</code>ã€‚ç›®å‰æœ‰å‡ åå®¶å…¬å¸ä¸åŒç¨‹åº¦ä½¿ç”¨<code>OpenFalcon</code>ä½œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->ä¼˜ç‚¹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>é‡‡é›†å™¨è‡ªåŠ¨å‘ç°ï¼Œæ”¯æŒ<code>falcon-agent</code>ã€<code>snmp</code>ã€æ”¯æŒç”¨æˆ·ä¸»åŠ¨pushæ•°æ®ã€ç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶</li>
<li>æ”¯æŒæ¯ä¸ªå‘¨æœŸä¸Šäº¿æ¬¡çš„æ•°æ®é‡‡é›†ã€å‘Šè­¦åˆ¤å®šã€å†å²æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢</li>
<li>é«˜æ•ˆçš„åˆ†åŒºã€æ”¯æŒç›‘æ§ç­–ç•¥æ¨¡æ¿ã€æ¨¡æ¿ç»§æ‰¿å’Œè¦†ç›–ã€å¤šç§å‘Šè­¦æ–¹å¼ã€æ”¯æŒå‘Šè­¦å›è°ƒ</li>
<li>å•èŠ‚ç‚¹èƒ½æ”¯æŒ200ä¸‡<code>metric</code>çš„ä¸ŠæŠ¥ã€å½’æ¡£ã€å­˜å‚¨</li>
<li>å…¶å­˜å‚¨é‡‡ç”¨<code>rrdtool</code>å½’æ¡£ï¼Œç§’çº§è¿”å›ä¸Šç™¾ä¸ª<code>metric</code>ä¸€å¹´çš„å†å²æ•°æ®</li>
<li>å¤šç»´åº¦çš„æ•°æ®å±•ç¤ºï¼Œå¯ç”±ç”¨æˆ·è‡ªå®šä¹‰<code>Screen</code></li>
<li>é€šè¿‡å„ç§æ’ä»¶ç›®å‰æ”¯æŒ<code>Linux</code>ã€<code>Windows</code>ã€<code>Mysql</code>ã€<code>Redis</code>ã€<code>Memache</code>ã€<code>RabbitMQ</code>å’Œäº¤æ¢æœºç›‘æ§</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->ç›‘æ§èŒƒå›´<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>OpenFalcon</code>æ”¯æŒç³»ç»ŸåŸºç¡€ç›‘æ§ï¼Œç¬¬ä¸‰æ–¹æœåŠ¡ç›‘æ§ï¼Œ<code>JVM</code>ç›‘æ§ï¼Œä¸šåŠ¡åº”ç”¨ç›‘æ§</li>
<li>åŸºç¡€ç›‘æ§æŒ‡<code>Linux</code>å¹³å°çš„ç³»ç»ŸæŒ‡æ ‡ç›‘æ§ï¼ŒåŒ…æ‹¬<code>CPU</code>ã€<code>Load</code>ã€å†…å­˜ã€ç£ç›˜ã€<code>IO</code>ã€ç½‘ç»œç­‰ï¼Œè¿™äº›æŒ‡æ ‡ç”±<code>OpenFalcon</code>çš„<code>agent</code>èŠ‚ç‚¹ç›´æ¥æ”¯æŒï¼Œæ— éœ€æ’ä»¶</li>
<li><code>JVM</code>ç›‘æ§ä¸»è¦é€šè¿‡æ’ä»¶å®Œæˆï¼Œæ’ä»¶é€šè¿‡<code>JVM</code>å¼€æ”¾çš„<code>JMX</code>é€šä¿¡ç«¯å£ï¼Œè·å–åˆ°<code>JVM</code>å‚æ•°æŒ‡æ ‡ï¼Œå¹¶æ¨é€åˆ°<code>agent</code>èŠ‚ç‚¹ï¼Œå†ç”±<code>agent</code>å‘é€åˆ°<code>OpenFalcon</code></li>
<li>ç¬¬ä¸‰æ–¹æœåŠ¡ç›‘æ§æŒ‡ä¸€äº›å¸¸è§æœåŠ¡ç›‘æ§ï¼ŒåŒ…æ‹¬<code>MySQL</code>ã€<code>Redis</code>ã€<code>Nginx</code>ç­‰ï¼Œ<code>OpenFalcon</code>å®˜ç½‘æä¾›äº†å¾ˆå¤šç¬¬ä¸‰æ–¹æœåŠ¡çš„ç›‘æ§æ’ä»¶ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°æ’ä»¶ï¼Œå®šä¹‰é‡‡é›†æŒ‡æ ‡ã€‚è€Œé‡‡é›†åˆ°çš„æŒ‡æ ‡ï¼Œä¹Ÿæ˜¯é€šè¿‡æ’ä»¶å…ˆå‘é€ç»™<code>agent</code>ï¼Œå†ç”±agentå‘é€åˆ°<code>OpenFalcon</code></li>
<li>ä¸šåŠ¡åº”ç”¨ç›‘æ§ä¸»è¦æ˜¯ç›‘æ§ä¼ä¸šè‡ªä¸»å¼€å‘çš„åº”ç”¨æœåŠ¡ã€‚ç”±ä¼ä¸šæ ¹æ®ä¸šåŠ¡éœ€è¦å®šä¹‰é‡‡é›†æŒ‡æ ‡ï¼Œè‡ªå®ç°æ’ä»¶ã€‚å°†è·å–åˆ°çš„é‡‡é›†æŒ‡æ ‡å‘é€åˆ°<code>agen</code>tï¼Œå†ç”±<code>agent</code>å‘é€åˆ°<code>OpenFalcon</code></li>
</ul>
</blockquote>
<ul>
<li>
<ol start="4">
<li><code>openfalcon</code><!-- raw HTML omitted -->æ•°æ®æµå‘<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>å¸¸è§çš„<code>OpenFalcon</code>åŒ…å«<code>transfer</code>ã€<code>hbs</code>ã€<code>agent</code>ã€<code>judge</code>ã€<code>graph</code>ã€<code>API</code>å‡ ä¸ªè¿›ç¨‹ã€‚ä½†æ²¡æœ‰æä¾›ç”¨æˆ·ç•Œé¢ã€‚ç”¨æˆ·ç•Œé¢çš„è§£å†³æ–¹æ¡ˆæ˜¯<code>OpenFalcon</code>å®˜æ–¹æä¾›çš„<code>Dashboard</code>ï¼Œç”±<code>python</code>ç¼–å†™çš„ä¸€ä¸ªWebæœåŠ¡ã€‚<code>Dashboard</code>è°ƒç”¨<code>OpenFalcon</code>çš„<code>API</code>èŠ‚ç‚¹<code>REST</code>ï¼Œå®Œæˆç”¨æˆ·è®¤è¯ï¼ŒæŸ¥è¯¢å†å²ç­‰æ“ä½œã€‚</li>
<li>ä»¥ä¸‹æ˜¯å„ä¸ªèŠ‚ç‚¹çš„æ•°æ®æµå‘å›¾ï¼Œä¸»æ•°æ®æµå‘æ˜¯<code>agent</code>-&gt;<code>transfer</code>-&gt;<code>judge/graph</code>ï¼š</li>
</ul>
<p><a href="#R-image-a10605b32ba4d579622f9e23ca3e74c7" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a10605b32ba4d579622f9e23ca3e74c7"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer.jpg"></a></p>
<p><a href="#R-image-f6386271bcd200f60ac9d469a9174235" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f6386271bcd200f60ac9d469a9174235"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-1.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->æ¨¡å—<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<p><a href="#R-image-d95b9adbd134d11635fa38e0b50549dc" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-2.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d95b9adbd134d11635fa38e0b50549dc"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-2.jpg"></a></p>
<p><a href="#R-image-69fa5f1bdadfe20defb1732a61e1c1d0" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-69fa5f1bdadfe20defb1732a61e1c1d0"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-3.png"></a></p>
<p><a href="#R-image-0b8d04e0aafda156afa0b501e9467fa8" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0b8d04e0aafda156afa0b501e9467fa8"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/transfer-4.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="6">
<li><!-- raw HTML omitted -->ç»„ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><code>Agent</code>: æ˜¯ç”¨äºé‡‡é›†è¢«éƒ¨ç½²æœºå™¨ä¸Šçš„ç›‘æ§æ•°æ®ï¼Œæ¯éš”<code>60</code>ç§’<code>push</code>ç»™<code>Transfer</code>æ¨¡å—ã€‚<code>agent</code>ä¸<code>Transfer</code>å»ºç«‹çš„æ˜¯é•¿è¿æ¥ï¼ˆæ¯•ç«Ÿæ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ï¼ŒçŸ­è¿æ¥å¼€é”€å¤ªå¤§ï¼‰ã€‚æ¯å°è¦è¢«ç›‘æ§çš„æœºå™¨éƒ½è¦éƒ¨ç½²è¯¥æ¨¡å—ï¼Œå®ƒæ¶ˆè€—çš„èµ„æºå¾ˆå°ï¼Œä¸ç”¨å¤ªæ‹…å¿ƒè¿™ä¸€ç‚¹ã€‚åŒæ—¶<code>agent</code>æä¾›äº†ä¸€ä¸ª<code>http</code>æ¥å£<code>/v1/push</code>ç”¨äºæ¥æ”¶ç”¨æˆ·æ‰‹å·¥<code>push</code>çš„ä¸€äº›æ•°æ®ï¼Œç„¶åé€šè¿‡é•¿è¿æ¥è¿…é€Ÿè½¬å‘ç»™<code>Transfer</code>ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯¹äºæŸäº›è‡ªå·±é¡¹ç›®æ¥å£çš„ç›‘æ§å°±æ˜¯é€šè¿‡æ­¤æ–¹å¼æ¥è¿›è¡Œä¸Šä¼ çš„</p>
</li>
<li>
<p><code>transfer</code>ï¼š æ˜¯æ•°æ®è½¬å‘æœåŠ¡ã€‚å®ƒæ¥æ”¶<code>agent</code>ä¸ŠæŠ¥çš„æ•°æ®ï¼Œç„¶åæŒ‰ç…§å“ˆå¸Œè§„åˆ™è¿›è¡Œæ•°æ®åˆ†ç‰‡ã€å¹¶å°†åˆ†ç‰‡åçš„æ•°æ®åˆ†åˆ«<code>push</code>ç»™<code>graph</code>å’Œ<code>judge</code>ç­‰ç»„ä»¶</p>
</li>
<li>
<p><code>graph</code>æ˜¯å­˜å‚¨ç»˜å›¾æ•°æ®çš„ç»„ä»¶ã€‚<code>graph</code>ç»„ä»¶æ¥æ”¶<code>transfer</code>ç»„ä»¶æ¨é€ä¸Šæ¥çš„ç›‘æ§æ•°æ®ï¼ŒåŒæ—¶å¤„ç†<code>query</code>ç»„ä»¶çš„æŸ¥è¯¢è¯·æ±‚ã€è¿”å›ç»˜å›¾æ•°æ®</p>
</li>
<li>
<p><code>query</code>ç»„ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„ç»˜å›¾æ•°æ®æŸ¥è¯¢å…¥å£ã€‚<code>query</code>ç»„ä»¶æ¥æ”¶æŸ¥è¯¢è¯·æ±‚ï¼Œæ ¹æ®ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å»ç›¸åº”çš„<code>graph</code>å®ä¾‹æŸ¥è¯¢ä¸åŒç›‘æ§é¡¹çš„æ•°æ®ï¼Œç„¶åæ±‡æ€»æ‹¿åˆ°çš„æ•°æ®ï¼Œæœ€åç»Ÿä¸€è¿”å›ç»™ç”¨æˆ·</p>
</li>
<li>
<p><code>dashboard</code>æ˜¯é¢å‘ç”¨æˆ·çš„æŸ¥è¯¢ç•Œé¢ã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°<code>push</code>åˆ°<code>graph</code>ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶æŸ¥çœ‹å…¶è¶‹åŠ¿å›¾</p>
</li>
<li>
<p>é‚®ä»¶çŸ­ä¿¡å‘é€æ¨¡å—ï¼Œè¿™ä¸ªç»„ä»¶æ²¡æœ‰ä»£ç ï¼Œéœ€è¦å„ä¸ªå…¬å¸è‡ªè¡Œæä¾›ã€‚ç›‘æ§ç³»ç»Ÿäº§ç”ŸæŠ¥è­¦äº‹ä»¶ä¹‹åéœ€è¦å‘é€æŠ¥è­¦é‚®ä»¶æˆ–è€…æŠ¥è­¦çŸ­ä¿¡ï¼Œå„ä¸ªå…¬å¸å¯èƒ½æœ‰è‡ªå·±çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œæœ‰è‡ªå·±çš„é‚®ä»¶å‘é€æ–¹æ³•ï¼›æœ‰è‡ªå·±çš„çŸ­ä¿¡é€šé“ï¼Œæœ‰è‡ªå·±çš„çŸ­ä¿¡å‘é€æ–¹æ³•ã€‚<code>falcon</code>ä¸ºäº†é€‚é…å„ä¸ªå…¬å¸ï¼Œåœ¨æ¥å…¥æ–¹æ¡ˆä¸Šåšäº†ä¸€ä¸ªè§„èŒƒï¼Œéœ€è¦å„å…¬å¸æä¾›<code>http</code>çš„çŸ­ä¿¡å’Œé‚®ä»¶å‘é€æ¥å£</p>
</li>
<li>
<p><code>Sender</code>ï¼š 6 ä¸­æåˆ°å„ä¸ªå…¬å¸ä¼šæä¾›é‚®ä»¶ã€çŸ­ä¿¡å‘é€æ¥å£ï¼Œä½†æ˜¯äº§ç”Ÿäº†æŠ¥è­¦ä¹‹åå°±ç«‹é©¬è°ƒç”¨è¿™äº›æ¥å£å‘é€æŠ¥è­¦ï¼Œæ˜¯ä¸åˆé€‚çš„ã€‚å› ä¸ºè¿™äº›æ¥å£å¯èƒ½æ— æ³•å¤„ç†å·¨å¤§çš„å¹¶å‘é‡ï¼Œè€Œä¸”æ¥å£æœ¬èº«çš„å¤„ç†é€Ÿåº¦å¯èƒ½ä¹Ÿæ¯”è¾ƒæ…¢ï¼Œè¿™ä¼šæ‹–æ…¢æˆ‘ä»¬çš„å¤„ç†é€»è¾‘ã€‚æ‰€ä»¥ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯æŠŠé‚®ä»¶ã€çŸ­ä¿¡å‘é€è¿™ä¸ªäº‹æƒ…åšæˆå¼‚æ­¥çš„ã€‚<code>Sender</code>æä¾›ä¸€ä¸ªçŸ­ä¿¡<code>redis</code>é˜Ÿåˆ—ï¼Œæä¾›ä¸€ä¸ªé‚®ä»¶<code>redis</code>é˜Ÿåˆ—ã€‚å½“æœ‰çŸ­ä¿¡è¦å‘é€çš„æ—¶å€™ï¼Œç›´æ¥å°†çŸ­ä¿¡å†…å®¹å†™å…¥çŸ­ä¿¡<code>redis</code>é˜Ÿåˆ—å³å¯ï¼Œå½“æœ‰é‚®ä»¶è¦å‘é€çš„æ—¶å€™ï¼Œç›´æ¥å°†é‚®ä»¶å†…å®¹å†™å…¥é‚®ä»¶<code>redis</code>é˜Ÿåˆ—ã€‚é’ˆå¯¹æ¯ä¸ªé˜Ÿåˆ—ï¼Œåé¢æœ‰ä¸€ä¸ªé¢„è®¾å¤§å°çš„<code>worker</code>çº¿ç¨‹æ± æ¥å¤„ç†ã€‚æœ‰äº†é˜Ÿåˆ—çš„ç¼“å†²ï¼Œå³ä¾¿æŸä¸ªæ—¶åˆ»äº§ç”Ÿäº†å¤§é‡æŠ¥è­¦ï¼Œé€ æˆé‚®ä»¶ã€çŸ­ä¿¡å‘é€çš„çªå‘æµé‡ï¼Œä¹Ÿä¸ä¼šå¯¹é‚®ä»¶ã€çŸ­ä¿¡å‘é€æ¥å£é€ æˆå†²å‡»</p>
</li>
<li>
<p><code>Fe</code>è¿™æ˜¯<code>Go</code>ç‰ˆæœ¬çš„<code>UIC</code>ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„<code>web</code>å…¥å£ï¼Œå› ä¸ºç›‘æ§ç»„ä»¶ä¼—å¤šï¼Œè®°å¿†<code>ip</code>ã€<code>port</code>å»è®¿é—®è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚<code>fe</code>åƒæ˜¯ä¸€ä¸ªç›‘æ§çš„<code>hao123.</code>å°±æ˜¯ä¸ºäº†ç”¨æˆ·ä½¿ç”¨æ–¹ä¾¿é…ç½®çš„ä¸€ä¸ªwebæµè§ˆå™¨æ“ä½œç•Œé¢</p>
</li>
<li>
<p><code>Portal</code>æ˜¯ç”¨æ¥é…ç½®æŠ¥è­¦ç­–ç•¥çš„,å’Œ<code>HBS</code>ä¸€èµ·æè¿°</p>
</li>
<li>
<p><code>HBS(Heartbeat Server)</code>ï¼š</p>
</li>
</ul>
<blockquote>
<ul>
<li><code>Portal</code>çš„æ•°æ®åº“ä¸­æœ‰ä¸€ä¸ª<code>host</code>è¡¨ï¼Œç»´æŠ¤äº†å…¬å¸æ‰€æœ‰æœºå™¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚<code>hostname</code>ã€<code>ip</code>ç­‰ç­‰ã€‚<code>HBS</code>ç¬¬ä¸€ä¸ªåŠŸèƒ½ï¼š<code>agent</code>å‘é€å¿ƒè·³ä¿¡æ¯ç»™<code>HBS</code>çš„æ—¶å€™ï¼Œä¼šæŠŠ<code>hostname</code>ã€<code>ip</code>ã€<code>agent</code> <code>version</code>ã€<code>plugin version</code>ç­‰ä¿¡æ¯å‘Šè¯‰<code>HBS</code>ï¼Œ<code>HBS</code>è´Ÿè´£æ›´æ–°<code>host</code>è¡¨</li>
<li><code>Agent</code>åªé‡‡é›†ç”¨æˆ·é…ç½®çš„ç›‘æ§é¡¹ã€‚æ¯”å¦‚ç”¨æˆ·é…ç½®äº†å¯¹æŸä¸ªæœºå™¨<code>80</code>ç«¯å£çš„ç›‘æ§ï¼Œæˆ‘ä»¬æ‰ä¼šå»é‡‡é›†è¿™ä¸ªæœºå™¨<code>80</code>ç«¯å£çš„å­˜æ´»æ€§ã€‚é‚£<code>agent</code>å¦‚ä½•çŸ¥é“è‡ªå·±åº”è¯¥é‡‡é›†å“ªäº›ç«¯å£å’Œè¿›ç¨‹å‘¢ï¼Ÿå‘<code>HBS</code>è¦ï¼Œ<code>HBS</code>å»è¯»å–<code>Portal</code>çš„æ•°æ®åº“ï¼Œè¿”å›ç»™<code>agent</code></li>
<li><code>Judge</code>éœ€è¦è·å–æ‰€æœ‰çš„æŠ¥è­¦ç­–ç•¥ï¼Œè®©<code>Judge</code>å»è¯»å–<code>Portal</code>çš„<code>DB</code>ä¹ˆï¼Ÿä¸å¤ªå¥½ã€‚å› ä¸º<code>Judge</code>çš„å®ä¾‹æ•°ç›®æ¯”è¾ƒå¤šï¼Œå¦‚æœå…¬å¸æœ‰å‡ åä¸‡æœºå™¨ï¼Œ<code>Judge</code>å®ä¾‹æ•°ç›®å¯èƒ½ä¼šæ˜¯å‡ ç™¾ä¸ªï¼Œå‡ ç™¾ä¸ª<code>Judge</code>å®ä¾‹å»è®¿é—®<code>Portal</code>æ•°æ®åº“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å‹åŠ›ã€‚æ—¢ç„¶<code>HBS</code>æ— è®ºå¦‚ä½•éƒ½è¦è®¿é—®<code>Portal</code>çš„æ•°æ®åº“äº†ï¼Œé‚£å°±è®©<code>HBS</code>å»è·å–æ‰€æœ‰çš„æŠ¥è­¦ç­–ç•¥ç¼“å­˜åœ¨å†…å­˜é‡Œï¼Œç„¶å<code>Judge</code>å»å‘<code>HBS</code>è¯·æ±‚ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¯¹<code>Portal DB</code>çš„å‹åŠ›å°±ä¼šå¤§å¤§å‡å°</li>
</ul>
</blockquote>
<ul>
<li><code>Judge Judge</code>ç”¨äºå‘Šè­¦åˆ¤æ–­ï¼Œ<code>agent</code>å°†æ•°æ®<code>push</code>ç»™<code>Transfer</code>ï¼Œ<code>Transfer</code>ä¸ä½†ä¼šè½¬å‘ç»™<code>Graph</code>ç»„ä»¶æ¥ç»˜å›¾ï¼Œè¿˜ä¼šè½¬å‘ç»™<code>Judge</code>ç”¨äºåˆ¤æ–­æ˜¯å¦è§¦å‘å‘Šè­¦ã€‚å› ä¸ºç›‘æ§ç³»ç»Ÿæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œä¸€å°æœºå™¨æ˜¾ç„¶æ˜¯æä¸å®šçš„ï¼Œæ‰€ä»¥å¿…é¡»è¦æœ‰ä¸ªæ•°æ®åˆ†ç‰‡æ–¹æ¡ˆã€‚<code>Transfer</code>é€šè¿‡ä¸€è‡´æ€§å“ˆå¸Œæ¥åˆ†ç‰‡ï¼Œæ¯ä¸ª<code>Judge</code>å°±åªéœ€è¦å¤„ç†ä¸€å°éƒ¨åˆ†æ•°æ®å°±å¯ä»¥äº†ã€‚æ‰€ä»¥åˆ¤æ–­å‘Šè­¦çš„åŠŸèƒ½ä¸èƒ½æ”¾åœ¨ç›´æ¥çš„æ•°æ®æ¥æ”¶ç«¯<code>Transfer</code>ï¼Œè€Œåº”è¯¥æ”¾åˆ°<code>Transfer</code>åé¢çš„ç»„ä»¶é‡Œï¼Œå°±æœ‰äº†<code>Judge.</code></li>
<li><code>Links</code>æ˜¯ä¸ºæŠ¥è­¦åˆå¹¶åŠŸèƒ½å†™çš„ç»„ä»¶ã€‚å¦‚æœä½ ä¸æƒ³ä½¿ç”¨æŠ¥è­¦åˆå¹¶åŠŸèƒ½ï¼Œè¿™ä¸ªç»„ä»¶æ˜¯æ— éœ€å®‰è£…çš„ã€‚ä¸€èˆ¬ä¸ä¼šç”¨åˆ°</li>
<li><code>alarm</code>æ¨¡å—æ˜¯å¤„ç†æŠ¥è­¦<code>event</code>çš„ï¼Œ<code>judge</code>äº§ç”Ÿçš„æŠ¥è­¦<code>event</code>å†™å…¥<code>redis</code>ï¼Œ<code>alarm</code>ä»<code>redis</code>è¯»å–å¤„ç†ï¼ŒæŠ¥è­¦<code>event</code>çš„å¤„ç†é€»è¾‘å¹¶éä»…ä»…æ˜¯å‘é‚®ä»¶ã€å‘çŸ­ä¿¡è¿™ä¹ˆç®€å•ã€‚ä¸ºäº†èƒ½å¤Ÿè‡ªåŠ¨åŒ–å¯¹<code>event</code>åšå¤„ç†ï¼Œ<code>alarm</code>éœ€è¦æ”¯æŒåœ¨äº§ç”Ÿ<code>event</code>çš„æ—¶å€™å›è°ƒç”¨æˆ·æä¾›çš„æ¥å£ï¼›æœ‰çš„æ—¶å€™æŠ¥è­¦çŸ­ä¿¡ã€é‚®ä»¶å¤ªå¤šï¼Œå¯¹äºä¼˜å…ˆçº§æ¯”è¾ƒä½çš„æŠ¥è­¦ï¼Œå¸Œæœ›åšæŠ¥è­¦åˆå¹¶ï¼Œè¿™äº›é€»è¾‘éƒ½æ˜¯åœ¨<code>alarm</code>ä¸­åšçš„</li>
</ul>
</blockquote>
<ul>
<li>
<ol start="7">
<li><!-- raw HTML omitted -->æµç¨‹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>ç›®æ ‡æœåŠ¡å™¨è¿è¡Œ<code>agent</code></li>
<li><code>agent</code>é‡‡é›†å„ç±»ç›‘æ§é¡¹æ•°å€¼ï¼Œä¼ ç»™<code>transfer</code></li>
<li><code>transfer</code>æ ¡éªŒå’Œæ•´ç†ç›‘æ§é¡¹æ•°å€¼ï¼Œåšä¸€è‡´æ€§<code>hash</code>åˆ†ç‰‡ï¼Œä¼ ç»™å¯¹åº”çš„<code>judge</code>æ¨¡å—ä»¥éªŒè¯æ˜¯å¦è§¦å‘å‘Šè­¦</li>
<li><code>transfer</code>æ•´ç†ç›‘æ§é¡¹æ•°å€¼ï¼Œåšä¸€è‡´æ€§<code>hash</code>åˆ†ç‰‡ï¼Œä¼ è¾“ç»™<code>graph</code>ä»¥è¿›è¡Œæ•°æ®çš„å­˜å‚¨</li>
<li><code>judge</code>æ ¹æ®å…·ä½“æŠ¥è­¦ç­–ç•¥æˆ–é˜ˆå€¼è¿›è¡Œå‘Šè­¦åˆ¤æ–­ï¼Œå¦‚è§¦å‘å‘Šè­¦åˆ™ç»„è£…å‘Šè­¦<code>event</code>äº‹ä»¶ï¼Œå†™å…¥ç¼“å­˜é˜Ÿåˆ—</li>
<li><code>alarm</code>å’Œ<code>sender</code>æ ¹æ®<code>event</code>äº‹ä»¶ä¸­çš„åˆ¤å®šç»“æœï¼Œæ‰§è¡Œ<code>event</code>ï¼Œåƒç”¨æˆ·ç»„å‘é€çŸ­ä¿¡æˆ–é‚®ä»¶</li>
<li><code>graph</code>æ”¶åˆ°ç›‘æ§é¡¹æ•°æ®åï¼Œå°†æ•°æ®å­˜å‚¨æˆ<code>RRD</code>æ–‡ä»¶æ ¼å¼ï¼Œè¿›è¡Œå½’æ¡£ï¼Œå¹¶æä¾›æŸ¥è¯¢æ¥å£</li>
<li><code>query</code>å°†è°ƒç”¨<code>graph</code>çš„æŸ¥è¯¢æ¥å£ï¼Œå°†ç›‘æ§æ•°æ®ä¼ é€åˆ°<code>dashboard</code>ä»¥è¿›è¡Œé¡µé¢å±•ç¤º</li>
<li><code>dashboard</code>åˆ™æ¸²æŸ“é¡µé¢ï¼Œå±•ç¤ºæ›²çº¿æŠ¥è¡¨å›¾ç­‰</li>
<li><code>portal</code>æä¾›é¡µé¢ä¾›ç”¨æˆ·é…ç½®æœºå™¨åˆ†ç»„ã€æŠ¥è­¦ç­–ç•¥ã€è¡¨è¾¾å¼ã€<code>nodata</code>ç­‰é…ç½®</li>
</ul>
</blockquote>
<hr>
<h3 id="open-falconéƒ¨ç½²"><code>Open-falcon</code>éƒ¨ç½²</h3>
<blockquote>
<ul>
<li><code>Open-Falcon</code><!-- raw HTML omitted -->ä¸ºå‰åç«¯åˆ†ç¦»çš„æ¶æ„ï¼ŒåŒ…å«<!-- raw HTML omitted --><code>backend</code><!-- raw HTML omitted -->å’Œ<!-- raw HTML omitted --><code>frontend</code><!-- raw HTML omitted -->ä¸¤éƒ¨åˆ†<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->å‰ç«¯(å®¢æˆ·ç«¯)å’Œåç«¯(æœåŠ¡ç«¯)<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->ç¯å¢ƒå‡†å¤‡<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>redis</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install -y redis
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯åŠ¨</span>
</span></span><span style="display:flex;"><span>$ redis-server &amp;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è£…<!-- raw HTML omitted --><code>mysql</code></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->è§£å‹åˆ°<!-- raw HTML omitted --><code>/usr/local</code><!-- raw HTML omitted -->ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget http://ftp.iij.ad.jp/pub/db/mysql/Downloads/MySQL-5.7/mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç§»åŠ¨è‡³è¯¥ç›®å½•<!-- raw HTML omitted --><code>cd /usr/local/mysql</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mv mysql-5.7.22-linux-glibc2.12-x86_64 /usr/local/mysql</span></span></code></pre></div><ul>
<li><code>rpm -qa | grep mariadb</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ rpm -e mariadb-libs â€“nodeps</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»ºæ•°æ®åº“ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir data</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»º<!-- raw HTML omitted --><code>mysql</code><!-- raw HTML omitted -->ç³»ç»Ÿç»„å’Œç³»ç»Ÿç”¨æˆ·å¹¶ä¸å»ºç«‹å®¶ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ groupadd -r mysql <span style="color:#f92672">&amp;&amp;</span> useradd -r -g mysql -s /bin/false -M mysql</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æˆæƒç»™<!-- raw HTML omitted --><code>mysql</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ chown -R mysql:mysql .</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åšä¸ªè½¯é“¾æ¥<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ln -s /usr/local/mysql/bin/* /usr/local/bin</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¼–å†™ä¸»é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/my.cnf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[mysqld]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">basedir=/usr/local/mysql
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">datadir=/usr/local/mysql/data
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">pid-file=/usr/local/mysql/data/mysqld.pid
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">socket=/usr/local/mysql/mysql.sock
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">log-error=/usr/local/mysql/data/mysql.err
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[client]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">socket=/usr/local/mysql/mysql.sock
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆå§‹åŒ–æ•°æ®åº“<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mysqld --initialize --user<span style="color:#f92672">=</span>mysql --basedir<span style="color:#f92672">=</span>/usr/local/mysql --datadir<span style="color:#f92672">=</span>/usr/local/mysql/data</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç§»åŠ¨è‡³<!-- raw HTML omitted --><code>support-files</code><!-- raw HTML omitted -->ç›®å½•ä¸‹<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd support-files</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¤åˆ¶å¯åŠ¨æœåŠ¡è‡³<!-- raw HTML omitted --><code>/etc/init.d/mysqld</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp mysql.server /etc/init.d/mysqld</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨<!-- raw HTML omitted --><code>mysql</code><!-- raw HTML omitted -->æœåŠ¡<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /etc/init.d/mysqld start</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æ‰¾å¯†ç <!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat /usr/local/mysql/data/mysql.err</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç™»å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mysql -uroot -p<span style="color:#e6db74">&#39;å¯†ç &#39;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹å¯†ç <!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ alter user root@localhost identified by <span style="color:#e6db74">&#39;123&#39;</span>;</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆå§‹åŒ–<!-- raw HTML omitted --><code>mysql</code><!-- raw HTML omitted -->è¡¨ç»“æ„<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /tmp/ <span style="color:#f92672">&amp;&amp;</span> git clone https://github.com/open-falcon/falcon-plus.git 
</span></span><span style="display:flex;"><span>$ cd /tmp/falcon-plus/scripts/mysql/db_schema/
</span></span><span style="display:flex;"><span>$ mysql -h 127.0.0.1 -u root -p &lt; 1_uic-db-schema.sql
</span></span><span style="display:flex;"><span>$ mysql -h 127.0.0.1 -u root -p &lt; 2_portal-db-schema.sql
</span></span><span style="display:flex;"><span>$ mysql -h 127.0.0.1 -u root -p &lt; 3_dashboard-db-schema.sql
</span></span><span style="display:flex;"><span>$ mysql -h 127.0.0.1 -u root -p &lt; 4_graph-db-schema.sql
</span></span><span style="display:flex;"><span>$ mysql -h 127.0.0.1 -u root -p &lt; 5_alarms-db-schema.sql
</span></span><span style="display:flex;"><span>$ rm -rf /tmp/falcon-plus/</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>Go</code><!-- raw HTML omitted -->è¯­è¨€å¼€å‘ç¯å¢ƒ(éœ€è¦<code>epel</code>æº)<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install golang -y</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹<!-- raw HTML omitted --><code>go</code><!-- raw HTML omitted -->çš„å®‰è£…è·¯å¾„<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ find / -name go</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è®¾ç½®ç¯å¢ƒå˜é‡<!-- raw HTML omitted --><code>GOROOT</code>å’Œ<code>GOPATH</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ export GOROOT<span style="color:#f92672">=</span>/usr/lib/golang
</span></span><span style="display:flex;"><span>$ export GOPATH<span style="color:#f92672">=</span>/home</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ç‰ˆæœ¬<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget https://github.com/open-falcon/falcon-plus/releases/download/v0.2.1/open-falcon-v0.2.1.tar.gz</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->å¯åŠ¨åç«¯<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»ºå·¥ä½œç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ export FALCON_HOME<span style="color:#f92672">=</span>/home/work
</span></span><span style="display:flex;"><span>$ export WORKSPACE<span style="color:#f92672">=</span>$FALCON_HOME/open-falcon
</span></span><span style="display:flex;"><span>$ mkdir -p $WORKSPACE</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è§£å‹äºŒè¿›åˆ¶åŒ…<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ tar -xzvf open-falcon-v0.2.1.tar.gz -C $WORKSPACE</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åœ¨ä¸€å°æœºå™¨ä¸Šå¯åŠ¨æ‰€æœ‰çš„åç«¯ç»„ä»¶<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>
<p><!-- raw HTML omitted -->ä¿®æ”¹é…ç½®æ–‡ä»¶<!-- raw HTML omitted --><code>cfg.json</code></p>
<p>éƒ¨åˆ†æ¨¡å—ä¾èµ–è¿æ¥æ•°æ®åº“ï¼Œå› ä¸ºå¦‚æœä¸ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ<code>aggregator</code>æ¨¡å—ä¼šå‡ºç°æ— æ³•å¯åŠ¨ï¼Œ<code>graph</code>ã€<code>hbs</code>ã€<code>nodata</code>ã€<code>api</code>ã€<code>alarm</code>æ¨¡å—ä¼šå‡ºç°å¼€å¯ä¸æŠ¥é”™ä½†æ˜¯çŠ¶æ€ä¸ºå¼€å¯å¤±è´¥çš„æƒ…å†µã€‚</p>
<p>å¦‚æœéœ€è¦æ¯ä¸ªæ¨¡å—éƒ½èƒ½æ­£å¸¸å¯åŠ¨ï¼Œéœ€è¦å°†ä¸Šé¢æ¨¡å—çš„<code>cfg.json</code>çš„æ•°æ®åº“ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>æ¨¡å—</th>
<th>é…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>aggregator</code></td>
<td><code>/home/work/aggregator/config/cfg.json</code></td>
</tr>
<tr>
<td><code>graph</code></td>
<td><code>/home/work/graph/config/cfg.json</code></td>
</tr>
<tr>
<td><code>hbs</code></td>
<td><code>/home/work/hbs/config/cfg.json</code></td>
</tr>
<tr>
<td><code>nodata</code></td>
<td><code>/home/work/nodata/config/cfg.json</code></td>
</tr>
<tr>
<td><code>api</code></td>
<td><code>/home/work/api/config/cfg.json</code></td>
</tr>
<tr>
<td><code>alarm</code></td>
<td><code>/home/work/alarm/config/cfg.json</code></td>
</tr>
</tbody>
</table>
<ul>
<li><!-- raw HTML omitted -->å¯åŠ¨<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd $WORKSPACE
</span></span><span style="display:flex;"><span>$ ./open-falcon start
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ£€æŸ¥æ‰€æœ‰æ¨¡å—çš„å¯åŠ¨çŠ¶å†µ</span>
</span></span><span style="display:flex;"><span>$ ./open-falcon check</span></span></code></pre></div></blockquote>
</blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->å®‰è£…å‰ç«¯<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»ºå·¥ä½œç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ export HOME<span style="color:#f92672">=</span>/home/work
</span></span><span style="display:flex;"><span>$ export WORKSPACE<span style="color:#f92672">=</span>$HOME/open-falcon
</span></span><span style="display:flex;"><span>$ mkdir -p $WORKSPACE
</span></span><span style="display:flex;"><span>$ cd $WORKSPACE</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å…‹éš†å‰ç«¯ç»„ä»¶<!-- raw HTML omitted --><code>diamante</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd $WORKSPACE
</span></span><span style="display:flex;"><span>$ git clone https://github.com/open-falcon/dashboard.git</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å®‰è£…ä¾èµ–åŒ…<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install -y python-virtualenv
</span></span><span style="display:flex;"><span>$ yum install -y python-devel
</span></span><span style="display:flex;"><span>$ yum install -y openldap-devel
</span></span><span style="display:flex;"><span>$ yum install -y mysql-devel
</span></span><span style="display:flex;"><span>$ yum groupinstall <span style="color:#e6db74">&#34;Development tools&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cd $WORKSPACE/dashboard/
</span></span><span style="display:flex;"><span>$ virtualenv ./env
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ./env/bin/pip install -r pip_requirements.txt -i https://pypi.douban.com/simple</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>dashboardçš„é…ç½®æ–‡ä»¶ä¸ºï¼š <span style="color:#e6db74">&#39;rrd/config.py&#39;</span>ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># API_ADDR è¡¨ç¤ºåç«¯apiç»„ä»¶çš„åœ°å€</span>
</span></span><span style="display:flex;"><span>API_ADDR <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://127.0.0.1:8080/api/v1&#34;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ ¹æ®å®é™…æƒ…å†µï¼Œä¿®æ”¹PORTAL_DB_*, é»˜è®¤ç”¨æˆ·åä¸ºrootï¼Œé»˜è®¤å¯†ç ä¸º&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ ¹æ®å®é™…æƒ…å†µï¼Œä¿®æ”¹ALARM_DB_*, é»˜è®¤ç”¨æˆ·åä¸ºrootï¼Œé»˜è®¤å¯†ç ä¸º&#34;&#34;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åœ¨ç”Ÿäº§ç¯å¢ƒå¯åŠ¨<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ bash control start
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åœæ­¢</span>
</span></span><span style="display:flex;"><span>$ bash control stop
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŸ¥çœ‹æ—¥å¿—</span>
</span></span><span style="display:flex;"><span>$ Bash control tail</span></span></code></pre></div><ul>
<li><code>dashboard</code><!-- raw HTML omitted -->ç”¨æˆ·ç®¡ç†<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code>dashbordæ²¡æœ‰é»˜è®¤åˆ›å»ºä»»ä½•è´¦å·åŒ…æ‹¬ç®¡ç†è´¦å·ï¼Œéœ€è¦ä½ é€šè¿‡é¡µé¢è¿›è¡Œæ³¨å†Œè´¦å·ã€‚
æƒ³æ‹¥æœ‰ç®¡ç†å…¨å±€çš„è¶…çº§ç®¡ç†å‘˜è´¦å·ï¼Œéœ€è¦æ‰‹åŠ¨æ³¨å†Œç”¨æˆ·åä¸ºrootçš„è´¦å·ï¼ˆç¬¬ä¸€ä¸ªå¸å·åç§°ä¸ºrootçš„ç”¨æˆ·ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸ºè¶…çº§ç®¡ç†å‘˜ï¼‰ã€‚
è¶…çº§ç®¡ç†å‘˜å¯ä»¥ç»™æ™®é€šç”¨æˆ·åˆ†é…æƒé™ç®¡ç†ã€‚

å°æç¤ºï¼šæ³¨å†Œè´¦å·èƒ½å¤Ÿè¢«ä»»ä½•æ‰“å¼€dashboardé¡µé¢çš„äººæ³¨å†Œï¼Œæ‰€ä»¥å½“ç»™ç›¸å…³çš„äººæ³¨å†Œå®Œè´¦å·åï¼Œéœ€è¦å»å…³é—­æ³¨å†Œè´¦å·åŠŸèƒ½ã€‚åªéœ€è¦å»ä¿®æ”¹apiç»„ä»¶çš„é…ç½®æ–‡ä»¶cfg.jsonï¼Œå°†signup_disableé…ç½®é¡¹ä¿®æ”¹ä¸ºtrueï¼Œé‡å¯apiå³å¯ã€‚å½“éœ€è¦ç»™äººå¼€è´¦å·çš„æ—¶å€™ï¼Œå†å°†é…ç½®é€‰é¡¹æ”¹å›å»ï¼Œç”¨å®Œå†å…³æ‰å³å¯ã€‚</code></pre></div></blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->è¢«ç›‘æ§ç«¯é…ç½®<!-- raw HTML omitted --><code>agent</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>agent</code><!-- raw HTML omitted -->éœ€è¦éƒ¨ç½²åˆ°æ‰€æœ‰è¦è¢«ç›‘æ§çš„æœºå™¨ä¸Šï¼Œæ¯”å¦‚å…¬å¸æœ‰10ä¸‡å°æœºå™¨ï¼Œé‚£å°±è¦éƒ¨ç½²10ä¸‡ä¸ª<!-- raw HTML omitted --><code>agent</code>ã€‚<code>agent</code><!-- raw HTML omitted -->æœ¬èº«èµ„æºæ¶ˆè€—å¾ˆå°‘ï¼Œä¸ç”¨æ‹…å¿ƒ<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->é…ç½®è¯´æ˜ï¼šé…ç½®æ–‡ä»¶å¿…é¡»å«<!-- raw HTML omitted --><code>cfg.json</code><!-- raw HTML omitted -->ï¼Œå¯ä»¥åŸºäº<!-- raw HTML omitted --><code>cfg.example.json</code><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;debug&#34;</span>: true,  	<span style="color:#75715e"># æ§åˆ¶ä¸€äº›debugä¿¡æ¯çš„è¾“å‡ºï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸è®¾ç½®ä¸ºfalse</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;hostname&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,  	<span style="color:#75715e"># agenté‡‡é›†äº†æ•°æ®å‘ç»™transferï¼Œendpointå°±è®¾ç½®ä¸ºäº†hostnameï¼Œé»˜è®¤é€šè¿‡`hostname`è·å–ï¼Œå¦‚æœé…ç½®ä¸­é…ç½®äº†hostnameï¼Œå°±ç”¨é…ç½®ä¸­çš„</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ip&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#75715e"># agentä¸hbså¿ƒè·³çš„æ—¶å€™ä¼šæŠŠè‡ªå·±çš„ipåœ°å€å‘ç»™hbsï¼Œagentä¼šè‡ªåŠ¨æ¢æµ‹æœ¬æœºipï¼Œå¦‚æœä¸æƒ³è®©agentè‡ªåŠ¨æ¢æµ‹ï¼Œå¯ä»¥æ‰‹å·¥ä¿®æ”¹è¯¥é…ç½®</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;plugin&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;enabled&#34;</span>: false,  	<span style="color:#75715e"># é»˜è®¤ä¸å¼€å¯æ’ä»¶æœºåˆ¶</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;dir&#34;</span>: <span style="color:#e6db74">&#34;./plugin&#34;</span>,  	<span style="color:#75715e"># æŠŠæ”¾ç½®æ’ä»¶è„šæœ¬çš„git repo cloneåˆ°è¿™ä¸ªç›®å½•</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;git&#34;</span>: <span style="color:#e6db74">&#34;https://github.com/open-falcon/plugin.git&#34;</span>, <span style="color:#75715e"># æ”¾ç½®æ’ä»¶è„šæœ¬çš„git repoåœ°å€</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;logs&#34;</span>: <span style="color:#e6db74">&#34;./logs&#34;</span>  	<span style="color:#75715e"># æ’ä»¶æ‰§è¡Œçš„logï¼Œå¦‚æœæ’ä»¶æ‰§è¡Œæœ‰é—®é¢˜ï¼Œå¯ä»¥å»è¿™ä¸ªç›®å½•çœ‹log</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;heartbeat&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;enabled&#34;</span>: true,  	<span style="color:#75715e"># æ­¤å¤„enabledè¦è®¾ç½®ä¸ºtrue</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;addr&#34;</span>: <span style="color:#e6db74">&#34;127.0.0.1:6030&#34;</span>, <span style="color:#75715e"># hbsçš„åœ°å€ï¼Œç«¯å£æ˜¯hbsçš„rpcç«¯å£</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;interval&#34;</span>: 60,  	<span style="color:#75715e"># å¿ƒè·³å‘¨æœŸï¼Œå•ä½æ˜¯ç§’</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;timeout&#34;</span>: <span style="color:#ae81ff">1000</span>  	<span style="color:#75715e"># è¿æ¥hbsçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;transfer&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;enabled&#34;</span>: true, 
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;addrs&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;127.0.0.1:18433&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>,  	<span style="color:#75715e"># transferçš„åœ°å€ï¼Œç«¯å£æ˜¯transferçš„rpcç«¯å£, å¯ä»¥æ”¯æŒå†™å¤šä¸ªtransferçš„åœ°å€ï¼Œagentä¼šä¿è¯HA</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;interval&#34;</span>: 60,  	<span style="color:#75715e"># é‡‡é›†å‘¨æœŸï¼Œå•ä½æ˜¯ç§’ï¼Œå³agentä¸€åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡æ•°æ®å‘ç»™transfer</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;timeout&#34;</span>: <span style="color:#ae81ff">1000</span>  	<span style="color:#75715e"># è¿æ¥transferçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;http&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;enabled&#34;</span>: true,  	<span style="color:#75715e"># æ˜¯å¦è¦ç›‘å¬httpç«¯å£</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;listen&#34;</span>: <span style="color:#e6db74">&#34;:1988&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;backdoor&#34;</span>: false
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;collector&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;ifacePrefix&#34;</span>: <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;eth&#34;</span>, <span style="color:#e6db74">&#34;em&#34;</span><span style="color:#f92672">]</span>,  	<span style="color:#75715e"># é»˜è®¤é…ç½®åªä¼šé‡‡é›†ç½‘å¡åç§°å‰ç¼€æ˜¯ethã€emçš„ç½‘å¡æµé‡ï¼Œé…ç½®ä¸ºç©ºå°±ä¼šé‡‡é›†æ‰€æœ‰çš„ï¼Œloçš„ä¹Ÿä¼šé‡‡é›†ã€‚å¯ä»¥ä»/proc/net/devçœ‹åˆ°å„ä¸ªç½‘å¡çš„æµé‡ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mountPoint&#34;</span>: <span style="color:#f92672">[]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;default_tags&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ignore&#34;</span>: <span style="color:#f92672">{</span>  	<span style="color:#75715e"># é»˜è®¤é‡‡é›†äº†200å¤šä¸ªmetricï¼Œå¯ä»¥é€šè¿‡ignoreè®¾ç½®ä¸ºä¸é‡‡é›†</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cpu.busy&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.bytes.free&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.bytes.total&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.bytes.used&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.bytes.used.percent&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.inodes.total&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.inodes.free&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.inodes.used&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;df.inodes.used.percent&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mem.memtotal&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mem.memused&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mem.memused.percent&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mem.memfree&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mem.swaptotal&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mem.swapused&#34;</span>: true,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;mem.swapfree&#34;</span>: true
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è¿›ç¨‹ç®¡ç†<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./open-falcon start agent  	<span style="color:#75715e"># å¯åŠ¨è¿›ç¨‹</span>
</span></span><span style="display:flex;"><span>$ ./open-falcon stop agent  	<span style="color:#75715e"># åœæ­¢è¿›ç¨‹</span>
</span></span><span style="display:flex;"><span>$ ./open-falcon monitor agent  	<span style="color:#75715e"># æŸ¥çœ‹æ—¥å¿—</span></span></span></code></pre></div><ul>
<li>
<p><!-- raw HTML omitted -->éªŒè¯<!-- raw HTML omitted --></p>
<p>çœ‹<code>var</code>ç›®å½•ä¸‹çš„<code>log</code>æ˜¯å¦æ­£å¸¸ï¼Œæˆ–è€…æµè§ˆå™¨è®¿é—®å…¶<code>1988</code>ç«¯å£ã€‚å¦å¤–<code>agent</code>æä¾›äº†ä¸€ä¸ª<code>--check</code>å‚æ•°ï¼Œå¯ä»¥æ£€æŸ¥<code>agent</code>æ˜¯å¦å¯ä»¥æ­£å¸¸è·‘åœ¨å½“å‰æœºå™¨ä¸Š</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./falcon-agent --check</span></span></code></pre></div><ul>
<li>
<p><code>/v1/push</code><!-- raw HTML omitted -->æ¥å£<!-- raw HTML omitted --></p>
<p>è®¾è®¡åˆè¡·æ˜¯ä¸å¸Œæœ›ç”¨æˆ·ç›´æ¥è¿åˆ°<code>Transfer</code>å‘é€æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡<code>agent</code>çš„<code>/v1/push</code>æ¥å£è½¬å‘ï¼Œæ¥å£ä½¿ç”¨èŒƒä¾‹ï¼š</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>ts<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>date +%s<span style="color:#e6db74">`</span>; curl -X POST -d <span style="color:#e6db74">&#34;[{\&#34;metric\&#34;: \&#34;metric.demo\&#34;, \&#34;endpoint\&#34;: \&#34;qd-open-falcon-judge01.hd\&#34;, \&#34;timestamp\&#34;: </span>$ts<span style="color:#e6db74">,\&#34;step\&#34;: 60,\&#34;value\&#34;: 9,\&#34;counterType\&#34;: \&#34;GAUGE\&#34;,\&#34;tags\&#34;: \&#34;project=falcon,module=judge\&#34;}]&#34;</span> http://127.0.0.1:1988/v1/push</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_nightingale">Install_Nightingale</h1>

<h2 id="nightingaleéƒ¨ç½²"><code>Nightingale</code>éƒ¨ç½²</h2>
<blockquote>
<ul>
<li><a href="https://github.com/ccfos/nightingale" rel="external" target="_self"><code>Nightingale</code></a></li>
</ul>
</blockquote>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_grafana">Install_Grafana</h1>

<h2 id="éƒ¨ç½²grafana">éƒ¨ç½²<code>Grafana</code></h2>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://grafana.com/grafana/download?platform=linux" rel="external" target="_self"><code>Download Grafana</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://grafana.com/grafana/download?pg=graf-deployment-options&plcmt=deploy-box-1" rel="external" target="_self"><code>Download Grafana</code></a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol>
<li><code>Docker</code><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker run -d --name<span style="color:#f92672">=</span>grafana -p 3000:3000 grafana/grafana-enterprise</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><code>tar.gz</code><!-- raw HTML omitted -->äºŒè¿›åˆ¶åŒ…å®‰è£…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.4.7.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ tar -zxvf grafana-enterprise-9.4.7.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ mv grafana-enterprise-9.4.7 /opt/apps/grafana
</span></span><span style="display:flex;"><span>$ /opt/apps/grafana/bin/grafana-server</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><code>rpm</code><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.3.0-1.x86_64.rpm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ yum localinstall grafana-6.3.3-1.x86_64.rpm -y</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è®¾ç½®å¼€æœºè‡ªå¯ï¼š<!-- raw HTML omitted --><code>web</code><!-- raw HTML omitted -->é¡µé¢<!-- raw HTML omitted --><code>3000</code><!-- raw HTML omitted -->ç™»å½•ä¿¡æ¯ï¼š<!-- raw HTML omitted --><strong><code>admin/admin</code></strong></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl enable grafana-server.service
</span></span><span style="display:flex;"><span>$ systemctl start grafana-server.service</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å®‰è£…æ’ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ grafana-cli plugins install grafana-piechart-panel
</span></span><span style="display:flex;"><span>$ systemctl restart grafana-server</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="configure_zabbix">Configure_Zabbix</h1>

<h2 id="é…ç½®zabbix-job">é…ç½®<code>Zabbix Job</code></h2>
<ul>
<li>
<ol>
<li><code>Zabbix-Agen</code><!-- raw HTML omitted -->æµ‹è¯•æœåŠ¡ç«¯<!-- raw HTML omitted -->ã€<a href="https://www.cnblogs.com/zhuochong/p/10361947.html" rel="external" target="_self"><code>Zabbix</code>ç›‘æ§é…ç½®</a></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted --><code>abbix_get</code>ï¼š<code>-s</code>ï¼šå®¢æˆ·ç«¯åœ°å€ï¼Œ<code>-p</code>ï¼šå®¢æˆ·ç«¯ç«¯å£ï¼Œ<code>-k</code>ï¼šé”®å€¼<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ bin/zabbix_get -s <span style="color:#e6db74">&#34;zabbix_agent IP&#34;</span> -k agent.ping -p <span style="color:#ae81ff">10050</span> <span style="color:#75715e"># get value</span>
</span></span><span style="display:flex;"><span>$ cp /usr/share/fonts/wqy-microhei/wqy-microhei.ttc nginx/html/zabbix/fonts/DejaVuSans.ttf</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å‹åŠ›æµ‹è¯•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ab -c <span style="color:#ae81ff">10</span> -n <span style="color:#ae81ff">1000000</span> http://192.168.56.11:8080/</span></span></code></pre></div></blockquote>
<hr>
<h3 id="é…ç½®zabbixç”¨æˆ·">é…ç½®<code>Zabbix</code>ç”¨æˆ·</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->åˆ›å»ºé…ç½®ç”¨æˆ·<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<p><a href="#R-image-c742d564fd11aac36180340a69db8cf8" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-28-48.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c742d564fd11aac36180340a69db8cf8"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-28-48.png"></a></p>
<p><a href="#R-image-de73fd454b713b6880000932f6f37a04" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-34-55.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-de73fd454b713b6880000932f6f37a04"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-34-55.png"></a></p>
</blockquote>
<hr>
<h3 id="åˆ›å»ºä¸»æœºæˆ–è€…ä¸»æœºç»„">åˆ›å»ºä¸»æœºæˆ–è€…ä¸»æœºç»„</h3>
<blockquote>
<p><a href="#R-image-76e67695a6868d83eaa68cab74f13d03" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/host_groups_redis.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-76e67695a6868d83eaa68cab74f13d03"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/host_groups_redis.png"></a></p>
<p><a href="#R-image-71729f6892f3394271d14cc45cda0851" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/host_groups_web.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-71729f6892f3394271d14cc45cda0851"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/host_groups_web.png"></a></p>
<p><a href="#R-image-7df85f6f8475e53d47d73285316f1cd5" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-38-06.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7df85f6f8475e53d47d73285316f1cd5"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-38-06.png"></a></p>
<p><a href="#R-image-eb0e16b2b9c4d8bcc9a0a73dc7b4cf33" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-43-33.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-eb0e16b2b9c4d8bcc9a0a73dc7b4cf33"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-03_18-43-33.png"></a></p>
</blockquote>
<hr>
<h3 id="é…ç½®zabbixç›‘æ§ç«¯å£å‘Šè­¦">é…ç½®<code>Zabbix</code>ç›‘æ§ç«¯å£å‘Šè­¦</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->ç›‘æ§ç«¯å£<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»ºã€é…ç½®ç›‘æ§é¡¹<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<p><a href="#R-image-72f03e44a1ac5bd9ee96a612ee63098d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-26-45.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-72f03e44a1ac5bd9ee96a612ee63098d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-26-45.png"></a></p>
<p><a href="#R-image-6b4169d4d11c391651e996b09f1b19f4" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-28-55.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6b4169d4d11c391651e996b09f1b19f4"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-28-55.png"></a></p>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»ºã€é…ç½®è§¦å‘å™¨<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<p><a href="#R-image-17e884feabc6f61da36a393647799260" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-30-18.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-17e884feabc6f61da36a393647799260"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-30-18.png"></a></p>
<p><a href="#R-image-407504e20cb3a04cd1a5b4e50c3c6b4d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-31-54.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-407504e20cb3a04cd1a5b4e50c3c6b4d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Job/Snipaste_2023-04-04_13-31-54.png"></a></p>
</blockquote>
</blockquote>
<hr>
<h3 id="é…ç½®linuxç³»ç»Ÿç™»å½•å‘Šè­¦">é…ç½®<code>Linux</code>ç³»ç»Ÿç™»å½•å‘Šè­¦</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>sshd</code><!-- raw HTML omitted -->ç™»å½•å‘Šè­¦<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ env
</span></span><span style="display:flex;"><span>$ cat &gt;/etc/ssh/sshrc<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">a_user=$USER
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">a_ip=`echo $SSH_CLIENT | awk &#39;{print $1}&#39;`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">a_time=$(date +&#34;%F %H:%M:%S&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">a_server=`/sbin/ifconfig eth0|sed -n &#39;2p&#39; |awk &#39;{print $2}&#39;`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">msg=&#34;Someone logged in the Machine, please verify the IP
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Time: ${a_time}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">User: ${a_user}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Host: ${a_server}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Login ip: ${a_ip}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#####   dash unsupport array   #####
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TrustIp=&#39;192.168.0.61 192.168.0.37&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">result=$(echo ${TrustIp} | grep &#34;${a_ip}&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">if [ &#34;${result}&#34; != &#34;&#34; ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">curl -X POST &#34;https://api.telegram.org/botID:KEY/sendMessage&#34; -d &#34;chat_id=GrouID&amp;text=${msg}&#34; &gt; /dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="configure_zabbix_grafana">Configure_Zabbix_Grafana</h1>

<h2 id="é…ç½®zabbixgrafanaç›‘æ§å±•ç¤º">é…ç½®<code>Zabbix+Grafana</code>ç›‘æ§å±•ç¤º</h2>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.zabbix.com/cn/integrations/grafana" rel="external" target="_self"><code>Zabbix+Grafana</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://grafana.com/grafana/dashboards/?plcmt=footer&dataSource=alexanderzobnin-zabbix-datasource" rel="external" target="_self"><code>Grafana Dashboards</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://blog.csdn.net/sinat_33622098/article/details/116007072" rel="external" target="_self"><code>Grafana</code>ä¹‹<code>telegram</code>æŠ¥è­¦é…ç½®</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/starsliao/ConsulManager" rel="external" target="_self"><code>ConsulManager</code>å®ç°<code>Prometheus</code>ç›‘æ§ç›®æ ‡</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://grafana.com/grafana/dashboards/9965-1-blackbox-exporter-dashboard-20220412/" rel="external" target="_self"><code>Blackbox Exporter Dashboard 2022/04/12</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://grafana.com/grafana/dashboards/8919-1-node-exporter-for-prometheus-dashboard-cn-0413-consulmanager/" rel="external" target="_self"><code>1 Node Exporter Dashboard 22/04/13 ConsulManager</code>è‡ªåŠ¨åŒæ­¥ç‰ˆ</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>Grafana</code><!-- raw HTML omitted -->ä¸­æ–‡ç•Œé¢<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/apps/grafana/conf/defaults.ini<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default_language = en-US  	# ä¿®æ”¹ä¸ºï¼šdefault_language = zh-CN
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ grafana-cli plugins install grafana-zh-cn-panel</span></span></code></pre></div></blockquote>
<ul>
<li><code>Grafana</code><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><a href="https://grafana.com/grafana/plugins/alexanderzobnin-zabbix-app/?tab=installation" rel="external" target="_self"><code>Zabbix</code>æ’ä»¶</a><!-- raw HTML omitted -->åˆ°æŒ‡å®šç›®å½•<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><code>--pluginsDir=</code><!-- raw HTML omitted -->æŒ‡å®šæ’ä»¶å®‰è£…ç›®å½•<!-- raw HTML omitted --></li>
<li><code>alexanderzobnin-zabbix-app</code><!-- raw HTML omitted -->è¦å®‰è£…çš„æ’ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /opt/apps/grafana/bin/grafana-cli --pluginsDir<span style="color:#f92672">=</span>/opt/apps/grafana/data/plugins plugins install alexanderzobnin-zabbix-app</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->å®‰è£…<a href="https://grafana.com/grafana/plugins/grafana-image-renderer/?tab=installation" rel="external" target="_self"><code>Grafana Image Renderer</code></a>å›¾åƒæ’ä»¶<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /opt/apps/grafana/bin/grafana-cli --pluginsDir<span style="color:#f92672">=</span>/opt/apps/grafana/data/plugins plugins install grafana-image-renderer</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯ç”¨å›¾ç‰‡å‘é€å‚æ•°<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/apps/grafana/conf/defaults.ini<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">capture = false  	# ä¿®æ”¹ä¸ºï¼štrue
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">upload_external_image_storage = false  	# ä¿®æ”¹ä¸ºï¼štrue
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li><code>Grafana</code><!-- raw HTML omitted -->é¡µé¢é…ç½®<!-- raw HTML omitted --><code>Zabbix</code><!-- raw HTML omitted -->æ•°æ®æº<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<p><a href="#R-image-eb43e860d7a9ae8e5b7119138c44e80b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-04-35.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-eb43e860d7a9ae8e5b7119138c44e80b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-04-35.png"></a></p>
<p><a href="#R-image-5b7fcb3dd4ed6cec3515d57cee3c846b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-02-57.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5b7fcb3dd4ed6cec3515d57cee3c846b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-02-57.png"></a></p>
<p><a href="#R-image-e4177fbba142a4222ce89fdddd0b3536" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-05-53.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e4177fbba142a4222ce89fdddd0b3536"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-05-53.png"></a></p>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->ä½¿ç”¨<!-- raw HTML omitted --><code>Zabbix</code><!-- raw HTML omitted -->æ•°æ®æºåˆ›å»º<!-- raw HTML omitted --><code>Grafana</code><!-- raw HTML omitted -->ä»ªè¡¨ç›˜<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<p><a href="#R-image-d1cabcd07c6e201cbcbdefd88c05a015" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-18-40.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d1cabcd07c6e201cbcbdefd88c05a015"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Grafana_Server/Snipaste_2023-04-04_20-18-40.png"></a></p>
</blockquote>
<ul>
<li><code>Grafana</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>Telegram</code><!-- raw HTML omitted -->å‘Šè­¦<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<p><a href="#R-image-4509c4d9b5fc7f7ddb75f9b407f38a70" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Telegram/Snipaste_2023-04-04_20-40-56.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4509c4d9b5fc7f7ddb75f9b407f38a70"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Telegram/Snipaste_2023-04-04_20-40-56.png"></a></p>
<p><a href="#R-image-8b1d7e12ca1180aaa64d288d7712e807" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Telegram/Snipaste_2023-04-04_21-09-21.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8b1d7e12ca1180aaa64d288d7712e807"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Zabbix_Server_Telegram/Snipaste_2023-04-04_21-09-21.png"></a></p>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="configure_prometheus">Configure_Prometheus</h1>

<h2 id="é…ç½®prometheus">é…ç½®<code>Prometheus</code></h2>
<h3 id="prometheusçš„yamlæ–‡ä»¶ç¼–å†™"><code>Prometheus</code>çš„<code>yaml</code>æ–‡ä»¶ç¼–å†™</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/prometheus/prometheus.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># my global config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">global:  	# å…¨å±€é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">scrape_interval:     15s # é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯15sæ‹‰å–ä¸€æ¬¡ç›®æ ‡é‡‡æ ·ç‚¹æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># scrape_timeout is set to the global default (10s).
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Alertmanager configuration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">alerting:  	# æŠ¥è­¦é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">alertmanagers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - static_configs:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - targets:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      # - alertmanager:9093
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#remote_write:  	# ç”¨äºè¿œç¨‹å­˜å‚¨å†™é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#remote_read:  	# ç”¨äºè¿œç¨‹è¯»é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Load rules once and periodically evaluate them according to the global &#39;evaluation_interval&#39;.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">rule_files:  	# è§„åˆ™é…ç½®ï¼Œä¸»è¦æ˜¯é…ç½®ï¼šæŠ¥è­¦è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  # - &#34;rules/*.yml&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  # - &#34;first_rules.yml&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  # - &#34;second_rules.yml&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># A scrape configuration containing exactly one endpoint to scrape:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Here it&#39;s Prometheus itself.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">scrape_configs:  	# æŠ“å–é…ç½®ï¼Œä¸»è¦é…ç½®æŠ“å–å®¢æˆ·ç«¯ç›¸å…³
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - job_name: &#39;prometheus&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # metrics_path defaults to &#39;/metrics&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # scheme defaults to &#39;http&#39;.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    static_configs:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - targets: [&#39;localhost:9090&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - job_name: &#39;node&#39;  	# ä»»åŠ¡åï¼Œä½¿ç”¨node_exportæ’ä»¶è·å–æœåŠ¡å™¨ç›‘æ§æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    static_configs:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - targets:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;localhost:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;swoft_1:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;swoft_2:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;175_web:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;176_web:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;177_admin:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_0:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_1:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_2:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_3:9100&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - job_name: &#39;mysql&#39;  	# ä½¿ç”¨mysqld_exporteræ’ä»¶è·å–Mysqlç›‘æ§æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    static_configs:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - targets:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_0:9104&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_1:9104&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_2:9104&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;mysql_redis_3:9104&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - job_name: &#39;container&#39;  	# ä½¿ç”¨cAdvisor è·å–åˆ°çš„å®¹å™¨ç›‘æ§æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    static_configs:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - targets: 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;&lt;èŠ‚ç‚¹01çš„IP&gt;:8080&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;&lt;èŠ‚ç‚¹02çš„IP&gt;:8080&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="é…ç½®prometheus-webé¡µé¢">é…ç½®<code>Prometheus web</code>é¡µé¢</h3>
<blockquote>
<ul>
<li>
<p><!-- raw HTML omitted -->æµè§ˆå™¨è®¿é—®ï¼š<!-- raw HTML omitted --><code>IP:9090</code></p>
</li>
<li>
<p><code>shell</code><!-- raw HTML omitted -->å‘½ä»¤åˆ›å»º<!-- raw HTML omitted --></p>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;some_metric 3.14&#34;</span> | curl --data-binary @- http://localhost:9091/metrics/job/some_job</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->å‘é€å¤æ‚æ•°æ®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt;EOF | curl --data-binary @- http://localhost:9091/metrics/job/some_job/instance/some_instance
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># TYPE some_metric counter
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">some_metric{label=&#34;val1&#34;} 42
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># TYPE another_metric gauge
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># HELP another_metric Just an example.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">another_metric 2398.283
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->æ·»åŠ æ•°æ®æº<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>
<p><!-- raw HTML omitted -->æ·»åŠ <!-- raw HTML omitted --><code>prometheus</code><!-- raw HTML omitted -->ï¼Œå¡«å†™<!-- raw HTML omitted --><code>prometheus</code><!-- raw HTML omitted -->çš„ç®¡ç†åœ°å€<!-- raw HTML omitted --></p>
</li>
<li>
<p><!-- raw HTML omitted -->å¯¼å…¥<!-- raw HTML omitted --><code>dashboard</code></p>
</li>
<li>
<p><!-- raw HTML omitted -->é€šè¿‡<!-- raw HTML omitted --><a href="https://grafana.com/grafana/dashboards" rel="external" target="_self"><code>grafana</code>å®˜ç½‘</a><!-- raw HTML omitted -->ä»ªè¡¨ç›˜æ·»åŠ å¯¹åº”ä»ªè¡¨ç›˜<!-- raw HTML omitted --></p>
</li>
<li>
<p><!-- raw HTML omitted -->å¸¸ç”¨ä»ªè¡¨ç›˜<!-- raw HTML omitted --></p>
</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="é…ç½®grafana">é…ç½®<code>grafana</code></h3>
<blockquote>
<ul>
<li><code>grafana</code><!-- raw HTML omitted -->å‘Šè­¦é‚®ä»¶é…ç½®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>grafana</code><!-- raw HTML omitted -->é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ <!-- raw HTML omitted --><code>Email</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
<li><a href="https://grafana.com/grafana/dashboards/" rel="external" target="_self"><code>Grafana Dashboards</code></a></li>
<li><a href="https://github.com/starsliao/ConsulManager" rel="external" target="_self"><code>ConsulManager</code></a></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/grafana/grafana.ini<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[smtp]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">enabled = true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">host = smtp.163.com:465
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">user = 18329903316
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># If the password contains # or ; you have to wrap it with trippel quotes. Ex &#34;&#34;&#34;#password;&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">password = xxxxxxxxxxxx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">;cert_file =
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">;key_file =
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">;skip_verify = false
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from_address = 18329903316@163.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">;from_name = Grafana
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">;ehlo_identity = dashboard.exmple.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li><code>grafana web</code><!-- raw HTML omitted -->ç•Œé¢é…ç½®<!-- raw HTML omitted --><code>Notification channels</code></li>
</ul>
<blockquote>
</blockquote>
<ul>
<li><code>alter</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->âš ï¸ï¼š<!-- raw HTML omitted --><code>Template variables are not supported in alert queries</code><!-- raw HTML omitted -->åœ¨æŸ¥è¯¢ä¸­ä¸èƒ½ä½¿ç”¨æ¨¡ç‰ˆè¯­æ³•ï¼Œä¸ç„¶æ— æ³•åˆ›å»ºå‘Šè­¦<!-- raw HTML omitted --></li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="é…ç½®prometheusç›‘æ§nginx">é…ç½®<code>Prometheus</code>ç›‘æ§<code>Nginx</code></h3>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¸‹è½½<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->ç›‘æ§æ’ä»¶<!-- raw HTML omitted --><code>nginx-module-vts</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git clone git://github.com/vozlt/nginx-module-vts.git </span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->é‡æ–°ç¼–è¯‘<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->æ”¯æŒæ’ä»¶<!-- raw HTML omitted --><code>nginx-module-vts</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./configure --prefix<span style="color:#f92672">=</span>/usr/local/nginx-1.12.2 --user<span style="color:#f92672">=</span>nginx --group<span style="color:#f92672">=</span>nginx --with-http_stub_status_module  --with-http_ssl_module &gt; --add-module<span style="color:#f92672">=</span>/usr/local/nginx-module-vts
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ make</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->æ‹·è´é‡æ–°ç¼–è¯‘åçš„<!-- raw HTML omitted --><code>Nginx</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nginx -s stop
</span></span><span style="display:flex;"><span>$ <span style="color:#ae81ff">\c</span>p ./objs/nginx /usr/local/nginx/sbin/</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->ä¸»é…ç½®æ–‡ä»¶<!-- raw HTML omitted --><code>nginx.conf</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;nginx.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">http {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">.....
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">### Prometheus é…ç½®   
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">vhost_traffic_status_zone;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">vhost_traffic_status_filter_by_host on;  	# æ‰“å¼€vhostè¿‡æ»¤
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">### Prometheus é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">.....
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">server {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">location /status {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         # vhost_traffic_status off;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         vhost_traffic_status_display;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         vhost_traffic_status_display_format html;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¸‹è½½<!-- raw HTML omitted --><code>nginx-vts-exporter</code><!-- raw HTML omitted -->ç›‘æ§æ’ä»¶<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /opt <span style="color:#f92672">&amp;&amp;</span> wget -c https://github.com/hnlq715/nginx-vts-exporter/releases/download/&gt; v0.10.3/nginx-vts-exporter-0.10.3.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>$ tar xf nginx-vts-exporter-0.10.3.linux-amd64.tar.gz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>./nginx-vts-exporter -nginx.scrape_timeout <span style="color:#ae81ff">10</span> -nginx.scrape_uri 
</span></span><span style="display:flex;"><span>http://10.10.16.107/status/format/json &amp;  	<span style="color:#75715e"># å¯åŠ¨nginx Vhost Traffic</span>
</span></span><span style="display:flex;"><span>http://10.10.16.107/status  	<span style="color:#75715e"># è®¿é—®nginxä¸»æœºå„èŠ‚ç‚¹çŠ¶æ€</span></span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h3 id="é…ç½®alertmanagerå‘Šè­¦">é…ç½®<code>Alertmanager</code>å‘Šè­¦</h3>
<ul>
<li><!-- raw HTML omitted -->å‘Šè­¦è§„åˆ™<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><a href="https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/" rel="external" target="_self"><code>ALERTING RULES</code></a></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;rules/general.yml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">groups:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name: general.rules  	# æŠ¥è­¦è§„åˆ™ç»„åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  rules:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  # ä»»ä½•å®ä¾‹5åˆ†é’Ÿå†…æ— æ³•è®¿é—®å‘å‡ºå‘Šè­¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - alert: InstanceDown
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    expr: up == 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for: 5m  	# æŒç»­æ—¶é—´ ï¼Œ è¡¨ç¤ºæŒç»­ä¸€åˆ†é’Ÿè·å–ä¸åˆ°ä¿¡æ¯ï¼Œåˆ™è§¦å‘æŠ¥è­¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      severity: page  # è‡ªå®šä¹‰æ ‡ç­¾ error
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      summary: &#34;Instance {{ $labels.instance }} åœæ­¢å·¥ä½œ down&#34;  	# è‡ªå®šä¹‰æ‘˜è¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      description: &#34;{{ $labels.instance }} of job {{ $labels.job }} å·²ç»åœæ­¢5åˆ†é’Ÿä»¥ä¸Š has been down for more than 5 minutes.&#34;  	# è‡ªå®šä¹‰å…·ä½“æè¿°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;rules/node.yml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">groups:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name: node.rules
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  rules:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - alert: NodeFilesystemUsage
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    expr: 100 - (node_filesystem_free_bytes{fstype=~&#34;ext4|xfs&#34;} / node_filesystem_size_bytes{fstype=~&#34;ext4|xfs&#34;} * 100) &gt; 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for: 2m
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      severity: warning
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      summary: &#34;{{$labels.instance}}: {{$labels.mountpoint }} åˆ†åŒºä½¿ç”¨è¿‡é«˜&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      description: &#34;{{$labels.instance}}: {{$labels.mountpoint }} åˆ†åŒºä½¿ç”¨å¤§äº 80% (å½“å‰å€¼: {{ $value }})&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - alert: NodeMemoryUsage
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    expr: 100 - (node_memory_MemFree_bytes+node_memory_Cached_bytes+node_memory_Buffers_bytes) / node_memory_MemTotal_bytes * 100 &gt; 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for: 2m
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      severity: warning
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      summary: &#34;{{$labels.instance}}: å†…å­˜ä½¿ç”¨è¿‡é«˜&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      description: &#34;{{$labels.instance}}: å†…å­˜ä½¿ç”¨å¤§äº 80% (å½“å‰å€¼: {{ $value }})&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - alert: NodeCPUUsage
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    expr: 100 - (avg(irate(node_cpu_seconds_total{mode=&#34;idle&#34;}[5m])) by (instance) * 100) &gt; 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for: 2m
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      severity: warning
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      summary: &#34;{{$labels.instance}}: CPUä½¿ç”¨è¿‡é«˜&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      description: &#34;{{$labels.instance}}: CPUä½¿ç”¨å¤§äº 80% (å½“å‰å€¼: {{ $value }})&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># cat rules/reload.yml 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">groups:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name: prometheus.rules
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  rules:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - alert: AlertmanagerReloadFailed
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    expr: alertmanager_config_last_reload_successful == 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for: 10m
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      severity: warning
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      summary: &#34;{{$labels.instance}}: Alertmanageré…ç½®é‡æ–°åŠ è½½å¤±è´¥&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      description: &#34;{{$labels.instance}}: Alertmanageré…ç½®é‡æ–°åŠ è½½å¤±è´¥&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - alert: PrometheusReloadFailed
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    expr: prometheus_config_last_reload_successful == 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    for: 10m
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      severity: warning
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      summary: &#34;{{$labels.instance}}: Prometheusé…ç½®é‡æ–°åŠ è½½å¤±è´¥&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      description: &#34;{{$labels.instance}}: Prometheusé…ç½®é‡æ–°åŠ è½½å¤±è´¥&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">route</span>:
</span></span><span style="display:flex;"><span><span style="color:#f92672">receiver</span>: <span style="color:#e6db74">&#39;default-receiver&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">group_wait</span>: <span style="color:#ae81ff">30s</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">group_interval</span>: <span style="color:#ae81ff">5m</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">repeat_interval</span>: <span style="color:#ae81ff">4h</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">group_by</span>: [<span style="color:#ae81ff">cluster, alertname]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">routes</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">receiver</span>: <span style="color:#e6db74">&#39;database-pager&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">group_wait</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">match_re</span>:
</span></span><span style="display:flex;"><span><span style="color:#f92672">service</span>: <span style="color:#ae81ff">mysql|cassandra</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">receiver</span>: <span style="color:#e6db74">&#39;frontend-pager&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">group_by</span>: [<span style="color:#ae81ff">product, environment]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">match</span>:
</span></span><span style="display:flex;"><span><span style="color:#f92672">team</span>: <span style="color:#ae81ff">frontend</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">receivers</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">â€˜database-pager</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">email_configs:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- to: &#39;</span><span style="color:#ae81ff">zhenliang369@163.com&#39;</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">â€˜frontend-pager</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">email_configs:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- to: &#39;</span><span style="color:#ae81ff">zhenliang369@163.com&#39; </span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="configure_open_falcon">Configure_Open_Falcon</h1>

<h2 id="open-falconé…ç½®"><code>Open-falcon</code>é…ç½®</h2>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->æŸ¥çœ‹ç›‘æ§æ•°æ®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>
<p><a href="https://www.cnblogs.com/kevingrace/p/5570488.html" rel="external" target="_self"><code>Linux</code>ä¸‹<code>smokeping</code>ç½‘ç»œç›‘æ§ç¯å¢ƒéƒ¨ç½²è®°å½•</a></p>
</li>
<li>
<p><code>agent</code>åªè¦éƒ¨ç½²åˆ°æœºå™¨ä¸Šï¼Œå¹¶ä¸”é…ç½®å¥½äº†<code>heartbeat</code>å’Œ<code>transfer</code>å°±è‡ªåŠ¨é‡‡é›†æ•°æ®äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»<code>dashboard</code>ä¸Šé¢æœç´¢ç›‘æ§æ•°æ®æŸ¥çœ‹äº†ã€‚<code>dashboard</code>æ˜¯ä¸ª<code>web&gt; </code>é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—®ä¹‹ã€‚å·¦ä¾§è¾“å…¥<code>endpoint</code>æœç´¢ï¼Œ<code>endpoint</code>æ˜¯ä»€ä¹ˆï¼Ÿåº”è¯¥ç”¨ä»€ä¹ˆæœç´¢ï¼Ÿå¯¹äº<code>agent</code>é‡‡é›†çš„æ•°æ®<code>endpoint</code>éƒ½æ˜¯æœºå™¨åï¼Œå»ç›®æ ‡æœºå™¨ä¸Šæ‰§è¡Œ<code>hostname</code>&gt; ï¼Œçœ‹åˆ°çš„è¾“å‡ºå°±æ˜¯<code>endpoint</code>ï¼Œæ‹¿ç€<code>hostname</code>å»æœç´¢ã€‚</p>
</li>
<li>
<p>é€‰ä¸­å‰é¢çš„å¤é€‰æ¡†ï¼Œç‚¹å‡»â€œæŸ¥çœ‹<code>counter</code>åˆ—è¡¨â€ï¼Œå¯ä»¥åˆ—å‡ºéš¶å±äºè¿™ä¸ª<code>endpoint</code>çš„<code>counter</code>å‡å¦‚æˆ‘ä»¬è¦æŸ¥çœ‹<code>cpu.busy</code>ï¼Œåœ¨<code>counter</code>æœç´¢æ¡†ä¸­è¾“å…¥<code>cpu</code>&gt; å¹¶å›è½¦ã€‚çœ‹åˆ°<code>cpu.busy</code>äº†å§ï¼Œç‚¹å‡»ï¼Œä¼šçœ‹åˆ°ä¸€ä¸ªæ–°é¡µé¢ï¼Œå›¾è¡¨ä¸­å°±æ˜¯è¿™ä¸ªæœºå™¨çš„<code>cpu.busy</code>&gt; çš„è¿‘ä¸€å°æ—¶æ•°æ®äº†ï¼Œæƒ³çœ‹æ›´é•¿æ—¶é—´çš„ï¼Ÿå³ä¸Šè§’æœ‰ä¸ªå°ä¸‰è§’ï¼Œå±•å¼€èœå•ï¼Œå¯ä»¥é€‰æ‹©æ›´é•¿çš„æ—¶é—´è·¨åº¦</p>
</li>
</ul>
<p><a href="#R-image-a1353ff1e602ae6a867b21e45130c4e7" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a1353ff1e602ae6a867b21e45130c4e7"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard.png"></a></p>
<p><a href="#R-image-bbac4b71ad24cdc2de76168de2c8a4cf" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-cpu.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bbac4b71ad24cdc2de76168de2c8a4cf"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-cpu.png"></a></p>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->é…ç½®æŠ¥è­¦ç­–ç•¥<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>
<p><!-- raw HTML omitted -->é…ç½®æŠ¥è­¦æ¥æ”¶äºº<!-- raw HTML omitted --></p>
<p><code>falcon</code>çš„æŠ¥è­¦æ¥æ”¶äººä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ‰‹æœºå·ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„é‚®ç®±ï¼Œå› ä¸ºæ‰‹æœºå·ã€é‚®ç®±éƒ½æ˜¯å®¹æ˜“å‘ç”Ÿå˜åŒ–çš„ï¼Œå¦‚æœå˜åŒ–äº†å»ä¿®æ”¹æ‰€æœ‰ç›¸å…³é…ç½®é‚£å°±å¤ªéº»çƒ¦äº†ã€‚æˆ‘ä»¬æŠŠç”¨&gt; æˆ·çš„è”ç³»ä¿¡æ¯ç»´æŠ¤åœ¨ä¸€ä¸ªå« <code>å¸æˆ·/Profile</code> é‡Œï¼Œä»¥åå¦‚æœè¦ä¿®æ”¹æ‰‹æœºå·ã€é‚®ç®±ï¼Œåªè¦ä¿®æ”¹è‡ªå·±çš„å¸æˆ·ä¿¡æ¯å³å¯ã€‚æŠ¥è­¦æ¥æ”¶äººä¹Ÿä¸æ˜¯å•ä¸ªçš„äººï¼Œè€Œæ˜¯ä¸€ä¸ªç»„ï¼ˆ<code>Teams</code>ï¼‰ï¼Œæ¯”å¦‚<code>&gt; falcon</code>è¿™ä¸ªç³»ç»Ÿçš„ä»»ä½•ç»„ä»¶å‡ºé—®é¢˜äº†ï¼Œéƒ½åº”è¯¥å‘æŠ¥è­¦ç»™<code>falcon</code>çš„è¿ç»´å’Œå¼€å‘äººå‘˜ï¼Œå‘ç»™<code>falcon</code>è¿™ä¸ªå›¢é˜Ÿï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ–°å‘˜å·¥å…¥èŒåªè¦åŠ å…¥<code>falcon</code>è¿™ä¸ª<code>Team</code>&gt; å³å¯ï¼›å‘˜å·¥ç¦»èŒï¼Œåªè¦ä»<code>falcon</code>è¿™ä¸ª<code>Team</code>åˆ æ‰å³å¯ã€‚</p>
</li>
</ul>
<p><a href="#R-image-fec5123916c98a8c976e25a21e94ccc6" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-profile.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fec5123916c98a8c976e25a21e94ccc6"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-profile.png"></a></p>
<ul>
<li><!-- raw HTML omitted -->æ·»åŠ æŠ¥è­¦ç»„ï¼Œæ·»åŠ æˆå‘˜<!-- raw HTML omitted --></li>
</ul>
<p><a href="#R-image-3c9ba1dec625fd3138aab0a385d71f47" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-group.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3c9ba1dec625fd3138aab0a385d71f47"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-group.png"></a></p>
<p><a href="#R-image-221a6f38cea0b8db258aa94102c1da9e" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-group-1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-221a6f38cea0b8db258aa94102c1da9e"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/dashboard-group-1.png"></a></p>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»º<!-- raw HTML omitted --><code>HostGroup</code></li>
</ul>
<blockquote>
<ul>
<li>æ¯”å¦‚æˆ‘ä»¬è¦å¯¹<code>falcon-judge</code>è¿™ä¸ªç»„ä»¶åšç«¯å£ç›‘æ§ï¼Œé‚£é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>HostGroup</code>ï¼ŒæŠŠæ‰€æœ‰éƒ¨ç½²äº†<code>falcon-judge</code>&gt; è¿™ä¸ªæ¨¡å—çš„æœºå™¨éƒ½å¡è¿›å»ï¼Œä»¥åè¦æ‰©å®¹æˆ–ä¸‹çº¿æœºå™¨çš„æ—¶å€™ç›´æ¥ä»è¿™ä¸ª<code>HostGroup</code>å¢åˆ æœºå™¨å³å¯ï¼ŒæŠ¥è­¦ç­–ç•¥ä¼šè‡ªåŠ¨ç”Ÿæ•ˆã€å¤±æ•ˆã€‚å’±ä»¬ä¸ºè¿™ä¸ª<code>HostGroup</code>å–åä¸ºï¼š<code>&gt; sa.dev.falcon.judge</code>ï¼Œè¿™ä¸ªåç§°æœ‰è®²ç©¶ï¼Œ<code>sa</code>æ˜¯æˆ‘ä»¬éƒ¨é—¨ï¼Œ<code>dev</code>æ˜¯æˆ‘ä»¬ç»„ï¼Œ<code>falcon</code>æ˜¯é¡¹ç›®åï¼Œ<code>judge</code>&gt; æ˜¯ç»„ä»¶åï¼Œä¼ è¾¾å‡ºäº†å¾ˆå¤šä¿¡æ¯ï¼Œè¿™æ ·å‘½åæ¯”è¾ƒå®¹æ˜“ç®¡ç†ï¼Œæ¨èå¤§å®¶è¿™ä¹ˆåš</li>
</ul>
<p><a href="#R-image-ad30d3291f214521bbbbcefbc994196d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/hostgroups.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ad30d3291f214521bbbbcefbc994196d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/hostgroups.png"></a></p>
<ul>
<li>åœ¨å¾€ç»„é‡ŒåŠ æœºå™¨çš„æ—¶å€™å¦‚æœæŠ¥é”™ï¼Œéœ€è¦æ£€æŸ¥<code>portal</code>çš„æ•°æ®åº“ä¸­<code>host</code>è¡¨ï¼Œçœ‹é‡Œè¾¹æ˜¯å¦æœ‰ç›¸å…³æœºå™¨ã€‚é‚£<code>host</code>è¡¨ä¸­çš„æœºå™¨ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ<code>agent</code>æœ‰ä¸ª<code>heartbeat(hbs)</code>&gt; çš„é…ç½®ï¼Œ<code>agent</code>æ¯åˆ†é’Ÿä¼šå‘å¿ƒè·³ç»™<code>hbs</code>ï¼ŒæŠŠè‡ªå·±çš„<code>ip</code>ã€<code>hostname</code>ã€<code>agent version</code>ç­‰ä¿¡æ¯å‘Šè¯‰<code>hbs</code>ï¼Œ<code>hbs</code>è´Ÿè´£å†™å…¥<code>host</code>è¡¨ã€‚å¦‚æœ<code>host</code>&gt; è¡¨ä¸­æ²¡æ•°æ®ï¼Œéœ€è¦æ£€æŸ¥è¿™æ¡é“¾è·¯æ˜¯å¦é€šç•…</li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»ºç­–ç•¥æ¨¡æ¿<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><code>portal</code>æœ€ä¸Šé¢æœ‰ä¸ª<code>Templates</code>é“¾æ¥ï¼Œè¿™å°±æ˜¯ç­–ç•¥æ¨¡æ¿ç®¡ç†çš„å…¥å£ã€‚æˆ‘ä»¬è¿›å»ä¹‹ååˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œåç§°å§‘ä¸”ä¹Ÿå«ï¼š<code>sa.dev.falcon.judge.tpl</code>ï¼Œä¸<code>HostGroup</code>&gt; åç§°ç›¸åŒï¼Œåœ¨é‡Œè¾¹é…ç½®ä¸€ä¸ªç«¯å£ç›‘æ§ï¼Œé€šå¸¸è¿›ç¨‹ç›‘æ§æœ‰ä¸¤ç§æ‰‹æ®µï¼Œä¸€ä¸ªæ˜¯è¿›ç¨‹æœ¬èº«æ˜¯å¦å­˜æ´»ï¼Œä¸€ä¸ªæ˜¯ç«¯å£æ˜¯å¦åœ¨ç›‘å¬ï¼Œæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨ç«¯å£ç›‘æ§</li>
</ul>
<p><a href="#R-image-e94c1f9196a705fadfbeec6ba8aae5e9" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e94c1f9196a705fadfbeec6ba8aae5e9"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template.png"></a></p>
<p><a href="#R-image-78f2b38b8d85d372882489322d67ccd8" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template-1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-78f2b38b8d85d372882489322d67ccd8"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template-1.png"></a></p>
<ul>
<li>å³ä¸Šè§’é‚£ä¸ªåŠ å·æŒ‰é’®æ˜¯ç”¨äºå¢åŠ ç­–ç•¥çš„ï¼Œä¸€ä¸ªæ¨¡æ¿ä¸­å¯ä»¥æœ‰å¤šä¸ªç­–ç•¥ï¼Œæ­¤å¤„æˆ‘ä»¬åªæ·»åŠ äº†ä¸€ä¸ªã€‚ä¸‹é¢å¯ä»¥é…ç½®æŠ¥è­¦æ¥æ”¶äººï¼Œæ­¤å¤„å¡«å†™çš„æ˜¯<code>falcon</code>ï¼Œè¿™æ˜¯ä¹‹å‰åœ¨<code>UIC</code>&gt; ä¸­åˆ›å»ºçš„<code>Team</code>ã€‚</li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->å°†<!-- raw HTML omitted --><code>HostGroup</code><!-- raw HTML omitted -->ä¸æ¨¡æ¿ç»‘å®š<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>ä¸€ä¸ªæ¨¡æ¿æ˜¯å¯ä»¥ç»‘å®šåˆ°å¤šä¸ª<code>HostGroup</code>çš„ï¼Œç°åœ¨æˆ‘ä»¬é‡æ–°å›åˆ°<code>HostGroups</code>é¡µé¢ï¼Œæ‰¾åˆ°<code>sa.dev.falcon.judge</code>è¿™ä¸ª<code>HostGroup</code>&gt; ï¼Œå³ä¾§æœ‰å‡ ä¸ªè¶…é“¾æ¥ï¼Œç‚¹å‡»ã€templatesã€‘è¿›å…¥ä¸€ä¸ªæ–°é¡µé¢ï¼Œè¾“å…¥æ¨¡æ¿åç§°ï¼Œç»‘å®šä¸€ä¸‹å°±è¡Œäº†</li>
</ul>
<p><a href="#R-image-c22f6315870e2fb71ff8ba01880a0671" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/hostgroups-tempates.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c22f6315870e2fb71ff8ba01880a0671"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/hostgroups-tempates.png"></a></p>
<p><a href="#R-image-d061150b667f124fed91469f3a52b315" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/hostgroups-tempates-1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d061150b667f124fed91469f3a52b315"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/hostgroups-tempates-1.png"></a></p>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->è¡¥å……<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>ä¸Šé¢æ­¥éª¤åšå®Œäº†ï¼Œä¹Ÿå°±é…ç½®å®Œäº†ã€‚å¦‚æœ<code>judge</code>ç»„ä»¶å®•æœºï¼Œç«¯å£ä¸å†ç›‘å¬äº†ï¼Œå°±ä¼šæŠ¥è­¦ã€‚ä¸è¿‡å¤§å®¶ä¸è¦ä¸ºäº†æµ‹è¯•æŠ¥è­¦æ•ˆæœï¼Œç›´æ¥æŠŠ<code>judge</code>ç»„ä»¶ç»™å¹²æ‰äº†ï¼Œå› ä¸º<code>judge</code>&gt; æœ¬èº«å°±æ˜¯è´Ÿè´£åˆ¤æ–­æŠ¥è­¦çš„ï¼ŒæŠŠå®ƒå¹²æ‰äº†ï¼Œé‚£å°±æ²¡æ³•åˆ¤æ–­äº†â€¦â€¦æ‰€ä»¥è¯´<code>falcon</code>&gt; ç°åœ¨å¹¶ä¸å®Œå–„ï¼Œæ²¡æ³•ç”¨æ¥ç›‘æ§æœ¬èº«çš„ç»„ä»¶ã€‚ä¸ºäº†æµ‹è¯•ï¼Œå¤§å®¶å¯ä»¥ä¿®æ”¹ä¸€ä¸‹ç«¯å£ç›‘æ§çš„ç­–ç•¥é…ç½®ï¼Œæ”¹æˆä¸€ä¸ªæ²¡æœ‰åœ¨ç›‘å¬çš„ç«¯å£ï¼Œè¿™æ ·å°±è§¦å‘æŠ¥è­¦äº†</li>
<li>ä¸Šé¢çš„ç­–ç•¥åªæ˜¯å¯¹<code>falcon-judge</code>åšäº†ç«¯å£ç›‘æ§ï¼Œé‚£å¦‚æœæˆ‘ä»¬è¦å¯¹<code>falcon</code>è¿™ä¸ªé¡¹ç›®çš„æ‰€æœ‰æœºå™¨åŠ ä¸€äº›è´Ÿè½½ç›‘æ§ï¼Œåº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</li>
<li>åˆ›å»ºä¸€ä¸ª<code>HostGroupï¼šsa.dev.falcon</code>ï¼ŒæŠŠæ‰€æœ‰<code>falcon</code>çš„æœºå™¨éƒ½å¡è¿›å»</li>
<li>åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼š<code>sa.dev.falcon.common</code>ï¼Œæ·»åŠ ä¸€äº›åƒ<code>ping</code>, <code>df.bytes.free.percent</code>, <code>load.5min</code>ç­‰ç­–ç•¥</li>
<li>å°†<code>sa.dev.falcon.common</code>ç»‘å®šåˆ°<code>sa.dev.falcon</code>è¿™ä¸ª<code>HostGroup</code></li>
</ul>
<p><a href="#R-image-93361f071301dfedcc30b3350dd5ba2d" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template-2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-93361f071301dfedcc30b3350dd5ba2d"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template-2.png"></a></p>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->é…ç½®ç­–ç•¥è¡¨è¾¾å¼<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ç­–ç•¥è¡¨è¾¾å¼ï¼Œå³<!-- raw HTML omitted --><code>expression</code></li>
</ul>
<p><a href="#R-image-a387ffe9c22bfc51d27723d74f27d3ba" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/expressions.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a387ffe9c22bfc51d27723d74f27d3ba"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/expressions.png"></a></p>
<ul>
<li>
<p>ä¸Šä¾‹ä¸­çš„é…ç½®ä¼ è¾¾å‡ºçš„æ„æ€æ˜¯ï¼š<code>endpoint=aggregator</code>å¹¶ä¸”<code>metric=cpu.busy</code>çš„æ‰€æœ‰çš„ç›‘æ§æŒ‡æ ‡ï¼Œåªè¦è¿ç»­<code>3</code>æ¬¡<code>&gt;= 0.5</code>åˆ™æŠ¥è­¦ç»™<code>falcon-test1</code>&gt; è¿™ä¸ªæŠ¥è­¦ç»„ã€‚</p>
</li>
<li>
<p><code>expression</code>æ— éœ€ç»‘å®šåˆ°<code>HostGroup</code>ï¼Œ<code>enjoy it</code></p>
</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="nodataé…ç½®"><code>Nodata</code>é…ç½®</h3>
<blockquote>
<blockquote>
<ul>
<li>ä½¿ç”¨<code>Nodata</code>ï¼Œéœ€è¦è¿›è¡Œä¸¤ä¸ªé…ç½®: <code>Nodata</code>é…ç½®å’Œç­–ç•¥é…ç½®ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªä¾‹å­ï¼Œè®²è¿°å¦‚ä½•ä½¿ç”¨<code>Nodata</code>æä¾›çš„æœåŠ¡</li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->ç”¨æˆ·éœ€æ±‚<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>å½“æœºå™¨åˆ†ç»„<code>cop.xiaomi_owt.inf_pdl.falcon</code>ä¸‹çš„æ‰€æœ‰æœºå™¨ï¼Œå…¶é‡‡é›†æŒ‡æ ‡<code>agent.alive</code> ä¸ŠæŠ¥ä¸­æ–­æ—¶ï¼Œé€šçŸ¥ç”¨æˆ·</li>
</ul>
</blockquote>
<ul>
<li><code>nodata</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->è¿›å…¥<!-- raw HTML omitted --><code>Nodata</code><!-- raw HTML omitted -->é…ç½®ä¸»é¡µï¼Œå¯ä»¥çœ‹åˆ°<!-- raw HTML omitted --><code>Nodata</code><!-- raw HTML omitted -->é…ç½®åˆ—è¡¨<!-- raw HTML omitted --></li>
</ul>
<p><a href="#R-image-765e34d8339a73b74cb276c1ef8502dc" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/nodata.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-765e34d8339a73b74cb276c1ef8502dc"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/nodata.png"></a></p>
<ul>
<li><!-- raw HTML omitted -->ç‚¹å‡»å³ä¸Šè§’çš„æ·»åŠ æŒ‰é’®ï¼Œæ·»åŠ <!-- raw HTML omitted --><code>nodata</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
</ul>
<p><a href="#R-image-fce57d14af1fd8536dce4eef38e9acc1" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/nodata-1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fce57d14af1fd8536dce4eef38e9acc1"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/nodata-1.png"></a></p>
<ul>
<li><!-- raw HTML omitted -->è¿›è¡Œå®Œä¸Šè¿°é…ç½®åï¼Œåˆ†ç»„<!-- raw HTML omitted --><code>cop.xiaomi_owt.inf_pdl.falcon</code><!-- raw HTML omitted -->ä¸‹çš„æ‰€æœ‰æœºå™¨ï¼Œå…¶é‡‡é›†é¡¹<!-- raw HTML omitted --> <code>agent.alive</code>&lt;&gt; font color=red&gt;ä¸ŠæŠ¥ä¸­æ–­åï¼Œ<!-- raw HTML omitted --><code>nodata</code><!-- raw HTML omitted -->æœåŠ¡å°±ä¼šè¡¥å‘ä¸€ä¸ªå–å€¼ä¸º<!-- raw HTML omitted --><code>-1.0</code>ã€<code>agent.alive</code><!-- raw HTML omitted -->&gt; çš„ç›‘æ§æ•°æ®ç»™ç›‘æ§ç³»ç»Ÿ<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->ç­–ç•¥é…ç½®<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>é…ç½®äº†<code>Nodata</code>åï¼Œå¦‚æœæœ‰æ•°æ®ä¸ŠæŠ¥ä¸­æ–­çš„æƒ…å†µï¼Œ<code>Nodata</code>é…ç½®ä¸­çš„é»˜è®¤å€¼å°±ä¼šè¢«ä¸ŠæŠ¥ã€‚æˆ‘ä»¬å¯ä»¥é’ˆå¯¹è¿™ä¸ªé»˜è®¤å€¼ï¼Œè®¾ç½®æŠ¥è­¦ï¼›åªè¦æ”¶åˆ°äº†é»˜è®¤å€¼ï¼Œå°±è®¤ä¸ºå‘ç”Ÿäº†æ•°æ®ä¸ŠæŠ¥&gt; çš„ä¸­æ–­ï¼ˆå¦‚æœä½ è®¾ç½®çš„é»˜è®¤å€¼ï¼Œå¯èƒ½ä¸æ­£å¸¸ä¸ŠæŠ¥çš„æ•°æ®ç›¸ç­‰ï¼Œé‚£ä¹ˆè¯·ä¿®æ”¹ä½ çš„<code>Nodata</code>é…ç½®ã€ä½¿é»˜è®¤å€¼æœ‰åˆ«äºæ­£å¸¸å€¼ï¼‰ã€‚å°†æ­¤ç­–ç•¥ï¼Œç»‘å®šåˆ°åˆ†ç»„<code>&gt; cop.xiaomi_owt.inf_pdl.falcon</code>å³å¯ã€‚</li>
</ul>
<p><a href="#R-image-f7a5c885dbc0987fefe70cfc41bee35c" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template-3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f7a5c885dbc0987fefe70cfc41bee35c"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/template-3.png"></a></p>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->æ³¨æ„äº‹é¡¹<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>é…ç½®åç§°<code>name</code>ï¼Œè¦å…¨å±€å”¯ä¸€ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿<code>Nodata</code>é…ç½®çš„ç®¡ç†ã€‚</li>
<li>ç›‘æ§å®ä¾‹<code>endpoint</code>, å¯ä»¥æ˜¯æœºå™¨åˆ†ç»„ã€æœºå™¨åæˆ–è€…å…¶ä»– è¿™ä¸‰ç§ç±»å‹ï¼Œåªèƒ½é€‰æ‹©å…¶ä¸­çš„ä¸€ç§ã€‚åŒä¸€ç±»å‹ï¼Œæ”¯æŒå¤šä¸ªè®°å½•ï¼Œä½†å»ºè®®ä¸è¶…è¿‡5ä¸ªï¼Œå¤šæ¡è®°å½•æ¢è¡Œåˆ†å‰²ã€æ¯è¡Œä¸€æ¡&gt; è®°å½•ã€‚é€‰æ‹©æœºå™¨åˆ†ç»„æ—¶ï¼Œç³»ç»Ÿä¼šå¸®å¿™å±•å¼€æˆå…·ä½“æœºå™¨åï¼Œæ”¯æŒåŠ¨æ€ç”Ÿæ•ˆã€‚ç›‘æ§å®ä½“ä¸æ˜¯æœºå™¨åæ—¶ï¼Œåªèƒ½é€‰æ‹©â€œå…¶ä»–â€ç±»å‹ã€‚</li>
<li>ç›‘æ§æŒ‡æ ‡<code>metric</code>ã€‚</li>
<li>æ•°æ®æ ‡ç­¾<code>tags</code>ï¼Œå¤šä¸ª<code>tag</code>è¦ç”¨é€—å·éš”å¼€ã€‚å¿…é¡»å¡«å†™å®Œæ•´çš„<code>tags</code>ä¸²ï¼Œå› ä¸º<code>nodata</code>ä¼šæŒ‰ç…§æ­¤<code>tags</code>ä¸²ï¼Œå»å®Œå…¨åŒ¹é…ã€ç­›é€‰ç›‘æ§æ•°æŒ‡æ ‡é¡¹ã€‚</li>
<li>æ•°æ®ç±»å‹<code>type</code>ï¼Œåªæ”¯æŒåŸå§‹å€¼ç±»å‹<code>GAUGE</code>ã€‚å› ä¸ºï¼Œ<code>nodata</code>åªåº”è¯¥ç›‘æ§ &ldquo;ç‰¹å¾æŒ‡æ ‡&rdquo;(å¦‚<code>agent.alive</code>)ï¼Œ&ldquo;ç‰¹å¾æŒ‡æ ‡&quot;éƒ½æ˜¯<code>GAUGE</code>ç±»å‹çš„</li>
<li>é‡‡é›†å‘¨æœŸ<code>step</code>ï¼Œå•ä½æ˜¯ç§’ã€‚å¿…é¡»å¡«å†™ å®Œæ•´<code>&amp;</code>çœŸå®<code>step</code>ã€‚è¯¥å­—æ®µä¸å®Œæ•´ æˆ–è€… ä¸çœŸå®ï¼Œå°†ä¼šå¯¼è‡´<code>nodata</code>ç›‘æ§çš„è¯¯æŠ¥ã€æ¼æŠ¥ã€‚</li>
<li>è¡¥å‘å€¼<code>default</code>ï¼Œå¿…é¡»æœ‰åˆ«äºä¸ŠæŠ¥çš„çœŸå®æ•°æ®ã€‚æ¯”å¦‚ï¼Œ<code>cpu.idle</code>çš„å–å€¼èŒƒå›´æ˜¯[0,100]ï¼Œé‚£ä¹ˆå®ƒçš„<code>nodata</code>é»˜è®¤å–å€¼ åªèƒ½å–å°äº<code>0</code>æˆ–è€…å¤§äº<code>100</code>&gt; çš„å€¼ã€‚å¦åˆ™ï¼Œä¼šå‘ç”Ÿè¯¯æŠ¥ã€æ¼æŠ¥</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h3 id="æŠ¥è­¦å‡½æ•°è¯´æ˜">æŠ¥è­¦å‡½æ•°è¯´æ˜</h3>
<blockquote>
<ul>
<li>è¯´æ˜ï¼š<code>#</code>åé¢çš„æ•°å­—çš„æœ€å¤§å€¼ï¼Œå³åœ¨<code>judge</code>å†…å­˜ä¸­ä¿ç•™æœ€è¿‘å‡ ä¸ªç‚¹ï¼Œæ˜¯æ”¯æŒè‡ªå®šä¹‰çš„</li>
</ul>
<blockquote>
<ul>
<li><code>all(#3)</code>: æœ€æ–°çš„<code>3</code>ä¸ªç‚¹éƒ½æ»¡è¶³é˜ˆå€¼æ¡ä»¶åˆ™æŠ¥è­¦</li>
<li><code>max(#3)</code>: å¯¹äºæœ€æ–°çš„<code>3</code>ä¸ªç‚¹ï¼Œå…¶æœ€å¤§å€¼æ»¡è¶³é˜ˆå€¼æ¡ä»¶åˆ™æŠ¥è­¦</li>
<li><code>min(#3)</code>: å¯¹äºæœ€æ–°çš„<code>3</code>ä¸ªç‚¹ï¼Œå…¶æœ€å°å€¼æ»¡è¶³é˜ˆå€¼æ¡ä»¶åˆ™æŠ¥è­¦</li>
<li><code>sum(#3)</code>: å¯¹äºæœ€æ–°çš„<code>3</code>ä¸ªç‚¹ï¼Œå…¶å’Œæ»¡è¶³é˜ˆå€¼æ¡ä»¶åˆ™æŠ¥è­¦</li>
<li><code>avg(#3)</code>: å¯¹äºæœ€æ–°çš„<code>3</code>ä¸ªç‚¹ï¼Œå…¶å¹³å‡å€¼æ»¡è¶³é˜ˆå€¼æ¡ä»¶åˆ™æŠ¥è­¦</li>
<li><code>diff(#3)</code>: æ‹¿æœ€æ–°<code>push</code>ä¸Šæ¥çš„ç‚¹ï¼ˆè¢«å‡æ•°ï¼‰ï¼Œä¸å†å²æœ€æ–°çš„<code>3</code>ä¸ªç‚¹ï¼ˆ<code>3</code>ä¸ªå‡æ•°ï¼‰ç›¸å‡ï¼Œå¾—åˆ°<code>3</code>ä¸ªå·®ï¼Œåªè¦æœ‰ä¸€ä¸ªå·®æ»¡è¶³é˜ˆå€¼æ¡ä»¶åˆ™æŠ¥è­¦</li>
<li><code>pdiff(#3)</code>: æ‹¿æœ€æ–°<code>push</code>ä¸Šæ¥çš„ç‚¹ï¼Œä¸å†å²æœ€æ–°çš„<code>3</code>ä¸ªç‚¹ç›¸å‡ï¼Œå¾—åˆ°<code>3</code>ä¸ªå·®ï¼Œå†å°†<code>3</code>ä¸ªå·®å€¼åˆ†åˆ«é™¤ä»¥å‡æ•°ï¼Œå¾—åˆ°<code>3</code>ä¸ªå•†å€¼ï¼Œåªè¦æœ‰ä¸€ä¸ªå•†å€¼æ»¡è¶³é˜ˆå€¼åˆ™æŠ¥è­¦</li>
<li><code>lookup(#2,3)</code>: æœ€æ–°çš„<code>3</code>ä¸ªç‚¹ä¸­æœ‰<code>2</code>ä¸ªæ»¡è¶³æ¡ä»¶åˆ™æŠ¥è­¦ï¼›</li>
<li><code>stddev(#7) = 3</code>ï¼šç¦»ç¾¤ç‚¹æ£€æµ‹å‡½æ•°ï¼Œå–æœ€æ–°<strong>7</strong>ä¸ªç‚¹çš„æ•°æ®åˆ†åˆ«è®¡ç®—å¾—åˆ°ä»–ä»¬çš„æ ‡å‡†å·®å’Œå‡å€¼ï¼Œåˆ†åˆ«è®¡ä¸º<code>Ïƒ</code>å’Œ<code>Î¼</code>ï¼Œå…¶ä¸­å½“å‰å€¼è®¡ä¸º<code>X</code>ï¼Œé‚£ä¹ˆå½“<code>X</code>è½åœ¨åŒºé—´ [Î¼-3Ïƒ, Î¼+3Ïƒ] ä¹‹å¤–æ—¶ï¼Œåˆ™è®¤ä¸ºå½“å‰å€¼æ³¢åŠ¨è¿‡å¤§ï¼Œè§¦å‘æŠ¥è­¦ï¼›æ›´å¤šè¯·å‚è€ƒ<code>3-sigma</code>ç®—æ³•ï¼šhttps://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_ruleã€‚</li>
</ul>
</blockquote>
<ul>
<li>æœ€å¸¸ç”¨çš„å°±æ˜¯<code>all</code>å‡½æ•°äº†ï¼Œæ¯”å¦‚<code>cpu.idle</code> <code>all(#3) &lt; 5</code>ï¼Œè¡¨ç¤º<code>cpu.idle</code>çš„å€¼è¿ç»­<code>3</code>æ¬¡å°äº<code>5%</code>åˆ™æŠ¥è­¦ã€‚</li>
<li><code>lookup</code>ä¸ºéè¿ç»­æ€§æŠ¥è­¦å‡½æ•°ï¼Œé€‚ç”¨äºåœ¨ä¸€å®šèŒƒå›´å†…å®¹å¿ç›‘æ§æŒ‡æ ‡æŠ–åŠ¨çš„åœºæ™¯ï¼Œæ¯”å¦‚æŸä¸ªä¸»æœºçš„<code>cpu.busy</code>å¿½é«˜å¿½ä½ï¼Œä½¿ç”¨<code>all(#1)&gt;80</code>æ˜æ˜¾è¿‡äºä¸¥æ ¼ï¼Œä¼šäº§ç”Ÿå¤§é‡æŠ¥è­¦å¹²æ‰°è§†çº¿ï¼Œä½¿ç”¨<code>all(#3)&gt;80</code>åˆ™è¿ç»­ä¸‰æ¬¡åé«˜çš„æ¦‚ç‡å¾ˆå°ï¼Œå¯èƒ½æ°¸è¿œä¸ä¼šè§¦å‘æŠ¥è­¦ï¼Œä¸èƒ½å¸®åŠ©æˆ‘ä»¬å‘ç°ç³»ç»Ÿçš„ä¸ç¨³å®šï¼Œé‚£ä¹ˆå¦‚æœä½¿ç”¨<code>lookup(#3,5)</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“<code>cpu.busy</code>æœ€è¿‘æŠ–åŠ¨é¢‘ç¹ï¼Œè¶…è¿‡äº†æˆ‘ä»¬å®¹å¿çš„ç•Œçº¿ã€‚</li>
<li>æ–°å¢ <code>stddev</code> å‡½æ•°ï¼ŒåŸºäºé«˜æ–¯åˆ†å¸ƒçš„ç¦»ç¾¤ç‚¹æ£€æµ‹æ–¹å¼ï¼Œæ¯”å¦‚<code>cpu.idle</code> <code>stddev(#5) = 3</code> ï¼Œè¡¨ç¤ºè·å–<code>cpu.idle</code>çš„å†å²<code>5</code>ä¸ªç‚¹æ•°æ®ï¼Œè®¡ç®—å¾—åˆ°ä»–ä»¬çš„æ ‡å‡†å·®å’Œå‡å€¼ï¼Œåˆ†åˆ«è®¡ä¸º<code>Ïƒ</code>å’Œ<code>Î¼</code>ï¼Œçœ‹å…¶æ˜¯å¦åˆ†å¸ƒåœ¨<code>(Î¼-3Ïƒ,Î¼+3Ïƒ)</code>èŒƒå›´ä¹‹å†…ï¼Œå¦‚æœä¸åœ¨èŒƒå›´ä¹‹å†…åˆ™æŠ¥è­¦ã€‚</li>
</ul>
</blockquote>
<hr>
<h3 id="screençš„ä½¿ç”¨"><code>screen</code>çš„ä½¿ç”¨</h3>
<blockquote>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>screen</code>æå‰å°†å›¾åƒå®šåˆ¶å¥½ï¼Œè€Œä¸ç”¨æ¯æ¬¡éƒ½å»æœç´¢å‡ºå›¾ï¼Œè¿™æ ·å°±å®ç°äº†ç±»ä¼¼çš„cactiå›¾åƒå±•ç¤ºåŠŸèƒ½ã€‚</li>
</ul>
<p><a href="#R-image-57d7346bf53888fbd5d09840d9d5c06e" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-57d7346bf53888fbd5d09840d9d5c06e"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen.jpg"></a></p>
<p><a href="#R-image-8731a11b80db845cd66472523dbd97ad" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-falcon.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8731a11b80db845cd66472523dbd97ad"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-falcon.jpg"></a></p>
<p><a href="#R-image-f836fc27663c061c0d85bcaa8aa30d2f" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-1.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f836fc27663c061c0d85bcaa8aa30d2f"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-1.jpg"></a></p>
<p><a href="#R-image-54554e364dd7d686b6cda028e434d098" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-2.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-54554e364dd7d686b6cda028e434d098"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-2.jpg"></a></p>
<p><a href="#R-image-20ce5a527fe1b1547b1a16ecb718e592" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-3.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-20ce5a527fe1b1547b1a16ecb718e592"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-3.jpg"></a></p>
<p><a href="#R-image-09c03eabae1fe6669992b95deb4f138b" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-4.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-09c03eabae1fe6669992b95deb4f138b"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-4.jpg"></a></p>
<p><a href="#R-image-4ce496542aa140df1f400b17d31c0ec7" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-5.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4ce496542aa140df1f400b17d31c0ec7"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-5.jpg"></a></p>
<p><a href="#R-image-712d0c9a5312b8ff069dbeab5a39b265" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-6.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-712d0c9a5312b8ff069dbeab5a39b265"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Monitor_Server/Open-Falcon_Server/screen-6.jpg"></a></p>
<p><!-- raw HTML omitted -->æ³¨ï¼š<!-- raw HTML omitted --><code>graph</code><!-- raw HTML omitted -->å¯ä»¥åŠ å¤šä¸ª<!-- raw HTML omitted --></p>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1719330259" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1719330259" defer></script>
    <script src="../../../js/theme.js?1719330259" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/hero.png">
    <meta name="twitter:title" content="Ansible :: Hugo Relearn Theme">
    <meta property="og:url" content="https://erge.blog/systems/linux/ansible/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Ansible :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://erge.blog/images/hero.png">
    <meta itemprop="name" content="Ansible :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T00:17:40+08:00">
    <meta itemprop="dateModified" content="2024-06-13T00:17:40+08:00">
    <meta itemprop="image" content="https://erge.blog/images/hero.png">
    <title>Ansible :: Hugo Relearn Theme</title>
    <link href="../../../images/favicon.ico?1719632497" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../css/fontawesome-all.min.css?1719632499" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1719632499" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1719632499" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1719632499" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1719632499" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1719632499" rel="stylesheet">
    <link href="../../../css/fonts.css?1719632499" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1719632499" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1719632499" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1719632499" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1719632499" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1719632499" rel="stylesheet">
    <link href="../../../css/print.css?1719632499" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1719632499" rel="stylesheet">
    <script src="../../../js/variant.js?1719632499"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../systems/linux/ansible/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Ansible</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/" title="Linux (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/ansible/use_slatstack/" title="Use_Slatstack (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="ansible">Ansible</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Ansible</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="use_slatstack">Use_Slatstack</h1>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="use_ansible">Use_Ansible</h1>

<h2 id="é…ç½®ä½¿ç”¨ansible">é…ç½®ä½¿ç”¨<code>Ansible</code></h2>
<blockquote>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>åç§°</th>
<th>ç®€ä»‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.jianshu.com/p/7c4c47aa6b5a" rel="external" target="_self"><code>ansible</code>æ€»ç»“</a></td>
<td>&mdash;</td>
<td>&mdash;-</td>
</tr>
<tr>
<td><a href="https://www.kancloud.cn/louis1986/ansible/587918" rel="external" target="_self"><code>Ansible</code>æŒ‡å—</a></td>
<td>&mdash;-</td>
<td>&mdash;-</td>
</tr>
<tr>
<td><a href="http://docs.ansible.com/ansible/latest/become.html" rel="external" target="_self">å…³äº<code>become</code>å±æ€§</a></td>
<td>&mdash;-</td>
<td>&mdash;-</td>
</tr>
<tr>
<td><a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_intro.html" rel="external" target="_self"><code>Ansible</code>å‰§æœ¬çš„è¯­æ³•</a></td>
<td>&mdash;-</td>
<td>&mdash;-</td>
</tr>
<tr>
<td><a href="http://docs.ansible.com/ansible/latest/list_of_all_modules.html" rel="external" target="_self"><code>Ansible</code>çš„å†…ç½®æ¨¡å—åˆ—è¡¨</a></td>
<td>&mdash;-</td>
<td>&mdash;-</td>
</tr>
<tr>
<td><a href="https://juejin.im/entry/5ba6e5e4e51d450e51628272" rel="external" target="_self"><code>Ansible</code>æ‰¹é‡è‡ªåŠ¨åŒ–ç®¡ç†å·¥å…·<code>roles</code>æ ‡å‡†åŒ–</a></td>
<td>&mdash;-</td>
<td>&mdash;</td>
</tr>
<tr>
<td><a href="https://blog.csdn.net/wh211212/article/details/82763493" rel="external" target="_self"><code>ansible-playbook</code>è°ƒç”¨<code>zabbix-api</code>è‡ªåŠ¨æ·»åŠ ä¸»æœº</a></td>
<td>&mdash;-</td>
<td>&mdash;-</td>
</tr>
<tr>
<td><a href="https://blog.csdn.net/wu2700222/article/details/80816988" rel="external" target="_self"><code>Ansible</code>æ‰¹é‡å®‰è£…<code>zabbix-agent</code>å¹¶ä½¿ç”¨<code>zabbix</code>è‡ªåŠ¨æ·»åŠ ä¸»æœº</a></td>
<td>&mdash;-</td>
<td>&mdash;-</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>é€‰é¡¹</strong></th>
<th><strong>æè¿°</strong></th>
<th>è¯¦è§£</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a MODULE_ARGS</code>, <!-- raw HTML omitted -->  <code>--args=MODULE_ARGS</code></td>
<td>æ¨¡å—å‚æ•°</td>
<td></td>
</tr>
<tr>
<td><code>-C</code>, <code>--check</code>ã€</td>
<td>è¿è¡Œæ£€æŸ¥ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ</td>
<td></td>
</tr>
<tr>
<td><code>-e EXTRA_VARS</code>, <!-- raw HTML omitted --> <code>--extra-vars=EXTRA_VARS</code></td>
<td>è®¾ç½®é™„åŠ å˜é‡<code>key=value</code></td>
<td></td>
</tr>
<tr>
<td><code>-f FORKS</code>, <code>--forks=FORKS</code></td>
<td>æŒ‡å®šå¹¶è¡Œè¿›ç¨‹æ•°é‡ï¼Œé»˜è®¤5</td>
<td></td>
</tr>
<tr>
<td><code>-i INVENTORY</code>,<!-- raw HTML omitted --> <code>--inventory=INVENTORY</code></td>
<td>æŒ‡å®šä¸»æœºæ¸…å•æ–‡ä»¶è·¯å¾„</td>
<td></td>
</tr>
<tr>
<td><code>--list-hosts</code></td>
<td>è¾“å‡ºåŒ¹é…çš„ä¸»æœºåˆ—è¡¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ</td>
<td></td>
</tr>
<tr>
<td><code>-m MODULE_NAME</code>,<!-- raw HTML omitted --> <code>--module-name=MODULE_NAME</code></td>
<td>æ‰§è¡Œçš„æ¨¡å—åï¼Œé»˜è®¤<code>command</code></td>
<td></td>
</tr>
<tr>
<td><code>--syntax-check</code></td>
<td>è¯­æ³•æ£€æŸ¥<code>playbook</code>æ–‡ä»¶ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ</td>
<td></td>
</tr>
<tr>
<td><code>-t TREE</code>, <code>--tree=TREE</code></td>
<td>å°†æ—¥å¿—è¾“å‡ºåˆ°æ­¤ç›®å½•</td>
<td></td>
</tr>
<tr>
<td><code>-v</code>, <code>--verbose</code></td>
<td>è¯¦ç»†ä¿¡æ¯ï¼š<code>-vvv</code>ï¼Œæ›´å¤šï¼š<code>-vvvv debug</code></td>
<td></td>
</tr>
<tr>
<td><code>--version</code></td>
<td>æŸ¥çœ‹ç¨‹åºç‰ˆæœ¬</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>è¿æ¥é€‰é¡¹</strong></th>
<th><strong>æ§åˆ¶è°è¿æ¥ä¸»æœºå’Œå¦‚ä½•è¿æ¥</strong></th>
<th>è¯¦è§£</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-k</code>, <code>--ask-pass</code></td>
<td>è¯·æ±‚è¿æ¥å¯†ç </td>
<td></td>
</tr>
<tr>
<td><code>--private-key=PRIVATE_KEY_FILE</code>, <!-- raw HTML omitted --><code>--key-file=PRIVATE_KEY_FILE</code></td>
<td>ç§é’¥æ–‡ä»¶</td>
<td></td>
</tr>
<tr>
<td><code>-u REMOTE_USER</code>ï¼Œ<!-- raw HTML omitted --><code>--user=REMOTE_USER</code></td>
<td>è¿æ¥ç”¨æˆ·ï¼Œé»˜è®¤<code>None</code></td>
<td></td>
</tr>
<tr>
<td><code>-T TIMEOUT</code>ï¼Œ<!-- raw HTML omitted --><code>--timeout=TIMEOUT</code></td>
<td>è¦†ç›–è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤10ç§’</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>ææƒé€‰é¡¹</strong></th>
<th><strong>æ§åˆ¶åœ¨ç›®æ ‡ä¸»æœºä»¥ä»€ä¹ˆç”¨æˆ·èº«ä»½è¿è¡Œ</strong></th>
<th>è¯¦è§£</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-b</code>ï¼Œ<code>--become</code></td>
<td>ä»¥å¦ä¸€ä¸ªç”¨æˆ·èº«ä»½æ“ä½œ</td>
<td></td>
</tr>
<tr>
<td><code>--become-method=BECOME_METHOD</code></td>
<td>ææƒæ–¹æ³•ï¼Œé»˜è®¤<code>sudo</code></td>
<td></td>
</tr>
<tr>
<td><code>--become-user=BECOME_USER</code></td>
<td>ææƒåçš„ç”¨æˆ·èº«ä»½ï¼Œé»˜è®¤<code>root</code></td>
<td></td>
</tr>
<tr>
<td><code>-K</code>ï¼Œ<code>--ask-become-pass</code></td>
<td>ææƒå¯†ç </td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong><a href="https://docs.ansible.com/ansible/latest/command_guide/intro_adhoc.html" rel="external" target="_self">å¸¸ç”¨æ¨¡å—</a></strong></th>
<th><strong>æè¿°</strong></th>
<th>è¯¦è§£</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>command</code>ã€<code>shell</code></td>
<td>æ‰§è¡Œ<code>shell</code>å‘½ä»¤</td>
<td></td>
</tr>
<tr>
<td><code>copy</code>ã€<code>file</code></td>
<td>æ–‡ä»¶ä¼ è¾“</td>
<td></td>
</tr>
<tr>
<td><code>yum</code></td>
<td>ç®¡ç†è½¯ä»¶åŒ…</td>
<td></td>
</tr>
<tr>
<td><code>user</code></td>
<td>ç”¨æˆ·å’Œç»„</td>
<td></td>
</tr>
<tr>
<td><code>git</code></td>
<td>ä»æºä»£ç ç®¡ç†ç³»ç»Ÿéƒ¨ç½²</td>
<td></td>
</tr>
<tr>
<td><code>service</code></td>
<td>ç®¡ç†æœåŠ¡</td>
<td></td>
</tr>
<tr>
<td><code>setup</code></td>
<td>æ”¶é›†ç›®æ ‡ä¸»æœºä¿¡æ¯</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>é…ç½®æ–‡ä»¶æŒ‡ä»¤</strong></th>
<th><strong>æè¿°</strong></th>
<th>è¯¦è§£</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ansible_ssh_host</code></td>
<td>æŒ‡å®šä¸»æœºåˆ«åå¯¹åº”çš„çœŸå®<code>IP</code></td>
<td></td>
</tr>
<tr>
<td><code>ansible_ssh_port</code></td>
<td>æŒ‡å®šè¿æ¥åˆ°è¿™ä¸ªä¸»æœºçš„<code>ssh</code>ç«¯å£ï¼Œé»˜è®¤<code>22</code></td>
<td></td>
</tr>
<tr>
<td><code>ansible_ssh_user</code></td>
<td>è¿æ¥åˆ°è¯¥ä¸»æœºçš„<code>ssh</code>ç”¨æˆ·</td>
<td></td>
</tr>
<tr>
<td><code>ansible_ssh_pass</code></td>
<td>è¿æ¥åˆ°è¯¥ä¸»æœºçš„<code>ssh</code>å¯†ç (è¿<code>-k</code>é€‰é¡¹éƒ½çœäº†)ï¼Œå®‰å…¨è€ƒè™‘è¿˜æ˜¯å»ºè®®ä½¿ç”¨ç§é’¥æˆ–åœ¨å‘½ä»¤è¡ŒæŒ‡å®š<code>-k</code>é€‰é¡¹è¾“å…¥</td>
<td></td>
</tr>
<tr>
<td><code>ansible_sudo_pass</code></td>
<td><code>sudo</code>å¯†ç </td>
<td></td>
</tr>
<tr>
<td><code>ansible_sudo_exe</code>(<code>v1.8+</code>çš„æ–°ç‰¹æ€§)</td>
<td><code>sudo</code>å‘½ä»¤è·¯å¾„</td>
<td></td>
</tr>
<tr>
<td><code>ansible_ssh_private_key_file</code></td>
<td>ç§é’¥æ–‡ä»¶è·¯å¾„</td>
<td></td>
</tr>
<tr>
<td><code>ansible_nodename</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ansible_connection</code></td>
<td>è¿æ¥ç±»å‹ï¼Œå¯ä»¥æ˜¯<code>local</code>ã€<code>ssh</code>æˆ–<code>paramiko</code>ï¼Œ<code>ansible1.2</code>ä¹‹å‰é»˜è®¤ä¸º<code>paramiko</code></td>
<td></td>
</tr>
<tr>
<td><code>ansible_os_family</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ansible_pkg_mgr</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ansible_shell_type</code></td>
<td>ç›®æ ‡ç³»ç»Ÿçš„<code>shell</code>ç±»å‹ï¼Œé»˜è®¤ä¸º<code>sh</code>,å¦‚æœè®¾ç½®<code>csh/fish</code>ï¼Œé‚£ä¹ˆå‘½ä»¤éœ€è¦éµå¾ªå®ƒä»¬è¯­æ³•</td>
<td></td>
</tr>
<tr>
<td><code>ansible_processor</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ansible_processor_cores</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ansible_python_interpreter</code></td>
<td><code>python</code>è§£é‡Šå™¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯<code>/usr/bin/python</code>ï¼Œä½†æ˜¯å¦‚è¦è¦è¿<code>*BSD</code>ç³»ç»Ÿçš„è¯ï¼Œå°±éœ€è¦è¯¥æŒ‡ä»¤ä¿®æ”¹<code>python</code>è·¯å¾„</td>
<td></td>
</tr>
<tr>
<td><code>ansible_*_interpreter</code></td>
<td>è¿™é‡Œçš„<code>*</code>å¯ä»¥æ˜¯<code>ruby</code>æˆ–<code>perl</code>æˆ–å…¶ä»–è¯­è¨€çš„è§£é‡Šå™¨ï¼Œä½œç”¨å’Œ<code>ansible_python_interpreter</code>ç±»ä¼¼</td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h3 id="é…ç½®æ–‡ä»¶å‚æ•°">é…ç½®æ–‡ä»¶å‚æ•°</h3>
<h4 id="ä¸»é…ç½®æ–‡ä»¶">ä¸»é…ç½®æ–‡ä»¶</h4>
<blockquote>
<ul>
<li><code>ansible-doc --help</code><!-- raw HTML omitted -->ï¼šè·å–ä½¿ç”¨å¸®åŠ©<!-- raw HTML omitted --></li>
<li><code>ansible-playbook --help</code><!-- raw HTML omitted -->ï¼šè·å–å‰§æœ¬ä½¿ç”¨å¸®åŠ©<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted --><!-- raw HTML omitted -->ä¸»æœºå<!-- raw HTML omitted -->ä¸èƒ½ä½¿ç”¨<!-- raw HTML omitted -->ä¸‹åˆ’çº¿<!-- raw HTML omitted --><!-- raw HTML omitted --><code>_</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/ansible/ansible.cfg<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[defaults]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">inventory = /etc/ansible/hosts
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">forks = 5
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">become = root
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">remote_port = 22
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">host_key_checking = False
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">timeout = 10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">log_path = /var/log/ansible.log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">private_key_file = /root/.ssh/id_rsa
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ç¤ºä¾‹1ï¼šæœªåˆ†ç»„çš„ä¸»æœº
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">green.example.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">blue.example.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">192.168.100.1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">192.168.100.10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ç¤ºä¾‹2ï¼šå±äºwebserversç»„ä¸»æœºé›†åˆ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[webservers]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">alpha.example.org
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">beta.example.org
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">192.168.1.100
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">192.168.1.110
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">www[001:006].example.com 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ç¤ºä¾‹3ï¼šå±äºdbserversç»„ä¸»æœºé›†åˆ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[dbservers]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">db01.intranet.mydomain.net
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">db02.intranet.mydomain.net
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">10.25.1.56
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">10.25.1.57
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">db-[99:101]-node.example.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ä¸»æœºå’Œä¸»æœºç»„å˜é‡ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[webservers:vars]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">http_port=8080
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">server_name=www.ctnrs.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># SSHå¯†ç è®¤è¯
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[webservers]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">192.168.1.10 ansible_ssh_user=root ansible_ssh_pass=&#39;123456â€™ http_port=80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">192.168.1.11 ansible_ssh_user=root ansible_ssh_pass=&#39;123456â€™ http_port=80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># SSHå¯†é’¥å¯¹è®¤è¯
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[webservers]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">192.168.1.10:22 ansible_ssh_user=root ansible_ssh_key=/root/.ssh/id_rsa
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[node]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">k8s-node-1 ansible_ssh_user=&#34;username&#34; ansible_ssh_pass=&#34;password&#34; ansible_ssh_port=&#34;port&#34; ansible_ssh_host=&#34;IP&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">k8s-node-2 ansible_ssh_user=&#34;username&#34; ansible_ssh_pass=&#34;password&#34; ansible_ssh_port=&#34;port&#34; ansible_ssh_host=&#34;IP&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[master]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">k8s-master ansible_ssh_user=&#34;username&#34; ansible_ssh_pass=&#34;password&#34; ansible_ssh_port=&#34;port&#34; ansible_ssh_host=&#34;IP&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># åº”ç”¨ç¤ºä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">some_host ansible_ssh_port=2222 ansible_ssh_user=manager
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">aws_host ansible_ssh_private_key_file=/home/example/.ssh/aws.pem
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">freebsd_host ansible_python_interpreter=/usr/local/bin/python
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ruby_module_host ansible_ruby_interpreter=/usr/bin/ruby.1.9.3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é…ç½®<code>sshd</code><!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ rpm -iUvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sed  -i <span style="color:#e6db74">&#39;s/^#host_key_checking/host_key_checking/g&#39;</span> /etc/ansible/ansible.cfg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sed -i <span style="color:#e6db74">&#39;s/PasswordAuthentication[ \t]*no/PasswordAuthentication yes/&#39;</span> /etc/ssh/sshd_config
</span></span><span style="display:flex;"><span>$ systemctl restart sshd</span></span></code></pre></div></blockquote>
<hr>
<h4 id="å­é…ç½®æ–‡ä»¶">å­é…ç½®æ–‡ä»¶</h4>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å¯¹ä¸»æœºæœ‰æ•ˆé…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/ansible/host_vars/all  	<span style="color:#75715e"># host_vars ç›®å½•ç”¨äºå­˜æ”¾ host å˜é‡ï¼Œallæ–‡ä»¶å¯¹æ‰€æœ‰ä¸»æœºæœ‰æ•ˆ</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/etc/ansible/host_vars/foosball  	<span style="color:#75715e"># æ–‡ä»¶foosballè¦å’Œhostsé‡Œé¢å®šä¹‰çš„ä¸»æœºåä¸€æ ·ï¼Œè¡¨ç¤ºåªå¯¹ foosballä¸»æœºæœ‰æ•ˆ</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯¹ç»„æœ‰æ•ˆé…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/ansible/group_vars/all  	<span style="color:#75715e"># group_varsç›®å½•ç”¨äºå­˜æ”¾ group å˜é‡ï¼Œallæ–‡ä»¶å¯¹æ‰€æœ‰ç»„æœ‰æ•ˆ</span>
</span></span><span style="display:flex;"><span>/etc/ansible/group_vars/raleigh  	<span style="color:#75715e"># æ–‡ä»¶ raleigh è¦å’Œ hosts é‡Œé¢å®šä¹‰çš„ç»„åä¸€æ ·ï¼Œè¡¨ç¤ºå¯¹raleighç»„ä¸‹çš„æ‰€æœ‰ä¸»æœºæœ‰æ•ˆ</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;/etc/ansible/group_vars/webservers.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">http_port: 8080
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">server_name: www.ctnrs.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="å‘½ä»¤ä½¿ç”¨">å‘½ä»¤ä½¿ç”¨</h4>
<blockquote>
<ul>
<li><code>ping</code><!-- raw HTML omitted -->æµ‹è¯•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ansible all -m ping
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä»¥bruceèº«ä»½ ping æ‰€æœ‰ä¸»æœº</span>
</span></span><span style="display:flex;"><span>$ ansible all -m ping -u bruce
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç”¨bruceç”¨æˆ· ä»¥rootèº«ä»½ ping</span>
</span></span><span style="display:flex;"><span>$ ansible all -m ping -u bruce --sudo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç”¨bruceç”¨æˆ· sudoåˆ° batmanç”¨æˆ· ping</span>
</span></span><span style="display:flex;"><span>$ ansible all -m ping -u bruce --sudo --sudo-user batman
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>$ ansible all -a <span style="color:#e6db74">&#34;/bin/echo hello&#34;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¹¶è¡Œæ€§å’Œ<!-- raw HTML omitted --><code>shell</code><!-- raw HTML omitted -->å‘½ä»¤<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># é‡å¯ altanta ä¸»æœºç»„çš„æ‰€æœ‰æœºå™¨ï¼Œæ¯æ¬¡é‡å¯ 10 å°</span>
</span></span><span style="display:flex;"><span>$ ansible atlanta -a <span style="color:#e6db74">&#34;/sbin/reboot&#34;</span> -f <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä»¥ geekwolf ç”¨æˆ·èº«ä»½åœ¨ atlanta ç»„çš„æ‰€æœ‰ä¸»æœºè¿è¡Œ foo å‘½ä»¤</span>
</span></span><span style="display:flex;"><span>$ ansible atlanta -a <span style="color:#e6db74">&#34;/usr/bin/foo&#34;</span> -u geekwolf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä»¥ geekwolf ç”¨æˆ·èº«ä»½ sudo æ‰§è¡Œå‘½ä»¤ fooï¼ˆ--ask-sudo-pass (-K) å¦‚æœæœ‰ sudo å¯†ç è¯·ä½¿ç”¨æ­¤å‚æ•°ï¼‰</span>
</span></span><span style="display:flex;"><span>$ ansible atlanta -a <span style="color:#e6db74">&#34;/usr/bin/foo&#34;</span> -u geekwolf --sudo <span style="color:#f92672">[</span>--ask-sudo-pass<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¹Ÿå¯ä»¥ sudo åˆ°å…¶ä»–ç”¨æˆ·æ‰§è¡Œå‘½ä»¤é root</span>
</span></span><span style="display:flex;"><span>$ ansible atlanta -a <span style="color:#e6db74">&#34;/usr/bin/foo&#34;</span> -u username -U otheruser <span style="color:#f92672">[</span>--ask-sudo-pass<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é»˜è®¤æƒ…å†µä¸‹ï¼Œansible ä½¿ç”¨çš„ module æ˜¯ commandï¼Œè¿™ä¸ªæ¨¡å—å¹¶ä¸æ”¯æŒ shell å˜é‡å’Œç®¡é“ç­‰ï¼Œè‹¥æƒ³ä½¿ç”¨shell æ¥æ‰§è¡Œæ¨¡å—ï¼Œè¯·ä½¿ç”¨-m å‚æ•°æŒ‡å®š shell æ¨¡å—</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨ shell æ¨¡å—åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤</span>
</span></span><span style="display:flex;"><span>$ ansible raleigh -m shell -a <span style="color:#960050;background-color:#1e0010">&#39;</span>echo $TERM</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä¼ è¾“æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># æ‹·è´æœ¬åœ°çš„/etc/hostsæ–‡ä»¶åˆ° atlantaä¸»æœºç»„æ‰€æœ‰ä¸»æœºçš„/tmp/hosts(ç©ºç›®å½•é™¤å¤–),å¦‚æœä½¿ç”¨playbooks åˆ™å¯ä»¥å……åˆ†åˆ©ç”¨ template æ¨¡å—</span>
</span></span><span style="display:flex;"><span>$ ansible atlanta -m copy -a <span style="color:#e6db74">&#34;src=../../../etc/hosts dest=/tmp/hosts&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># file æ¨¡å—å…è®¸æ›´æ”¹æ–‡ä»¶çš„ç”¨æˆ·åŠæƒé™</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m file -a <span style="color:#e6db74">&#34;dest=/srv/foo/a.txt mode=600&#34;</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m file -a <span style="color:#e6db74">&#34;dest=/srv/foo/b.txt mode=600 owner=mdehaan group=mdehaan&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨ file æ¨¡å—åˆ›å»ºç›®å½•ï¼Œç±»ä¼¼ mkdir -p</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m file -a <span style="color:#e6db74">&#34;dest=/path/to/c mode=755 owner=mdehaan group=mdehaan state=directory&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨ file æ¨¡å—åˆ é™¤æ–‡ä»¶æˆ–è€…ç›®å½•</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m file -a <span style="color:#e6db74">&#34;dest=/path/to/c state=absent&#34;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç®¡ç†è½¯ä»¶åŒ…<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># æ³¨é‡Šï¼šAnsible æ”¯æŒå¾ˆå¤šæ“ä½œç³»ç»Ÿçš„è½¯ä»¶åŒ…ç®¡ç†ï¼Œä½¿ç”¨æ—¶ -m æŒ‡å®šç›¸åº”çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·æ¨¡å—ï¼Œå¦‚æœæ²¡æœ‰è¿™æ ·çš„æ¨¡å—ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ç±»ä¼¼çš„æ¨¡å—æˆ–è€…ä½¿ç”¨ command æ¨¡å—æ¥å®‰è£…è½¯ä»¶åŒ…</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># aptã€yum æ¨¡å—åˆ†è¡¨ç”¨äºç®¡ç† Ubuntu ç³»åˆ—å’Œ RedHat ç³»åˆ—ç³»ç»Ÿè½¯ä»¶åŒ…ç¡®ä¿ acme åŒ…å·²ç»å®‰è£…ï¼Œä½†ä¸æ›´æ–°</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m apt -a <span style="color:#e6db74">&#34;name=acme state=present&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç¡®ä¿å®‰è£…åŒ…åˆ°ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m apt -a <span style="color:#e6db74">&#34;name=acme-1.5 state=present&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç¡®ä¿ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯æœ€æ–°ç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m apt -a <span style="color:#e6db74">&#34;name=acme state=latest&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç¡®ä¿ä¸€ä¸ªè½¯ä»¶åŒ…æ²¡æœ‰è¢«å®‰è£…</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m apt -a <span style="color:#e6db74">&#34;name=acme state=absent&#34;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç”¨æˆ·å’Œç”¨æˆ·ç»„<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># ä½¿ç”¨ user æ¨¡å—å¯¹äºåˆ›å»ºæ–°ç”¨æˆ·å’Œæ›´æ”¹ã€åˆ é™¤å·²å­˜åœ¨ç”¨æˆ·éå¸¸æ–¹ä¾¿</span>
</span></span><span style="display:flex;"><span>$ ansible all -m user -a <span style="color:#e6db74">&#34;name=foo password=&lt;crypted password here&gt;&#34;</span>
</span></span><span style="display:flex;"><span>$ ansible all -m user -a <span style="color:#e6db74">&#34;name=foo state=absent&#34;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æœåŠ¡ç®¡ç†<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># ç¡®ä¿ webservers ç»„æ‰€æœ‰ä¸»æœºçš„ httpd æ˜¯å¯åŠ¨çš„</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m service -a <span style="color:#e6db74">&#34;name=httpd state=started&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é‡å¯ webservers ç»„æ‰€æœ‰ä¸»æœºçš„ httpd æœåŠ¡</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m service -a <span style="color:#e6db74">&#34;name=httpd state=restarted&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç¡®ä¿ webservers ç»„æ‰€æœ‰ä¸»æœºçš„ httpd æ˜¯å…³é—­çš„</span>
</span></span><span style="display:flex;"><span>$ ansible webservers -m service -a <span style="color:#e6db74">&#34;name=httpd state=stopped&#34;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åå°è¿è¡Œ<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œå¯ä»¥æ”¾åˆ°åå°æ‰§è¡Œï¼Œansible ä¼šæ£€æŸ¥ä»»åŠ¡çš„çŠ¶æ€ï¼›åœ¨ä¸»æœºä¸Šæ‰§è¡Œçš„åŒä¸€ä¸ªä»»åŠ¡ä¼šåˆ†é…åŒä¸€ä¸ª job ID</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åå°æ‰§è¡Œå‘½ä»¤ 3600sï¼Œ-B è¡¨ç¤ºåå°æ‰§è¡Œçš„æ—¶é—´</span>
</span></span><span style="display:flex;"><span>$ ansible all -B <span style="color:#ae81ff">3600</span> -a <span style="color:#e6db74">&#34;/usr/bin/long_running_operation --do-stuff&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ£€æŸ¥ä»»åŠ¡çš„çŠ¶æ€</span>
</span></span><span style="display:flex;"><span>$ ansible all -m async_status -a <span style="color:#e6db74">&#34;jid=123456789&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åå°æ‰§è¡Œå‘½ä»¤æœ€å¤§æ—¶é—´æ˜¯ 1800s å³ 30 åˆ†é’Ÿï¼Œ-P æ¯ 60s æ£€æŸ¥ä¸‹çŠ¶æ€é»˜è®¤ 15s</span>
</span></span><span style="display:flex;"><span>$ ansible all -B <span style="color:#ae81ff">1800</span> -P <span style="color:#ae81ff">60</span> -a <span style="color:#e6db74">&#34;/usr/bin/long_running_operation --do-stuff&#34;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æœé›†ç³»ç»Ÿä¿¡æ¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Facts åœ¨ playbooks ä¸€ç« ä¸­ä¼šæœ‰è¯¦ç»†çš„æè¿°ï¼Œè¿™é‡Œåªé€šè¿‡å‘½ä»¤è·å–æ‰€æœ‰çš„ç³»ç»Ÿä¿¡æ¯æœé›†ä¸»æœºçš„æ‰€æœ‰ç³»ç»Ÿä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>$ ansible all -m setup
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æœé›†ç³»ç»Ÿä¿¡æ¯å¹¶ä»¥ä¸»æœºåä¸ºæ–‡ä»¶ååˆ†åˆ«ä¿å­˜åœ¨/tmp/facts ç›®å½•</span>
</span></span><span style="display:flex;"><span>$ ansible all -m setup --tree /tmp/facts
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æœé›†å’Œå†…å­˜ç›¸å…³çš„ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>$ ansible all -m setup -a <span style="color:#e6db74">&#39;filter=ansible_*_mb&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æœé›†ç½‘å¡ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>$ ansible all -m setup -a <span style="color:#960050;background-color:#1e0010">&#39;</span>filter<span style="color:#f92672">=</span>ansible_eth<span style="color:#f92672">[</span>0-2<span style="color:#f92672">]</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="é…ç½®ansible-playbook">é…ç½®<code>Ansible-Playbook</code></h3>
<ul>
<li>
<ol>
<li><code>Ansible-Playbook</code><!-- raw HTML omitted -->ç›®å½•ã€å­—æ®µå®šä¹‰<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://docs.ansible.com/ansible/latest/tips_tricks/ansible_tips_tricks.html" rel="external" target="_self"><code>Ansible</code>å®˜ç½‘æ–‡æ¡£</a></td>
<td><code>Ansible Playbook</code>å®˜æ–¹æ–‡æ¡£</td>
</tr>
<tr>
<td><a href="https://github.com/ansible/ansible-examples" rel="external" target="_self"><code>Ansible</code>ç¤ºä¾‹å‚è€ƒ</a></td>
<td>ç¤ºä¾‹å‚è€ƒç½‘å€</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ansible-playbook example.yml --tags <span style="color:#e6db74">&#34;configuration,install&#34;</span>  	<span style="color:#75715e"># æŒ‡å®šå®‰è£…</span>
</span></span><span style="display:flex;"><span>$ ansible-playbook example.yml --skip-tags <span style="color:#e6db74">&#34;install&#34;</span>  <span style="color:#75715e"># è·³è¿‡æ­¥éª¤ </span></span></span></code></pre></div><div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>ansible-playbook/
</span></span><span style="display:flex;"><span>â””â”€â”€ roles  <span style="color:#75715e"># å‰§æœ¬</span>
</span></span><span style="display:flex;"><span>â”œâ”€â”€ mysql
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ files
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ handlers
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ tasks
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ templates
</span></span><span style="display:flex;"><span>â”‚Â Â  â””â”€â”€ vars
</span></span><span style="display:flex;"><span>â”œâ”€â”€ nginx  	<span style="color:#75715e"># Nginxçš„è§’è‰²å‰§æœ¬</span>
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ files  	<span style="color:#75715e"># è¦ç”¨åˆ°çš„æ‹·è´æ–‡ä»¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>â”‚Â Â  â”‚Â Â  â””â”€â”€ index.html
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ handlers  	<span style="color:#75715e"># è§¦å‘å™¨ç›®å½•ï¼Œåœ¨å˜æ›´æ—¶æ‰§è¡Œæ“ä½œ</span>
</span></span><span style="display:flex;"><span>â”‚Â Â  â”‚Â Â  â””â”€â”€ main.yaml
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ tasks  	<span style="color:#75715e"># åŒ…å«è§’è‰²è¦æ‰§è¡Œçš„ä¸»è¦ä»»åŠ¡åˆ—è¡¨ï¼Œç”¨æ¥å®‰è£…ç¨‹åºæœåŠ¡</span>
</span></span><span style="display:flex;"><span>â”‚Â Â  â”‚Â Â  â””â”€â”€ main.yaml
</span></span><span style="display:flex;"><span>â”‚Â Â  â”œâ”€â”€ templates  	<span style="color:#75715e"># æ¨¡æ¿ç›®å½•</span>
</span></span><span style="display:flex;"><span>â”‚Â Â  â”‚Â Â  â””â”€â”€ nginx.conf.j2
</span></span><span style="display:flex;"><span>â”‚Â Â  â””â”€â”€ vars  	<span style="color:#75715e"># å˜é‡ç›®å½•</span>
</span></span><span style="display:flex;"><span>â”‚Â Â      â””â”€â”€ main.yaml
</span></span><span style="display:flex;"><span>â””â”€â”€ site.yaml  	<span style="color:#75715e"># å®šä¹‰é‚£ä¸ªèŠ‚ç‚¹æˆ–è€…é‚£ç»„æœåŠ¡å™¨æ‰§è¡Œï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªè§’è‰²å‰§æœ¬</span></span></span></code></pre></div><ul>
<li><code>name</code><!-- raw HTML omitted -->ï¼šæ¯ä¸ª<!-- raw HTML omitted --><code>play</code><!-- raw HTML omitted -->åå­—<!-- raw HTML omitted --></li>
<li><code>hosts</code><!-- raw HTML omitted -->ï¼šæ¯ä¸ª<!-- raw HTML omitted --><code>play</code><!-- raw HTML omitted -->æ¶‰åŠè¢«ç®¡ç†çš„æœåŠ¡å™¨ï¼ŒåŒ<!-- raw HTML omitted --><code>ad-hoc</code><!-- raw HTML omitted -->ä¸­çš„èµ„äº§é€‰æ‹©å™¨<!-- raw HTML omitted --></li>
<li><code>tasks</code><!-- raw HTML omitted -->ï¼šæ¯ä¸ª<!-- raw HTML omitted --><code>play</code><!-- raw HTML omitted -->ä¸­å…·ä½“è¦å®Œæˆçš„ä»»åŠ¡ï¼Œä»¥åˆ—è¡¨çš„å½¢å¼è¡¨è¾¾<!-- raw HTML omitted --></li>
<li><code>become</code><!-- raw HTML omitted -->ï¼šå¦‚æœéœ€è¦ææƒï¼Œåˆ™åŠ ä¸Š<!-- raw HTML omitted --><code>become</code><!-- raw HTML omitted -->ç›¸å…³å±æ€§<!-- raw HTML omitted --></li>
<li><code>become_user</code><!-- raw HTML omitted -->ï¼šè‹¥è¦ææƒçš„è¯ï¼Œææƒåˆ°é‚£ä¸ªç”¨æˆ·ä¸Š<!-- raw HTML omitted --></li>
<li><code>remote_user</code><!-- raw HTML omitted -->ï¼šæŒ‡å®šè¿æ¥åˆ°è¿œç¨‹èŠ‚ç‚¹çš„ç”¨æˆ·ï¼Œå°±æ˜¯åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œå…·ä½“æ“ä½œçš„ç”¨æˆ·å—ï¼Œè‹¥ä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä½¿ç”¨å½“å‰æ‰§è¡Œ<!-- raw HTML omitted --><code>ansible-playbook</code><!-- raw HTML omitted -->çš„ç”¨æˆ·<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<hr>
<h4 id="ansible-playbookroles"><code>Ansible-Playbook</code>â†’<code>Roles</code></h4>
<h5 id="ansible-playbookrolesnginx"><code>Ansible-Playbook</code>â†’<code>Roles</code>â†’<code>Nginx</code></h5>
<ul>
<li>
<ol>
<li><code>Roles</code>â†’<code>Nginx</code><!-- raw HTML omitted -->ç›®å½•ä¸‹æ–‡ä»¶å¤¹é…ç½®<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>Files</code><!-- raw HTML omitted -->è¦ç”¨åˆ°çš„æ–‡ä»¶ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ansible-playbook/roles/nginx/files/index.html<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TEST
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><code>Handlers</code><!-- raw HTML omitted -->è§¦å‘å™¨ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ansible-playbook/roles/nginx/handlers/main.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">---
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name: restart nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  service: name=nginx state=restarted
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><code>Tasks</code><!-- raw HTML omitted -->ä»»åŠ¡ä¸»è¦ç›®å½•ï¼Œç”¨æ¥å®‰è£…ç¨‹åºæœåŠ¡<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ansible-playbook/roles/nginx/tasks/main.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">--- # å£°æ˜
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- hosts: webservers
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  vars:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    hello: Ansible
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  tasks:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Add repo 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    yum_repository:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      name: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      description: nginx repo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      baseurl: http://nginx.org/packages/centos/7/$basearch/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      gpgcheck: no
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      enabled: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	# å®šä¹‰æ‰§è¡Œé¡¹ç›®åç§°ï¼Œå®‰è£…æœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Install Nginx packge
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	yum: name={{ item }} state=lates # item ä¸ºå†…ç½®å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	with_items:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	- epel-release
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	- nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	# æ‹·è´æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Copy index.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	copy: 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  src: index.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  dest: /usr/local/nginx/html/index.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	# æ‹·è´æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Copy nginx.conf Teplate
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	temlate: 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  src: nginx.conf.j2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  dest: /usr/local/nginx/conf/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	notify: restart nginx  # nginx.conf.j2 æ–‡ä»¶æ‹·è´æˆåŠŸï¼Œé€šçŸ¥handlers(è§¦å‘å™¨) é‡å¯ä½¿ä¹‹ç”Ÿæ•ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	# å¯åŠ¨æœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: make sure nginx service running
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	service: 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  name: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  state: started
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  enabled: yes
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	# åˆ›å»ºé¡¹ç›®ç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Create wwwroot directory
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	file:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  dest: /var/www/html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	  state: directory
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	# åˆ›å»ºä¸€ä¸ªç´¢å¼•æ–‡ä»¶  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Create test page index.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	shell: echo &#34;hello {{hello}}&#34; &gt; /var/www/html/index.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><code>Templates</code><!-- raw HTML omitted -->æ¨¡æ¿ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ansible-playbook/roles/nginx/templates/nginx.conf.j2<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">user  nobody;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">worker_processes {{ ansible_processor_cores }};  	# æœåŠ¡å†…ç½®å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">events {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    worker_connections {{ worker_connections }};  	# è‡ªå®šä¹‰å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">http {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    include       mime.types;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    default_type  application/octet-stream;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    sendfile        on;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    keepalive_timeout  65;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    server {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        listen       80;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        server_name  localhost;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        location / {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            root   html;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            index  index.html index.htm;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        error_page   500 502 503 504  /50x.html;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        location = /50x.html {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            root   html;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><code>vars</code><!-- raw HTML omitted -->è‡ªå®šä¹‰å˜é‡ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ansible-playbook/roles/nginx/vars/main.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">worker_connections: 10240;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><code>site.conf</code>ç›®å½•</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;site.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">server {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	listen 80;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	server_name www.ctnrs.com;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	location / {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		root /var/www/html;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		index index.html;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h5 id="ansible-playbookrolessiteyaml"><code>Ansible-Playbook</code>â†’<code>Roles</code>â†’<code>Site.yaml</code></h5>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>Ansible-Playbook</code><!-- raw HTML omitted -->ä¸‹<!-- raw HTML omitted --><code>Roles</code><!-- raw HTML omitted -->ç›®å½•ä¸‹<!-- raw HTML omitted --><code>site.yaml</code>æ–‡ä»¶</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>site.yaml</code><!-- raw HTML omitted -->æ–‡ä»¶ï¼Œå®šä¹‰é‚£ä¸ªèŠ‚ç‚¹æˆ–è€…é‚£ç»„æœåŠ¡å™¨æ‰§è¡Œä»€ä¹ˆç¨‹åº<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ansible-playbook/roles/site.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- hosts: web
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  roles:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- hosts: mysql
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  roles:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - mysql
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->æ£€æŸ¥<!-- raw HTML omitted --><code>Ansible-Playbook</code><!-- raw HTML omitted -->è¯­æ³•ä»¥åŠæ‰§è¡Œ<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ansible-playbook /opt/ansible-playbook/roles/site.yaml --syntax-chek  	<span style="color:#75715e"># æ£€æŸ¥è„šæœ¬è¯­æ³• --syntax-chek å‚æ•°</span>
</span></span><span style="display:flex;"><span>$ ansible-playbook /opt/ansible-playbook/roles/site.yaml -C  	<span style="color:#75715e"># -C æ¨¡æ‹Ÿè¿è¡ŒæŸ¥çœ‹æµç¨‹æ˜¯å¦ä¼šå‡ºé”™</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ansible-playbook /opt/ansible-playbook/roles/site.yaml</span></span></code></pre></div></blockquote>
<hr>
<h3 id="-ansible-playbookå®Œæ•´å‰§æœ¬ç¤ºä¾‹"><code> Ansible-Playbook</code>å®Œæ•´å‰§æœ¬ç¤ºä¾‹</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->è¿›é˜¶å‰§æœ¬è¯­æ³•<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>when</code><!-- raw HTML omitted -->é€»è¾‘åˆ¤æ–­<!-- raw HTML omitted --></li>
<li><code>include</code><!-- raw HTML omitted -->å‰§æœ¬å¼•ç”¨<!-- raw HTML omitted --></li>
<li><code>Handlers</code><!-- raw HTML omitted -->è§¦å‘å™¨<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ansible-playbook/nginx.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- hosts: web_server
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> vars:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    app_path: &#34;{{ base_path }}/app&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    http_port: 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    max_clients: 256
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  become: true  	# éœ€è¦ç›®æ ‡ä¸»æœºçš„ç”¨æˆ·å…·æœ‰sudoæƒé™
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  tasks:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: ensure apache is at the latest version
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    yum: name=httpd state=latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: ensure apahech is running
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    service: name=httpd state=started
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name:  	# åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶&amp;ç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    file:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      path: /tmp/demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      state: directory
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      mode: 0755
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name:  	# æ‹·è´æ–‡ä»¶åˆ°ç›®æ ‡ä¸»æœº
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    copy:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      src: /etc/hostname
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      dest: /tmp/demo/hostname
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: disable selinux
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command: /sbin/setenforce 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: run this command and ignore the result
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    shell: /usr/bin/somecommand || /bin/true 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ignore_errors: True  	# å¿½ç•¥æŠ¥é”™ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name:  	# ç”¨æ¨¡æ¿ç”Ÿæˆé…ç½®æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      src: demo.j2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      dest: &#34;{{ ansible_user_dir }}/demo.cfg&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  handlers
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - name: restart apache
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      service: name=httpd state=restart
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt;EOF &gt;roles/demo-role/tasks/main.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- include: yum.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  when: (ansible_distribution|lower == &#39;redhat&#39;) or (ansible_distribution|lower == &#39;centos&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- include: apt.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  when: (ansible_distribution|lower == &#39;debian&#39;) or (ansible_distribution|lower == &#39;ubuntu&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt;EOF &gt;roles/demo-role/tasks/yum.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name:  	# ä½¿ç”¨Yumå®‰è£…ApacheæœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  yum:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    name: &#34;{{ redhat_app }}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    state: &#34;{{ app_state }}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  notify:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt;EOF &gt;roles/demo-role/tasks/apt.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name:  	# ä½¿ç”¨Aptå®‰è£…ApacheæœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apt:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    name: &#34;{{ debian_app }}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    state: &#34;{{ app_state }}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  notify:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt;EOF &gt;roles/demo-role/vars/main.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">redhat_app: httpd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">debian_app: apache2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt;EOF &gt;roles/demo-role/handlers/main.yml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name: done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  debug:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    msg: &#34;ApacheæœåŠ¡å·²éƒ¨ç½²&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è‡ªåŠ¨éƒ¨ç½²<!-- raw HTML omitted --><code>Tomcat</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">webservers </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">gather_facts</span>: <span style="color:#66d9ef">no</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">vars</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">tomcat_version</span>: <span style="color:#ae81ff">8.5.34</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">tomcat_install_dir</span>: <span style="color:#ae81ff">/usr/local</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tasks</span>:
</span></span><span style="display:flex;"><span>	- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Install jdk1.8</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">yum</span>: <span style="color:#ae81ff">name=java-1.8.0-openjdk state=present</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Download tomcat</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#f92672">get_url</span>: <span style="color:#ae81ff">url=http://mirrors.hust.edu.cn/apache/tomcat/tomcat-</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span><span style="color:#ae81ff">/v{{ tomcat_version }}/bin/apache-tomcat-{{ tomcat_version }}.tar.gz dest=/tmp</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Unarchive tomcat-{{ tomcat_version }}.tar.gz</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#f92672">unarchive</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">src</span>: <span style="color:#ae81ff">/tmp/apache-tomcat-{{ tomcat_version }}.tar.gz </span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">dest</span>: <span style="color:#e6db74">&#34;{{ tomcat_install_dir }}&#34;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">copy</span>: <span style="color:#66d9ef">no</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Start tomcat </span>
</span></span><span style="display:flex;"><span>	  <span style="color:#f92672">shell</span>: <span style="color:#ae81ff">cd {{ tomcat_install_dir }} &amp;&amp;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">mv apache-tomcat-{{ tomcat_version }} tomcat8 &amp;&amp;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">cd tomcat8/bin &amp;&amp; nohup ./startup.sh &amp;</span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_slatstack">Install_Slatstack</h1>

<h2 id="slatstack"><code>Slatstack</code></h2>
<blockquote>
<ul>
<li><a href="https://blog.51cto.com/u_14316149/2421229" rel="external" target="_self"><code>Saltstack</code>åŸºæœ¬å‘½ä»¤,æ¨¡å—,ç»„ä»¶è¯¦è§£</a></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ salt <span style="color:#e6db74">&#34;*&#34;</span> sys.doc &gt; /tmp/saltstack-status.txt</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_ansible">Install_Ansible</h1>

<h2 id="markæ§åˆ¶æœºmarkå’Œmarkç›®æ ‡æœºmark"><!-- raw HTML omitted -->æ§åˆ¶æœº<!-- raw HTML omitted -->å’Œ<!-- raw HTML omitted -->ç›®æ ‡æœº<!-- raw HTML omitted --></h2>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->æ§åˆ¶æœºï¼š<!-- raw HTML omitted -->å®‰è£…<code>Python</code>ã€<code>Docker</code>ã€<code>Pip</code>å’Œ<code>Sshpass</code></li>
<li><!-- raw HTML omitted -->ç›®æ ‡æœºï¼š<!-- raw HTML omitted -->å®‰è£…<code>Python</code></li>
</ul>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://blog.51cto.com/lizhenliang" rel="external" target="_self">é˜¿è‰¯è€å¸ˆåšå®¢</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://releases.ansible.com/ansible/" rel="external" target="_self"><code>Ansible</code>å®‰è£…åŒ…</a></td>
<td><code>Ansible</code>å®˜ç½‘</td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/ansible/ansible" rel="external" target="_self"><code>Github-Ansible</code>åŸä»£ç </a></td>
<td><code>Github Ansible</code>åŸä»£ç </td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h3 id="å®‰è£…æ§åˆ¶ç«¯ç¨‹åº">å®‰è£…æ§åˆ¶ç«¯ç¨‹åº</h3>
<h4 id="font-colorredå®‰è£…fontansible"><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Ansible</code></h4>
<blockquote>
<ul>
<li><code>yum</code><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Ansible</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
</span></span><span style="display:flex;"><span>$ rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6
</span></span><span style="display:flex;"><span>$ yum -y install epel-release
</span></span><span style="display:flex;"><span>$ sudo yum -y install ansible</span></span></code></pre></div><ul>
<li><code>apt</code><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Ansible</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo apt-get install python-dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;/etc/apt/source.list<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">deb http://ppa.launchpad.net/ansible/ansible/ubuntu trusty main
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">deb-src http://ppa.launchpad.net/ansible/ansible/ubuntu trusty main
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sudo apt-get install software-properties-common
</span></span><span style="display:flex;"><span>$ sudo apt-add-repository ppa:ansible/ansible
</span></span><span style="display:flex;"><span>$ sudo apt-get update
</span></span><span style="display:flex;"><span>$ sudo apt-get install ansible</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä½¿ç”¨<!-- raw HTML omitted --><code>Python</code>çš„<code>pip</code><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Ansible</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ pip install ansible
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ curl https://raw.githubusercontent.com/mitsuhiko/pipsi/master/get-pipsi.py | <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>python
</span></span><span style="display:flex;"><span>$ pipsi install ansible</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æºç å®‰è£…<!-- raw HTML omitted --><code>Ansible</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git clone git://github.com/ansible/ansible.git
</span></span><span style="display:flex;"><span>$ cd ./ansible$ make rpm
</span></span><span style="display:flex;"><span>$ sudo rpm -Uvh ~/rpmbuild/ansible-*.noarch.rpm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git clone git://github.com/ansible/ansible.git --recursive
</span></span><span style="display:flex;"><span>$ cd ./ansible
</span></span><span style="display:flex;"><span>$ source ./hacking/env-setup
</span></span><span style="display:flex;"><span>$ sudo easy_install pip
</span></span><span style="display:flex;"><span>$ sudo pip install paramiko PyYAML Jinja2 httplib2</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å‡çº§<!-- raw HTML omitted --><code>Ansible</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git pull --rebase
</span></span><span style="display:flex;"><span>$ git submodule update --init --recursive</span></span></code></pre></div></blockquote>
<hr>
<h4 id="font-colorredå®‰è£…fontpython"><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Python</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install python-pip python3  	<span style="color:#75715e"># å®‰è£…python 3</span>
</span></span><span style="display:flex;"><span>$ python3.6 -m pip install --upgrade --force pip  	<span style="color:#75715e"># é€šè¿‡ python 3 å®‰è£…pip3</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="font-colorredå®‰è£…fontdocker"><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Docker</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ yum makecache fast
</span></span><span style="display:flex;"><span>$ yum list docker-ce  --showduplicates|sort -r
</span></span><span style="display:flex;"><span>$ yum install -y docker-ce-20.10.4 docker-ce-cli-20.10.4 containerd.io docker-compose-plugin
</span></span><span style="display:flex;"><span>$ systemctl enable docker <span style="color:#f92672">&amp;&amp;</span> systemctl start docker</span></span></code></pre></div></blockquote>
<hr>
<h4 id="font-colorredå®‰è£…fontsshpass"><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Sshpass</code></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install sshpass</span></span></code></pre></div></blockquote>
<hr>
<h4 id="font-colorredä½¿ç”¨fontansible-galaxy"><!-- raw HTML omitted -->ä½¿ç”¨<!-- raw HTML omitted --><code>Ansible Galaxy</code></h4>
<blockquote>
<ul>
<li>ä»<code>Galaxy</code>å’Œ<code>Github</code>è·å¾—ç¬¬ä¸‰æ–¹çš„è§’è‰²</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ansible-galaxy install -p roles darkraiden.ansible-pip
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ansible-galaxy install -p roles git+https://github.com/avinetworks/ansible-role-docker,master</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1719632499" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1719632499" defer></script>
    <script src="../../../js/theme.js?1719632499" defer></script>
  </body>
</html>

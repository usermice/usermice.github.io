<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="二哥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/s2-1.png">
    <meta name="twitter:title" content="Script :: Hugo Relearn Theme">
    <meta property="og:url" content="https://erge.blog/systems/linux/script/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Script :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://erge.blog/images/s2-1.png">
    <meta itemprop="name" content="Script :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T00:35:43+08:00">
    <meta itemprop="dateModified" content="2024-06-13T00:35:43+08:00">
    <meta itemprop="image" content="https://erge.blog/images/s2-1.png">
    <title>Script :: Hugo Relearn Theme</title>
    <link href="../../../images/favicon.ico?1719632497" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../css/fontawesome-all.min.css?1719632499" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1719632499" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1719632499" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1719632499" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1719632499" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1719632499" rel="stylesheet">
    <link href="../../../css/fonts.css?1719632499" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1719632499" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1719632499" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1719632499" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1719632499" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1719632499" rel="stylesheet">
    <link href="../../../css/print.css?1719632499" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1719632499" rel="stylesheet">
    <script src="../../../js/variant.js?1719632499"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../systems/linux/script/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Script</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/rsyncd/install_lsyncd/" title="Install_Lsyncd (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/script/how_to_write_shell_scripts/" title="How_To_Write_Shell_Scripts (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="script">Script</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Script</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="how_to_write_shell_scripts">How_To_Write_Shell_Scripts</h1>

<h2 id="shell脚本编写"><code>Shell</code>脚本编写</h2>
<h3 id="执行方式">执行方式</h3>
<blockquote>
<ul>
<li><code>sh -n bash.sh</code><!-- raw HTML omitted -->调试模式运行：<!-- raw HTML omitted --><code>-n</code></li>
<li><code>sh -vx bash.sh</code><!-- raw HTML omitted -->打印调试模式运行日志：<!-- raw HTML omitted --><code>-vx</code></li>
<li><code>bash</code><!-- raw HTML omitted -->执行环境<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->登录<!-- raw HTML omitted --><code>bash</code><!-- raw HTML omitted -->执行<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>系统级</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/profile
</span></span><span style="display:flex;"><span>/etc/bashrc</span></span></code></pre></div><ul>
<li>用户级</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>~/.bash_profile
</span></span><span style="display:flex;"><span>~/.bashrc</span></span></code></pre></div></blockquote>
<ul>
<li>退出<code>bash</code>执行</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>~/.bash_history
</span></span><span style="display:flex;"><span>~/.bash_logout</span></span></code></pre></div></blockquote>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->获取文件名<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ basename  	<span style="color:#75715e"># 获取最后文件名: basename /etc/passwd</span>
</span></span><span style="display:flex;"><span>$ dirname  	<span style="color:#75715e"># 获取文件名前缀</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->脚本补全、小游戏<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install bash-completion  	<span style="color:#75715e"># 脚本补全服务</span>
</span></span><span style="display:flex;"><span>$ sudo apt-get install jq  	<span style="color:#75715e"># 安装json格式查看服务</span>
</span></span><span style="display:flex;"><span>$ yum -y install sl  	<span style="color:#75715e"># 小火车</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ vim scripts.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:set ff<span style="color:#f92672">=</span>unix  	<span style="color:#75715e"># 转换换行符</span>
</span></span><span style="display:flex;"><span>:set paste  	<span style="color:#75715e"># 解决文本粘贴后错乱</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->当前执行<!-- raw HTML omitted --><code>shell</code><!-- raw HTML omitted -->脚本以及嵌入其他语言<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ source shell.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;#!/usr/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;</span>hello bash<span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">. shell.sh  	# 在其他脚本中引用此脚本 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># 嵌入python脚本
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">/usr/bin/python &lt;&lt;-EOF  #&#34;</span>-<span style="color:#e6db74">&#34;支持Tab键,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">print &#34;</span>hello python<span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF &#34;</span>&gt;bash.sh</span></span></code></pre></div></blockquote>
<hr>
<h3 id="crontab计划任务"><code>crontab</code>计划任务</h3>
<blockquote>
<ul>
<li><code>crontab</code>计划任务</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ man crontab
</span></span><span style="display:flex;"><span>@reboot ：重启后运行一次。
</span></span><span style="display:flex;"><span>@yearly ：每年运行一次，即。 “0 <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> *”。
</span></span><span style="display:flex;"><span>@annually ：每年运行一次，即。 “0 <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> *”。
</span></span><span style="display:flex;"><span>@monthly ：每月运行一次，即。 “0 <span style="color:#ae81ff">1</span> * *”。
</span></span><span style="display:flex;"><span>@weekly ：每周运行一次，即。 “0 * * 0”。
</span></span><span style="display:flex;"><span>@daily ：每天运行一次，即。 “0 * * *”。
</span></span><span style="display:flex;"><span>@hourly ：每小时运行一次，即。 “* * * *”。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ls -l /var/spool/cron/root
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ls -l /var/spool/cron/crontabs/root  	<span style="color:#75715e"># Debian系统</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="test命令使用"><code>test</code>命令使用</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ man test</span></span></code></pre></div></blockquote>
<hr>
<h3 id="shell脚本颜色"><code>Shell</code>脚本颜色</h3>
<blockquote>
<ul>
<li>
<p><!-- raw HTML omitted -->若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出需要使用：<!-- raw HTML omitted --><code>-e</code></p>
</li>
<li>
<p><!-- raw HTML omitted -->脚本文字颜色<!-- raw HTML omitted --></p>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>30:黑色、31:红色、32:绿色、33:黄色、34:蓝色、35:紫色、36:浅蓝色、37:白色  	<span style="color:#75715e"># 文字颜色 </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo -e <span style="color:#e6db74">&#34;\e[1;30m我是灰色 \e[0m&#34;</span>  	<span style="color:#75715e"># 文字色号30~37，&#34;\e[0m&#34;:恢复原本色号 </span></span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->脚本背景颜色<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>40:黑色、41:红色、42:绿色、43:黄色、44:蓝色、45:紫色、46:浅蓝色、47:白色  	<span style="color:#75715e"># 背景颜色</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo -e <span style="color:#e6db74">&#34;\e[1;40m我是灰色 \e[0m&#34;</span>  	<span style="color:#75715e"># 背景色号40~47，&#34;\e[0m&#34;:恢复原本色号 </span></span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h3 id="变量">变量</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>IP<span style="color:#f92672">=</span>192.168.1.1  	<span style="color:#75715e"># 显示赋值</span>
</span></span><span style="display:flex;"><span>echo $IP
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>read -p <span style="color:#e6db74">&#34;请输入 IP: &#34;</span> IP 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 键盘读入赋值: IP:为变量名, 一次性可以定义多个变量名：read -p &#34;请输入你的姓名，年龄，性别: &#34; name age sex  </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>./ping.sh  192.168.1.1  192.168.1.2  
</span></span><span style="display:flex;"><span>$1           $2  <span style="color:#75715e"># 位置变量</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 环境变量(系统变量)</span>
</span></span><span style="display:flex;"><span>设置环境变量
</span></span><span style="display:flex;"><span>export IP<span style="color:#f92672">=</span>192.168.1.1
</span></span><span style="display:flex;"><span>export IP  	<span style="color:#75715e"># 变量名</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># /etc/profile</span>
</span></span><span style="display:flex;"><span>PATH<span style="color:#f92672">=</span>$PATH:/new/bin
</span></span><span style="display:flex;"><span>export PATH
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># 自定义变量</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="变量运算">变量运算</h4>
<ul>
<li>
<ol>
<li>整数运算</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->方式一<!-- raw HTML omitted --><code>expr</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ expr <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\*</span> <span style="color:#ae81ff">2</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->方式二<!-- raw HTML omitted --><code>$(())</code><!-- raw HTML omitted --># 脚本常用<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#66d9ef">$((</span><span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#66d9ef">))</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->方式三<!-- raw HTML omitted --><code>let</code><!-- raw HTML omitted -->  # 脚本常用<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>let i++ 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 先赋值,后运算: x=i :x=1、i=2</span>
</span></span><span style="display:flex;"><span>i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>let x<span style="color:#f92672">=</span>i++
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 先运算,后赋值: ++j :y=2、j=2</span>
</span></span><span style="display:flex;"><span>j<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>let y<span style="color:#f92672">=</span>++j  	</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li>小数运算</li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;2*4&#34;</span> |bc
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;2^4&#34;</span> |bc  	<span style="color:#75715e"># bc的次方: ^</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;scale=2;6/4&#34;</span> |bc
</span></span><span style="display:flex;"><span>$ awk <span style="color:#e6db74">&#39;BEGIN{print 1/2}&#39;</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="删除替换变量">删除、替换变量</h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#  	# 从头往后删除</span>
</span></span><span style="display:flex;"><span>%  	<span style="color:#75715e"># 从后往头删除</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>:0:3<span style="color:#f92672">}</span>  	<span style="color:#75715e"># 切片</span>
</span></span><span style="display:flex;"><span>/  	<span style="color:#75715e"># 内容替换</span>
</span></span><span style="display:flex;"><span>-  	<span style="color:#75715e"># 变量替代</span>
</span></span><span style="display:flex;"><span>:-  	<span style="color:#75715e">#变量替代，可替代空值、+、:+、=、:=、?、:?、</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 百度域名举例:www.baidu.com</span>
</span></span><span style="display:flex;"><span>url<span style="color:#f92672">=</span>www.baidu.com
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>url#*.<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>baidu.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>url#*bai<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>du.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>url##*.<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>com</span></span></code></pre></div></blockquote>
<hr>
<h3 id="expect使用"><code>expect</code>使用</h3>
<blockquote>
<ul>
<li>**<code>Expect</code>**是一个自动化工具，用于与交互式程序进行交互。它允许你编写脚本来模拟人类用户与程序的交互过程，从而自动化执行那些通常需要人工干预的任务</li>
<li><strong>主要特点和用途：</strong></li>
</ul>
<blockquote>
<ul>
<li>
<p><strong>自动化交互</strong>：</p>
<p><code>Expect</code>脚本可以编写为模拟用户输入和处理程序输出的行为。它通过捕获和分析程序的输出，并根据预定义的规则自动响应，来执行所需的操作。</p>
</li>
<li>
<p><strong>与交互式程序集成</strong>：</p>
<p>适用于需要用户输入或期望特定响应的程序，例如配置管理工具、网络设备配置、数据库管理等。</p>
</li>
<li>
<p><strong>简化复杂任务</strong>：</p>
<p>可以通过<code>Expect</code>自动化执行复杂的系统管理任务，如安装和配置软件、执行备份和恢复操作、模拟用户会话等。</p>
</li>
<li>
<p><strong>基于<code>TCL</code>语言</strong>：</p>
<p><code>Expect</code>的脚本语言基于<code>TCL</code>（<code>Tool Command Language</code>），这使得它结合了<code>TCL</code>的强大编程能力和<code>Expect</code>提供的交互式自动化功能。</p>
</li>
</ul>
</blockquote>
<ul>
<li><strong>使用场景：</strong></li>
</ul>
<blockquote>
<ul>
<li>
<p><strong>系统管理和自动化运维</strong>：</p>
<p>批量配置和管理服务器和网络设备。</p>
</li>
<li>
<p><strong>测试和仿真</strong>：</p>
<p>自动化测试脚本，模拟用户行为以测试程序的交互性。</p>
</li>
<li>
<p><strong>应用程序部署</strong>：</p>
<p>在多个环境中自动化部署和配置应用程序。</p>
</li>
<li>
<p><strong>远程管理</strong>：</p>
<p>通过<code>SSH</code>或<code>Telnet</code>等协议进行远程管理和操作。</p>
</li>
</ul>
</blockquote>
<ul>
<li><strong>示例：</strong></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-expect" data-lang="expect">#!/usr/bin/expect

set username &#34;your_username&#34;
set password &#34;your_password&#34;
set hostname &#34;remote_host&#34;

spawn ssh $username@$hostname
expect &#34;password:&#34;
send &#34;$password\r&#34;
expect &#34;$ &#34;
send &#34;ls -l\r&#34;
expect &#34;$ &#34;
send &#34;exit\r&#34;
expect eof</code></pre></div></blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;expect.sh<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#!/use/bin/expect
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spawn ssh  root@192.168.1.1  	# spawn:开启一个会话
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">expect {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;yes/no&#34; { send &#34;yes\r&#34;; exp_continue }  	# send:传送参数，\r:回车键, exp_continue:没出现&#34;yes/no&#34;也提交 第二次连接不会出现，
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;password:&#34; { send &#34;密码\r&#34; };
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">interact  	# 停留在被连接系统中
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="运算符使用">运算符使用</h3>
<h4 id="关系数值运算符">关系(数值)运算符</h4>
<blockquote>
<table>
<thead>
<tr>
<th>关系(数值)运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-eq</code>、<code>==</code></td>
<td>等于：检测两个数是否相等，相等返回<code>true</code></td>
<td><code>[ $a -eq $b ]</code> 返回：<code>false</code></td>
</tr>
<tr>
<td><code>-ne</code>、<code>!=</code></td>
<td>不等于： 检测两个数是否不相等，不相等返回<code>true</code></td>
<td><code>[ $a -ne $b ]</code> 返回：<code>true</code></td>
</tr>
<tr>
<td><code>-gt</code>、<code>&gt;</code></td>
<td>大于：检测左边的数是否大于右边的数，如果是返回：<code>true</code></td>
<td><code>[ $a -gt $b ]</code> 返回：<code>false</code></td>
</tr>
<tr>
<td><code>-lt</code>、<code>&lt;</code></td>
<td>小于：检测左边的数是否小于右边的，如果是返回：<code>true</code></td>
<td><code>[ $a -lt $b ]</code> 返回：<code>true</code></td>
</tr>
<tr>
<td><code>-ge</code>、<code>&gt;=</code></td>
<td>大于等于：检测左边的数是否大于等于右边的，如果是返回：<code>true</code></td>
<td><code>[ $a -ge $b ]</code> 返回：<code>false</code></td>
</tr>
<tr>
<td><code>-le</code>、<code>&lt;=</code></td>
<td>小于等于：检测左边的数是否小于等于右边的，如果是返回：<code>true</code></td>
<td><code>[ $a -le $b ]</code> 返回：<code>frue</code></td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="字符串运算符">字符串运算符</h4>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->字符串都用双引号引起来<!-- raw HTML omitted --><code>&quot; &quot;</code></li>
</ul>
<table>
<thead>
<tr>
<th>字符串运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td>等于：检测两个字符串是否相等，相等返回：<code>true</code></td>
<td><code>[ &quot;$a&quot; = &quot;$b&quot; ]</code> 返回：<code>false</code></td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不等于：检测两个字符串是否相等，不相等返回：<code>true</code></td>
<td><code>[ &quot;$a&quot; != &quot;$b&quot; ]</code> 返回：<code>true</code></td>
</tr>
<tr>
<td><code>-z</code></td>
<td>表示 0：检测字符串长度是否为0，为0返回：<code>true</code></td>
<td><code>[ -z &quot;$a&quot; ]</code> 返回：<code>false</code></td>
</tr>
<tr>
<td><code>-n</code></td>
<td>表示非0：检测字符串长度是否为0，不为0返回：<code>true</code></td>
<td><code>[ -n &quot;$a&quot; ]</code></td>
</tr>
<tr>
<td><code>$</code></td>
<td>不为空：检测字符串是否为空，不为空返回：<code>true</code></td>
<td><code>[ $a ]</code> 返回：<code>true</code></td>
</tr>
<tr>
<td><code>str</code></td>
<td>检测<code>str</code>是否不是空字符串，如果为空返回：<code>false</code></td>
<td><code>[ $a ]</code> 不是假的</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="逻辑运算符">逻辑运算符</h4>
<blockquote>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;&amp;</code></td>
<td>逻辑的：<code>and</code>，和/并且：的意思</td>
<td><code>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</code> 返回：<code>false</code>，<!-- raw HTML omitted --><code>./configure &amp;&amp; make &amp;&amp; make install</code></td>
</tr>
<tr>
<td><code>||</code></td>
<td>逻辑的：<code>or</code>，或者/否则：的意思</td>
<td><code>[[ $a -lt 100 || $b -gt 100 ]]</code> 返回：<code>true</code>，<!-- raw HTML omitted --> <code>cat /opt/a.txt || touch /opt/a.txt</code></td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="布尔运算符">布尔运算符</h4>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->布尔运算符只有：真(<code>True</code>)/假(<code>False</code>)<!-- raw HTML omitted --></li>
</ul>
<table>
<thead>
<tr>
<th>布尔运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!</code></td>
<td>非：运算符：表达式为<code>true</code>则返回<code>false</code>， 否则返回：<code>true</code></td>
<td><code>[ ! false ]</code> 返回：<code>true</code></td>
</tr>
<tr>
<td><code>-o</code></td>
<td>或：运算符：有一个表达式为：<code>true</code>则返回<code>true</code></td>
<td><code>[ $a -lt 20 -o $b -gt 100 ]</code>， 返回：<code>true</code></td>
</tr>
<tr>
<td><code>-a</code></td>
<td>与：运算符：两个表达式都为：<code>true</code>才返回：<code>true</code></td>
<td><code>[ $a -lt 20 -a $b -gt 100 ]</code>， 返回：<code>false</code></td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="算数运算符">算数运算符</h4>
<blockquote>
<table>
<thead>
<tr>
<th>算数运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>加法，<code>Python</code><!-- raw HTML omitted -->中支持：字符串、列表、元组合并<!-- raw HTML omitted --></td>
<td><code>expr $a + $b</code>结果为30</td>
</tr>
<tr>
<td><code>-</code></td>
<td>减法，<code>Python</code><!-- raw HTML omitted -->中支持：集合，求差异<!-- raw HTML omitted --></td>
<td><code>expr $a - $b</code>结果为<code>-10</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乘法，<code>Python</code><!-- raw HTML omitted -->中支持：字符串、列表、元组，复制<!-- raw HTML omitted --></td>
<td><code>expr $a \* $b</code>结果为200</td>
</tr>
<tr>
<td><code>/</code></td>
<td>除法，<code>Python</code><!-- raw HTML omitted -->中整数相除得到浮点数<code>float</code>，<code>//</code>为整除<!-- raw HTML omitted --></td>
<td><code>expr $b / $a</code>结果为2</td>
</tr>
<tr>
<td><code>%</code></td>
<td>取余(模余)</td>
<td><code>expr $b % $a</code>结果为0</td>
</tr>
<tr>
<td><code>=</code></td>
<td>赋值</td>
<td><code>a=$b</code>将把变量<code>b</code>赋值给<code>a</code></td>
</tr>
<tr>
<td><code>==</code></td>
<td>相等：用于比较两个数字，相同则返回：<code>true</code></td>
<td><code>[ $a == $b ]</code> 返回：<code>false</code></td>
</tr>
<tr>
<td><code>**</code></td>
<td>幂运算，几的次方</td>
<td>2的5次方=<code>2*2</code>=<code>4*2</code>=<code>8*2</code>=<code>16*2</code>=32</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="文件参数">文件参数</h4>
<blockquote>
<table>
<thead>
<tr>
<th>文件参数</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-e</code></td>
<td>如果文件存在则为真</td>
<td>`[ -e dir</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>如果文件存在且当前用户可读则为真，是否可以读取</td>
<td><code>[ -r $file ]</code></td>
</tr>
<tr>
<td><code>-w</code></td>
<td>如果文件存在且当前用户可写则为真，是否有可以写入</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-x</code></td>
<td>如果文件存在且当前用户可执行则为真，是否有执行权限</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-s</code></td>
<td>如果文件存在且至少有一个字符则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>如果文件存在且为目录则为真</td>
<td><code>[ -d /home ]</code> 是否为目录<!-- raw HTML omitted --><code>[ ! -d /home ]</code> 取反</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>如果文件存在且为普通文件则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>如果文件存在且为字符型特殊文件则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-b</code></td>
<td>如果文件存在且为块特殊文件则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-g</code></td>
<td>如果文件存在且设置<code>SGID</code>则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-k</code></td>
<td>如果文件存在且设置了<code>粘着位(Sticky Bit)</code>则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>如果文件存在且是：名管道，则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-u</code></td>
<td>如果文件存在且设置<code>SUID</code>则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-t</code></td>
<td>如果文件存在且文件描述符已打开并与终端关联则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-z</code></td>
<td>如果文件存在且大于<code>0</code>则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-o</code></td>
<td>如果文件存在且当前用户是文件所有者则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-S</code></td>
<td>如果文件存在且是<code>socket</code>文件则为真</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-L</code></td>
<td>如果文件存在且是连接文件则为真</td>
<td>&mdash;</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="传参参数处理">传参参数处理</h4>
<blockquote>
<table>
<thead>
<tr>
<th>参数处理</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$#</code></td>
<td>传入脚本的参数个数</td>
<td><code>[ $# -eq 0 ]</code></td>
</tr>
<tr>
<td><code>$*</code></td>
<td>传入脚本的所有参数</td>
<td>如<code>&quot;$*&quot;</code>用<code>&quot; &quot;</code>括起来的情况，以<code>&quot;$1 $2 ... $n&quot;</code>的形式输出所有参数</td>
</tr>
<tr>
<td><code>$$</code></td>
<td>当前<code>shell</code>的进程号，对于<code>shell</code>脚本，这是它们执行的进程<code>ID</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$!</code></td>
<td><code>Shell</code>后台运行的最后一个进程<code>Process</code>的<code>PID</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$@</code></td>
<td>与<code>$*</code>相同，但是使用时加引号，并在引号中返回每个参数，如<code>&quot;$@&quot;</code>用<code>&quot; &quot;</code>括起来，以<code>&quot;$1&quot; &quot;$2&quot; ... &quot;$n&quot;</code>的形式输出所有参数</td>
<td>其中<code>$@</code>与<code>$*</code>正常情况下一样，当在脚本中将<code>$*</code>加上双引号作为<code>“$*”</code>引用时，此时将输入的所有参数当做一个整体字符串对待。比如输入参数有<code>a b c</code>三个参数，则<code>“$*”</code>表示<code>“a b c”</code>一个字符串</td>
</tr>
<tr>
<td><code>$-</code></td>
<td>显示<code>shell</code>使用的当前选项，与<code>set</code>命令功能相同</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$?</code></td>
<td>显示最后命令退出状态，0表示没有错误，其他任何值表明有错误</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$0</code></td>
<td>当前脚本文件名</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$1～$n</code></td>
<td>这些变量对应调用脚本的参数，这里的<code>n</code>是对应于参数位置的正十进制数(第一个参数是<code>$1</code>，第二个参数是<code>$2</code>，依此类推)</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$#</code></td>
<td>提供给脚本的参数数量</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$</code></td>
<td>当前运行脚本的进程<code>ID</code>号</td>
<td>&mdash;</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="printf的转义序列"><code>Printf</code>的转义序列</h4>
<blockquote>
<table>
<thead>
<tr>
<th><code>printf</code>的转义序列</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\a</code></td>
<td>警告字符，通常为<code>ASCII</code>的<code>BEL</code>字符</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>后退</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\c</code></td>
<td>抑制(不显示)输出结果中任何结尾的换行字符(只在<code>%</code>格式指示符控制下的参数字符串中有效)，而且任何留在参数里的字符，任何接下来的参数以及任何留在格式字符串中的字符，都被忽略</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>换页<code>formfedd</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>换行</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>回车<code>Carriage return</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>水平制表符，类似：<code>Tab</code>键，四个空格键</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>垂直制表符</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>一个字面上的反斜杠字符</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\ddd</code></td>
<td>表示1到3位数八进制值得字符，仅在格式字符串中有效</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>\0ddd</code></td>
<td>表示1到3位得八进制字符</td>
<td>&mdash;</td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 格式化输出两种方式</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 第一种</span>
</span></span><span style="display:flex;"><span>$ echo -e  <span style="color:#e6db74">&#34;a\tb&#34;</span>，<span style="color:#ae81ff">\t</span>:Tab<span style="color:#f92672">(</span>键<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 第二种</span>
</span></span><span style="display:flex;"><span>$ printf <span style="color:#e6db74">&#34;%-10s %-8s %-4s\n&#34;</span> 姓名 性别 体重kg  
</span></span><span style="display:flex;"><span>$ printf <span style="color:#e6db74">&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭靖 男 66.1234
</span></span><span style="display:flex;"><span>$ printf <span style="color:#e6db74">&#34;%-10s %-8s %-4.2f\n&#34;</span> 杨过 男 48.6543
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>%s %c %d %f  	<span style="color:#75715e"># 都是格式替代符，</span>
</span></span><span style="display:flex;"><span>％s  	<span style="color:#75715e"># 输出一个字符串，</span>
</span></span><span style="display:flex;"><span>％d  	<span style="color:#75715e"># 整型输出，</span>
</span></span><span style="display:flex;"><span>％c  	<span style="color:#75715e"># 输出一个字符，</span>
</span></span><span style="display:flex;"><span>％f  	<span style="color:#75715e"># 输出实数，以小数形式输出。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>%-10s  	<span style="color:#75715e"># 指一个宽度为 10 个字符（- 表示左对齐，没有则表示右对齐），任何字符都会被显示在 10 个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。</span>
</span></span><span style="display:flex;"><span>%-4.2f  	<span style="color:#75715e"># 指格式化为小数，其中 .2 指保留2位小数。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ printf <span style="color:#e6db74">&#34;\e[?2004l&#34;</span>  	<span style="color:#75715e"># 解决命令行终端复制粘贴出现 0~ 1~ 问题，括号粘贴模式。 或者：reset</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="运算符描述">运算符描述</h4>
<blockquote>
<table>
<thead>
<tr>
<th>运算符描述</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>()</code></td>
<td>改变优先顺序，</td>
<td>小括号子<code>shell</code>中执行命令：<code>(ls)</code></td>
</tr>
<tr>
<td><code>(())</code></td>
<td>数值比较，运算</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$()</code></td>
<td>命令替换、相当于反撇号: ``</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$(())</code></td>
<td>整数运算</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>条件测试、匹配方括号中任意<code>一个</code>字符</td>
<td><code>[a-z] [0-9] [a-zA-Z0-9] 取反:[^a-zA-Z0-9]</code></td>
</tr>
<tr>
<td><code>[[]]</code></td>
<td>条件测试，支持正则 <code>=~</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>$[]</code></td>
<td>整数运算</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>{}</code></td>
<td>打括号使用方式</td>
<td><code>mkdir -pv /opt/{aaa/{111,222},bbb}、cp nginx.conf{,.bak}、{1..9}</code></td>
</tr>
<tr>
<td><code>${}</code></td>
<td>&mdash;</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>~1</code></td>
<td>的补充</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>!</code></td>
<td>逻辑否定</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>!~</code></td>
<td>逻辑否定：二进制反转（一个补码）</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>左移</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>右移</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>=~</code></td>
<td>匹配模式</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td><code>Bitwise</code>和</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>^</code></td>
<td>按位&quot;独占或&quot;</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>|</code></td>
<td>按位&quot;包容性&quot; 或</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>++</code></td>
<td>递增</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>---</code></td>
<td>递减</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>*=</code></td>
<td>左侧乘以右侧并更新左侧</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>/=</code></td>
<td>将左侧除以</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>+=</code></td>
<td>将左侧添加到右侧并更新左侧</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>-+</code></td>
<td>将右侧减去左侧并更新左侧</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>^=</code></td>
<td>&ldquo;独占或&quot;左侧到右侧并更新左侧</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>%=</code></td>
<td>左侧除以右侧，余数更新再左侧</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>;</code></td>
<td>执行多个命令</td>
<td><code>cat /etc/passwd; ls</code></td>
</tr>
<tr>
<td><code>\</code></td>
<td>转意符</td>
<td><code>&quot;touch  linux\ nginx、\t:Tab(键)、\n:(换行)、\c:(不换行输出)&quot;</code></td>
</tr>
<tr>
<td><code>true</code></td>
<td>永远返回为真<code>0</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>false</code></td>
<td>永远返回为假<code>1</code></td>
<td>&mdash;</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="条件语句">条件语句</h4>
<blockquote>
<table>
<thead>
<tr>
<th>条件语句</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>if</code></td>
<td>如果什么什么</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>then</code></td>
<td>然后怎么怎么</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>elif</code></td>
<td>其它怎么怎么，<code>elif</code>是<code>if</code>有多个语句条件</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>else</code></td>
<td>否则怎么怎么</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>fi</code></td>
<td>结束：<code>if</code>判断句结束语</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>case</code></td>
<td>循环语句开始定义</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>esac</code></td>
<td>循环语句结束定义</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>while</code></td>
<td>条件为真循环</td>
<td>外循环控制行数，内循环控制列数，内循环小于等于外循环</td>
</tr>
<tr>
<td><code>unitl</code></td>
<td>条件为假循环</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>select</code></td>
<td>循环、查询</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>in</code></td>
<td>在什么什么</td>
<td><code>Python</code><!-- raw HTML omitted -->中支持：字符串、列表、元组、字典，检测元素是否存在，与之相反的是：<!-- raw HTML omitted --><code>not in</code></td>
</tr>
<tr>
<td><code>do</code></td>
<td>做/执行什么什么</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>done</code></td>
<td>结束循环</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>unset</code></td>
<td>删除变量</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>readonly</code></td>
<td>只读变量</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>read</code></td>
<td>读取输入变量名</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>clear</code></td>
<td>删除、清除</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>break</code></td>
<td>跳出整个循环，<code>n</code>指定的第<code>n</code>个封闭循环，退出可以是<code>1、2、3</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>continue</code></td>
<td>当前迭代循环退出</td>
<td>&mdash;</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="重定向参数">重定向参数</h4>
<blockquote>
<table>
<thead>
<tr>
<th>重定向</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>command &gt; file</code></td>
<td>将输出重定向到：<code>file</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>command &lt; file</code></td>
<td>将输入重定向到：<code>file</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>command &gt;&gt; file</code></td>
<td>将输出以追加的方式重定向到：<code>file</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>n &gt; file</code></td>
<td>将文件描述符为<code>n</code>的文件重定向到：<code>file</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>n &gt;&gt; file</code></td>
<td>将文件描述符为<code>n</code>的文件以追加的方式重定向到：<code>file</code></td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>n &gt;&amp; m</code></td>
<td>将输出文件<code>m</code>和<code>n</code>合并</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>n &lt;&amp; m</code></td>
<td>将输入文件<code>m</code>和<code>n</code>合并</td>
<td>&mdash;</td>
</tr>
<tr>
<td><code>&lt;&lt; tag</code></td>
<td>将开始标记<code>tag</code>和结束标记<code>tag</code>之间的内容作为输入</td>
<td>&mdash;</td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h4 id="多行注释">多行注释</h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>:<span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:&lt;&lt;<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:&lt;&lt;!
</span></span><span style="display:flex;"><span>!</span></span></code></pre></div></blockquote>
<hr>
<h3 id="实战脚本">实战脚本</h3>
<h4 id="实战脚本一">实战脚本一</h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;#!/usr/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># 提示用户没有加参数
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">if [ $# -eq 0 ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> echo &#34;执行方式: `basename $0` 文件名(file)&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> exit  # 退出
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># 提示输入的不是文件: ! 取反:不是文件
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">if [ ! -f $1 ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> echo &#34;错误的文件名&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># 正确执行
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">for IP in `cat $1`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">do 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> ping -c1 $IP &amp;&gt;/dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> if [ $? -eq 0 ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     echo &#34;${IP} is up&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     echo &#34;${IP} is down&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;</span> &gt;ping.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ./ping.sh ip.txt</span></span></code></pre></div></blockquote>
<hr>
<h4 id="实战脚本二">实战脚本二</h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;#!/usr/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">read -p &#34;请输入数字: &#34; num
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">while true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    if [[ &#34;$num&#34; =~ ^[0-9]+$ ]];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        break   # 跳出循环
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        echo &#34;你输入的不是数字！！！&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        read -p &#34;输入错误，请重新输入: &#34; num
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">read -p &#34;请输入创建的用户首字母: &#34; prefix
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">if [ -z &#34;$prefix&#34; ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    echo &#34;错误的首字母(prefix)&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">for i in `seq $num`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    user=$prefix$i
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    useradd $user
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    echo &#34;123&#34; |passwd --stdin $user &amp;&gt;/dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    if [ $? -eq 0 ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        echo &#34;$user 创建成功&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">done  &#39;</span> &gt;useradd.sh</span></span></code></pre></div></blockquote>
<hr>
<h4 id="实战脚本三">实战脚本三</h4>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->清理<!-- raw HTML omitted --><code>Nginx</code><!-- raw HTML omitted -->缓存<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39;/opt/delete-cache.sh&#39;</span> &gt;&gt;/home/neek/.bash_profile  	<span style="color:#75715e"># 登录即执行脚本</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;delete-cache.sh<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#!/usr/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#trap &#34;&#34; HUP INT OUIT TSTP #防止在脚本中退出
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#clear
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">directory=/opt/data/cache
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">/usr/bin/ansible web -i /etc/ansible/hosts -m shell  -a &#34;/usr/bin/rm -rf ${directory}/directory.log&#34; -f 5 &amp;&gt;/dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">/usr/bin/rm -rf /opt/data/Tenant.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sleep 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">/usr/bin/ls ${directory}/ |tee /opt/data/Tenant.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;36m \t\t\t+------------------------------------------+\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;31m \t\t\t|	      	清理租户缓存		   |\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;36m \t\t\t+------------------------------------------+\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;36m \t\t\t|   (0) 退出				   |\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;33m \t\t\t|   (1)输入要删除的目录例如：h5、web、ldy。|\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;31m \t\t\t|   (2)输入&#39;2&#39;删除租户目录下所有缓存	   |\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;31m \t\t\t|   (3)输入&#39;3&#39;删除所有租户缓存		   |\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -e &#34;\e[1;36m \t\t\t+------------------------------------------+\t\t\t \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo -en &#34;\e[1;36m选择要清理的租户缓存[0-3]: \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">read ID
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">while :;do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	if [[ &#34;$ID&#34; =~ ^[0-9]$ ]];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		break
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		echo -en &#34;\e[1;31m输入错误请重新输入[0-3]: \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		read ID
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">while :;do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	case $ID in
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		0)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 exit;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		1)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 echo -en &#34;\e[1;36m请输入租户目录: \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 read  Name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 /usr/bin/ls ${directory}/${Name}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 echo -en &#34;\e[1;36m请输入要清理缓存的终端:h5、web、ldy中的一个： \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 read  cache
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 if [ -d ${directory}/${Name}/${cache}/ ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			/usr/bin/ansible web -i /etc/ansible/hosts -m shell  -a &#34;rm -rf ${directory}/${Name}/${cache}&#34; -f 5 &amp;&gt;/dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			echo &#34;已清理租户${Name}目录下${cache}目录中的缓存&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			echo &#34;目录不存在&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 fi;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		2)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 echo -en &#34;\e[1;36m请输入要清理缓存的租户目录: \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 read  Name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	 	 if [ -d ${directory}/${Name} ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			/usr/bin/ansible web -i /etc/ansible/hosts -m shell  -a &#34;rm -rf ${directory}/${Name}/*&#34; -f 5 &amp;&gt;/dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			echo &#34;已清理租户${Name}目录下所有缓存&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 fi;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		3)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 echo -en &#34;\e[1;31m确认要清理所有租户缓存吗[y/n]: \e[0m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 read y
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		 if [ &#34;$y&#34; = &#34;y&#34; ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			/usr/bin/ansible web -i /etc/ansible/hosts -m shell  -a &#34;rm -rf ${directory}/*&#34; -f 5 &amp;&gt;/dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			echo &#34;已清理所有租户缓存&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			for mk in `cat /opt/data/Tenant.txt`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">				/usr/bin/ansible web -i /etc/ansible/hosts -m shell  -a &#34;/usr/bin/mkdir -pv ${directory}/${mk} &gt;&gt;${directory}/directory.log&#34; -f 5 &amp;&gt;/dev/null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">				if [ $? -eq 0 ];then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">					echo &#34;${mk} create ok&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">				else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">					echo &#34;${mk} create error&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">				fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			echo &#34;输入不是’y‘退出&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			exit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		fi;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	esac
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h4 id="实战脚本四">实战脚本四</h4>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->修改系统<!-- raw HTML omitted --><code>IP</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;Update-Ip.sh<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;###input ip you want change to ### &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ipfront=192.168.0.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">read -p &#34;请输入结尾IP:&#34; ip1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ip=&#34;${ipfront}${ip1}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;###ip====&#34; $ip &#34;###&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">eth=`find /etc/sysconfig/network-scripts/ -name &#34;ifcfg-e*&#34; |sort |head -1 |awk -F/ &#39;{print $5}&#39;`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ethfile=&#34;/etc/sysconfig/network-scripts/$eth&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;${ethfile}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sed -i &#34;s/BOOTPROTO=&#39;dhcp&#39;/BOOTPROTO=&#39;static&#39;/g&#34; &#34;${ethfile}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sed -i &#34;s/^ONBOOT=no/ONBOOT=yes/g&#34; &#34;${ethfile}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">testfile=&#34;/etc/sysconfig/network-scripts/test&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;IPADDR=${ip}&#34; &gt;&gt;${ethfile}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;NETMASK=255.255.255.0&#34; &gt;&gt;${ethfile}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;GATEWAY=192.168.0.1&#34; &gt;&gt;${ethfile}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;DNS1=8.8.8.8&#34; &gt;&gt;${ethfile}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo &#34;DNS2=1.1.1.1&#34; &gt;&gt;${ethfile}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">sleep 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">systemctl restart network
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">echo $?
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1719632499" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1719632499" defer></script>
    <script src="../../../js/theme.js?1719632499" defer></script>
  </body>
</html>

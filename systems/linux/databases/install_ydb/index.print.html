<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="éƒ¨ç½²Ydbå•èŠ‚ç‚¹æ•°æ®åº“ Ydbä½¿ç”¨ç«¯å£ ç«¯å£ åè®® æè¿° 2135~2136 TCP ç”¨äºå®¢æˆ·ç«¯-é›†ç¾¤äº¤äº’çš„GRPC 19001~19002 TCP é›†ç¾¤å†…èŠ‚ç‚¹äº¤äº’äº’è¿ 8765~8766 TCP é›†ç¾¤ç›‘æ§çš„HTTPæ¥å£ Ydbæ•°æ®åº“ã€Github-Ydb ç³»ç»Ÿè¦æ±‚Ubuntu 20.">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/s2-1.png">
    <meta name="twitter:title" content="Install_Ydb :: Hugo Relearn Theme">
    <meta name="twitter:description" content="éƒ¨ç½²Ydbå•èŠ‚ç‚¹æ•°æ®åº“ Ydbä½¿ç”¨ç«¯å£ ç«¯å£ åè®® æè¿° 2135~2136 TCP ç”¨äºå®¢æˆ·ç«¯-é›†ç¾¤äº¤äº’çš„GRPC 19001~19002 TCP é›†ç¾¤å†…èŠ‚ç‚¹äº¤äº’äº’è¿ 8765~8766 TCP é›†ç¾¤ç›‘æ§çš„HTTPæ¥å£ Ydbæ•°æ®åº“ã€Github-Ydb ç³»ç»Ÿè¦æ±‚Ubuntu 20.">
    <meta property="og:url" content="https://erge.blog/systems/linux/databases/install_ydb/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Install_Ydb :: Hugo Relearn Theme">
    <meta property="og:description" content="éƒ¨ç½²Ydbå•èŠ‚ç‚¹æ•°æ®åº“ Ydbä½¿ç”¨ç«¯å£ ç«¯å£ åè®® æè¿° 2135~2136 TCP ç”¨äºå®¢æˆ·ç«¯-é›†ç¾¤äº¤äº’çš„GRPC 19001~19002 TCP é›†ç¾¤å†…èŠ‚ç‚¹äº¤äº’äº’è¿ 8765~8766 TCP é›†ç¾¤ç›‘æ§çš„HTTPæ¥å£ Ydbæ•°æ®åº“ã€Github-Ydb ç³»ç»Ÿè¦æ±‚Ubuntu 20.">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Systems">
    <meta property="article:published_time" content="2024-06-17T22:06:56+08:00">
    <meta property="article:modified_time" content="2024-06-17T22:06:56+08:00">
    <meta property="og:image" content="https://erge.blog/images/s2-1.png">
    <meta itemprop="name" content="Install_Ydb :: Hugo Relearn Theme">
    <meta itemprop="description" content="éƒ¨ç½²Ydbå•èŠ‚ç‚¹æ•°æ®åº“ Ydbä½¿ç”¨ç«¯å£ ç«¯å£ åè®® æè¿° 2135~2136 TCP ç”¨äºå®¢æˆ·ç«¯-é›†ç¾¤äº¤äº’çš„GRPC 19001~19002 TCP é›†ç¾¤å†…èŠ‚ç‚¹äº¤äº’äº’è¿ 8765~8766 TCP é›†ç¾¤ç›‘æ§çš„HTTPæ¥å£ Ydbæ•°æ®åº“ã€Github-Ydb ç³»ç»Ÿè¦æ±‚Ubuntu 20.">
    <meta itemprop="datePublished" content="2024-06-17T22:06:56+08:00">
    <meta itemprop="dateModified" content="2024-06-17T22:06:56+08:00">
    <meta itemprop="wordCount" content="1811">
    <meta itemprop="image" content="https://erge.blog/images/s2-1.png">
    <title>Install_Ydb :: Hugo Relearn Theme</title>
    <link href="../../../../images/favicon.ico?1719329888" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../../css/fontawesome-all.min.css?1719329890" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fontawesome-all.min.css?1719329890" rel="stylesheet"></noscript>
    <link href="../../../../css/nucleus.css?1719329890" rel="stylesheet">
    <link href="../../../../css/auto-complete.css?1719329890" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/auto-complete.css?1719329890" rel="stylesheet"></noscript>
    <link href="../../../../css/perfect-scrollbar.min.css?1719329890" rel="stylesheet">
    <link href="../../../../css/fonts.css?1719329890" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fonts.css?1719329890" rel="stylesheet"></noscript>
    <link href="../../../../css/theme.css?1719329890" rel="stylesheet">
    <link href="../../../../css/theme-relearn-auto.css?1719329890" rel="stylesheet" id="R-variant-style">
    <link href="../../../../css/chroma-relearn-auto.css?1719329890" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../../css/variant.css?1719329890" rel="stylesheet">
    <link href="../../../../css/print.css?1719329890" rel="stylesheet" media="print">
    <link href="../../../../css/format-print.css?1719329890" rel="stylesheet">
    <script src="../../../../js/variant.js?1719329890"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../../systems/linux/databases/install_ydb/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/databases/"><span itemprop="name">Databases</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Install_Ydb</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/databases/update_mysql5-7_to_mysql8/" title="Update_Mysql5 7_To_Mysql8 (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/databases/install_postgresql/" title="Install_PostgreSQL (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_ydb">Install_Ydb</h1>

<h2 id="éƒ¨ç½²ydbå•èŠ‚ç‚¹æ•°æ®åº“">éƒ¨ç½²<code>Ydb</code>å•èŠ‚ç‚¹æ•°æ®åº“</h2>
<blockquote>
<ol>
<li><code>Ydb</code><!-- raw HTML omitted -->ä½¿ç”¨ç«¯å£<!-- raw HTML omitted --></li>
</ol>
<table>
<thead>
<tr>
<th>ç«¯å£</th>
<th>åè®®</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>2135~2136</td>
<td><code>TCP</code></td>
<td>ç”¨äºå®¢æˆ·ç«¯-é›†ç¾¤äº¤äº’çš„<code>GRPC</code></td>
</tr>
<tr>
<td>19001~19002</td>
<td><code>TCP</code></td>
<td>é›†ç¾¤å†…èŠ‚ç‚¹äº¤äº’äº’è¿</td>
</tr>
<tr>
<td>8765~8766</td>
<td><code>TCP</code></td>
<td>é›†ç¾¤ç›‘æ§çš„<code>HTTP</code>æ¥å£</td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol>
<li><a href="https://ydb.tech/" rel="external" target="_self"><code>Ydb</code></a>æ•°æ®åº“ã€<a href="https://github.com/ydb-platform/ydb" rel="external" target="_self"><code>Github-Ydb</code></a></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ç³»ç»Ÿè¦æ±‚<!-- raw HTML omitted --><code>Ubuntu 20.04ã€Debian 11ã€Fedora34</code><!-- raw HTML omitted -->ç­‰ä»¥ä¸Šç‰ˆæœ¬ç³»ç»Ÿ<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /opt/<span style="color:#f92672">{</span>ydb,ydb-cli<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>$ cd /opt/ydb/
</span></span><span style="display:flex;"><span>$ curl https://binaries.ydb.tech/local_scripts/install.sh | bash</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨ã€åœæ­¢<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># ç£ç›˜å¯åŠ¨ä½¿ç”¨ï¼Œç£ç›˜æœ€å°‘ä¸èƒ½ä½äº 80G</span>
</span></span><span style="display:flex;"><span>$ ./start.sh disk
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å†…å­˜å¯åŠ¨ï¼Œå†…å­˜å¯åŠ¨æœåŠ¡å™¨é‡å¯æ•°æ®ä¸¢å¤±</span>
</span></span><span style="display:flex;"><span>$ ./start.sh ram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åœæ­¢</span>
</span></span><span style="display:flex;"><span>$ ./stop.sh</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->éƒ¨ç½²<!-- raw HTML omitted --><code>Ydb-cli</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -sSL https://storage.yandexcloud.net/yandexcloud-ydb/install.sh | bash
</span></span><span style="display:flex;"><span>$ source /root/.bashrc</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä½¿ç”¨<!-- raw HTML omitted --><code>Ydb-cli</code>æŸ¥è¯¢</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpc://localhost:2136 -d /Root/test scheme ls
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ydb -e grpc://nodeip:2136 -d /Root/testdb workload stock init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯åŠ¨YDB Webé¡µé¢</span>
</span></span><span style="display:flex;"><span>$ ydb -e grpc://nodeip:2136 -d /Root/testdb workload stock run add-rand-order -s <span style="color:#ae81ff">600</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ydb -e grpc://192.168.88.112:2136 -d /Root/testdb topic read orders/updates -c ilnaz --wait --format<span style="color:#f92672">=</span>newline-delimited</span></span></code></pre></div></blockquote>
<hr>
<h2 id="éƒ¨ç½²é›†ç¾¤æ¨¡å¼">éƒ¨ç½²é›†ç¾¤æ¨¡å¼</h2>
<h3 id="å®‰è£…å‰å‡†å¤‡">å®‰è£…å‰å‡†å¤‡</h3>
<blockquote>
<ol>
<li><a href="https://ydb.tech/en/docs/deploy/manual/deploy-ydb-on-premises" rel="external" target="_self">åœ¨è™šæ‹Ÿæˆ–è£¸æœºæœåŠ¡å™¨ä¸Šéƒ¨ç½²<code>YDB</code>é›†ç¾¤</a></li>
</ol>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->è™šæ‹Ÿæœºç³»ç»Ÿå®‰è£…å¥½åï¼Œé‡æ–°æ·»åŠ <!-- raw HTML omitted --><code>NVMe(v)</code>ç±»å‹ç£ç›˜</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å‡†å¤‡ç¯å¢ƒã€ç”¨æˆ·<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo groupadd ydb
</span></span><span style="display:flex;"><span>$ sudo useradd ydb -g ydb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sudo usermod -aG disk ydb  	<span style="color:#75715e"># ä¸ºäº†ç¡®ä¿YDBå¯ä»¥è®¿é—®å—ç£ç›˜æ¥è¿è¡Œï¼Œæ‚¨éœ€è¦å°†è¿›ç¨‹æ‰€æœ‰è€…æ·»åŠ åˆ°diskç»„ä¸­</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ apt install sudo  	<span style="color:#75715e"># ä½¿ç”¨rootç”¨æˆ·å®‰è£…sudo</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;name  ALL=(ALL:ALL) ALL&#34;</span> &gt;&gt;/etc/sudoers
</span></span><span style="display:flex;"><span>$ sudo apt install curl parted</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->åœ¨æ‰€é€‰ç£ç›˜ä¸Šåˆ›å»ºåˆ†åŒº<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo parted /dev/nvme0n1 mklabel gpt -s
</span></span><span style="display:flex;"><span>$ sudo parted -a optimal /dev/nvme0n1 mkpart primary 0% 100%
</span></span><span style="display:flex;"><span>$ sudo parted /dev/nvme0n1 name <span style="color:#ae81ff">1</span> ydb_disk_ssd_01
</span></span><span style="display:flex;"><span>$ sudo partx --u /dev/nvme0n1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sudo parted /dev/nvme0n2 mklabel gpt -s
</span></span><span style="display:flex;"><span>$ sudo parted -a optimal /dev/nvme0n2 mkpart primary 0% 100%
</span></span><span style="display:flex;"><span>$ sudo parted /dev/nvme0n2 name <span style="color:#ae81ff">1</span> ydb_disk_ssd_02
</span></span><span style="display:flex;"><span>$ sudo partx --u /dev/nvme0n2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sudo parted /dev/nvme0n3 mklabel gpt -s
</span></span><span style="display:flex;"><span>$ sudo parted -a optimal /dev/nvme0n3 mkpart primary 0% 100%
</span></span><span style="display:flex;"><span>$ sudo parted /dev/nvme0n3 name <span style="color:#ae81ff">1</span> ydb_disk_ssd_03
</span></span><span style="display:flex;"><span>$ sudo partx --u /dev/nvme0n3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç³»ç»Ÿä¸Šå°†å‡ºç°ä¸€ä¸ªæ ‡æœ‰ç£ç›˜çš„ç£ç›˜ </span>
</span></span><span style="display:flex;"><span>$ ll /dev/disk/by-partlabel/</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->ä¸‹è½½å¹¶è§£å‹åŒ…å«<code>ydbd</code>å¯æ‰§è¡Œæ–‡ä»¶å’Œ<code>YDB</code>è¿è¡Œæ‰€éœ€åº“çš„å­˜æ¡£<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo chown -R ydb:ydb /opt
</span></span><span style="display:flex;"><span>$ mkdir -p /opt/<span style="color:#f92672">{</span>ydb/<span style="color:#f92672">{</span>cfg,secure,certs,log<span style="color:#f92672">}</span>,ydbd-stable-linux-amd64<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ curl -L https://binaries.ydb.tech/ydbd-stable-linux-amd64.tar.gz | tar -xz --strip-component<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> -C /opt/ydbd-stable-linux-amd64</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å°†å¯æ‰§è¡Œæ–‡ä»¶å’Œåº“å¤åˆ¶åˆ°é€‚å½“çš„ç›®å½•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo cp -iR /opt/ydbd-stable-linux-amd64/bin /opt/ydb/
</span></span><span style="display:flex;"><span>$ sudo cp -iR /opt/ydbd-stable-linux-amd64/lib /opt/ydb/</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->ä½¿ç”¨ä»¥ä¸‹å†…ç½®å‘½ä»¤æ ¼å¼åŒ–ç£ç›˜<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib /opt/ydb/bin/ydbd admin bs disk obliterate /dev/disk/by-partlabel/ydb_disk_ssd_01
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sudo LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib /opt/ydb/bin/ydbd admin bs disk obliterate /dev/disk/by-partlabel/ydb_disk_ssd_02
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sudo LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib /opt/ydb/bin/ydbd admin bs disk obliterate /dev/disk/by-partlabel/ydb_disk_ssd_03</span></span></code></pre></div></blockquote>
<hr>
<h3 id="å‡†å¤‡è¯ä¹¦ä½¿ç”¨ä¿æŠ¤æ¨¡å¼">å‡†å¤‡è¯ä¹¦ä½¿ç”¨ä¿æŠ¤æ¨¡å¼</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->å‡†å¤‡<code>CA</code>æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ydb/cfg/ca.cnf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ ca ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default_ca = CA_default
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ CA_default ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default_days = 365
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">database = /opt/ydb/secure/index.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">serial = /opt/ydb/secure/serial.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">default_md = sha256
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">copy_extensions = copy
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">unique_subject = no
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ req ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">prompt=no
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">distinguished_name = distinguished_name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">x509_extensions = extensions
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ distinguished_name ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">organizationName = YDB
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">commonName = YDB CA
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ extensions ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">keyUsage = critical,digitalSignature,nonRepudiation,keyEncipherment,keyCertSign
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">basicConstraints = critical,CA:true,pathlen:1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ signing_policy ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">organizationName = supplied
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">commonName = optional
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ signing_node_req ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">keyUsage = critical,digitalSignature,keyEncipherment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">extendedKeyUsage = serverAuth,clientAuth
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Used to sign client certificates. ç”¨äºç­¾ç½²å®¢æˆ·ç«¯è¯ä¹¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ signing_client_req ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">keyUsage = critical,digitalSignature,keyEncipherment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">extendedKeyUsage = clientAuth
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->åˆ›å»º<code>CA</code>å¯†é’¥<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ openssl genrsa -out /opt/ydb/certs/ca.key <span style="color:#ae81ff">2048</span></span></span></code></pre></div><ul>
<li>2.1 <!-- raw HTML omitted -->åˆ›å»ºç§æœ‰è¯ä¹¦é¢å‘æœºæ„<code>CA</code>è¯ä¹¦<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ openssl req -new -x509 -config /opt/ydb/cfg/ca.cnf -key /opt/ydb/certs/ca.key -out /opt/ydb/certs/ca.crt -days <span style="color:#ae81ff">1830</span> -batch</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->åˆ›å»ºæ–‡æœ¬æ•°æ®åº“å’Œ<code>OpenSSL</code>è¯ä¹¦ç´¢å¼•æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ touch /opt/ydb/secure/index.txt
</span></span><span style="display:flex;"><span>$ echo <span style="color:#ae81ff">01</span> &gt;/opt/ydb/secure/serial.txt</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->åˆ›å»º<code>node.cnf</code>å…·æœ‰ä»¥ä¸‹å†…å®¹çš„é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ydb/cfg/node.cnf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># OpenSSL node configuration file
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ req ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">prompt = no
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">distinguished_name = distinguished_name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">req_extensions = extensions
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ distinguished_name ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">organizationName = YDB
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[ extensions ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">subjectAltName = DNS:&lt;node&gt;.&lt;domain&gt;  	# èŠ‚ç‚¹IPæˆ–è€…åŸŸå
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»ºè¯ä¹¦å¯†é’¥<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ openssl genrsa -out /opt/ydb/certs/node.key <span style="color:#ae81ff">2048</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚<code>CSR</code><!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ openssl req -new -sha256 -config /opt/ydb/cfg/node.cnf -key /opt/ydb/certs/node.key -out /opt/ydb/secure/node.csr -batch</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»ºèŠ‚ç‚¹è¯ä¹¦<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ openssl ca -config /opt/ydb/cfg/ca.cnf <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> -keyfile /opt/ydb/certs/ca.key <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> -cert /opt/ydb/certs/ca.crt <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> -policy signing_policy <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> -extensions signing_node_req <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> -out /opt/ydb/certs/node.crt <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> -outdir /opt/ydb/certs/ <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> -in /opt/ydb/secure/node.csr -batch</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->å°†è¯ä¹¦å’ŒèŠ‚ç‚¹å¯†é’¥å¤åˆ¶åˆ°å®‰è£…æ–‡ä»¶å¤¹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo -u ydb cp certs/ca.crt certs/node.crt certs/node.key /opt/ydb/certs/</span></span></code></pre></div></blockquote>
<hr>
<h3 id="ä¸ºydbå‡†å¤‡é›†ç¾¤é…ç½®æ–‡ä»¶">ä¸º<code>YDB</code>å‡†å¤‡é›†ç¾¤é…ç½®æ–‡ä»¶</h3>
<blockquote>
<ul>
<li><a href="https://ydb.tech/en/docs/deploy/configuration/config" rel="external" target="_self">é›†ç¾¤é…ç½®</a></li>
</ul>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->é›†ç¾¤ç±»å‹ã€åœ¨é›†ç¾¤æ¯ä¸ªèŠ‚ç‚¹ä¸­æ·»åŠ <!-- raw HTML omitted --><code>/opt/ydb/cfg/config.yaml</code>ä¿å­˜<code>YDB</code> é…ç½®æ–‡ä»¶</li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://github.com/ydb-platform/ydb/blob/main/ydb/deploy/yaml_config_examples/block-4-2.yaml" rel="external" target="_self"><code>block-4-2</code></a><!-- raw HTML omitted -->ç”¨äºå•æ•°æ®ä¸­å¿ƒé›†ç¾¤<!-- raw HTML omitted --></li>
<li><a href="https://github.com/ydb-platform/ydb/blob/main/ydb/deploy/yaml_config_examples/mirror-3dc-9-nodes.yaml" rel="external" target="_self"><code>mirror-3dc</code></a><!-- raw HTML omitted -->ç”¨äºç”± 9 ä¸ªèŠ‚ç‚¹ç»„æˆçš„è·¨æ•°æ®ä¸­å¿ƒé›†ç¾¤<!-- raw HTML omitted --></li>
<li><a href="https://github.com/ydb-platform/ydb/blob/main/ydb/deploy/yaml_config_examples/mirror-3dc-3-nodes.yaml" rel="external" target="_self"><code>mirror-3dc-3nodes</code></a><!-- raw HTML omitted -->ç”¨äºç”± 3 ä¸ªèŠ‚ç‚¹ç»„æˆçš„è·¨æ•°æ®ä¸­å¿ƒé›†ç¾¤<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->åœ¨<code>host_configs</code>éƒ¨åˆ†ä¸­ï¼ŒæŒ‡å®šæ¯ä¸ªç¾¤é›†èŠ‚ç‚¹ä¸Šæ‰€æœ‰ç£ç›˜ç±»å‹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å¯ç”¨ç£ç›˜ç§ç±»ï¼šå›ºæ€ç¡¬ç›˜ï¼š<code>SSD</code>ã€<code>NVME</code>ã€<code>HDD</code><!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">host_configs</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">drive</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/dev/disk/by-partlabel/ydb_disk_ssd_01</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">SSD  	# å¯ç”¨ç£ç›˜ç§ç±»ï¼šSSDã€NVMEã€HDD</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">host_config_id</span>: <span style="color:#ae81ff">1</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->åœ¨è¯¥<code>hosts</code>éƒ¨åˆ†ä¸­ï¼ŒæŒ‡å®šæ¯ä¸ªèŠ‚ç‚¹çš„<code>FQDN</code>ã€å®ƒä»¬çš„é…ç½®å’Œåœ¨<code>data_center</code>æˆ–ä¸­çš„ä½ç½®<code>rack</code><!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åœ¨<!-- raw HTML omitted --><code>/etc/hosts</code><!-- raw HTML omitted -->æ–‡ä»¶ä¸‹åšæ˜ å°„ï¼š<!-- raw HTML omitted --><code>IP:hostname</code><!-- raw HTML omitted -->é¿å…ä¸å¿…è¦éº»çƒ¦æ‰€æœ‰ä¸»æœºåå¿…é¡»éƒ½æ˜¯å°å†™å­—æ¯<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">hosts</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">host</span>: <span style="color:#ae81ff">node1.ydb.tech</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">host_config_id</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">walle_location</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">body</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">data_center</span>: <span style="color:#e6db74">&#39;zone-a&#39;</span>  	<span style="color:#75715e"># å¡«å†™ hostname</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">rack</span>: <span style="color:#e6db74">&#39;1&#39;</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">host</span>: <span style="color:#ae81ff">node2.ydb.tech</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">host_config_id</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">walle_location</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">body</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">data_center</span>: <span style="color:#e6db74">&#39;zone-b&#39;</span>  	<span style="color:#75715e"># å¡«å†™ hostname</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">rack</span>: <span style="color:#e6db74">&#39;1&#39;</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">host</span>: <span style="color:#ae81ff">node3.ydb.tech</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">host_config_id</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">walle_location</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">body</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">data_center</span>: <span style="color:#e6db74">&#39;zone-c&#39;</span>  	<span style="color:#75715e"># å¡«å†™ hostname</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">rack</span>: <span style="color:#e6db74">&#39;1&#39;</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->å¯ç”¨ç”¨æˆ·èº«ä»½éªŒè¯<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åœ¨<code>YDB</code>é›†ç¾¤ä¸­å¯ç”¨è®¤è¯å’Œç”¨æˆ·è®¿é—®å·®å¼‚åŒ–ç‰¹æ€§ï¼Œåœ¨<code>domains_config</code>éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹å‚æ•°<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">domains_config</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">security_config</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enforce_user_token_requirement</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">monitoring_allowed_sids</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;root&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;ADMINS&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;DATABASE-ADMINS&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">administration_allowed_sids</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;root&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;ADMINS&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;DATABASE-ADMINS&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">viewer_allowed_sids</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;root&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;ADMINS&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;DATABASE-ADMINS&#34;</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->åœ¨<code>YDB</code>é…ç½®æ–‡ä»¶ä¸­å¯ç”¨æµé‡åŠ å¯†æ¨¡å¼<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åœ¨<code>interconnect_config</code>å’Œ<code>grpc_config</code>éƒ¨åˆ†ä¸­ï¼ŒæŒ‡å®šè¯ä¹¦ã€å¯†é’¥å’Œ<code>CA</code>è¯ä¹¦çš„è·¯å¾„<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">interconnect_config</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">start_tcp</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">encryption_mode</span>: <span style="color:#ae81ff">OPTIONAL</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">path_to_certificate_file</span>: <span style="color:#e6db74">&#34;/opt/ydb/certs/node.crt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">path_to_private_key_file</span>: <span style="color:#e6db74">&#34;/opt/ydb/certs/node.key&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">path_to_ca_file</span>: <span style="color:#e6db74">&#34;/opt/ydb/certs/ca.crt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">grpc_config</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">cert</span>: <span style="color:#e6db74">&#34;/opt/ydb/certs/node.crt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">key</span>: <span style="color:#e6db74">&#34;/opt/ydb/certs/node.key&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ca</span>: <span style="color:#e6db74">&#34;/opt/ydb/certs/ca.crt&#34;</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="6">
<li><!-- raw HTML omitted -->å®Œæ•´<!-- raw HTML omitted --><code>block-4-2</code>é…ç½®<!-- raw HTML omitted -->é¿å…ä¸å¿…è¦éº»çƒ¦æ‰€æœ‰ä¸»æœºåå¿…é¡»éƒ½æ˜¯å°å†™å­—æ¯<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/ydb/cfg/config.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># YDB configuration options and their values
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># are described in documentaion https://ydb.tech/en/docs/deploy/configuration/config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># static erasure is the parameter that
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># describes the fault tolerance mode of the
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># cluster. See docs for more details https://ydb.tech/en/docs/deploy/configuration/config#domains-blob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">static_erasure: mirror-3-dc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">host_configs: # the list of available host configurations in the cluster.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- drive:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - path: /dev/disk/by-partlabel/ydb_disk_ssd_01    # path of the first disk in the host configration.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: NVME                                       # kind of the disk: available kinds are SSD, NVME, HDD
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - path: /dev/disk/by-partlabel/ydb_disk_ssd_02
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - path: /dev/disk/by-partlabel/ydb_disk_ssd_03
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  host_config_id: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">hosts:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- host: debian-1-88-110       # storage node DNS name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  host_config_id: 1                 # numeric host configuration template identifier
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  walle_location:                   # this parameter describes where host is located.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    body: 1                         # string representing a host serial number.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    data_center: &#39;debian-1-88-110&#39;           # string representing the datacenter / availability zone where the host is located.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                    # if cluster is deployed using mirror-3-dc fault tolerance mode, all hosts must be distributed
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                    # across 3 datacenters.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    rack: &#39;1&#39;                       # string representing a rack identifier where the host is located.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                    # if cluster is deployed using block-4-2 erasure, all hosts should be distrubited
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                    # accross at least 8 racks.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- host: ubuntu-1-88-111
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  host_config_id: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  walle_location:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    body: 2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    data_center: &#39;ubuntu-1-88-111&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    rack: &#39;2&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- host: ubuntu-2-88-112
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  host_config_id: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  walle_location:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    body: 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    data_center: &#39;ubuntu-2-88-112&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    rack: &#39;3&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">domains_config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  # There can be only one root domain in a cluster. Domain name prefixes all scheme objects names, e.g. full name of a table table1 in database db1.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  # in a cluster with domains_config.domain.name parameter set to Root would be equal to /Root/db1/table1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  domain:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Root
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    storage_pool_types:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - kind: nvme
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      pool_config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        box_id: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # fault tolerance mode name - none, block-4-2, or mirror-3-dc..
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # See docs for more details https://ydb.tech/en/docs/deploy/configuration/config#domains-blob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        erasure_species: mirror-3-dc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        kind: nvme
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        geometry:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          realm_level_begin: 10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          realm_level_end: 20
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          domain_level_begin: 10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          domain_level_end: 256
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        pdisk_filter:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - property:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - type: NVME  # device type to match host_configs.drive.type
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        vdisk_kind: Default
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  state_storage:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - ring:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      node: [1, 2, 3]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      nto_select: 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ssid: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">table_service_config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  sql_version: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">actor_system_config:          # the configuration of the actor system which descibes how cores of the instance are distributed
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  executor:                   # accross different types of workloads in the instance.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: System              # system executor of the actor system. in this executor YDB launches system type of workloads, like system tablets
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                              # and reads from storage.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    threads: 2                # the number of threads allocated to system executor.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: BASIC
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: User                # user executor of the actor system. In this executor YDB launches user workloads, like datashard activities,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                              # queries and rpc calls.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    threads: 3                # the number of threads allocated to user executor.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: BASIC
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: Batch               # user executor of the actor system. In this executor YDB launches batch operations, like scan queries, table
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                              # compactions, background compactions.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    threads: 2                # the number of threads allocated to the batch executor.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: BASIC
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: IO                  # the io executor. In this executor launches sync operations and writes logs.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    threads: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    time_per_mailbox_micro_secs: 100
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: IO
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: IC                  # the interconnect executor which YDB uses for network communications accross different nodes of the cluster.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spin_threshold: 10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    threads: 1                # the number of threads allocated to the interconnect executor.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    time_per_mailbox_micro_secs: 100
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: BASIC
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  scheduler:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    progress_threshold: 10000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    resolution: 256
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spin_threshold: 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">blob_storage_config:         # configuration of static blobstorage group.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                             # YDB uses this group to store system tablets&#39; data, like SchemeShard
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  service_set:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    groups:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - erasure_species: mirror-3-dc # fault tolerance mode name for the static group
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      rings:          # in mirror-3-dc must have exactly 3 rings or availability zones
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - fail_domains:  # first record: fail domains of the static group describe where each vdisk of the static group should be located.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: debian-1-88-110
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_01
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: debian-1-88-110
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_02
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: debian-1-88-110
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_03
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - fail_domains: # second ring: fail domains of the static group describe where each vdisk of the static group should be located.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: ubuntu-1-88-111
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_01
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: ubuntu-1-88-111
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_02
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: ubuntu-1-88-111
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_03
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - fail_domains: # third ring: fail domains of the static group describe where each vdisk of the static group should be located.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: ubuntu-2-88-112
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_01
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: ubuntu-2-88-112
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_02
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - vdisk_locations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - node_id: ubuntu-2-88-112
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            pdisk_category: NVME
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            path: /dev/disk/by-partlabel/ydb_disk_ssd_03
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">channel_profile_config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  profile:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - channel:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - erasure_species: mirror-3-dc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      pdisk_category: 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      storage_pool_kind: nvme
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - erasure_species: mirror-3-dc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      pdisk_category: 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      storage_pool_kind: nvme
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - erasure_species: mirror-3-dc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      pdisk_category: 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      storage_pool_kind: nvme
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    profile_id: 0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">interconnect_config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    start_tcp: true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    encryption_mode: OPTIONAL
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path_to_certificate_file: &#34;/opt/ydb/certs/node.crt&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path_to_private_key_file: &#34;/opt/ydb/certs/node.key&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path_to_ca_file: &#34;/opt/ydb/certs/ca.crt&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">grpc_config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cert: &#34;/opt/ydb/certs/node.crt&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    key: &#34;/opt/ydb/certs/node.key&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ca: &#34;/opt/ydb/certs/ca.crt&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="å¯åŠ¨æ•°æ®åº“é™æ€èŠ‚ç‚¹">å¯åŠ¨æ•°æ®åº“é™æ€èŠ‚ç‚¹</h3>
<h4 id="æ‰‹åŠ¨æ–¹å¼å¯åŠ¨">æ‰‹åŠ¨æ–¹å¼å¯åŠ¨</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->å¯åŠ¨<code>/Root/testdb</code>æ•°æ®åº“çš„<code>YDB</code>åŠ¨æ€èŠ‚ç‚¹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>&lt;nodeN.ydb.tech&gt;</code><!-- raw HTML omitted -->è¿è¡Œé™æ€èŠ‚ç‚¹çš„æœåŠ¡å™¨çš„<code>FQDN</code>åœ¨å“ªé‡Œ<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šè¿è¡Œé¢å¤–çš„åŠ¨æ€èŠ‚ç‚¹ä»¥ç¡®ä¿æ•°æ®åº“å¯ç”¨æ€§<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo su - ydb
</span></span><span style="display:flex;"><span>$ cd /opt/ydb
</span></span><span style="display:flex;"><span>$ export LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib
</span></span><span style="display:flex;"><span>/opt/ydb/bin/ydbd server --log-level <span style="color:#ae81ff">3</span> --tcp --yaml-config /opt/ydb/cfg/config.yaml --grpc-port <span style="color:#ae81ff">2135</span> --ic-port <span style="color:#ae81ff">19001</span> --mon-port <span style="color:#ae81ff">8765</span> --node static &gt;/opt/ydb/log/static-node.out 2&gt;/opt/ydb/log/static-node.err &amp;&gt;</span></span></code></pre></div></blockquote>
<hr>
<h4 id="ä½¿ç”¨systemdæ–¹å¼å¯åŠ¨">ä½¿ç”¨<code>systemd</code>æ–¹å¼å¯åŠ¨</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->ç¼–å†™å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>/etc/systemd/system/ydbd-storage.service</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/systemd/system/ydbd-storage.service<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=YDB storage node
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network-online.target rc-local.service
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Wants=network-online.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StartLimitInterval=10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StartLimitBurst=15
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">RestartSec=1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">User=ydb  	# æ ¹æ®ç”¨æˆ·ä¿®æ”¹
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">PermissionsStartOnly=true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StandardOutput=/var/log/ydb.log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StandardError=/var/log/ydb.log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SyslogIdentifier=ydbd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SyslogFacility=daemon
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SyslogLevel=err
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Environment=LD_LIBRARY_PATH=/opt/ydb/lib
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/opt/ydb/bin/ydbd server --log-level 3 --syslog --tcp --yaml-config  /opt/ydb/cfg/config.yaml --grpc-port 2135 --ic-port 19001 --mon-port 8765 --node static
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LimitNOFILE=65536
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LimitCORE=0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LimitMEMLOCK=3221225472
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¯åŠ¨æœåŠ¡å™¨ã€æŸ¥çœ‹çŠ¶æ€<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo systemctl start ydbd-storage
</span></span><span style="display:flex;"><span>$ sudo systemctl status ydbd-storage</span></span></code></pre></div></blockquote>
<hr>
<h3 id="åˆå§‹åŒ–é›†ç¾¤">åˆå§‹åŒ–é›†ç¾¤</h3>
<h4 id="ä¸ä½¿ç”¨èº«ä»½éªŒè¯æ–¹å¼åˆå§‹åŒ–é›†ç¾¤">ä¸ä½¿ç”¨èº«ä»½éªŒè¯æ–¹å¼åˆå§‹åŒ–é›†ç¾¤</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->åœ¨å…¶ä¸­ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸Šï¼Œè¿è¡Œå‘½ä»¤<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ export LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib
</span></span><span style="display:flex;"><span>/opt/ydb/bin/ydbd admin blobstorage config init --yaml-file  /opt/ydb/cfg/config.yaml
</span></span><span style="display:flex;"><span>$ echo $?</span></span></code></pre></div></blockquote>
<hr>
<h4 id="ä½¿ç”¨èº«ä»½éªŒè¯æ–¹å¼åˆå§‹åŒ–é›†ç¾¤">ä½¿ç”¨èº«ä»½éªŒè¯æ–¹å¼åˆå§‹åŒ–é›†ç¾¤</h4>
<blockquote>
<p>è¦åœ¨å¯ç”¨ç”¨æˆ·è®¤è¯æ¨¡å¼çš„é›†ç¾¤ä¸­æ‰§è¡Œç®¡ç†å‘½ä»¤ï¼ˆåŒ…æ‹¬é›†ç¾¤åˆå§‹åŒ–ã€æ•°æ®åº“åˆ›å»ºã€ç£ç›˜ç®¡ç†ç­‰ï¼‰ï¼Œæ‚¨å¿…é¡»é¦–å…ˆä½¿ç”¨<code>YDB CLI</code>å®¢æˆ·ç«¯<code>2.0.0</code>æˆ–æ›´é«˜ç‰ˆæœ¬è·å–è®¤è¯ä»¤ç‰Œã€‚<a href="https://ydb.tech/en/docs/reference/ydb-cli/install" rel="external" target="_self">æ‚¨å¿…é¡»æŒ‰ç…§å®‰è£…è¯´æ˜</a>å°†<code>YDB CLI</code>å®¢æˆ·ç«¯å®‰è£…åœ¨ä»»ä½•å¯ä»¥é€šè¿‡ç½‘ç»œè®¿é—®é›†ç¾¤èŠ‚ç‚¹çš„è®¡ç®—æœºä¸Šï¼ˆä¾‹å¦‚ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸Šï¼‰ã€‚</p>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->ç¬¬ä¸€æ¬¡å®‰è£…é›†ç¾¤æ—¶ï¼Œå®ƒåªæœ‰ä¸€ä¸ª<code>root</code>å¯†ç ä¸ºç©ºçš„å¸æˆ·ï¼Œå› æ­¤è·å–ä»¤ç‰Œçš„å‘½ä»¤<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ä»»ä½•é›†ç¾¤æœåŠ¡å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºè¿æ¥æœåŠ¡å™¨ï¼ˆ<code>-e</code>æˆ–<code>--endpoint</code>å‚æ•°ï¼‰<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpc://&lt;node1.ydb.tech&gt;:2135 -d /Root --user root --no-password auth get-token --force &gt;token-file</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¦‚æœå¯ç”¨äº†<!-- raw HTML omitted --><code>TLS</code>æµé‡ä¿æŠ¤ï¼Œè¯·ä½¿ç”¨å—ä¿æŠ¤çš„<code>grpcs</code>åè®®è€Œä¸æ˜¯<code>grpc</code>ä¸Šé¢å‘½ä»¤ä¸­çš„åè®®ï¼Œå¹¶åœ¨å‚æ•°ä¸­é¢å¤–æŒ‡å®š<code>CA</code>è¯ä¹¦çš„è·¯å¾„<code>--ca-file</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpcs://&lt;node1.ydb.tech&gt;:2135 -d /Root --ca-file /opt/ydb/certs/ca.crt --user root --no-password auth get-token --force &gt;token-file</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->å¦‚æœå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œèº«ä»½éªŒè¯ä»¤ç‰Œå°†è¢«å†™å…¥<code>token-file</code>. åªéœ€è¦å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°ç¨åè¦è¿è¡Œé›†ç¾¤åˆå§‹åŒ–å’Œæ•°æ®åº“åˆ›å»ºå‘½ä»¤çš„é›†ç¾¤èŠ‚ç‚¹ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨æ­¤é›†ç¾¤èŠ‚ç‚¹ä¸Šè¿è¡Œå‘½ä»¤<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ export LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib
</span></span><span style="display:flex;"><span>/opt/ydb/bin/ydbd -f token-file admin blobstorage config init --yaml-file  /opt/ydb/cfg/config.yaml
</span></span><span style="display:flex;"><span>$ echo $?</span></span></code></pre></div></blockquote>
<hr>
<h3 id="åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->è¦ä½¿ç”¨è¡¨ï¼Œæ‚¨éœ€è¦è‡³å°‘åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å¹¶è¿è¡Œä¸€ä¸ªè¿›ç¨‹æ¥ä¸ºè¯¥æ•°æ®åº“æä¾›æœåŠ¡ï¼ˆåŠ¨æ€èŠ‚ç‚¹ï¼‰ä¸ä½¿ç”¨ä»¤ç‰Œ<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>/Root</code><!-- raw HTML omitted -->: æ ¹åŸŸçš„åç§°ï¼Œå¿…é¡»ä¸<!-- raw HTML omitted --><code>domains_config</code>. <code>domain</code>. <code>name</code><!-- raw HTML omitted -->åœ¨é›†ç¾¤é…ç½®æ–‡ä»¶ä¸­è®¾ç½®<!-- raw HTML omitted --></li>
<li><code>testdb</code><!-- raw HTML omitted -->: åˆ›å»ºçš„æ•°æ®åº“åç§°<!-- raw HTML omitted --></li>
<li><code>ssd:1</code><!-- raw HTML omitted -->ï¼šå­˜å‚¨æ± çš„åç§°å’Œæ± ä¸­å—çš„ç¼–å·ã€‚æ± åç§°é€šå¸¸è¡¨ç¤ºæ•°æ®å­˜å‚¨è®¾å¤‡çš„ç±»å‹ï¼Œå¹¶ä¸”å¿…é¡»ä¸<!-- raw HTML omitted --><code>storage_pool_types</code>. <code>kind</code><!-- raw HTML omitted -->é‡Œé¢çš„è®¾ç½®<!-- raw HTML omitted --><code>domains_config</code>ã€‚<code>domain</code><!-- raw HTML omitted -->é…ç½®æ–‡ä»¶çš„å…ƒç´ <!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib /opt/ydb/bin/ydbd admin database /Root/testdb create ssd:1</span></span></code></pre></div><ul>
<li>
<p><!-- raw HTML omitted -->ä½¿ç”¨ä»¤ç‰Œæ–‡ä»¶çš„æ•°æ®åº“åˆ›å»ºå‘½ä»¤<!-- raw HTML omitted --></p>
<p>å¦‚æœåœ¨é›†ç¾¤ä¸­å¯ç”¨äº†ç”¨æˆ·è®¤è¯æ¨¡å¼ï¼Œåˆ™å¿…é¡»å°†è®¤è¯ä»¤ç‰Œä¼ é€’ç»™æ•°æ®åº“åˆ›å»ºå‘½ä»¤ã€‚<a href="https://ydb.tech/en/docs/deploy/manual/deploy-ydb-on-premises#initialize-cluster" rel="external" target="_self">é›†ç¾¤åˆå§‹åŒ–</a>éƒ¨åˆ†æè¿°äº†è·å–ä»¤ç‰Œçš„è¿‡ç¨‹</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib /opt/ydb/bin/ydbd -f token-file admin database /Root/testdb create ssd:1</span></span></code></pre></div></blockquote>
<hr>
<h3 id="å¯åŠ¨æ•°æ®åº“åŠ¨æ€èŠ‚ç‚¹">å¯åŠ¨æ•°æ®åº“åŠ¨æ€èŠ‚ç‚¹</h3>
<h4 id="æ‰‹åŠ¨æ–¹å¼å¯åŠ¨-1">æ‰‹åŠ¨æ–¹å¼å¯åŠ¨</h4>
<ul>
<li>
<ol>
<li>å¯åŠ¨<code>/Root/testdb</code><!-- raw HTML omitted -->æ•°æ®åº“çš„<code>YDB</code>åŠ¨æ€èŠ‚ç‚¹<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>&lt;nodeN.ydb.tech&gt;</code><!-- raw HTML omitted -->è¿è¡Œé™æ€èŠ‚ç‚¹çš„æœåŠ¡å™¨çš„<code>FQDN</code>åœ¨å“ªé‡Œ<!-- raw HTML omitted --></li>
<li><!-- raw HTML omitted -->åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šè¿è¡Œé¢å¤–çš„åŠ¨æ€èŠ‚ç‚¹ä»¥ç¡®ä¿æ•°æ®åº“å¯ç”¨æ€§<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo su - ydb
</span></span><span style="display:flex;"><span>$ cd /opt/ydb
</span></span><span style="display:flex;"><span>$ export LD_LIBRARY_PATH<span style="color:#f92672">=</span>/opt/ydb/lib
</span></span><span style="display:flex;"><span>/opt/ydb/bin/ydbd server --grpc-port <span style="color:#ae81ff">2136</span> --ic-port <span style="color:#ae81ff">19002</span> --mon-port <span style="color:#ae81ff">8766</span> --yaml-config  /opt/ydb/cfg/config.yaml --tenant /Root/testdb --node-broker &lt;node1.ydb.tech&gt;:2135 --node-broker &lt;node2.ydb.tech&gt;:2135 --node-broker &lt;node3.ydb.tech&gt;:2135</span></span></code></pre></div></blockquote>
<hr>
<h4 id="ä½¿ç”¨systemdæ–¹å¼å¯åŠ¨-1">ä½¿ç”¨<code>Systemd</code>æ–¹å¼å¯åŠ¨</h4>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->ç¼–å†™å¯åŠ¨æ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»ºä¸€ä¸ªåä¸º<!-- raw HTML omitted --><code>/etc/systemd/system/ydbd-testdb.service</code><!-- raw HTML omitted -->ä»¥ä¸‹å†…å®¹çš„é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/systemd/system/ydbd-testdb.service<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=YDB testdb dynamic node
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network-online.target rc-local.service
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Wants=network-online.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StartLimitInterval=10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StartLimitBurst=15
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">RestartSec=1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">User=ydb
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">PermissionsStartOnly=true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StandardOutput=syslog
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">StandardError=syslog
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SyslogIdentifier=ydbd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SyslogFacility=daemon
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SyslogLevel=err
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Environment=LD_LIBRARY_PATH=/opt/ydb/lib
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/opt/ydb/bin/ydbd server --grpc-port 2136 --ic-port 19002 --mon-port 8766 --yaml-config  /opt/ydb/cfg/config.yaml --tenant /Root/testdb --node-broker &lt;node1.ydb.tech&gt;:2135 --node-broker &lt;node2.ydb.tech&gt;:2135 --node-broker &lt;node3.ydb.tech&gt;:2135
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LimitNOFILE=65536
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LimitCORE=0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LimitMEMLOCK=32212254720
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li>å¯åŠ¨<code>/Root/testdb</code><!-- raw HTML omitted -->æ•°æ®åº“çš„<code>YDB</code>åŠ¨æ€èŠ‚ç‚¹<!-- raw HTML omitted --><!-- raw HTML omitted -->åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šè¿è¡Œé¢å¤–çš„åŠ¨æ€èŠ‚ç‚¹ä»¥ç¡®ä¿æ•°æ®åº“å¯ç”¨æ€§<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo systemctl start ydbd-testdb</span></span></code></pre></div></blockquote>
<hr>
<h3 id="åˆå§‹å¸æˆ·è®¾ç½®">åˆå§‹å¸æˆ·è®¾ç½®</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->åœ¨é›†ç¾¤é…ç½®æ–‡ä»¶ä¸­å¯ç”¨äº†èº«ä»½éªŒè¯æ¨¡å¼ï¼Œåˆ™å¿…é¡»åœ¨ä½¿ç”¨<code>YDB</code>é›†ç¾¤ä¹‹å‰å®Œæˆåˆå§‹å¸æˆ·è®¾ç½®<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><code>YDB</code>é›†ç¾¤çš„åˆå§‹å®‰è£…ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª<code>root</code>å¯†ç ä¸ºç©ºçš„å¸æˆ·ï¼Œä»¥åŠ<a href="https://ydb.tech/en/docs/cluster/access" rel="external" target="_self">è®¿é—®ç®¡ç†</a>éƒ¨åˆ†ä¸­æè¿°çš„ä¸€ç»„æ ‡å‡†ç”¨æˆ·ç»„</p>
</li>
<li>
<p>è¦åœ¨åˆ›å»ºçš„<code>YDB</code>é›†ç¾¤ä¸­æ‰§è¡Œåˆå§‹å¸æˆ·è®¾ç½®ï¼Œ<a href="https://ydb.tech/en/docs/reference/ydb-cli/install" rel="external" target="_self">æŒ‰ç…§æ–‡æ¡£</a>ä¸­çš„æè¿°å®‰è£…<code>YDB CLI</code></p>
</li>
<li>
<p><code>&lt;node.ydb.tech&gt;</code>æ˜¯è¿è¡Œæ”¯æŒ<code>/Root/testdb</code>æ•°æ®åº“çš„åŠ¨æ€èŠ‚ç‚¹çš„æœåŠ¡å™¨çš„<code>FQDN</code></p>
</li>
<li>
<p>åœ¨è¿è¡Œå¸æˆ·åˆ›å»ºå’Œç»„åˆ†é…å‘½ä»¤æ—¶ï¼Œ<code>YDB CLI</code>å®¢æˆ·ç«¯å°†è¯·æ±‚<code>root</code>ç”¨æˆ·å¯†ç ã€‚<a href="https://ydb.tech/en/docs/reference/ydb-cli/profile/" rel="external" target="_self">æ‚¨å¯ä»¥æŒ‰ç…§<code>YDB CLI</code>æ–‡æ¡£</a>ä¸­çš„è¯´æ˜åˆ›å»ºè¿æ¥é…ç½®æ–‡ä»¶ï¼Œä»è€Œé¿å…è¾“å…¥å¤šä¸ªå¯†ç </p>
</li>
<li>
<p>å¦‚æœé›†ç¾¤ä¸­å¯ç”¨äº†<code>TLS</code>æµé‡ä¿æŠ¤ï¼Œè¯·ä½¿ç”¨å—ä¿æŠ¤çš„<code>grpcs</code>åè®®è€Œä¸æ˜¯<code>grpc</code>ä¸Šé¢å‘½ä»¤ä¸­çš„åè®®ï¼Œå¹¶åœ¨å‚æ•°ä¸­æŒ‡å®š<code>CA</code>è¯ä¹¦çš„è·¯å¾„<code>--ca-file</code>ï¼ˆæˆ–å°†å…¶ä¿å­˜åœ¨è¿æ¥é…ç½®æ–‡ä»¶ä¸­ï¼‰</p>
</li>
<li>
<p><code>root</code><!-- raw HTML omitted -->ä¸ºè´¦æˆ·è®¾ç½®å¯†ç <!-- raw HTML omitted --></p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpc://&lt;node.ydb.tech&gt;:2136 -d /Root/testdb --user root --no-password yql -s <span style="color:#e6db74">&#39;ALTER USER root PASSWORD &#34;passw0rd&#34;&#39;</span>  	<span style="color:#75715e"># å°†passw0rdå€¼æ›¿æ¢ä¸ºè‡ªå·±å®šä¹‰å¯†ç   </span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->åˆ›å»ºå…¶ä»–å¸æˆ·<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpc://&lt;node.ydb.tech&gt;:2136 -d /Root/testdb --user root yql -s <span style="color:#e6db74">&#39;CREATE USER user1 PASSWORD &#34;passw0rd&#34;&#39;</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é€šè¿‡å°†å®ƒä»¬åŒ…å«åœ¨é›†æˆç»„ä¸­æ¥è®¾ç½®å¸æˆ·æƒé™<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpc://&lt;node.ydb.tech&gt;:2136 -d /Root/testdb --user root yql -s <span style="color:#e6db74">&#39;ALTER GROUP `ADMINS` ADD USER user1&#39;</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="æµ‹è¯•åˆ›å»ºçš„æ•°æ®åº“">æµ‹è¯•åˆ›å»ºçš„æ•°æ®åº“</h3>
<ul>
<li>
<ol>
<li><a href="https://ydb.tech/en/docs/reference/ydb-cli/install" rel="external" target="_self">æŒ‰ç…§æ–‡æ¡£</a>ä¸­çš„æè¿°å®‰è£…<code>YDB CLI</code>ï¼Œåˆ›å»ºä¸€ä¸ª<code>test_table</code></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>&lt;node.ydb.tech&gt;</code>è¿è¡Œæ”¯æŒ<code>/Root/testdb</code>æ•°æ®åº“çš„åŠ¨æ€èŠ‚ç‚¹çš„æœåŠ¡å™¨çš„<code>FQDN</code>åœ¨å“ªé‡Œ</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpc://&lt;node.ydb.tech&gt;:2136 -d /Root/testdb scripting yql --script <span style="color:#e6db74">&#39;CREATE TABLE `testdir/test_table` (id Uint64, title Utf8, PRIMARY KEY (id));&#39;</span></span></span></code></pre></div><ul>
<li>é›†ç¾¤å¼€å¯äº†<code>TLS</code>æµé‡ä¿æŠ¤æˆ–ç”¨æˆ·è®¤è¯æ–¹å¼</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ydb -e grpcs://&lt;node.ydb.tech&gt;:2136 -d /Root/testdb --ca-file ydb-ca.crt --user root scripting yql --script <span style="color:#e6db74">&#39;CREATE TABLE `testdir/test_table` (id Uint64, title Utf8, PRIMARY KEY (id));&#39;</span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="../../../../js/clipboard.min.js?1719329890" defer></script>
    <script src="../../../../js/perfect-scrollbar.min.js?1719329890" defer></script>
    <script src="../../../../js/theme.js?1719329890" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://erge.blog/images/hero.png">
    <meta name="twitter:title" content="Gitlab :: Hugo Relearn Theme">
    <meta property="og:url" content="https://erge.blog/systems/linux/gitlab/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Gitlab :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://erge.blog/images/hero.png">
    <meta itemprop="name" content="Gitlab :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T00:25:46+08:00">
    <meta itemprop="dateModified" content="2024-06-13T00:25:46+08:00">
    <meta itemprop="image" content="https://erge.blog/images/hero.png">
    <title>Gitlab :: Hugo Relearn Theme</title>
    <link href="../../../images/favicon.ico?1720186644" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../css/fontawesome-all.min.css?1720186645" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1720186645" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1720186645" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1720186645" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1720186645" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1720186645" rel="stylesheet">
    <link href="../../../css/fonts.css?1720186645" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1720186645" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1720186645" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1720186645" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1720186645" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1720186645" rel="stylesheet">
    <link href="../../../css/print.css?1720186645" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1720186645" rel="stylesheet">
    <script src="../../../js/variant.js?1720186645"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/erge.blog';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../systems/linux/gitlab/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Gitlab</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/firewalld/use_firewalld/" title="Use_Firewalld (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/gitlab/use_gitrunner/" title="Use_Gitrunner (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="gitlab">Gitlab</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Gitlab</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="use_gitrunner">Use_Gitrunner</h1>

<h2 id="ç™»å½•å®‰è£…å¥½çš„gitlabé…ç½®git-runner">ç™»å½•å®‰è£…å¥½çš„<code>gitlab</code>é…ç½®<code>git-runner</code></h2>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->è·å–æ³¨å†Œä½¿ç”¨çš„<!-- raw HTML omitted --><code>token</code></li>
</ol>
</li>
</ul>
<blockquote>
<p><a href="#R-image-34f7ba1cbd833d9f95d505b45211b693" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-04-22_21-57-46.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-34f7ba1cbd833d9f95d505b45211b693"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-04-22_21-57-46.png"></a></p>
</blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->æ³¨å†Œ<!-- raw HTML omitted --><code>git-runner</code><!-- raw HTML omitted -->åˆ°å®‰è£…å¥½çš„<!-- raw HTML omitted --><code>gitlab</code><!-- raw HTML omitted -->ä»“åº“<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>2.1 <!-- raw HTML omitted -->å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><code>url</code><!-- raw HTML omitted -->ï¼šç§æœ‰<!-- raw HTML omitted --><code>gitlab</code><!-- raw HTML omitted -->çš„è·¯å¾„<!-- raw HTML omitted --></li>
<li><code>token</code><!-- raw HTML omitted -->ï¼šé¡¹ç›®çš„<!-- raw HTML omitted --><code>token</code><!-- raw HTML omitted -->ï¼Œç”¨äºå…³è”<!-- raw HTML omitted --><code>runner</code><!-- raw HTML omitted -->å’Œé¡¹ç›®<!-- raw HTML omitted --></li>
<li><code>name</code>ï¼š<code>runner</code><!-- raw HTML omitted -->çš„åå­—ï¼Œç”¨äºåŒºåˆ†<!-- raw HTML omitted --><code>runner</code></li>
<li><code>tags</code><!-- raw HTML omitted -->ï¼šç”¨äºåŒ¹é…ä»»åŠ¡<!-- raw HTML omitted --><code>jobs</code><!-- raw HTML omitted -->å’Œæ‰§è¡Œä»»åŠ¡çš„è®¾å¤‡<!-- raw HTML omitted --><code>runners</code></li>
<li><code>executor</code><!-- raw HTML omitted -->ï¼šæ‰§è¡Œç¯å¢ƒ<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-ci-multi-runner register  	<span style="color:#75715e"># æ‰§è¡Œæ³¨å†Œå‘½ä»¤ï¼Œ ç„¶åè¾“å…¥gitlabæµè§ˆå™¨åœ°å€ã€token</span>
</span></span><span style="display:flex;"><span>Enter the GitLab instance URL <span style="color:#f92672">(</span><span style="color:#66d9ef">for</span> example, https://gitlab.com/<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>http://192.168.35.130  	<span style="color:#75715e"># gitlabåœ°å€</span>
</span></span><span style="display:flex;"><span>Enter the registration token:
</span></span><span style="display:flex;"><span>LBsW7DfZdJN87yUAMVVh  	<span style="color:#75715e"># gitlabæŸ¥çœ‹åˆ°çš„token</span>
</span></span><span style="display:flex;"><span>Enter a description <span style="color:#66d9ef">for</span> the runner:
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>node-2-35.130<span style="color:#f92672">]</span>: node-2-35.130  	<span style="color:#75715e"># æœ€å¥½æ˜¯æœ¬æœºçš„hostnameã€ä¹Ÿå¯ä»¥ä¸ºç©º</span>
</span></span><span style="display:flex;"><span>Enter tags <span style="color:#66d9ef">for</span> the runner <span style="color:#f92672">(</span>comma-separated<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>  	<span style="color:#75715e"># åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è§¦å‘ï¼Œå¯ä»¥ç›´æ¥å›è½¦ï¼Œåé¢åœ¨æ³¨å†Œå¥½çš„git-runnerçš„Tagsä¸­æ·»åŠ ï¼Œ.gitlab-ci.ymlæ–‡ä»¶ä¸­å¼•ç”¨æ­¤tags</span>
</span></span><span style="display:flex;"><span>Enter optional maintenance note <span style="color:#66d9ef">for</span> the runner:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># æ²¡æ˜ç™½ä»€ä¹ˆæ„æ€ç›´æ¥å›è½¦</span>
</span></span><span style="display:flex;"><span>Registering runner... succeeded                     runner<span style="color:#f92672">=</span>LBsW7DfZ
</span></span><span style="display:flex;"><span>Enter an executor: docker+machine, docker, shell, parallels, ssh, virtualbox, docker-ssh+machine, kubernetes, custom, docker-ssh:
</span></span><span style="display:flex;"><span>shell  	<span style="color:#75715e"># é€‰æ‹©ä½¿ç”¨æ‰§è¡Œå™¨yumï¼Œrpmå®‰è£…ä¸€èˆ¬é€‰æ‹©shellç¯å¢ƒ</span>
</span></span><span style="display:flex;"><span>Runner registered successfully. Feel free to start it, but <span style="color:#66d9ef">if</span> it<span style="color:#960050;background-color:#1e0010">&#39;</span>s running already the config should be automatically reloaded!</span></span></code></pre></div><p><a href="#R-image-aa31629ac38a974e16278206d94813f3" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-04-22_22-50-14.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-aa31629ac38a974e16278206d94813f3"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-04-22_22-50-14.png"></a></p>
</blockquote>
</blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>gitlab-runner</code><!-- raw HTML omitted -->ç”¨æˆ·ç¯å¢ƒå˜é‡<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->æ‰§è¡Œå®Œæˆå<!-- raw HTML omitted --><code>gitlab-runner</code><!-- raw HTML omitted -->ä¼šè‡ªåŠ¨ä¿®æ”¹<!-- raw HTML omitted --><code>/etc/gitlab-runner/config.toml</code><!-- raw HTML omitted -->æ–‡ä»¶ï¼Œå¹¶é‡è½½<!-- raw HTML omitted --><code>daemon</code><!-- raw HTML omitted -->ç¨‹åº<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ su - gitlab-runner
</span></span><span style="display:flex;"><span>$ cp /etc/skel/.bashrc .  	<span style="color:#75715e"># æ‹·è´ç¯å¢ƒå˜é‡åˆ°å½“å‰ç”¨æˆ·å®¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>$ cp /etc/skel/.bash_profile .  	<span style="color:#75715e"># æ‹·è´ç¯å¢ƒå˜é‡åˆ°å½“å‰ç”¨æˆ·å®¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>$ cat /etc/gitlab-runner/config.toml  	<span style="color:#75715e"># å­˜æ”¾gitlab-runneré…ç½®çš„æ–‡ä»¶ï¼Œå¯ä»¥æœ‰å¤šä¸ªrunner</span>
</span></span><span style="display:flex;"><span>concurrent <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>check_interval <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>session_server<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  session_timeout <span style="color:#f92672">=</span> <span style="color:#ae81ff">1800</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[[</span>runners<span style="color:#f92672">]]</span>
</span></span><span style="display:flex;"><span>  name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;node-2-runner-1&#34;</span>
</span></span><span style="display:flex;"><span>  url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://192.168.35.130&#34;</span>
</span></span><span style="display:flex;"><span>  token <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;7Ganz-WjwqVwbiwuyPMu&#34;</span>
</span></span><span style="display:flex;"><span>  executor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;shell&#34;</span>
</span></span><span style="display:flex;"><span>  shell <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bash&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>runners.custom_build_dir<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>runners.cache<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">[</span>runners.cache.s3<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">[</span>runners.cache.gcs<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">[</span>runners.cache.azure<span style="color:#f92672">]</span></span></span></code></pre></div><ul>
<li><code>runner</code><!-- raw HTML omitted -->é…ç½®æ¨¡æ¿<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">listen_address = &#34;[::]:8090&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">concurrent = 16</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">check_interval = 1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">session_server]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">listen_address = &#34;[::]:8093&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">advertise_address = &#34;&lt;ip_or_domain&gt;:8093&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">session_timeout = 1800</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[<span style="color:#ae81ff">runners]]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">name = &#34;runner0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">limit = 8</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">url = &#34;https://gitlab.example.com/&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">token = &#34;sKj-SjZAxxxxxxxxxxxx&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">executor = &#34;shell&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">shell = &#34;bash&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[<span style="color:#ae81ff">runners]]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">name = &#34;runner1&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">url = &#34;https://gitlab.example.com/&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">token = &#34;z9y9YKkYxxxxxxxxxxxx&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">executor = &#34;shell&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">shell = &#34;bash&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[<span style="color:#ae81ff">runners]]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">name = &#34;runner2&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">url = &#34;https://gitlab.example.com/&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">token = &#34;wPKY9ovsxxxxxxxxxxxx&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">executor = &#34;shell&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">shell = &#34;bash&#34;</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->æ–°å»ºä¸€ä¸ªæµ‹è¯•ä»£ç åº“<!-- raw HTML omitted --><code>New Project</code></li>
</ol>
</li>
</ul>
<blockquote>
<p><a href="#R-image-a669ecb0ad6bb461e98b6c37e246cfdd" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-04-22_21-38-43.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a669ecb0ad6bb461e98b6c37e246cfdd"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-04-22_21-38-43.png"></a></p>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="use_gitlab">Use_Gitlab</h1>

<h2 id="ä¿®æ”¹gitlabé…ç½®æ–‡ä»¶">ä¿®æ”¹gitlabé…ç½®æ–‡ä»¶</h2>
<ul>
<li>
<ol>
<li><a href="https://blog.csdn.net/A___LEi/article/details/110476531" rel="external" target="_self"><code>GitLab â†’</code> æ­å»ºä¸­å¸¸é‡çš„é—®é¢˜ä¸æ—¥å¸¸ç»´æŠ¤</a></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/gitlab/gitlab.rb<span style="color:#e6db74">&lt;&lt;-EOF  	# ä¿®æ”¹gitlabé»˜è®¤ç«¯å£
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">external_url &#39;http://185.167.13.45:12580&#39;  	# ä¿®æ”¹é“¾æ¥åœ°å€ï¼Œåœ¨32è¡Œå·¦å³
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">unicorn[&#39;port&#39;] = &#39;9092&#39;  	# ä¿®æ”¹é»˜è®¤ç«¯å£ï¼Œåœ¨ 995è¡Œå·¦å³ï¼Œæ–°ç‰ˆæœ¬æ”¹ä¸ºï¼špuma[&#39;port&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>
<h2 id="å¤„ç†gitlabæŠ¥é”™">å¤„ç†gitlabæŠ¥é”™</h2>
<ul>
<li>
<ol>
<li><a href="https://blog.csdn.net/fishinhouse/article/details/105131917" rel="external" target="_self"><code>gitlab runner 500</code>é”™è¯¯è§£å†³</a></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker exec -it gitlab cat /var/log/gitlab/gitlab-rails/production.log
</span></span><span style="display:flex;"><span>$ gitlab-rails console
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>Ruby:         ruby 2.7.5p203 <span style="color:#f92672">(</span>2021-11-24 revision f69aeb8314<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>x86_64-linux<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>GitLab:       14.4.4 <span style="color:#f92672">(</span>838dea1cf23<span style="color:#f92672">)</span> FOSS
</span></span><span style="display:flex;"><span>GitLab Shell: 13.21.1
</span></span><span style="display:flex;"><span>PostgreSQL:   12.7
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>Loading production environment <span style="color:#f92672">(</span>Rails 6.1.4.1<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; ApplicationSetting.current.reset_runners_registration_token!
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; true
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:002:0&gt; exit
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ gitlab-rails dbconsole 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-- Clear project tokens<span style="color:#f92672">(</span>æ¸…é™¤é¡¹ç›®ä»¤ç‰Œ<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>UPDATE projects SET runners_token <span style="color:#f92672">=</span> null, runners_token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>-- Clear group tokens<span style="color:#f92672">(</span>æ¸…é™¤ç»„ä»¤ç‰Œ<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>UPDATE namespaces SET runners_token <span style="color:#f92672">=</span> null, runners_token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>-- Clear instance tokens<span style="color:#f92672">(</span>æ¸…é™¤å®ä¾‹ä»¤ç‰Œ<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>UPDATE application_settings SET runners_registration_token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>-- Clear key used <span style="color:#66d9ef">for</span> JWT authentication<span style="color:#f92672">(</span>ç”¨äº JWT èº«ä»½éªŒè¯çš„æ¸…é™¤å¯†é’¥<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-- This may break the $CI_JWT_TOKEN job variable:
</span></span><span style="display:flex;"><span>-- https://gitlab.com/gitlab-org/gitlab/-/issues/325965
</span></span><span style="display:flex;"><span>UPDATE application_settings SET encrypted_ci_jwt_signing_key <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>-- Clear runner tokens<span style="color:#f92672">(</span>æ¸…é™¤è·‘æ­¥è€…ä»¤ç‰Œ<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>UPDATE ci_runners SET token <span style="color:#f92672">=</span> null, token_encrypted <span style="color:#f92672">=</span> null;</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->å¤„ç†<!-- raw HTML omitted --><code>502</code><!-- raw HTML omitted -->æŠ¥é”™<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ vim /etc/gitlab/gitlab.rb  	<span style="color:#75715e"># ä¿®æ”¹gitlabé»˜è®¤ç«¯å£</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŠ¥é”™502,ä¸‹åˆ—å–æ¶ˆæ³¨é‡Š</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># unicorn[&#39;port&#39;] = 8088</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># postgresql[&#39;shared_buffers&#39;] = &#34;256MB&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># postgresql[&#39;max_connections&#39;] = 200</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç„¶åé‡å¯<!-- raw HTML omitted --><code>gitlab</code><!-- raw HTML omitted -->ä»¥åŠåšåˆå§‹åŒ–<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-ctl reconfigure  	<span style="color:#75715e"># åˆå§‹åŒ–gitlab</span>
</span></span><span style="display:flex;"><span>$ gitlab-ctl restart</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><code>gitlab 403 forbidden</code><!-- raw HTML omitted -->æŠ¥é”™è§£å†³<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><code>gitlab</code>ç¨³å®šè¿è¡Œæœ‰ä¸€å¹´å¤šäº†ï¼Œä»Šå¤©ç ”å‘éƒ¨å°ä¼™ä¼´è·‘æ¥è¯´ï¼Œä»–çš„<code>gitlab</code>è®¿é—®ä¸äº†ï¼Œä¸ä¸€ä¼šï¼Œè¿˜æœ‰å‡ ä½å°ä¼™ä¼´ä¹Ÿä¸€æ ·çš„åé¦ˆæŸ¥çœ‹ä»–ä»¬çš„æŠ¥é”™ï¼Œä¸º<code>403 forbidden</code>å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘è®¿é—®æ˜¯æ­£å¸¸çš„</li>
<li>æ’æŸ¥è¿‡ç¨‹</li>
<li>é¦–å…ˆä¸ŠæœåŠ¡å™¨ï¼ŒæŸ¥çœ‹å„æœåŠ¡å‡æ­£å¸¸<code>gitlab-ctl logs</code>æŸ¥çœ‹æ—¥å¿—ï¼Œå‘ç°æœ‰ä¸€ä¸ª<code>IP 172.17.2.254</code>è®¿é—®è¢«æ‹’ç»ï¼Œè€Œè¿™ä¸ª<code>IP</code>ï¼Œæ˜¯æ— çº¿ç½‘æ®µçš„ç½‘å…³ã€‚ç¬é—´æ˜ç™½äº†ï¼Œä¸èƒ½ç”¨çš„å…¨æ˜¯ç”¨æ— çº¿ä¸Šç½‘çš„åŒå­¦ï¼Œåªè¦æ˜¯ç»è¿‡<code>2.254</code>çš„éƒ½ä¸èƒ½ç”¨ç»§ç»­æŸ¥çœ‹æ—¥å¿—ï¼Œæœ‰ä¸ª<code>xiaoxiao</code>ç”¨æˆ·ï¼Œæœ‰è¿‡å‡ æ¬¡ç™»é™†å¤±è´¥ï¼Œä¹‹åå°±å…¨éƒ½æ˜¯<code>forbidden</code>çœ‹æ¥<code>gitlab</code>æ˜¯æœ‰é˜²çˆ†ç ´æœºåˆ¶ï¼ŒæŸ¥çœ‹é…ç½®æ–‡æ¡£<code>gitlab.yml</code>ï¼Œæœç„¶æœ‰<code>rack_attack</code>çš„é…ç½®ï¼Œå¦‚å›¾ï¼š</li>
</ul>
<p><a href="#R-image-9e1dc97dd043ea2a054e9123a4835683" class="lightbox-link"><img class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-10-11_20-13-40.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9e1dc97dd043ea2a054e9123a4835683"><img class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/Snipaste_2022-10-11_20-13-40.png"></a></p>
<ul>
<li>è§£å†³æ–¹æ³•ï¼Œè¿›å…¥<code>redis</code>ï¼Œåˆ é™¤è¢«å¢™çš„<code>IP</code>åœ°å€å³å¯ä»¥ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /opt/gitlab/embedded/bin/redis-cli -s /var/opt/gitlab/redis/redis.socket keys <span style="color:#e6db74">&#39;*&#39;</span> | grep <span style="color:#e6db74">&#39;rack::attack&#39;</span> | xargs /opt/gitlab/embedded/bin/redis-cli -s /var/opt/gitlab/redis/redis.socket DEL
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ‰§è¡Œè¿™å‘½ä»¤ ä½¿ç”¨æ— çº¿è¿æ¥gitlabçš„ç”µè„‘æ¢å¤æ­£å¸¸ã€‚</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><code>postfix</code><!-- raw HTML omitted -->å¯åŠ¨æŠ¥é”™<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>ä¿®æ”¹<code>/etc/postfix/main.cf</code>ä¸­ï¼š<code>#myhostname = host.domain.tld </code></li>
<li>å…¶ä¸­ï¼š<code>host.domain.tld</code>å¿…é¡»æ˜¯ï¼š<code>xxx.xxxx.xxx</code></li>
</ul>
</blockquote>
<ul>
<li>
<ol start="5">
<li><code>gitlab8.0</code><!-- raw HTML omitted -->ç‰ˆæœ¬æ±‰åŒ–<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å®‰è£…æ‰©å±•æ’ä»¶ä»¥åŠä¸‹è½½æ±‰åŒ–ç‰ˆæœ¬åº“<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum -y install patch git
</span></span><span style="display:flex;"><span><span style="color:#75715e"># git clone https://gitlab.com/xhang/gitlab.git  	# æ±‰åŒ–ç‰ˆæœ¬åº“</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># git diff v10.0.2 v10.0.2-zh &gt; ../10.0.2-zh.diff  	# ç‰ˆæœ¬å¯¹æ¯”</span>
</span></span><span style="display:flex;"><span>$ git clone https://gitlab.com/larryli/gitlab.git</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é…ç½®æ±‰åŒ–æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd gitlab
</span></span><span style="display:flex;"><span>$ git diff origin/8-0-stable..origin/8-0-zh &gt; patch.diff  	<span style="color:#75715e"># ç”Ÿæˆ:patch.diffæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>$ patch -d /opt/gitlab/embedded/service/gitlab-rails -p1 &lt; /tmp/patch.diff  	<span style="color:#75715e"># æŠŠ:patch.diffæ–‡ä»¶å®‰è£…åˆ°gitlabå®‰è£…ç›®å½•ä¸‹</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->é‡å¯<!-- raw HTML omitted --><code>gitlab</code><!-- raw HTML omitted -->ä»¥åŠåšåˆå§‹åŒ–<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-ctl reconfigure
</span></span><span style="display:flex;"><span>$ gitlab-ctl restart  	<span style="color:#75715e"># é‡å¯gitlab</span></span></span></code></pre></div><ul>
<li>
<p><!-- raw HTML omitted -->åœ¨æ‰“åŒ…è¡¥ä¸<!-- raw HTML omitted --><code>patch -d /opt/gitlab/embedded/service/gitlab-rails -p1 &lt; â€¦/v10.8.4-zh.diff</code>
<!-- raw HTML omitted -->åå¯èƒ½ä¼šå‡ºæ¥è¯¥æƒ…å†µï¼Œä¸€è·¯å›è½¦è·³è¿‡å³å¯<!-- raw HTML omitted --></p>
<p><a href="#R-image-65c697ad0b42cecc8e95cbdd8e59bc1c" class="lightbox-link"><img alt="æ±‰åŒ–" class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/languge-zh.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-65c697ad0b42cecc8e95cbdd8e59bc1c"><img alt="æ±‰åŒ–" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/languge-zh.png"></a></p>
<p><a href="#R-image-3590222c8368595a973a10709dc7d4a5" class="lightbox-link"><img alt="æ±‰åŒ–2" class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/languge-zh-1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3590222c8368595a973a10709dc7d4a5"><img alt="æ±‰åŒ–2" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/languge-zh-1.png"></a></p>
</li>
</ul>
</blockquote>
<hr>
<h2 id="ä¿®æ”¹gitlabç®¡ç†å‘˜å¯†ç çš„ä¸‰ç§æ–¹å¼">ä¿®æ”¹<code>gitlab</code>ç®¡ç†å‘˜å¯†ç çš„ä¸‰ç§æ–¹å¼</h2>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->æ–¹æ³•ä¸€ï¼Œä½¿ç”¨<!-- raw HTML omitted --><code>id</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; user <span style="color:#f92672">=</span> User.where<span style="color:#f92672">(</span>id:<span style="color:#f92672">[</span>user<span style="color:#960050;background-color:#1e0010">&#39;</span>s register index<span style="color:#f92672">])</span>.first</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->æ–¹æ³•äºŒï¼Œä½¿ç”¨é‚®ç®±<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; user <span style="color:#f92672">=</span> User.where<span style="color:#f92672">(</span>email:<span style="color:#f92672">[</span>user<span style="color:#960050;background-color:#1e0010">&#39;</span>s register email<span style="color:#f92672">])</span>.first</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->æ–¹æ³•ä¸‰ï¼Œä½¿ç”¨ç”¨æˆ·å<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; user <span style="color:#f92672">=</span> User.where<span style="color:#f92672">(</span>name:<span style="color:#f92672">[</span>user<span style="color:#960050;background-color:#1e0010">&#39;</span>s register name<span style="color:#f92672">])</span>.first</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->æ‰§è¡Œå‘½ä»¤è¿›å…¥æ§åˆ¶å°ï¼š<!-- raw HTML omitted --><code>gitlab-rails console production</code><!-- raw HTML omitted -->ï¼Œå¦‚æœæŠ¥é”™æ‰§è¡Œï¼š<!-- raw HTML omitted --><code>gitlab-rails console -e production</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-rails console -e production
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>GitLab:       12.8.6 <span style="color:#f92672">(</span>5fc76a64537<span style="color:#f92672">)</span> FOSS
</span></span><span style="display:flex;"><span>GitLab Shell: 11.0.0
</span></span><span style="display:flex;"><span>PostgreSQL:   10.12
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>Loading production environment <span style="color:#f92672">(</span>Rails 6.0.2<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; user <span style="color:#f92672">=</span> User.where<span style="color:#f92672">(</span>id: 1<span style="color:#f92672">)</span>.first
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; <span style="color:#75715e">#&lt;User id:1 @root&gt;</span>
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:002:0&gt; user.password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;12345678&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;12345678&#34;</span>
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:003:0&gt; user.password_confirmation <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;12345678&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; <span style="color:#e6db74">&#34;12345678&#34;</span>
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:004:0&gt; user.save!
</span></span><span style="display:flex;"><span>Enqueued ActionMailer::DeliveryJob <span style="color:#f92672">(</span>Job ID: b6aca58a-cfde-4890-aa22-a8f491290c96<span style="color:#f92672">)</span> to Sidekiq<span style="color:#f92672">(</span>mailers<span style="color:#f92672">)</span> with arguments: <span style="color:#e6db74">&#34;DeviseMailer&#34;</span>, <span style="color:#e6db74">&#34;password_change&#34;</span>, <span style="color:#e6db74">&#34;deliver_now&#34;</span>, <span style="color:#75715e">#&lt;GlobalID:0x00007f79cb5f5298 @uri=#&lt;URI::GID gid://gitlab/User/1&gt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; true
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:005:0&gt; exit</span></span></code></pre></div></blockquote>
<hr>
<h2 id="gitlabé…ç½®é‚®ç®±"><code>Gitlab</code>é…ç½®é‚®ç®±</h2>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ vim /etc/gitlab/gitlab.ra
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_enable&#39;] = true</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_address&#39;] = &#34;smtp.server&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_port&#39;] = 465</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_user_name&#39;] = &#34;smtp user&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_password&#39;] = &#34;smtp password&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_domain&#39;] = &#34;example.com&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_authentication&#39;] = &#34;login&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_enable_starttls_auto&#39;] = true</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gitlab_rails[&#39;smtp_tls&#39;] = false</span></span></span></code></pre></div><p><a href="#R-image-26d3ca79f949c9702335092d2a3a25c1" class="lightbox-link"><img alt="configure-git-email" class="border lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/configure-git-email.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-26d3ca79f949c9702335092d2a3a25c1"><img alt="configure-git-email" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/usermice/images/master/Gitlab_Server/configure-git-email.png"></a></p>
</blockquote>
<hr>
<h2 id="gitlabç‰ˆæœ¬å‡çº§"><code>Gitlab</code>ç‰ˆæœ¬å‡çº§</h2>
<blockquote>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://docs.gitlab.com/ee/update/index.html#upgrade-paths" rel="external" target="_self"><code>Gitlab</code>å‡çº§</a></td>
<td>å‡çº§åšå®¢</td>
</tr>
<tr>
<td><a href="https://zhuanlan.zhihu.com/p/352342116" rel="external" target="_self"><code>Gitlab</code>ç‰ˆæœ¬å‡çº§</a></td>
<td>å‡çº§åšå®¢</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-9.5.10
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-10.8.7
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-11.11.8
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-12.0.12
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-12.1.17
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-12.10.14
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-13.0.14
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-13.1.11
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-13.8.8
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-13.12.15
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-14.0.12
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-14.1.1  	<span style="color:#75715e"># 14.1.1ä¸ºè¿‡åº¦å¿…é¡»ç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-14.2.1  	<span style="color:#75715e"># 14.2.1ä¸ºè¿‡åº¦å¿…é¡»ç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-14.3.6
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-14.9.5
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-14.10.Z
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-15.0.Z
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-15.1.Z
</span></span><span style="display:flex;"><span>$ yum install -y gitlab-ce-15.4.0</span></span></code></pre></div></blockquote>
<hr>
<h2 id="gitlabå¤‡ä»½è¿˜åŸ"><code>Gitlab</code>å¤‡ä»½è¿˜åŸ</h2>
<blockquote>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.jianshu.com/p/a2600f8dffc2" rel="external" target="_self"><code>Gitlab</code>å¤‡ä»½è¿˜åŸ</a></td>
<td>å¤‡ä»½è¿˜åŸåšå®¢</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><!-- raw HTML omitted -->åˆ›å»ºå¤‡ä»½ï¼Œåˆ›å»ºåä¼šåœ¨ï¼š<!-- raw HTML omitted --><code>/var/opt/gitlab/backups/</code><!-- raw HTML omitted -->ç›®å½•ä¸‹ç”Ÿæˆå¤‡ä»½æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-rake gitlab:backup:create</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->å¤‡ä»½è¿˜åŸå‰å…ˆåœæ­¢ç›¸å…³æœåŠ¡<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-ctl stop unicorn  	<span style="color:#75715e"># docker exec -it gitlab gitlab-ctl stop unicorn</span>
</span></span><span style="display:flex;"><span>$ gitlab-ctl stop sidekiq  	<span style="color:#75715e"># docker exec -it gitlab gitlab-ctl stop sidekiq</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä»é»˜è®¤å¤‡ä»½æ¢å¤ï¼Œä»¥åŠ<!-- raw HTML omitted --><code>backups</code><!-- raw HTML omitted -->ç›®å½•ä¸‹æœ‰å¤šä¸ªå¤‡ä»½æ–‡ä»¶æ—¶ï¼ŒæŒ‡å®šæ—¶é—´æˆ³æ¢å¤<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-rake gitlab:backup:restore BACKUP<span style="color:#f92672">=</span><span style="color:#ae81ff">1500809139</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä»é»˜è®¤å¤‡ä»½æ¢å¤ï¼ˆbackupsç›®å½•ä¸‹åªæœ‰ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶æ—¶ï¼‰</span>
</span></span><span style="display:flex;"><span>$ gitlab-rake gitlab:backup:restore  	<span style="color:#75715e"># docker exec -it gitlab gitlab-rake gitlab:backup:restore</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¡®è®¤<!-- raw HTML omitted --><code>ï¼šgitlab-secrets.json</code><!-- raw HTML omitted -->æ–‡ä»¶æ˜¯å¦æœ‰åšå¤‡ä»½ï¼Œå¦‚æœå¿˜è®°åšå¤‡ä»½éœ€è¦åšæ¸…ç©ºå¤„ç†<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-rails dbconsole
</span></span><span style="display:flex;"><span>$ gitlab-psql -d gitlabhq_production
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç­‰å¾…å‡ åˆ†é’Ÿï¼Œä¼šè¿›å…¥äº¤äº’ç•Œé¢ï¼Œè¿›å…¥åè¾“å…¥å¦‚ä¸‹å‘½ä»¤</span>
</span></span><span style="display:flex;"><span>$ SELECT * FROM public.<span style="color:#e6db74">&#34;ci_group_variables&#34;</span>;
</span></span><span style="display:flex;"><span>$ SELECT * FROM public.<span style="color:#e6db74">&#34;ci_variables&#34;</span>;
</span></span><span style="display:flex;"><span>$ DELETE FROM ci_group_variables;
</span></span><span style="display:flex;"><span>$ DELETE FROM ci_variables;
</span></span><span style="display:flex;"><span>$ UPDATE projects SET runners_token <span style="color:#f92672">=</span> null, runners_token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>$ UPDATE namespaces SET runners_token <span style="color:#f92672">=</span> null, runners_token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>$ UPDATE application_settings SET runners_registration_token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>$ UPDATE application_settings SET encrypted_ci_jwt_signing_key <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>$ UPDATE ci_runners SET token <span style="color:#f92672">=</span> null, token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>$ UPDATE ci_builds SET token <span style="color:#f92672">=</span> null, token_encrypted <span style="color:#f92672">=</span> null;
</span></span><span style="display:flex;"><span>$ TRUNCATE web_hooks CASCADE;</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->è¿˜åŸåå¯åŠ¨<!-- raw HTML omitted --><code>Gitlab</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-ctl start  	<span style="color:#75715e"># docker exec -it gitlab gitlab-ctl start</span>
</span></span><span style="display:flex;"><span>$ gitlab-ctl reconfigure  	<span style="color:#75715e"># docker exec -it gitlab gitlab-ctl reconfigure</span></span></span></code></pre></div></blockquote>
<hr>
<h2 id="gitlabæ¢å¤æ•°æ®æŠ¥é”™è§£å†³æ–¹æ³•"><code>Gitlab</code>æ¢å¤æ•°æ®æŠ¥é”™è§£å†³æ–¹æ³•</h2>
<blockquote>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.jianshu.com/p/09a2b0c25ecd" rel="external" target="_self"><code>Gitlab</code>æ¢å¤æ•°æ®æŠ¥é”™è§£å†³æ–¹æ³•</a></td>
<td>åšå®¢åœ°å€</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>postgresql</code><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ vim /var/opt/gitlab/postgresql/data/postgresql.conf
</span></span><span style="display:flex;"><span>listen_addresses <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;*&#39;</span>  	<span style="color:#75715e"># ä¸­æ·»åŠ *ç¬¦å·</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æœ€ä¸‹é¢æ–°å¢ä¸¤è¡Œ</span>
</span></span><span style="display:flex;"><span>$ vim /var/opt/gitlab/postgresql/data/pg_hba.conf
</span></span><span style="display:flex;"><span>local   all         all                               trust
</span></span><span style="display:flex;"><span>host    all         all                               127.0.0.1/32 trust
</span></span><span style="display:flex;"><span>$ gitlab-ctl restart</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>gitlab</code><!-- raw HTML omitted -->è´¦å·ä¸ºè¶…çº§ç”¨æˆ·<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ su - gitlab-psql
</span></span><span style="display:flex;"><span>Last login: Fri Dec <span style="color:#ae81ff">24</span> 17:35:01 CST <span style="color:#ae81ff">2021</span> on pts/0
</span></span><span style="display:flex;"><span>-sh-4.2$ /opt/gitlab/embedded/bin/psql -h 127.0.0.1 gitlabhq_production
</span></span><span style="display:flex;"><span>psql <span style="color:#f92672">(</span>12.7<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>SSL connection <span style="color:#f92672">(</span>protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: 256, compression: off<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Type <span style="color:#e6db74">&#34;help&#34;</span> <span style="color:#66d9ef">for</span> help.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gitlabhq_production<span style="color:#f92672">=</span><span style="color:#75715e"># ALTER USER gitlab WITH SUPERUSER;</span>
</span></span><span style="display:flex;"><span>ALTER ROLE
</span></span><span style="display:flex;"><span>gitlabhq_production<span style="color:#f92672">=</span><span style="color:#75715e"># \q</span></span></span></code></pre></div></blockquote>
<hr>
<h2 id="é…ç½®gitlabçš„nginxæ˜ å°„ä»¥åŠç™½åå•">é…ç½®<code>Gitlab</code>çš„<code>Nginx</code>æ˜ å°„ä»¥åŠç™½åå•</h2>
<blockquote>
<ul>
<li><code>Gitlab</code><!-- raw HTML omitted -->ç™½åå•<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/gitlab/gitlab.rb<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">gitlab_rails[&#39;rack_attack_git_basic_auth&#39;] = {  	# 670 è¡Œå·¦å³
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   #&#39;enabled&#39; =&gt; true,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   &#39;enabled&#39; =&gt; false,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   &#39;ip_whitelist&#39; =&gt; [&#34;IP&#34;,&#34;127.0.0.1&#34;],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   &#39;maxretry&#39; =&gt; 10,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   &#39;findtime&#39; =&gt; 60,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   &#39;bantime&#39; =&gt; 86400
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹å±•ç¤º<!-- raw HTML omitted --><code>Gitlab UI</code><!-- raw HTML omitted -->ç«¯çš„<!-- raw HTML omitted --><code>SSH</code><!-- raw HTML omitted -->ç«¯å£<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/opt/gitlab/gitlab.rb<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 18082  	# 651 è¡Œå·¦å³ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="use_git_command">Use_Git_Command</h1>

<h2 id="gitå‘½ä»¤"><code>git</code>å‘½ä»¤</h2>
<blockquote>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://git-scm.com/docs/git-submodule" rel="external" target="_self"><code>Git</code>å®˜ç½‘</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://mirrors.edge.kernel.org/pub/software/scm/git/" rel="external" target="_self"><code>Git</code>å‘½ä»¤å·¥å…·ä¸‹è½½åœ°å€</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://iphysresearch.github.io/blog/post/programing/git/git_submodule/" rel="external" target="_self"><code>Git: submodule</code>å­æ¨¡å—ç®€æ˜æ•™ç¨‹</a></td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->åˆå§‹é…ç½®ã€è·å–ä»“åº“<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><!-- raw HTML omitted -->é…ç½®ç¯å¢ƒæäº¤æ‰€ç”¨è´¦æˆ·ä»¥åŠé‚®ç®±<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git config --global user.name <span style="color:#e6db74">&#34;name&#34;</span>
</span></span><span style="display:flex;"><span>$ git config --global user.emamil <span style="color:#e6db74">&#34;name@gmail.com&#34;</span>
</span></span><span style="display:flex;"><span>$ git config --global core.sshCommand <span style="color:#e6db74">&#34;ssh -i ~/.ssh/id_rsa&#34;</span>  	<span style="color:#75715e"># é…ç½®å¯†é’¥</span></span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->å…‹éš†ç°æœ‰è¿œç¨‹ä»£ç åˆ°æœ¬åœ°å¼€å‘<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git clone https://github.com/zabbix/zabbix.git
</span></span><span style="display:flex;"><span>$ git clone --recursive git@github.com:username/service.git  	<span style="color:#75715e"># å…‹éš†å¸¦æœ‰å­æ¨¡å—ä»“åº“</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åˆ é™¤å­æ¨¡å—</span>
</span></span><span style="display:flex;"><span>$ vim .gitmodules  	<span style="color:#75715e"># åˆ é™¤æ–‡ä»¶å†…å­æ¨¡å—é…ç½®</span>
</span></span><span style="display:flex;"><span>$ vim .git/config  	<span style="color:#75715e"># åˆ é™¤æ–‡ä»¶å†…å­æ¨¡å—é…ç½®</span>
</span></span><span style="display:flex;"><span>$ rm -rf .git/module/*  	<span style="color:#75715e"># åˆ é™¤å­æ¨¡å—ä¸‹ç›®å½•æ–‡ä»¶</span></span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->æœ¬åœ°åˆ›å»ºä»“åº“<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git init  	<span style="color:#75715e"># åˆå§‹åŒ–gitæœ¬åœ°ä»“åº“ï¼Œåˆå§‹åŒ–ååœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ª.gitç›®å½•</span>
</span></span><span style="display:flex;"><span>$ git add .  	<span style="color:#75715e"># æŠŠä¿®æ”¹æˆ–è€…æ·»åŠ æ–‡ä»¶åˆ°ç´¢å¼•ä¸­ï¼š-Aï¼šå‚æ•°ä»£è¡¨æ‰€æœ‰</span>
</span></span><span style="display:flex;"><span>$ git commit -m <span style="color:#e6db74">&#34;æ¸…é™¤ç¼“å­˜&#34;</span>  	<span style="color:#75715e"># å£°æ˜æœ¬æ¬¡ä¿®æ”¹æˆ–æ·»åŠ å†…å®¹å¹¶ä¸”äº¤åˆ°æœ¬åœ°ä»“åº“</span></span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->æ‹‰å–æ¨é€ä»“åº“<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git pull -u origin master  	<span style="color:#75715e"># æ‹‰å–masteråˆ†æ”¯åˆ°æœ¬åœ°-f:å¼ºåˆ¶æ‹‰å–ï¼Œ</span>
</span></span><span style="display:flex;"><span>$ git push -u origin master  	<span style="color:#75715e"># æ¨é€masteråˆ†æ”¯åˆ°è¿œç¨‹</span></span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->æäº¤æ—¶è½¬æ¢ä¸º<!-- raw HTML omitted --><code>LF</code><!-- raw HTML omitted -->æ£€å‡ºæ—¶ä¸è½¬æ¢<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git config --global core.autocrlf input</span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->åˆ‡æ¢ã€æŸ¥çœ‹ã€åˆå¹¶åˆ†æ”¯<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git fetch  	<span style="color:#75715e"># æŸ¥çœ‹çº¿ä¸Šåˆ†æ”¯,--all:æŸ¥çœ‹çº¿ä¸Šæ‰€æœ‰åˆ†æ”¯</span>
</span></span><span style="display:flex;"><span>$ git branch -a  	<span style="color:#75715e"># -aï¼šæŸ¥çœ‹æœ¬åœ°å½“å‰åˆ†æ”¯ã€devï¼šåˆ›å»ºdevåˆ†æ”¯ã€-dï¼šåˆ é™¤åˆ†æ”¯ã€-Dï¼šå¼ºåˆ¶åˆ é™¤</span>
</span></span><span style="display:flex;"><span>$ git checkout dev  	<span style="color:#75715e"># åˆ‡æ¢åˆ†æ”¯ï¼Œdevï¼šåˆ‡æ¢åˆ°devåˆ†æ”¯</span>
</span></span><span style="display:flex;"><span>$ git checkout .  	<span style="color:#75715e"># æ”¾å¼ƒæœ¬åœ°æ‰€æœ‰ä¿®æ”¹</span>
</span></span><span style="display:flex;"><span>$ git merge -m <span style="color:#e6db74">&#39;åˆå¹¶devåˆ†æ”¯åˆ°master&#39;</span> dev  	<span style="color:#75715e"># å…ˆåˆ‡æ¢åˆ°masteråˆ†æ”¯</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŸ¥çœ‹å½“å‰ç‰ˆåˆ†æ”¯</span>
</span></span><span style="display:flex;"><span>$ git rev-parse --abbrev-ref HEAD
</span></span><span style="display:flex;"><span>$ git name-rev --name-only HEAD
</span></span><span style="display:flex;"><span>$ git branch --show-current  	<span style="color:#75715e"># æ­¤æ–¹å¼éœ€è¦git 2.22ç‰ˆæœ¬æˆ–è€…ä»¥ä¸Š</span></span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->å›é€€ç‰ˆæœ¬<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git reset --hard  	<span style="color:#75715e"># å›é€€ç‰ˆæœ¬ã€å¯é€‰æ‹©ç‰ˆæœ¬åˆ†æ”¯å·å›é€€</span>
</span></span><span style="display:flex;"><span>$ git reset --hard HEAD~3  	<span style="color:#75715e"># è§£å†³ä»£ç å†²çª</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git rm -r --cached .  <span style="color:#75715e"># æ¸…æ¥šæœ¬åœ°ç¼“å­˜</span></span></span></code></pre></div></li>
<li>
<p>1.8 <!-- raw HTML omitted -->æŸ¥çœ‹<!-- raw HTML omitted --><code>git</code><!-- raw HTML omitted -->ä»“åº“çŠ¶æ€ä»¥åŠæ—¥å¿—<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git status  	<span style="color:#75715e"># å‘½ä»¤æŸ¥çœ‹å½“å‰gitä»“åº“çš„çŠ¶æ€</span>
</span></span><span style="display:flex;"><span>$ git log -5  	<span style="color:#75715e"># æŸ¥çœ‹æœ€è¿‘äº”æ¬¡æ—¥å¿—ï¼Œv2.5.. Makefile fs/:æ‰¾å‡ºæ‰€æœ‰ä»&#34;v2.5&#34;å¼€å§‹åœ¨fsç›®å½•ä¸‹çš„æ‰€æœ‰Makefileçš„ä¿®æ”¹</span>
</span></span><span style="display:flex;"><span>$ git log --stat  	<span style="color:#75715e"># æ˜¾ç¤ºåœ¨æ¯ä¸ªæäº¤(commit)ä¸­å“ªäº›æ–‡ä»¶è¢«ä¿®æ”¹, è¿™äº›æ–‡ä»¶åˆ†åˆ«æ·»åŠ æˆ–åˆ é™¤å¤šå°‘è¡Œå†…å®¹</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git diff --cached  	<span style="color:#75715e"># diffæ¯”è¾ƒé€‰é¡¹å†åŠ ä¸Š --cachedå‚æ•°ï¼Œçœ‹çœ‹ç¼“å­˜åŒºä¸­å“ªäº›æ–‡ä»¶è¢«ä¿®æ”¹</span>
</span></span><span style="display:flex;"><span>$ git diff --name-only --diff-filter<span style="color:#f92672">=</span>ACMRT old_commit new_commit
</span></span><span style="display:flex;"><span>$ git diff <span style="color:#e6db74">${</span>current_id<span style="color:#e6db74">}</span> <span style="color:#e6db74">${</span>commit_id<span style="color:#e6db74">}</span> --name-only | grep dist_prod
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git rev-parse HEAD  	<span style="color:#75715e"># è·å–å½“å‰ç‰ˆæœ¬commit idï¼Œå‚æ•°ï¼š --short</span>
</span></span><span style="display:flex;"><span>$ git rev-list HEAD -2  	<span style="color:#75715e"># æŸ¥çœ‹å†å²commit idï¼Œ-2ï¼šä»£è¡¨æŸ¥çœ‹æœ€è¿‘å‡ æ¬¡</span>
</span></span><span style="display:flex;"><span>$ git log --pretty<span style="color:#f92672">=</span>oneline  	<span style="color:#75715e"># æ ¼å¼åŒ–æ—¥å¿—è¾“å‡ºã€‚--prettyå‚æ•°å¯ä»¥ä½¿ç”¨è‹¥å¹²è¡¨ç°æ ¼å¼ï¼Œ</span>
</span></span><span style="display:flex;"><span>								<span style="color:#75715e"># å¦‚onelineï¼Œ--pretty=shortï¼Œ</span>
</span></span><span style="display:flex;"><span>								<span style="color:#75715e"># ä¹Ÿå¯ç”¨medium,full,fuller,email æˆ– rawï¼Œ</span>
</span></span><span style="display:flex;"><span>								<span style="color:#75715e"># ä¹Ÿå¯ä»¥ç”¨--pretty=formatå‚æ•°å®šä¹‰æ ¼å¼ï¼Œ</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git log --graph --pretty<span style="color:#f92672">=</span>oneline  	<span style="color:#75715e"># --graph é€‰é¡¹ï¼Œ</span>
</span></span><span style="display:flex;"><span>							<span style="color:#75715e"># å¯ä»¥å¯è§†åŒ–ä½ çš„æäº¤å›¾(commit graph)ï¼Œ</span>
</span></span><span style="display:flex;"><span>							<span style="color:#75715e"># ä¼šç”¨ASCIIå­—ç¬¦æ¥ç”»å‡ºä¸€ä¸ªå¾ˆæ¼‚äº®çš„æäº¤å†å²(commit history)çº¿ï¼š</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git log --pretty<span style="color:#f92672">=</span>%s 3ff4f298f7a13ab0150e369f4bbcf43a553c05a5 -1  	<span style="color:#75715e"># è·å–å˜æ›´æ–‡ä»¶æ³¨é‡Šä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æµ‹è¯•ç½‘ç»œ git ssh</span>
</span></span><span style="display:flex;"><span>$ ssh -T git.gitlab.com</span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->ç¼“å­˜ä¿å­˜å‘½ä»¤<!-- raw HTML omitted --><a href="https://www.jianshu.com/p/1c7ecc8d3dfb" rel="external" target="_self"><code>git-stash</code>ç”¨æ³•å°ç»“</a></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git stash save <span style="color:#e6db74">&#34;test-cmd-stash&#34;</span>
</span></span><span style="display:flex;"><span>$ git stash pop</span></span></code></pre></div></li>
</ul>
</blockquote>
<hr>
<h3 id="å¤„ç†gitæ–‡ä»¶è¿‡å¤§">å¤„ç†<code>git</code>æ–‡ä»¶è¿‡å¤§</h3>
<ul>
<li>
<ol>
<li><a href="https://www.zhihu.com/question/29769130" rel="external" target="_self">è§£å†³<code>git</code>æäº¤æ¬¡æ•°è¿‡å¤šå¯¼è‡´æ–‡ä»¶è¿‡å¤§</a></li>
</ol>
</li>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->è¿è¡Œ <code>gc</code> ï¼Œç”Ÿæˆ <code>pack</code> æ–‡ä»¶ï¼ˆåé¢çš„ <code>--prune=now</code> è¡¨ç¤ºå¯¹ä¹‹å‰çš„æ‰€æœ‰æäº¤åšä¿®å‰ªï¼Œæœ‰çš„æ—¶å€™ä»…ä»… <code>gc</code> ä¸€ä¸‹<code>.git</code> æ–‡ä»¶å°±ä¼šå°å¾ˆå¤šï¼‰<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git gc --prune<span style="color:#f92672">=</span>now</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->æ‰¾å‡ºæœ€å¤§çš„ä¸‰ä¸ªæ–‡ä»¶<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git verify-pack -v .git/objects/pack/*.idx | sort -k <span style="color:#ae81ff">3</span> -n | tail -3
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç¤ºä¾‹è¾“å‡ºï¼š</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1debc758cf31a649c2fc5b0c59ea1b7f01416636 blob   4925660 3655422 14351</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># c43a8da9476f97e84b52e0b34034f8c2d93b4d90 blob   154188651 152549294 12546842</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2272096493d061489349e0a312df00dcd0ec19a2 blob   155414465 153754005 165096136</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="4">
<li><!-- raw HTML omitted -->æŸ¥çœ‹é‚£äº›å¤§æ–‡ä»¶ç©¶ç«Ÿæ˜¯è°ï¼ˆ<code>c43a8da</code> æ˜¯ä¸Šé¢å¤§æ–‡ä»¶çš„<code>hash</code>ç ï¼‰<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git rev-list --objects --all | grep c43a8da
</span></span><span style="display:flex;"><span><span style="color:#75715e"># c43a8da9476f97e84b52e0b34034f8c2d93b4d90 data/bigfile</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="5">
<li><!-- raw HTML omitted -->ç§»é™¤å¯¹è¯¥æ–‡ä»¶çš„å¼•ç”¨ï¼ˆä¹Ÿå°±æ˜¯ <code>data/bigfile</code>ï¼‰<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git filter-branch --force --index-filter <span style="color:#e6db74">&#34;git rm --cached --ignore-unmatch &#39;data/bigfile&#39;&#34;</span>  --prune-empty --tag-name-filter cat -- --all</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="6">
<li><!-- raw HTML omitted -->è¿›è¡Œ <code>repack</code><!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git <span style="color:#66d9ef">for</span>-each-ref --format<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;delete %(refname)&#39;</span> refs/original | git update-ref --stdin
</span></span><span style="display:flex;"><span>$ git reflog expire --expire<span style="color:#f92672">=</span>now --all
</span></span><span style="display:flex;"><span>$ git gc --prune<span style="color:#f92672">=</span>now</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="7">
<li><!-- raw HTML omitted -->æŸ¥çœ‹ <code>pack</code> çš„ç©ºé—´ä½¿ç”¨æƒ…å†µ<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git count-objects -v</span></span></code></pre></div></blockquote>
<hr>
<h3 id="lfsåŠŸèƒ½å‹ç¼©å¤§æ–‡ä»¶"><code>LFS</code>åŠŸèƒ½å‹ç¼©å¤§æ–‡ä»¶</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->å¼€å¯<!-- raw HTML omitted --><code>LFS</code><!-- raw HTML omitted -->åŠŸèƒ½<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git lfs install</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->è®¾ç½®<!-- raw HTML omitted --><code>LFS</code><!-- raw HTML omitted -->è¦ç®¡ç†çš„æ–‡ä»¶ç±»å‹<!-- raw HTML omitted --><code>pthã€mmdbã€packã€idx</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git lfs track <span style="color:#e6db74">&#34;*.pth&#34;</span></span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->æŠ¥<!-- raw HTML omitted --><code>LFS</code><!-- raw HTML omitted -->é”™ï¼Œåœ¨æ‰§è¡Œä¸Šé¢çš„æœ€åä¸€æ­¥ä¸Šä¼ å‘½ä»¤çš„æ—¶å€™å¯èƒ½ä¼šæŠ¥ä¸¤ä¸ªé”™è¯¯<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->ç¬¬ä¸€ä¸ªé”™è¯¯ï¼š<!-- raw HTML omitted --><code>WARNING: Authentication error: Authentication required: LFS only supported repository in paid enterprise.</code><!-- raw HTML omitted -->ã€‚å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤, å‘½ä»¤ä¸­çš„<!-- raw HTML omitted --><code>{your_gitee}/{your_repo}</code><!-- raw HTML omitted -->æ˜¯ä½ çš„è¿œç¨‹ä»“åº“åœ°å€,æ ¹æ®è‡ªå·±æƒ…å†µæ›¿æ¢<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git config lfs.https://gitee.com/<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>your_gitee<span style="color:#f92672">}</span>/<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>your_repo<span style="color:#f92672">}</span>.git/info/lfs.locksverify false</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç¬¬äºŒä¸ªé”™è¯¯ï¼š<!-- raw HTML omitted --><code>batch response: LFS only supported repository in paid enterprise.</code><!-- raw HTML omitted -->Â ã€‚å¯ä»¥å°è¯•åˆ é™¤<!-- raw HTML omitted --><code>./git/hooks/pre-push</code><!-- raw HTML omitted -->æ–‡ä»¶,æœ€åé‡æ–°<!-- raw HTML omitted --><code>push</code><!-- raw HTML omitted -->ä¸€ä¸‹å³å¯<!-- raw HTML omitted --></li>
</ul>
</blockquote>
<hr>
<h3 id="gitè·å–ä»“åº“æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶"><code>git</code>è·å–ä»“åº“æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶</h3>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->æ­¤åŠŸèƒ½åªåœ¨<!-- raw HTML omitted --><code>1.7.0</code><!-- raw HTML omitted -->ä»¥ä¸Šç‰ˆæœ¬æä¾›<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir test <span style="color:#f92672">&amp;&amp;</span> cd test
</span></span><span style="display:flex;"><span>$ git init
</span></span><span style="display:flex;"><span>$ git remote add origin https://xxxx.com/xxx.git
</span></span><span style="display:flex;"><span>$ git config core.sparsecheckout true  	<span style="color:#75715e"># ä½¿ç”¨Sparse checkoutæ¨¡å¼</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;redis-conf/*&#34;</span> &gt;&gt; .git/info/sparse-checkout  	<span style="color:#75715e"># å°†æ£€å‡ºçš„ç›®å½•æˆ–æ–‡ä»¶ä½¿ç”¨æ–‡ä»¶è¿½åŠ çš„å½¢å¼å†™å…¥åˆ°gitçš„é…ç½®.git/info/sparse-checkoutæ–‡ä»¶ä¸­ï¼Œå…è®¸æ·»åŠ å¤šè¡Œ</span>
</span></span><span style="display:flex;"><span>$ git pull origin master  	<span style="color:#75715e"># è·å–åˆ°éœ€è¦çš„æ–‡ä»¶æˆ–ç›®å½•</span>
</span></span><span style="display:flex;"><span>$ git checkout  	<span style="color:#75715e"># åœ¨å¯¹é…ç½®æ–‡ä»¶.git/info/sparse-checkoutçš„å†…å®¹è¿›è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œä¹‹åï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é‡æ–°ä¿®æ­£ç›®å½•å’Œæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>$ git push origin master</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_gogs">Install_Gogs</h1>

<h2 id="gogs"><code>Gogs</code></h2>
<blockquote>
<ul>
<li><a href="https://gogs.io/" rel="external" target="_self"><code>Gogs</code>å®˜ç½‘</a></li>
</ul>
</blockquote>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_gitlab">Install_Gitlab</h1>

<h2 id="gitlabç®€ä»‹ä»¥åŠå®‰è£…"><code>gitlab</code>ç®€ä»‹ä»¥åŠå®‰è£…</h2>
<blockquote>
<ul>
<li><a href="https://packages.gitlab.com/gitlab/gitlab-ce" rel="external" target="_self"><code>gitlab</code>å®‰è£…åŒ…åº“</a></li>
<li><a href="https://github.com/go-gitea/gitea/" rel="external" target="_self"><code>Gitea</code></a></li>
<li><code>GitLab</code>æ˜¯ç®¡ç†<code>Git</code>å­˜å‚¨åº“çš„å¹³å°ã€‚ <code>GitLab</code>æä¾›å…è´¹çš„å…¬å…±å’Œç§äººå­˜å‚¨åº“ï¼Œé—®é¢˜è·Ÿè¸ªå’Œç»´åŸºã€‚ <code>GitLab</code>æ˜¯<code>Git</code>ä¹‹ä¸Šçš„ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„<code>Web</code>ç•Œé¢å±‚ï¼Œå®ƒæé«˜äº†ä½¿ç”¨<code>Git</code>çš„é€Ÿåº¦ã€‚ <code>GitLab</code>æä¾›äº†è‡ªå·±çš„æŒç»­é›†æˆ<code>CI</code>ç³»ç»Ÿæ¥ç®¡ç†é¡¹ç›®ï¼Œå¹¶æä¾›ç”¨æˆ·ç•Œé¢ä»¥åŠ<code>GitLab</code>çš„å…¶ä»–åŠŸèƒ½ã€‚</li>
<li><code>cat /etc/gitlab/initial_root_password | grep Password</code> è·å–åˆå§‹å¯†ç </li>
</ul>
</blockquote>
<hr>
<h3 id="å®‰è£…å‰å‡†å¤‡">å®‰è£…å‰å‡†å¤‡</h3>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å®‰è£…æ‰©å±•æ’ä»¶<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install -y  make telnet  inotify-tools tree rdate ntp gcc gcc-c++ psmisc net-tools screen expect sysstat hdparm traceroute zip unzip pcre pcre-devel zlib zlib-devel openssl openssl-devel tcping libaio dig epel-release wget git
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ yum -y install lsof zeromq-devel policycoreutils openssh-server openssh-clients  policycoreutils-python postfix perl patch cronie</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->å¯åŠ¨<!-- raw HTML omitted --><code>postfix</code><!-- raw HTML omitted -->å¹¶è®¾ç½®å¼€æœºè‡ªå¯ï¼Œ<!-- raw HTML omitted --><code>gitlab</code><!-- raw HTML omitted -->éœ€è¦<!-- raw HTML omitted --><code>postfix</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl enable postfix <span style="color:#f92672">&amp;&amp;</span> systemctl start postfix</span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h4 id="yumæŒ‰ç…§gitlab"><code>yum</code>æŒ‰ç…§<code>Gitlab</code></h4>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Gitlab</code></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->é…ç½®<!-- raw HTML omitted --><code>gitlab yum</code><!-- raw HTML omitted -->ä»“åº“ï¼Œå®‰è£…<!-- raw HTML omitted --><code>Gitlab</code><a href="https://about.gitlab.com/install/#centos-7" rel="external" target="_self"><code>yum</code>å®‰è£…<code>Gitlab</code></a></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
</span></span><span style="display:flex;"><span>$ yum list gitlab-ce*  	<span style="color:#75715e"># åˆ—å‡ºè¦å®‰è£…çš„ç‰ˆæœ¬</span>
</span></span><span style="display:flex;"><span>$ yum install gitlab-ce-14.9.3-ce.0.el7.x86_64  	<span style="color:#75715e"># å®‰è£…æŒ‡å®šç‰ˆæœ¬</span></span></span></code></pre></div></blockquote>
</blockquote>
<hr>
<h4 id="rpmåŒ…å®‰è£…gitlabhttpspackagesgitlabcomgitlabgitlab-ce"><a href="https://packages.gitlab.com/gitlab/gitlab-ce" rel="external" target="_self"><code>rpm</code>åŒ…å®‰è£…<code>gitlab</code></a></h4>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget --content-disposition https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-14.9.3-ce.0.el7.x86_64.rpm/download.rpm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ rpm gitlab-ce-14.9.3-ce.0.el7.x86_64.rpm</span></span></code></pre></div></blockquote>
<hr>
<h3 id="åˆå§‹åŒ–å¯åŠ¨gitlab">åˆå§‹åŒ–å¯åŠ¨<code>Gitlab</code></h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gitlab-ctl reconfigure  	<span style="color:#75715e"># åˆå§‹åŒ–gitlab</span>
</span></span><span style="display:flex;"><span>$ gitlab-ctl restart  	<span style="color:#75715e"># é‡å¯å®Œæˆ</span></span></span></code></pre></div></blockquote>
<hr>
<h3 id="é˜²ç«å¢™æ”¾è¡Œç«¯å£">é˜²ç«å¢™æ”¾è¡Œç«¯å£</h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ firewall-cmd --permanent --add-service<span style="color:#f92672">={</span>http,https<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>$ firewall-cmd --reload</span></span></code></pre></div></blockquote>
<hr>
<h3 id="dockerå®‰è£…gitlab"><code>docker</code>å®‰è£…<code>gitlab</code></h3>
<ul>
<li>
<ol>
<li><code>Docker</code><!-- raw HTML omitted -->å‘½ä»¤å¯åŠ¨<!-- raw HTML omitted --><code>Gitlab</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /opt/gitlab/<span style="color:#f92672">{</span>config,logs,data<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>$ docker run --detach <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--publish 18081:80 --publish 18083:443 --publish 18082:22 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--name gitlab <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--restart always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume /opt/gitlab/config:/etc/gitlab <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume /opt/gitlab/logs:/var/log/gitlab <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume /opt/gitlab/data:/var/opt/gitlab <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env GITLAB_OMNIBUS_CONFIG<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;external_url &#39;https://gitlab.example.com/&#39;;&#34;</span>  <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>gitlab/gitlab-ce:10.0.0-ce.0</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><code>docker-compose</code><!-- raw HTML omitted -->å¯åŠ¨<!-- raw HTML omitted --><code>Gitlab</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p /opt/gitlab/<span style="color:#f92672">{</span>config,logs,data<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;/opt/docker-compose/gitlab/docker-compose.yaml<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">version: &#34;3&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">services:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  gitlab:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    container_name: gitlab  # å¯åŠ¨ååç§°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: &#39;gitlab/gitlab-ce:10.0.0-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:10.8.7-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:11.11.8-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:12.0.12-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:12.1.17-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:12.10.14-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:13.0.14-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:13.1.11-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:13.8.8-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:13.12.15-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:14.0.12-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:14.1.1-ce.0&#39;  	# 14.1.1ä¸ºè¿‡åº¦å¿…é¡»ç‰ˆæœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:14.2.1-ce.0&#39;  	# 14.2.1ä¸ºè¿‡åº¦å¿…é¡»ç‰ˆæœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:14.3.6-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:14.9.5-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:14.10.5-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:15.0.2-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    # image: &#39;gitlab/gitlab-ce:15.1.0-ce.0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    restart: always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    hostname: &#39;gitlab&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    environment:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      TZ: Asia/Shanghai
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      GITLAB_OMNIBUS_CONFIG: |
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        external_url &#39;http://gitlab.erge.com&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 18082
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;18081:80&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;18082:22&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;18083:443&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    volumes:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;/opt/gitlab/config:/etc/gitlab&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;/opt/gitlab/logs:/var/log/gitlab&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#39;/opt/gitlab/data:/var/opt/gitlab&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ docker-compose up -d</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_gitlab_runner">Install_Gitlab_Runner</h1>

<h2 id="git-runner"><code>Git Runner</code></h2>
<blockquote>
<ul>
<li>
<p><a href="https://packages.gitlab.com/runner/gitlab-runner" rel="external" target="_self"><code>git-runner</code>åº“</a></p>
</li>
<li>
<p><a href="https://gitlab.com/gitlab-org/gitlab-runner" rel="external" target="_self"><code>gitlab-runner</code></a></p>
</li>
<li>
<p><a href="https://docs.gitlab.com/runner/install/linux-manually.html" rel="external" target="_self"><code>Gitlab</code>é…ç½®<code>runner</code></a></p>
</li>
</ul>
</blockquote>
<hr>
<h3 id="yumå®‰è£…git-runner"><code>yum</code>å®‰è£…<code>git-runner</code></h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash
</span></span><span style="display:flex;"><span>$ yum install gitlab-runner-14.9.1-1.x86_64</span></span></code></pre></div></blockquote>
<hr>
<h3 id="rpmå®‰è£…git-runner"><code>rpm</code>å®‰è£…<code>git-runner</code></h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ wget --content-disposition https://packages.gitlab.com/runner/gitlab-runner/packages/el/7/gitlab-runner-14.9.1-1.x86_64.rpm/download.rpm
</span></span><span style="display:flex;"><span><span style="color:#75715e"># curl -O https://gitlab-runner-downloads.s3.amazonaws.com/latest/rpm/gitlab-runner_amd64.rpm</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># rpm -ivh gitlab-runner_amd64.rpm</span>
</span></span><span style="display:flex;"><span>$ rpm -ivh gitlab-runner-14.9.1-1.x86_64.rpm</span></span></code></pre></div></blockquote>
<hr>
<h3 id="dockerå®‰è£…git-runner"><code>docker</code>å®‰è£…<code>git-runner</code></h3>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker run -d --name gitlab-runner --restart always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /opt/gitlab-runner/config:/etc/gitlab-runner <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /var/run/docker.sock:/var/run/docker.sock <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  gitlab/gitlab-runner:latest</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_gitea">Install_Gitea</h1>

<h2 id="heading"></h2>
<blockquote>
<ul>
<li><a href="https://about.gitea.com/" rel="external" target="_self"><code>Gitea</code>å®˜ç½‘</a></li>
</ul>
</blockquote>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1720186645" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1720186645" defer></script>
    <script src="../../../js/theme.js?1720186645" defer></script>
  </body>
</html>

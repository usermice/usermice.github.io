<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="ÂÆâË£ÖHAProxy ÂêçÁß∞Âú∞ÂùÄ ÊèèËø∞ HAProxyÂÆòÁΩë haproxy„ÄÅnginx„ÄÅproxy protocolËé∑ÂæóÂÆ¢Êà∑ÁúüÂÆûIPÊñπÊ≥ï Ë¥üËΩΩÂùáË°°
HAProxyÂèØ‰ª•Â∞ÜÂÖ•Á´ôËØ∑Ê±ÇÂàÜÂèëÂà∞Â§ö‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂÆûÁé∞Ë¥üËΩΩÂùáË°°„ÄÇÂÆÉÊîØÊåÅÂ§öÁßçË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºåÂ¶ÇËΩÆËØ¢round-robin„ÄÅÊúÄÂ∞èËøûÊé•Êï∞leastconn„ÄÅÊ∫êIPÂìàÂ∏åsource„ÄÅÊùÉÈáçÁ≠â
È´òÂèØÁî®ÊÄß
HAProxyÊîØÊåÅÂÅ•Â∫∑Ê£ÄÊü•health checksÔºåÂèØ‰ª•ÂÆöÊúüÊ£ÄÊü•ÂêéÁ´ØÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÔºåÂπ∂Ê†πÊçÆÊ£ÄÊü•ÁªìÊûúÂä®ÊÄÅË∞ÉÊï¥Ë¥üËΩΩÂùáË°°Á≠ñÁï•„ÄÇÂΩìÂêéÁ´ØÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÊàñ‰∏çÂèØÁî®Êó∂ÔºåHAProxyÂèØ‰ª•Ëá™Âä®Â∞ÜÊµÅÈáèËΩ¨ÁßªÂà∞ÂÅ•Â∫∑ÁöÑÊúçÂä°Âô®‰∏äÔºå‰ªéËÄåÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß">
    <meta name="author" content="‰∫åÂì•">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://usermice.github.io/images/s2-1.png">
    <meta name="twitter:title" content="Install_HAProxy :: Hugo Relearn Theme">
    <meta name="twitter:description" content="ÂÆâË£ÖHAProxy ÂêçÁß∞Âú∞ÂùÄ ÊèèËø∞ HAProxyÂÆòÁΩë haproxy„ÄÅnginx„ÄÅproxy protocolËé∑ÂæóÂÆ¢Êà∑ÁúüÂÆûIPÊñπÊ≥ï Ë¥üËΩΩÂùáË°°
HAProxyÂèØ‰ª•Â∞ÜÂÖ•Á´ôËØ∑Ê±ÇÂàÜÂèëÂà∞Â§ö‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂÆûÁé∞Ë¥üËΩΩÂùáË°°„ÄÇÂÆÉÊîØÊåÅÂ§öÁßçË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºåÂ¶ÇËΩÆËØ¢round-robin„ÄÅÊúÄÂ∞èËøûÊé•Êï∞leastconn„ÄÅÊ∫êIPÂìàÂ∏åsource„ÄÅÊùÉÈáçÁ≠â
È´òÂèØÁî®ÊÄß
HAProxyÊîØÊåÅÂÅ•Â∫∑Ê£ÄÊü•health checksÔºåÂèØ‰ª•ÂÆöÊúüÊ£ÄÊü•ÂêéÁ´ØÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÔºåÂπ∂Ê†πÊçÆÊ£ÄÊü•ÁªìÊûúÂä®ÊÄÅË∞ÉÊï¥Ë¥üËΩΩÂùáË°°Á≠ñÁï•„ÄÇÂΩìÂêéÁ´ØÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÊàñ‰∏çÂèØÁî®Êó∂ÔºåHAProxyÂèØ‰ª•Ëá™Âä®Â∞ÜÊµÅÈáèËΩ¨ÁßªÂà∞ÂÅ•Â∫∑ÁöÑÊúçÂä°Âô®‰∏äÔºå‰ªéËÄåÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß">
    <meta property="og:url" content="https://usermice.github.io/systems/linux/haproxy/install_haproxy/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Install_HAProxy :: Hugo Relearn Theme">
    <meta property="og:description" content="ÂÆâË£ÖHAProxy ÂêçÁß∞Âú∞ÂùÄ ÊèèËø∞ HAProxyÂÆòÁΩë haproxy„ÄÅnginx„ÄÅproxy protocolËé∑ÂæóÂÆ¢Êà∑ÁúüÂÆûIPÊñπÊ≥ï Ë¥üËΩΩÂùáË°°
HAProxyÂèØ‰ª•Â∞ÜÂÖ•Á´ôËØ∑Ê±ÇÂàÜÂèëÂà∞Â§ö‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂÆûÁé∞Ë¥üËΩΩÂùáË°°„ÄÇÂÆÉÊîØÊåÅÂ§öÁßçË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºåÂ¶ÇËΩÆËØ¢round-robin„ÄÅÊúÄÂ∞èËøûÊé•Êï∞leastconn„ÄÅÊ∫êIPÂìàÂ∏åsource„ÄÅÊùÉÈáçÁ≠â
È´òÂèØÁî®ÊÄß
HAProxyÊîØÊåÅÂÅ•Â∫∑Ê£ÄÊü•health checksÔºåÂèØ‰ª•ÂÆöÊúüÊ£ÄÊü•ÂêéÁ´ØÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÔºåÂπ∂Ê†πÊçÆÊ£ÄÊü•ÁªìÊûúÂä®ÊÄÅË∞ÉÊï¥Ë¥üËΩΩÂùáË°°Á≠ñÁï•„ÄÇÂΩìÂêéÁ´ØÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÊàñ‰∏çÂèØÁî®Êó∂ÔºåHAProxyÂèØ‰ª•Ëá™Âä®Â∞ÜÊµÅÈáèËΩ¨ÁßªÂà∞ÂÅ•Â∫∑ÁöÑÊúçÂä°Âô®‰∏äÔºå‰ªéËÄåÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Systems">
    <meta property="article:published_time" content="2024-06-18T12:41:18+08:00">
    <meta property="article:modified_time" content="2024-06-18T12:41:18+08:00">
    <meta property="og:image" content="https://usermice.github.io/images/s2-1.png">
    <meta itemprop="name" content="Install_HAProxy :: Hugo Relearn Theme">
    <meta itemprop="description" content="ÂÆâË£ÖHAProxy ÂêçÁß∞Âú∞ÂùÄ ÊèèËø∞ HAProxyÂÆòÁΩë haproxy„ÄÅnginx„ÄÅproxy protocolËé∑ÂæóÂÆ¢Êà∑ÁúüÂÆûIPÊñπÊ≥ï Ë¥üËΩΩÂùáË°°
HAProxyÂèØ‰ª•Â∞ÜÂÖ•Á´ôËØ∑Ê±ÇÂàÜÂèëÂà∞Â§ö‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂÆûÁé∞Ë¥üËΩΩÂùáË°°„ÄÇÂÆÉÊîØÊåÅÂ§öÁßçË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºåÂ¶ÇËΩÆËØ¢round-robin„ÄÅÊúÄÂ∞èËøûÊé•Êï∞leastconn„ÄÅÊ∫êIPÂìàÂ∏åsource„ÄÅÊùÉÈáçÁ≠â
È´òÂèØÁî®ÊÄß
HAProxyÊîØÊåÅÂÅ•Â∫∑Ê£ÄÊü•health checksÔºåÂèØ‰ª•ÂÆöÊúüÊ£ÄÊü•ÂêéÁ´ØÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÔºåÂπ∂Ê†πÊçÆÊ£ÄÊü•ÁªìÊûúÂä®ÊÄÅË∞ÉÊï¥Ë¥üËΩΩÂùáË°°Á≠ñÁï•„ÄÇÂΩìÂêéÁ´ØÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÊàñ‰∏çÂèØÁî®Êó∂ÔºåHAProxyÂèØ‰ª•Ëá™Âä®Â∞ÜÊµÅÈáèËΩ¨ÁßªÂà∞ÂÅ•Â∫∑ÁöÑÊúçÂä°Âô®‰∏äÔºå‰ªéËÄåÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß">
    <meta itemprop="datePublished" content="2024-06-18T12:41:18+08:00">
    <meta itemprop="dateModified" content="2024-06-18T12:41:18+08:00">
    <meta itemprop="wordCount" content="373">
    <meta itemprop="image" content="https://usermice.github.io/images/s2-1.png">
    <title>Install_HAProxy :: Hugo Relearn Theme</title>
    <link href="../../../../images/favicon.ico?1734019084" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../../css/fontawesome-all.min.css?1734019085" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fontawesome-all.min.css?1734019085" rel="stylesheet"></noscript>
    <link href="../../../../css/nucleus.css?1734019085" rel="stylesheet">
    <link href="../../../../css/auto-complete.css?1734019085" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/auto-complete.css?1734019085" rel="stylesheet"></noscript>
    <link href="../../../../css/perfect-scrollbar.min.css?1734019085" rel="stylesheet">
    <link href="../../../../css/fonts.css?1734019085" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../css/fonts.css?1734019085" rel="stylesheet"></noscript>
    <link href="../../../../css/theme.css?1734019085" rel="stylesheet">
    <link href="../../../../css/theme-relearn-auto.css?1734019085" rel="stylesheet" id="R-variant-style">
    <link href="../../../../css/chroma-relearn-auto.css?1734019085" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../../css/variant.css?1734019085" rel="stylesheet">
    <link href="../../../../css/print.css?1734019085" rel="stylesheet" media="print">
    <link href="../../../../css/format-print.css?1734019085" rel="stylesheet">
    <script src="../../../../js/variant.js?1734019085"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/usermice.github.io';
      window.index_js_url="../../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../../systems/linux/haproxy/install_haproxy/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../../systems/linux/haproxy/"><span itemprop="name">HAProxy</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Install_HAProxy</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/haproxy/install_proxy/" title="Install_Proxy (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../../systems/linux/install_system/" title="Install_System (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_haproxy">Install_HAProxy</h1>

<h2 id="ÂÆâË£Öhaproxy">ÂÆâË£Ö<code>HAProxy</code></h2>
<blockquote>
<table>
<thead>
<tr>
<th>ÂêçÁß∞Âú∞ÂùÄ</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.haproxy.org/#desc" rel="external" target="_self"><code>HAProxy</code>ÂÆòÁΩë</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.cnblogs.com/hh2737/p/8951872.html" rel="external" target="_self"><code>haproxy„ÄÅnginx„ÄÅproxy protocol</code>Ëé∑ÂæóÂÆ¢Êà∑ÁúüÂÆû<code>IP</code>ÊñπÊ≥ï</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><strong>Ë¥üËΩΩÂùáË°°</strong></p>
<p><code>HAProxy</code>ÂèØ‰ª•Â∞ÜÂÖ•Á´ôËØ∑Ê±ÇÂàÜÂèëÂà∞Â§ö‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂÆûÁé∞Ë¥üËΩΩÂùáË°°„ÄÇÂÆÉÊîØÊåÅÂ§öÁßçË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºåÂ¶ÇËΩÆËØ¢<code>round-robin</code>„ÄÅÊúÄÂ∞èËøûÊé•Êï∞<code>leastconn</code>„ÄÅÊ∫êIPÂìàÂ∏å<code>source</code>„ÄÅÊùÉÈáçÁ≠â</p>
</li>
<li>
<p><strong>È´òÂèØÁî®ÊÄß</strong></p>
<p><code>HAProxy</code>ÊîØÊåÅÂÅ•Â∫∑Ê£ÄÊü•<code>health checks</code>ÔºåÂèØ‰ª•ÂÆöÊúüÊ£ÄÊü•ÂêéÁ´ØÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÔºåÂπ∂Ê†πÊçÆÊ£ÄÊü•ÁªìÊûúÂä®ÊÄÅË∞ÉÊï¥Ë¥üËΩΩÂùáË°°Á≠ñÁï•„ÄÇÂΩìÂêéÁ´ØÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÊàñ‰∏çÂèØÁî®Êó∂Ôºå<code>HAProxy</code>ÂèØ‰ª•Ëá™Âä®Â∞ÜÊµÅÈáèËΩ¨ÁßªÂà∞ÂÅ•Â∫∑ÁöÑÊúçÂä°Âô®‰∏äÔºå‰ªéËÄåÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß</p>
</li>
<li>
<p><strong>SSL/TLS ÁªàÁ´Ø</strong></p>
<p><code>HAProxy</code>ÂèØ‰ª•‰Ωú‰∏∫<code>SSL/TLS</code>ÁöÑÁªàÁ´Ø<code>Termination</code>ÔºåË¥üË¥£Â§ÑÁêÜÂíåÁÆ°ÁêÜ‰º†ÂÖ•Âíå‰º†Âá∫ÁöÑÂä†ÂØÜÊµÅÈáè„ÄÇÂÆÉÊîØÊåÅ<code>SSL</code>Êè°ÊâãÂíåËØÅ‰π¶ÁÆ°ÁêÜÔºåÂèØ‰ª•Êèê‰æõÂÆâÂÖ®ÁöÑ<code>HTTPS</code>ÊúçÂä°</p>
</li>
<li>
<p><strong>ÂèçÂêë‰ª£ÁêÜ</strong></p>
<p><code>HAProxy</code>‰Ωú‰∏∫ÂèçÂêë‰ª£ÁêÜ<code>reverse proxy</code>ÔºåÂèØ‰ª•ÈöêËóèÂêéÁ´ØÊúçÂä°Âô®ÁöÑÂÆûÈôÖ<code>IP</code>Âú∞ÂùÄÂíåÁªÜËäÇÔºåÊèê‰æõÊõ¥ÂÆâÂÖ®ÁöÑÊúçÂä°ËÆøÈóÆÊé•Âè£„ÄÇÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÈ¶ñÂÖàÂà∞Ëææ<code>HAProxy</code>ÔºåÂÜçÁî±<code>HAProxy</code>ËΩ¨ÂèëÂà∞ÂêéÁ´ØÊúçÂä°Âô®</p>
</li>
<li>
<p><strong><code>TCP</code>Âíå<code>HTTP</code>ÊîØÊåÅ</strong></p>
<p><code>HAProxy</code>‰∏ç‰ªÖÊîØÊåÅ<code>HTTP</code>Âíå<code>HTTPS</code>ÊµÅÈáèÁöÑË¥üËΩΩÂùáË°°ÔºåËøòÂèØ‰ª•Ë¥üË¥£<code>TCP</code>ÊµÅÈáèÁöÑË¥üËΩΩÂùáË°°„ÄÇËøô‰ΩøÂæóÂÆÉÈùûÂ∏∏ÈÄÇÂêà‰∫éÊîØÊåÅ<code>Web</code>Â∫îÁî®Á®ãÂ∫è„ÄÅ<code>API</code>ÂíåÂÖ∂‰ªñÁΩëÁªúÊúçÂä°ÁöÑÈ´òÊÄßËÉΩÂíåÈ´òÂèØÁî®ÊÄßÈÉ®ÁΩ≤</p>
</li>
<li>
<p><strong>ÁÅµÊ¥ªÈÖçÁΩÆÂíåÂä®ÊÄÅÊõ¥Êñ∞</strong></p>
<p><code>HAProxy</code>ÁöÑÈÖçÁΩÆÊñá‰ª∂ÊîØÊåÅÁÅµÊ¥ªÁöÑÈÖçÁΩÆÈÄâÈ°πÔºåÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅË∞ÉÊï¥Ë¥üËΩΩÂùáË°°Á≠ñÁï•ÂíåÂèÇÊï∞„ÄÇÊ≠§Â§ñÔºå<code>HAProxy</code>ÊîØÊåÅÂä®ÊÄÅÊõ¥Êñ∞ÈÖçÁΩÆÔºåÂèØ‰ª•Âú®ËøêË°åÊó∂ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂ÔºåÊó†ÈúÄÈáçÂêØÊúçÂä°Âç≥ÂèØÁîüÊïà</p>
</li>
</ul>
</blockquote>
<ul>
<li>
<ol>
<li><!-- raw HTML omitted -->ÂÆâË£ÖÈÖçÁΩÆ<!-- raw HTML omitted --><code>HAProxy</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install -y haproxy</span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="2">
<li><!-- raw HTML omitted -->‰∏æ‰æãÔºöÁõëÊéß<!-- raw HTML omitted --><code>Rabbit</code><!-- raw HTML omitted -->Ê∂àÊÅØÈòüÂàóÊúçÂä°ÈÖçÁΩÆ<!-- raw HTML omitted --></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/haproxy/haproxy.cfg<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">global
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # log /yougo/haproxy/home/log    local0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # log /yougo/haproxy/home/log    local1 notice
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # chroot /yougo/haproxy  	# ÊîπÂèòÂΩìÂâçÂ∑•‰ΩúÁõÆÂΩï
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # stats socket /yougo/haproxy/home/admin.sock mode 660 level admin  	# ÂàõÂª∫ÁõëÊéßÊâÄÁî®ÁöÑÂ•óÊé•Â≠óÁõÆÂΩï
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> pidfile  /var/run/haproxy.pid  	# haproxyÁöÑpidÂ≠òÊîæË∑ØÂæÑ,ÂêØÂä®ËøõÁ®ãÁöÑÁî®Êà∑ÂøÖÈ°ªÊúâÊùÉÈôêËÆøÈóÆÊ≠§Êñá‰ª∂ 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> maxconn  4000  	# ÊúÄÂ§ßËøûÊé•Êï∞ÔºåÈªòËÆ§4000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> #  user   haproxy  	# ÈªòËÆ§Áî®Êà∑
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> #  group   haproxy  	# ÈªòËÆ§Áî®Êà∑ÁªÑ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> daemon  	# ÂàõÂª∫1‰∏™ËøõÁ®ãËøõÂÖ•deamonÊ®°ÂºèËøêË°å„ÄÇÊ≠§ÂèÇÊï∞Ë¶ÅÊ±ÇÂ∞ÜËøêË°åÊ®°ÂºèËÆæÁΩÆ‰∏∫&#34;daemon
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # Default SSL material locations
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # ca-base /etc/ssl/certs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # crt-base /etc/ssl/private
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # Default ciphers to use on SSL-enabled listening sockets.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # For more information, see ciphers(1SSL). This list is from:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> #  https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # ssl-default-bind-options no-sslv3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">###########ÈªòËÆ§ÈÖçÁΩÆ#########
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">defaults
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> log global
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> mode    http  	# ÈªòËÆ§ÁöÑÊ®°Âºèmode { tcp|http|health }ÔºåtcpÊòØ4Â±ÇÔºåhttpÊòØ7Â±ÇÔºåhealthÂè™‰ºöËøîÂõûOK
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> option  httplog  	# ÈááÁî®httpÊó•ÂøóÊ†ºÂºè
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> option  dontlognull  	# ÂêØÁî®ËØ•È°πÔºåÊó•Âøó‰∏≠Â∞Ü‰∏ç‰ºöËÆ∞ÂΩïÁ©∫ËøûÊé•„ÄÇÊâÄË∞ìÁ©∫ËøûÊé•Â∞±ÊòØÂú®‰∏äÊ∏∏ÁöÑË¥üËΩΩÂùáË°°Âô®ÊàñËÄÖÁõëÊéßÁ≥ªÁªü‰∏∫‰∫ÜÊé¢ÊµãËØ•ÊúçÂä°ÊòØÂê¶Â≠òÊ¥ªÂèØÁî®Êó∂,ÈúÄË¶ÅÂÆöÊúüÁöÑËøûÊé•ÊàñËÄÖËé∑ÂèñÊüê‰∏ÄÂõ∫ÂÆöÁöÑÁªÑ‰ª∂ÊàñÈ°µÈù¢,ÊàñËÄÖÊé¢ÊµãÊâ´ÊèèÁ´ØÂè£ÊòØÂê¶Âú®ÁõëÂê¨ÊàñÂºÄÊîæÁ≠âÂä®‰ΩúË¢´Áß∞‰∏∫Á©∫ËøûÊé•;ÂÆòÊñπÊñáÊ°£‰∏≠Ê†áÊ≥®ÔºåÂ¶ÇÊûúËØ•ÊúçÂä°‰∏äÊ∏∏Ê≤°ÊúâÂÖ∂‰ªñÁöÑË¥üËΩΩÂùáË°°Âô®ÁöÑËØùÔºåÂª∫ËÆÆ‰∏çË¶Å‰ΩøÁî®ËØ•ÂèÇÊï∞ÔºåÂõ†‰∏∫‰∫íËÅîÁΩë‰∏äÁöÑÊÅ∂ÊÑèÊâ´ÊèèÊàñÂÖ∂‰ªñÂä®‰ΩúÂ∞±‰∏ç‰ºöË¢´ËÆ∞ÂΩï‰∏ãÊù•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> timeout connect 5000  	# ËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> timeout client  50000  	# ÂÆ¢Êà∑Á´ØËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> timeout server  50000  	# ÊúçÂä°Âô®Á´ØËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> option  httpclose  	# ÊØèÊ¨°ËØ∑Ê±ÇÂÆåÊØïÂêé‰∏ªÂä®ÂÖ≥Èó≠httpÈÄöÈÅì 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> option  httplog  	# Êó•ÂøóÁ±ªÂà´httpÊó•ÂøóÊ†ºÂºè 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> #option  forwardfor  	# Â¶ÇÊûúÂêéÁ´ØÊúçÂä°Âô®ÈúÄË¶ÅËé∑ÂæóÂÆ¢Êà∑Á´ØÁúüÂÆûipÈúÄË¶ÅÈÖçÁΩÆÁöÑÂèÇÊï∞ÔºåÂèØ‰ª•‰ªéHttp Header‰∏≠Ëé∑ÂæóÂÆ¢Êà∑Á´Øip  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> option  redispatch  	# serverIdÂØπÂ∫îÁöÑÊúçÂä°Âô®ÊåÇÊéâÂêé,Âº∫Âà∂ÂÆöÂêëÂà∞ÂÖ∂‰ªñÂÅ•Â∫∑ÁöÑÊúçÂä°Âô®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> timeout connect 10000  	# default 10 second timeout if a backend is not found
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> maxconn     60000  	# ÊúÄÂ§ßËøûÊé•Êï∞
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> retries     3  	# 3Ê¨°ËøûÊé•Â§±Ë¥•Â∞±ËÆ§‰∏∫ÊúçÂä°‰∏çÂèØÁî®Ôºå‰πüÂèØ‰ª•ÈÄöËøáÂêéÈù¢ËÆæÁΩÆ 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # errorfile 400 /yougo/haproxy/home/errors/400.http
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # errorfile 403 /yougo/haproxy/home/errors/403.http
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # errorfile 408 /yougo/haproxy/home/errors/408.http
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # errorfile 500 /yougo/haproxy/home/errors/500.http
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # errorfile 502 /yougo/haproxy/home/errors/502.http
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # errorfile 503 /yougo/haproxy/home/errors/503.http
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # errorfile 504 /yougo/haproxy/home/errors/504.http
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">################################################
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">listen http_front
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     bind 0.0.0.0:8888  	# HAProxy ÊúçÂä°Á´ØÂè£  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     stats refresh 30s  	# ÁªüËÆ°È°µÈù¢Ëá™Âä®Âà∑Êñ∞Êó∂Èó¥  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     stats uri /haproxy?stats  	# ÁªüËÆ°È°µÈù¢url  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     stats realm Haproxy Manager  	# ÁªüËÆ°È°µÈù¢ÂØÜÁ†ÅÊ°Ü‰∏äÊèêÁ§∫ÊñáÊú¨  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     stats auth admin:admin  	# ÁªüËÆ°È°µÈù¢Áî®Êà∑ÂêçÂíåÂØÜÁ†ÅËÆæÁΩÆ  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     #stats hide-version  	# ÈöêËóèÁªüËÆ°È°µÈù¢‰∏äHAProxyÁöÑÁâàÊú¨‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">##########  RabbitMQÁöÑÁÆ°ÁêÜÁïåÈù¢‰πüÊîæÂú®HAProxyÂêéÈù¢‰∫Ü ################
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#listen rabbitmq_admin 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#    bind 0.0.0.0:8004
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#   server node1 192.168.0.31:15672
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#    server node2 192.168.0.32:15672
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#    server node3 192.168.0.33:15672
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">#################################################
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">listen rabbitmq_cluster
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> bind 0.0.0.0:8889  	# rabbitmqÈõÜÁæ§Ë∞ÉÁî®ÁöÑÁ´ØÂè£
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> option tcplog
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> mode tcp
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> timeout client  3h
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> timeout server  3h
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> option          clitcpka
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> balance roundrobin  	# Ë¥üËΩΩÂùáË°°ÁÆóÊ≥ïÔºà#banlance roundrobin ËΩÆËØ¢Ôºåbalance source ‰øùÂ≠òsessionÂÄºÔºåÊîØÊåÅstatic-rrÔºåleastconnÔºåfirstÔºåuriÁ≠âÂèÇÊï∞Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance url_param userid
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance url_param session_id check_post 64
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance hdr(User-Agent)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance hdr(host)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance hdr(Host) use_domain_only
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance rdp-cookie
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance leastconn
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> # balance source //ip
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> server   rabbitmq1  172.16.0.30:5672 check inter 5s rise 2 fall 3  	# check inter 2000 ÊòØÊ£ÄÊµãÂøÉË∑≥È¢ëÁéáÔºårise 2ÊòØ2Ê¨°Ê≠£Á°ÆËÆ§‰∏∫ÊúçÂä°Âô®ÂèØÁî®Ôºåfall 3ÊòØ3Ê¨°Â§±Ë¥•ËÆ§‰∏∫ÊúçÂä°Âô®‰∏çÂèØÁî®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> server   rabbitmq2  172.16.0.31:5672 check inter 5s rise 2 fall 3  
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> server   rabbitmq3  172.16.0.32:5672 check inter 5s rise 2 fall 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span> </span></span></code></pre></div></blockquote>
<ul>
<li>
<ol start="3">
<li><!-- raw HTML omitted -->ÂêØÂä®<!-- raw HTML omitted --><code>HAProxy</code></li>
</ol>
</li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl enable haproxy <span style="color:#f92672">&amp;&amp;</span> systemctl start haproxy</span></span></code></pre></div></blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="../../../../js/clipboard.min.js?1734019085" defer></script>
    <script src="../../../../js/perfect-scrollbar.min.js?1734019085" defer></script>
    <script src="../../../../js/theme.js?1734019085" defer></script>
  </body>
</html>

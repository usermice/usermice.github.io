<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.125.4">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="">
    <meta name="author" content="äºŒå“¥">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://usermice.github.io/images/s2-1.png">
    <meta name="twitter:title" content="LDAP :: Hugo Relearn Theme">
    <meta property="og:url" content="https://usermice.github.io/systems/linux/ldap/">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="LDAP :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://usermice.github.io/images/s2-1.png">
    <meta itemprop="name" content="LDAP :: Hugo Relearn Theme">
    <meta itemprop="datePublished" content="2024-06-13T00:31:41+08:00">
    <meta itemprop="dateModified" content="2024-06-13T00:31:41+08:00">
    <meta itemprop="image" content="https://usermice.github.io/images/s2-1.png">
    <title>LDAP :: Hugo Relearn Theme</title>
    <link href="../../../images/favicon.ico?1725531899" rel="icon" type="image/x-icon" sizes="any">
    <link href="../../../css/fontawesome-all.min.css?1725531900" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1725531900" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1725531900" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1725531900" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1725531900" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1725531900" rel="stylesheet">
    <link href="../../../css/fonts.css?1725531900" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1725531900" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1725531900" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1725531900" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1725531900" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1725531900" rel="stylesheet">
    <link href="../../../css/print.css?1725531900" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1725531900" rel="stylesheet">
    <script src="../../../js/variant.js?1725531900"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/usermice.github.io';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red', 'my-branding' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>Partial intended to be overwritten to add custom headers, like CSS or any other info
<style>
    
</style>


  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../systems/linux/ldap/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>



          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/"><span itemprop="name">Systems</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../systems/linux/"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">LDAP</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">


            <div class="topbar-button topbar-button-prev" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/kubernetes/configure_k8s_auth/" title="Configure_K8s_Auth (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../systems/linux/ldap/config_openldap/" title="Config_OpenLDAP (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>



          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="ldap">LDAP</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of LDAP</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="config_openldap">Config_OpenLDAP</h1>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_kerberos">Install_Kerberos</h1>

<h2 id="kerberos"><code>Kerberos</code></h2>
<blockquote>
<ul>
<li><a href="https://www.thegeekdiary.com/how-to-install-and-configure-kerberos-in-centos-rhel-7/" rel="external" target="_self">å¦‚ä½•åœ¨<code>CentOS/RHEL 7</code>ä¸­å®‰è£…å’Œé…ç½®<code>Kerberos</code></a></li>
</ul>
</blockquote>
<hr>
<h3 id="å®‰è£…kerberos">å®‰è£…<code>Kerberos</code></h3>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="install_openldap">Install_OpenLDAP</h1>

<h2 id="openldap"><code>OpenLDAP</code></h2>
<blockquote>
<table>
<thead>
<tr>
<th>åç§°åœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://hebye.com/docs/ldap/ldap-1d97mtl9ifh1c" rel="external" target="_self"><code>OpenLDAP</code>çš„å®‰è£…ä¸é…ç½®</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/ibv/LDAP-Admin" rel="external" target="_self"><code>LDAP Admin for Linux</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://directory.apache.org/studio/" rel="external" target="_self"><code>Apache Directory Studio</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/uroesch/LdapAdminPortable/tags" rel="external" target="_self"><code>LDAP Admin for PortableApps.com</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.ldap-account-manager.org/lamcms/" rel="external" target="_self"><code>LDAP Account Manager</code></a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.cnblogs.com/woshimrf/p/ldap.html" rel="external" target="_self"><code>openldap</code>ä»‹ç»å’Œä½¿ç”¨</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://zhuanlan.zhihu.com/p/32732045" rel="external" target="_self"><code>LDAP</code>åŸºç¡€å­¦ä¹ ç¬”è®°</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.jianshu.com/p/243ff61b0552" rel="external" target="_self"><code>OpenLDAP</code>å®‰è£…ä½¿ç”¨åŠä¸å„ç³»ç»Ÿçš„é›†æˆ</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.ibm.com/docs/zh/samfess/8.2.2?topic=reports-creating-users-in-ldap" rel="external" target="_self">åœ¨<code>LDAP</code>ä¸­åˆ›å»ºç”¨æˆ·</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</blockquote>
<hr>
<h3 id="openldapå®‰è£…"><code>OpenLDAP</code>å®‰è£…</h3>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->å®‰è£…<!-- raw HTML omitted --><code>Openldap</code></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install openldap-servers openldap-clients -y</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li><!-- raw HTML omitted -->æŠŠ<!-- raw HTML omitted --><code>/etc/openldap/</code><!-- raw HTML omitted -->ç›®å½•ä¸‹<!-- raw HTML omitted --><code>slapd.d</code><!-- raw HTML omitted -->é»˜è®¤æ–‡ä»¶å¤¹å¤‡ä»½<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /etc/openldap/
</span></span><span style="display:flex;"><span>$ cp -r slapd.d<span style="color:#f92672">{</span>,.bak<span style="color:#f92672">}</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->ç”ŸæˆåŠ å¯†å¯†é’¥<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ slappasswd
</span></span><span style="display:flex;"><span>New password: 
</span></span><span style="display:flex;"><span>Re-enter new password: 
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>SSHA<span style="color:#f92672">}</span>2OhbHFHD0Lx1JUS7IsQZnHlS65tKlAvf</span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æ‹·è´ã€ä¿®æ”¹é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp /usr/share/openldap-servers/slapd.ldif /etc/openldap/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŠŠä¸­æ–‡æ³¨é‡Šè¡Œéƒ½åˆ é™¤</span>
</span></span><span style="display:flex;"><span>$ cat &gt;/etc/openldap/slapd.ldif<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcGlobal
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">cn: config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcArgsFile: /var/run/openldap/slapd.args
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcPidFile: /var/run/openldap/slapd.pid
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcTLSCACertificatePath: /etc/openldap/certs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcTLSCertificateFile: &#34;OpenLDAP Server&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcTLSCertificateKeyFile: /etc/openldap/certs/password
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: cn=schema,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcSchemaConfig
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">cn: schema
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># æ·»åŠ /etc/openldap/schema/ ç›®å½•ä¸‹å±æ€§ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/core.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/collective.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/corba.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/cosine.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/duaconf.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/dyngroup.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/inetorgperson.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/java.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/misc.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/nis.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/openldap.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/pmi.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">include: file:///etc/openldap/schema/ppolicy.ldif
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: olcDatabase=frontend,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcDatabaseConfig
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcFrontendConfig
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDatabase: frontend
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: olcDatabase=config,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcDatabaseConfig
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDatabase: config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcAccess: to * by dn.base=&#34;gidNumber=0+uidNumber=0,cn=peercred,cn=external,c
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> n=auth&#34; manage by * none
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: olcDatabase=monitor,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcDatabaseConfig
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDatabase: monitor
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># dc=my-domain ä¿®æ”¹ä¸ºå®šä¹‰åŸŸå
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcAccess: to * by dn.base=&#34;gidNumber=0+uidNumber=0,cn=peercred,cn=external,c
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> n=auth&#34; read by dn.base=&#34;cn=Manager,dc=ladp.erge,dc=com&#34; read by * none
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: olcDatabase=hdb,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcDatabaseConfig
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectClass: olcHdbConfig
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDatabase: hdb
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># my-domain ä¿®æ”¹ä¸ºå®šä¹‰åŸŸå
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcSuffix: dc=ladp.erge,dc=com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcRootDN: cn=Manager,dc=ladp.erge,dc=com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># olcRootPW ä¸ºæ–°å¢å­—æ®µ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcRootPW: {SSHA}2OhbHFHD0Lx1JUS7IsQZnHlS65tKlAvf
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDbDirectory:	/var/lib/ldap
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDbIndex: objectClass eq,pres
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDbIndex: ou,cn,mail,surname,givenname eq,pres,sub
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->ç”Ÿæˆä¸»é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>
<p><code>-n 0</code><!-- raw HTML omitted -->æŒ‡å®š<code>0</code>å·æ•°æ®åº“<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>-F slapd.d</code><!-- raw HTML omitted -->æŒ‡å®šç”Ÿæˆçš„ç›®å½•<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>-l slapd.ldif</code><!-- raw HTML omitted -->æŒ‡å®šä½¿ç”¨é‚£ä¸ªæ–‡ä»¶ç”Ÿæˆ<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ slapadd -n <span style="color:#ae81ff">0</span> -F slapd.d -l slapd.ldif  	<span style="color:#75715e"># è¿”å›ä»¥ä¸‹ï¼š100.00% ä»£è¡¨æˆåŠŸï¼Œå¦‚æœæŠ¥é”™æ˜¯ï¼šslapd.ldif é…ç½®æ–‡ä»¶é—®é¢˜</span>
</span></span><span style="display:flex;"><span>_#################### 100.00% eta   none elapsed            none fast!
</span></span><span style="display:flex;"><span>Closing DB...</span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->ä¿®æ”¹æƒé™<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ chown -R ldap:ldap /etc/openldap/slapd.d
</span></span><span style="display:flex;"><span>$ chown -R ldap:ldap /var/lib/ldap/ </span></span></code></pre></div></li>
<li>
<p><!-- raw HTML omitted -->æ‹·è´æ•°æ®åº“é»˜è®¤é…ç½®æ–‡ä»¶<!-- raw HTML omitted --></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG</span></span></code></pre></div></li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->å¯åŠ¨å¹¶è®¾ç½®ä¸ºå¼€æœºè‡ªå¯<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl start slapd <span style="color:#f92672">&amp;&amp;</span> systemctl enable slapd</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->é…ç½®åŸºæœ¬åŸŸ<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/openldap/config_init.ldif<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># dn æ¡ç›®
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: dc=ladp.erge,dc=com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># å¯¹è±¡ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectclass: dcObject
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">objectclass: organization
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># ç»„ç»‡åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">o: aishangwei
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># dc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dc: ladp.erge
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span></span></span></code></pre></div><ul>
<li><!-- raw HTML omitted -->æ·»åŠ åŸºæœ¬åŸŸ<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥<code>LDAP</code>å¯†ç ã€‚ è¾“å…¥æ‚¨ä¸º<code>LDAP root</code>ç”¨æˆ·å®šä¹‰çš„çº¯æ–‡æœ¬å¯†ç </li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ldapadd -x -D <span style="color:#e6db74">&#34;cn=Manager,dc=ldap.erge,dc=com&#34;</span> -W -f /etc/openldap/config_init.ldif</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->æŸ¥è¯¢åŸŸ<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ldapsearch -x -b <span style="color:#e6db74">&#39;dc=ldap.erge,dc=com&#39;</span>   <span style="color:#e6db74">&#39;(objectClass=*)&#39;</span>
</span></span><span style="display:flex;"><span>$ ldapsearch -H ldapi:/// -Y EXTERNAL -b <span style="color:#e6db74">&#34;cn=config&#34;</span> -LLL â€“Q
</span></span><span style="display:flex;"><span>$ ldapsearch -h 192.168.88.110 -b <span style="color:#e6db74">&#34;dc=ladp.erge,dc=com&#34;</span> -D <span style="color:#e6db74">&#34;cn=Manager,dc=erge,dc=com&#34;</span> -W |grep dn</span></span></code></pre></div></blockquote>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->å–æ¶ˆåŒ¿åç™»å½•<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<ul>
<li>
<p><code>openldap</code>åœ¨åŒ¿åæƒ…å†µä¸‹æ˜¯å¯ä»¥è¢«è®¿é—®çš„ã€‚è€Œä¸”<code>openldap</code>çš„ç›¸å…³ä¿¡æ¯ï¼Œé™¤äº†ç”¨æˆ·çš„å¯†ç ä¿¡æ¯ä¹‹å¤–ï¼Œå…¶ä»–<code>openldap</code>çš„ä¿¡æ¯å®Œå…¨è¢«å‘ˆç°å‡ºæ¥ã€‚</p>
</li>
<li>
<p>ä»å®‰å…¨çš„è§’åº¦è€ƒè™‘ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸è¢«å…è®¸çš„ï¼Œæ‰€ä»¥è¦å–æ¶ˆ<code>openldap</code>çš„åŒ¿åè®¿é—®åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>è¦å–æ¶ˆ<code>openldap</code>çš„åŒ¿åè®¿é—®åŠŸèƒ½ï¼Œæ“ä½œæ–¹æ³•ä¹Ÿæ¯”è¾ƒç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦æŠŠä»¥ä¸‹<code>openldap</code>ä¿¡æ¯å¯¼å…¥<code>openldap</code>ä¸­å³å¯ï¼Œè€Œä¸”æ˜¯æ— éœ€é‡å¯<code>openldap</code>æœåŠ¡å³æ—¶ç”Ÿæ•ˆçš„ã€‚</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/openldap/disable_anon.ldif<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">changetype: modify
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">add: olcDisallows
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcDisallows: bind_anon
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">changetype: modify
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">add: olcRequires
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcRequires: authc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: olcDatabase={-1}frontend,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">changetype: modify
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">add: olcRequires
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcRequires: authc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/disable_anon.ldif
</span></span><span style="display:flex;"><span>SASL/EXTERNAL authentication started
</span></span><span style="display:flex;"><span>SASL username: gidNumber<span style="color:#f92672">=</span>0+uidNumber<span style="color:#f92672">=</span>0,cn<span style="color:#f92672">=</span>peercred,cn<span style="color:#f92672">=</span>external,cn<span style="color:#f92672">=</span>auth
</span></span><span style="display:flex;"><span>SASL SSF: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>modifying entry <span style="color:#e6db74">&#34;cn=config&#34;</span>
</span></span><span style="display:flex;"><span>modifying entry <span style="color:#e6db74">&#34;cn=config&#34;</span>
</span></span><span style="display:flex;"><span>modifying entry <span style="color:#e6db74">&#34;olcDatabase={-1}frontend,cn=config&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŸ¥çœ‹é…ç½®æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>$ cat /etc/openldap/slapd.d/cn<span style="color:#ae81ff">\=</span>config.ldif
</span></span><span style="display:flex;"><span><span style="color:#75715e"># AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># CRC32 af9dbdcd</span>
</span></span><span style="display:flex;"><span>dn: cn<span style="color:#f92672">=</span>config
</span></span><span style="display:flex;"><span>objectClass: olcGlobal
</span></span><span style="display:flex;"><span>cn: config
</span></span><span style="display:flex;"><span>olcArgsFile: /var/run/openldap/slapd.args
</span></span><span style="display:flex;"><span>olcPidFile: /var/run/openldap/slapd.pid
</span></span><span style="display:flex;"><span>olcTLSCACertificatePath: /etc/openldap/certs
</span></span><span style="display:flex;"><span>olcTLSCertificateFile: <span style="color:#e6db74">&#34;OpenLDAP Server&#34;</span>
</span></span><span style="display:flex;"><span>olcTLSCertificateKeyFile: /etc/openldap/certs/password
</span></span><span style="display:flex;"><span>structuralObjectClass: olcGlobal
</span></span><span style="display:flex;"><span>entryUUID: 7b515fd2-ab06-103b-8cdb-d13498ff4586
</span></span><span style="display:flex;"><span>creatorsName: cn<span style="color:#f92672">=</span>config
</span></span><span style="display:flex;"><span>createTimestamp: 20210916065302Z
</span></span><span style="display:flex;"><span>olcDisallows: bind_anon
</span></span><span style="display:flex;"><span>olcRequires: authc   //å–æ¶ˆåŒ¿åç”¨æˆ·ç™»å½•
</span></span><span style="display:flex;"><span>entryCSN: 20210916072755.667534Z#000000#000#000000
</span></span><span style="display:flex;"><span>modifiersName: gidNumber<span style="color:#f92672">=</span>0+uidNumber<span style="color:#f92672">=</span>0,cn<span style="color:#f92672">=</span>peercred,cn<span style="color:#f92672">=</span>external,cn<span style="color:#f92672">=</span>auth
</span></span><span style="display:flex;"><span>modifyTimestamp: 20210916072755Z</span></span></code></pre></div></li>
</ul>
</blockquote>
<ul>
<li><!-- raw HTML omitted -->å¼€å¯<!-- raw HTML omitted --><code>Openldap</code><!-- raw HTML omitted -->æ—¥å¿—<!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/openldap/loglevel.ldif<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">changetype: modify
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">replace: olcLogLevel
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcLogLevel: stats
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/loglevel.ldif
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat &gt;&gt;/etc/rsyslog.conf<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">local4.* /var/log/slapd.log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ systemctl restart rsyslog
</span></span><span style="display:flex;"><span>$ systemctl restart slapd</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->å…è®¸æ™®é€šç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å¯†ç <!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat &gt;/etc/openldap/updatepass.ldif<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: olcDatabase={2}hdb,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">changetype: modify
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">add: olcAccess
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcAccess: to attrs=userPassword
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     by self =xw
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     by anonymous auth
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     by * none
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcAccess: to *
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     by self write
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     by users read
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     by * none
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/updatepass.ldif</span></span></code></pre></div></blockquote>
<ul>
<li><!-- raw HTML omitted -->ä¿®æ”¹<!-- raw HTML omitted --><code>Openldap</code><!-- raw HTML omitted -->ç®¡ç†å‘˜å¯†ç <!-- raw HTML omitted --></li>
</ul>
<blockquote>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 1. æŸ¥çœ‹openldapç®¡ç†å‘˜å¯†ç å­—æ®µæ”¾åœ¨å“ªä¸ªé…ç½®æ–‡ä»¶ä¸­</span>
</span></span><span style="display:flex;"><span>$ ldapsearch -H ldapi:// -LLL -Q -Y EXTERNAL -b <span style="color:#e6db74">&#34;cn=config&#34;</span> <span style="color:#e6db74">&#34;(olcRootDN=*)&#34;</span> dn olcRootDN olcRootPW
</span></span><span style="display:flex;"><span>dn: olcDatabase<span style="color:#f92672">={</span>2<span style="color:#f92672">}</span>hdb,cn<span style="color:#f92672">=</span>config
</span></span><span style="display:flex;"><span>olcRootDN: cn<span style="color:#f92672">=</span>admin,dc<span style="color:#f92672">=</span>hebye,dc<span style="color:#f92672">=</span>com
</span></span><span style="display:flex;"><span>olcRootPW: <span style="color:#f92672">{</span>SSHA<span style="color:#f92672">}</span>Z9XXRjQYHbjYXuOvXPgR/g+HRBoNmj/u
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. è®¾ç½®openldapç®¡ç†å‘˜æœ€æ–°çš„å¯†ç </span>
</span></span><span style="display:flex;"><span>$ slappasswd -s password
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ç”Ÿæˆä¿®æ”¹openldapç®¡ç†å‘˜å¯†ç çš„ldifæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>$ cat &gt;/root/newpasswd.ldif<span style="color:#e6db74">&lt;&lt;-EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">dn: olcDatabase={2}hdb,cn=config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">changetype: modify
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">replace: olcRootPW
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">olcRootPW: {SSHA}YB8N9nZg9qKisiW/Xp6NVPeqhE66mQOB
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. å¯¼å…¥æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>$ ldapmodify -H ldapi:// -Y EXTERNAL -f /root/newpasswd.ldif
</span></span><span style="display:flex;"><span>SASL/EXTERNAL authentication started
</span></span><span style="display:flex;"><span>SASL username: gidNumber<span style="color:#f92672">=</span>0+uidNumber<span style="color:#f92672">=</span>0,cn<span style="color:#f92672">=</span>peercred,cn<span style="color:#f92672">=</span>external,cn<span style="color:#f92672">=</span>auth
</span></span><span style="display:flex;"><span>SASL SSF: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>modifying entry <span style="color:#e6db74">&#34;olcDatabase={2}hdb,cn=config&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 5. ä¸Šè¿°å‘½ä»¤æ‰§è¡Œå®Œæ¯•åï¼Œopenldapçš„ç®¡ç†å‘˜å¯†ç å°±å·²ç»è¢«ä¿®æ”¹æ‰äº†</span></span></span></code></pre></div></blockquote>
</blockquote>
<hr>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1725531900" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1725531900" defer></script>
    <script src="../../../js/theme.js?1725531900" defer></script>
  </body>
</html>
